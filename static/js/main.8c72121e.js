/*! For license information please see main.8c72121e.js.LICENSE.txt */
(()=>{var e={147:(e,t,n)=>{"use strict";var r=n(876);function i(){}function s(){}s.resetWarningCache=i,e.exports=function(){function e(e,t,n,i,s,a){if(a!==r){var o=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw o.name="Invariant Violation",o}}function t(){return e}e.isRequired=e;var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:s,resetWarningCache:i};return n.PropTypes=n,n}},167:(e,t,n)=>{"use strict";n.r(t),n.d(t,{AbstractUserDataWriter:()=>Lh,AggregateField:()=>Au,AggregateQuerySnapshot:()=>Du,Bytes:()=>Pu,CACHE_SIZE_UNLIMITED:()=>fu,CollectionReference:()=>iu,DocumentReference:()=>ru,DocumentSnapshot:()=>Kh,FieldPath:()=>Nu,FieldValue:()=>Ru,Firestore:()=>pu,FirestoreError:()=>O,GeoPoint:()=>ju,LoadBundleTask:()=>du,PersistentCacheIndexManager:()=>zd,Query:()=>nu,QueryCompositeFilterConstraint:()=>vh,QueryConstraint:()=>ph,QueryDocumentSnapshot:()=>Gh,QueryEndAtConstraint:()=>Ah,QueryFieldFilterConstraint:()=>mh,QueryLimitConstraint:()=>kh,QueryOrderByConstraint:()=>xh,QuerySnapshot:()=>Qh,QueryStartAtConstraint:()=>Th,SnapshotMetadata:()=>Hh,Timestamp:()=>J,Transaction:()=>Ad,VectorValue:()=>Ou,WriteBatch:()=>Id,_AutoId:()=>Q,_ByteString:()=>Tt,_DatabaseId:()=>jt,_DocumentKey:()=>ie,_EmptyAppCheckTokenProvider:()=>K,_EmptyAuthCredentialsProvider:()=>V,_FieldPath:()=>re,_TestingHooks:()=>Yd,_cast:()=>$c,_debugAssert:()=>M,_internalAggregationQueryToProtoRunAggregationQueryRequest:()=>Qd,_internalQueryToProtoQueryTarget:()=>Gd,_isBase64Available:()=>Et,_logWarn:()=>A,_validateIsNotUsedTogether:()=>Gc,addDoc:()=>od,aggregateFieldEqual:()=>Wh,aggregateQuerySnapshotEqual:()=>qh,and:()=>wh,arrayRemove:()=>Rd,arrayUnion:()=>Md,average:()=>Uh,clearIndexedDbPersistence:()=>_u,collection:()=>su,collectionGroup:()=>au,connectFirestoreEmulator:()=>tu,count:()=>Bh,deleteAllPersistentCacheIndexes:()=>qd,deleteDoc:()=>ad,deleteField:()=>Pd,disableNetwork:()=>Eu,disablePersistentCacheIndexAutoCreation:()=>Wd,doc:()=>ou,documentId:()=>Mu,enableIndexedDbPersistence:()=>bu,enableMultiTabIndexedDbPersistence:()=>wu,enableNetwork:()=>Su,enablePersistentCacheIndexAutoCreation:()=>Bd,endAt:()=>Ph,endBefore:()=>Dh,ensureFirestoreConfigured:()=>yu,executeWrite:()=>ud,getAggregateFromServer:()=>fd,getCountFromServer:()=>dd,getDoc:()=>$h,getDocFromCache:()=>Xh,getDocFromServer:()=>ed,getDocs:()=>td,getDocsFromCache:()=>nd,getDocsFromServer:()=>rd,getFirestore:()=>mu,getPersistentCacheIndexManager:()=>Ud,increment:()=>jd,initializeFirestore:()=>gu,limit:()=>Sh,limitToLast:()=>Eh,loadBundle:()=>Iu,memoryEagerGarbageCollector:()=>vd,memoryLocalCache:()=>wd,memoryLruGarbageCollector:()=>bd,namedQuery:()=>Cu,onSnapshot:()=>ld,onSnapshotsInSync:()=>cd,or:()=>bh,orderBy:()=>_h,persistentLocalCache:()=>xd,persistentMultipleTabManager:()=>Ed,persistentSingleTabManager:()=>Sd,query:()=>gh,queryEqual:()=>cu,refEqual:()=>lu,runTransaction:()=>Dd,serverTimestamp:()=>Nd,setDoc:()=>id,setIndexConfiguration:()=>Fd,setLogLevel:()=>T,snapshotEqual:()=>Zh,startAfter:()=>Ch,startAt:()=>Ih,sum:()=>zh,terminate:()=>Tu,updateDoc:()=>sd,vector:()=>Od,waitForPendingWrites:()=>ku,where:()=>yh,writeBatch:()=>Ld});var r,i,s=n(304),a=n(376),o=n(311),l=n(788),c="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},u={};(function(){var e;function t(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}function n(e,t,n){n||(n=0);var r=Array(16);if("string"===typeof t)for(var i=0;16>i;++i)r[i]=t.charCodeAt(n++)|t.charCodeAt(n++)<<8|t.charCodeAt(n++)<<16|t.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=t[n++]|t[n++]<<8|t[n++]<<16|t[n++]<<24;t=e.g[0],n=e.g[1],i=e.g[2];var s=e.g[3],a=t+(s^n&(i^s))+r[0]+3614090360&4294967295;a=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=(n=(i=(s=(t=n+(a<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[1]+3905402710&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[2]+606105819&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[3]+3250441966&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[5]+1200080426&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[6]+2821735955&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[7]+4249261313&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[9]+2336552879&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[10]+4294925233&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[11]+2304563134&4294967295)<<22&4294967295|a>>>10))+((a=t+(s^n&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|a>>>25))+((a=s+(i^t&(n^i))+r[13]+4254626195&4294967295)<<12&4294967295|a>>>20))+((a=i+(n^s&(t^n))+r[14]+2792965006&4294967295)<<17&4294967295|a>>>15))+((a=n+(t^i&(s^t))+r[15]+1236535329&4294967295)<<22&4294967295|a>>>10))+((a=t+(i^s&(n^i))+r[1]+4129170786&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[6]+3225465664&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[11]+643717713&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[5]+3593408605&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[10]+38016083&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[15]+3634488961&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[9]+568446438&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[14]+3275163606&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[3]+4107603335&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|a>>>12))+((a=t+(i^s&(n^i))+r[13]+2850285829&4294967295)<<5&4294967295|a>>>27))+((a=s+(n^i&(t^n))+r[2]+4243563512&4294967295)<<9&4294967295|a>>>23))+((a=i+(t^n&(s^t))+r[7]+1735328473&4294967295)<<14&4294967295|a>>>18))+((a=n+(s^t&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|a>>>12))+((a=t+(n^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[8]+2272392833&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[11]+1839030562&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[14]+4259657740&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[4]+1272893353&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[7]+4139469664&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[10]+3200236656&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[13]+681279174&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[0]+3936430074&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[3]+3572445317&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[6]+76029189&4294967295)<<23&4294967295|a>>>9))+((a=t+(n^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|a>>>28))+((a=s+(t^n^i)+r[12]+3873151461&4294967295)<<11&4294967295|a>>>21))+((a=i+(s^t^n)+r[15]+530742520&4294967295)<<16&4294967295|a>>>16))+((a=n+(i^s^t)+r[2]+3299628645&4294967295)<<23&4294967295|a>>>9))+((a=t+(i^(n|~s))+r[0]+4096336452&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[7]+1126891415&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[14]+2878612391&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[5]+4237533241&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[12]+1700485571&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[3]+2399980690&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[10]+4293915773&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[1]+2240044497&4294967295)<<21&4294967295|a>>>11))+((a=t+(i^(n|~s))+r[8]+1873313359&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[15]+4264355552&4294967295)<<10&4294967295|a>>>22))+((a=i+(t^(s|~n))+r[6]+2734768916&4294967295)<<15&4294967295|a>>>17))+((a=n+(s^(i|~t))+r[13]+1309151649&4294967295)<<21&4294967295|a>>>11))+((s=(t=n+((a=t+(i^(n|~s))+r[4]+4149444226&4294967295)<<6&4294967295|a>>>26))+((a=s+(n^(t|~i))+r[11]+3174756917&4294967295)<<10&4294967295|a>>>22))^((i=s+((a=i+(t^(s|~n))+r[2]+718787259&4294967295)<<15&4294967295|a>>>17))|~t))+r[9]+3951481745&4294967295,e.g[0]=e.g[0]+t&4294967295,e.g[1]=e.g[1]+(i+(a<<21&4294967295|a>>>11))&4294967295,e.g[2]=e.g[2]+i&4294967295,e.g[3]=e.g[3]+s&4294967295}function s(e,t){this.h=t;for(var n=[],r=!0,i=e.length-1;0<=i;i--){var s=0|e[i];r&&s==t||(n[i]=s,r=!1)}this.g=n}!function(e,t){function n(){}n.prototype=t.prototype,e.D=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.C=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}(t,function(){this.blockSize=-1}),t.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0},t.prototype.u=function(e,t){void 0===t&&(t=e.length);for(var r=t-this.blockSize,i=this.B,s=this.h,a=0;a<t;){if(0==s)for(;a<=r;)n(this,e,a),a+=this.blockSize;if("string"===typeof e){for(;a<t;)if(i[s++]=e.charCodeAt(a++),s==this.blockSize){n(this,i),s=0;break}}else for(;a<t;)if(i[s++]=e[a++],s==this.blockSize){n(this,i),s=0;break}}this.h=s,this.o+=t},t.prototype.v=function(){var e=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);e[0]=128;for(var t=1;t<e.length-8;++t)e[t]=0;var n=8*this.o;for(t=e.length-8;t<e.length;++t)e[t]=255&n,n/=256;for(this.u(e),e=Array(16),t=n=0;4>t;++t)for(var r=0;32>r;r+=8)e[n++]=this.g[t]>>>r&255;return e};var a={};function o(e){return-128<=e&&128>e?function(e,t){var n=a;return Object.prototype.hasOwnProperty.call(n,e)?n[e]:n[e]=t(e)}(e,function(e){return new s([0|e],0>e?-1:0)}):new s([0|e],0>e?-1:0)}function l(e){if(isNaN(e)||!isFinite(e))return c;if(0>e)return g(l(-e));for(var t=[],n=1,r=0;e>=n;r++)t[r]=e/n|0,n*=4294967296;return new s(t,0)}var c=o(0),h=o(1),d=o(16777216);function f(e){if(0!=e.h)return!1;for(var t=0;t<e.g.length;t++)if(0!=e.g[t])return!1;return!0}function p(e){return-1==e.h}function g(e){for(var t=e.g.length,n=[],r=0;r<t;r++)n[r]=~e.g[r];return new s(n,~e.h).add(h)}function m(e,t){return e.add(g(t))}function y(e,t){for(;(65535&e[t])!=e[t];)e[t+1]+=e[t]>>>16,e[t]&=65535,t++}function v(e,t){this.g=e,this.h=t}function b(e,t){if(f(t))throw Error("division by zero");if(f(e))return new v(c,c);if(p(e))return t=b(g(e),t),new v(g(t.g),g(t.h));if(p(t))return t=b(e,g(t)),new v(g(t.g),t.h);if(30<e.g.length){if(p(e)||p(t))throw Error("slowDivide_ only works with positive integers.");for(var n=h,r=t;0>=r.l(e);)n=w(n),r=w(r);var i=x(n,1),s=x(r,1);for(r=x(r,2),n=x(n,2);!f(r);){var a=s.add(r);0>=a.l(e)&&(i=i.add(n),s=a),r=x(r,1),n=x(n,1)}return t=m(e,i.j(t)),new v(i,t)}for(i=c;0<=e.l(t);){for(n=Math.max(1,Math.floor(e.m()/t.m())),r=48>=(r=Math.ceil(Math.log(n)/Math.LN2))?1:Math.pow(2,r-48),a=(s=l(n)).j(t);p(a)||0<a.l(e);)a=(s=l(n-=r)).j(t);f(s)&&(s=h),i=i.add(s),e=m(e,a)}return new v(i,e)}function w(e){for(var t=e.g.length+1,n=[],r=0;r<t;r++)n[r]=e.i(r)<<1|e.i(r-1)>>>31;return new s(n,e.h)}function x(e,t){var n=t>>5;t%=32;for(var r=e.g.length-n,i=[],a=0;a<r;a++)i[a]=0<t?e.i(a+n)>>>t|e.i(a+n+1)<<32-t:e.i(a+n);return new s(i,e.h)}(e=s.prototype).m=function(){if(p(this))return-g(this).m();for(var e=0,t=1,n=0;n<this.g.length;n++){var r=this.i(n);e+=(0<=r?r:4294967296+r)*t,t*=4294967296}return e},e.toString=function(e){if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if(f(this))return"0";if(p(this))return"-"+g(this).toString(e);for(var t=l(Math.pow(e,6)),n=this,r="";;){var i=b(n,t).g,s=((0<(n=m(n,i.j(t))).g.length?n.g[0]:n.h)>>>0).toString(e);if(f(n=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},e.i=function(e){return 0>e?0:e<this.g.length?this.g[e]:this.h},e.l=function(e){return p(e=m(this,e))?-1:f(e)?0:1},e.abs=function(){return p(this)?g(this):this},e.add=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0,i=0;i<=t;i++){var a=r+(65535&this.i(i))+(65535&e.i(i)),o=(a>>>16)+(this.i(i)>>>16)+(e.i(i)>>>16);r=o>>>16,a&=65535,o&=65535,n[i]=o<<16|a}return new s(n,-2147483648&n[n.length-1]?-1:0)},e.j=function(e){if(f(this)||f(e))return c;if(p(this))return p(e)?g(this).j(g(e)):g(g(this).j(e));if(p(e))return g(this.j(g(e)));if(0>this.l(d)&&0>e.l(d))return l(this.m()*e.m());for(var t=this.g.length+e.g.length,n=[],r=0;r<2*t;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<e.g.length;i++){var a=this.i(r)>>>16,o=65535&this.i(r),u=e.i(i)>>>16,h=65535&e.i(i);n[2*r+2*i]+=o*h,y(n,2*r+2*i),n[2*r+2*i+1]+=a*h,y(n,2*r+2*i+1),n[2*r+2*i+1]+=o*u,y(n,2*r+2*i+1),n[2*r+2*i+2]+=a*u,y(n,2*r+2*i+2)}for(r=0;r<t;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=t;r<2*t;r++)n[r]=0;return new s(n,0)},e.A=function(e){return b(this,e).h},e.and=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)&e.i(r);return new s(n,this.h&e.h)},e.or=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)|e.i(r);return new s(n,this.h|e.h)},e.xor=function(e){for(var t=Math.max(this.g.length,e.g.length),n=[],r=0;r<t;r++)n[r]=this.i(r)^e.i(r);return new s(n,this.h^e.h)},t.prototype.digest=t.prototype.v,t.prototype.reset=t.prototype.s,t.prototype.update=t.prototype.u,i=u.Md5=t,s.prototype.add=s.prototype.add,s.prototype.multiply=s.prototype.j,s.prototype.modulo=s.prototype.A,s.prototype.compare=s.prototype.l,s.prototype.toNumber=s.prototype.m,s.prototype.toString=s.prototype.toString,s.prototype.getBits=s.prototype.i,s.fromNumber=l,s.fromString=function e(t,n){if(0==t.length)throw Error("number format error: empty string");if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if("-"==t.charAt(0))return g(e(t.substring(1),n));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var r=l(Math.pow(n,8)),i=c,s=0;s<t.length;s+=8){var a=Math.min(8,t.length-s),o=parseInt(t.substring(s,s+a),n);8>a?(a=l(Math.pow(n,a)),i=i.j(a).add(l(o))):i=(i=i.j(r)).add(l(o))}return i},r=u.Integer=s}).apply("undefined"!==typeof c?c:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});var h,d,f,p,g,m,y,v,b="undefined"!==typeof globalThis?globalThis:"undefined"!==typeof window?window:"undefined"!==typeof global?global:"undefined"!==typeof self?self:{},w={};(function(){var e,t="function"==typeof Object.defineProperties?Object.defineProperty:function(e,t,n){return e==Array.prototype||e==Object.prototype||(e[t]=n.value),e};var n=function(e){e=["object"==typeof globalThis&&globalThis,e,"object"==typeof window&&window,"object"==typeof self&&self,"object"==typeof b&&b];for(var t=0;t<e.length;++t){var n=e[t];if(n&&n.Math==Math)return n}throw Error("Cannot find global object")}(this);!function(e,r){if(r)e:{var i=n;e=e.split(".");for(var s=0;s<e.length-1;s++){var a=e[s];if(!(a in i))break e;i=i[a]}(r=r(s=i[e=e[e.length-1]]))!=s&&null!=r&&t(i,e,{configurable:!0,writable:!0,value:r})}}("Array.prototype.values",function(e){return e||function(){return function(e,t){e instanceof String&&(e+="");var n=0,r=!1,i={next:function(){if(!r&&n<e.length){var i=n++;return{value:t(i,e[i]),done:!1}}return r=!0,{done:!0,value:void 0}}};return i[Symbol.iterator]=function(){return i},i}(this,function(e,t){return t})}});var r=r||{},i=this||self;function s(e){var t=typeof e;return"array"==(t="object"!=t?t:e?Array.isArray(e)?"array":t:"null")||"object"==t&&"number"==typeof e.length}function a(e){var t=typeof e;return"object"==t&&null!=e||"function"==t}function o(e,t,n){return e.call.apply(e.bind,arguments)}function l(e,t,n){if(!e)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),e.apply(t,n)}}return function(){return e.apply(t,arguments)}}function c(e,t,n){return(c=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?o:l).apply(null,arguments)}function u(e,t){var n=Array.prototype.slice.call(arguments,1);return function(){var t=n.slice();return t.push.apply(t,arguments),e.apply(this,t)}}function _(e,t){function n(){}n.prototype=t.prototype,e.aa=t.prototype,e.prototype=new n,e.prototype.constructor=e,e.Qb=function(e,n,r){for(var i=Array(arguments.length-2),s=2;s<arguments.length;s++)i[s-2]=arguments[s];return t.prototype[n].apply(e,i)}}function k(e){const t=e.length;if(0<t){const n=Array(t);for(let r=0;r<t;r++)n[r]=e[r];return n}return[]}function E(e,t){for(let n=1;n<arguments.length;n++){const t=arguments[n];if(s(t)){const n=e.length||0,r=t.length||0;e.length=n+r;for(let i=0;i<r;i++)e[n+i]=t[i]}else e.push(t)}}function T(e){return/^[\s\xa0]*$/.test(e)}function I(){var e=i.navigator;return e&&(e=e.userAgent)?e:""}function C(e){return C[" "](e),e}C[" "]=function(){};var A=-1!=I().indexOf("Gecko")&&!(-1!=I().toLowerCase().indexOf("webkit")&&-1==I().indexOf("Edge"))&&!(-1!=I().indexOf("Trident")||-1!=I().indexOf("MSIE"))&&-1==I().indexOf("Edge");function D(e,t,n){for(const r in e)t.call(n,e[r],r,e)}function P(e){const t={};for(const n in e)t[n]=e[n];return t}const N="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(e,t){let n,r;for(let i=1;i<arguments.length;i++){for(n in r=arguments[i],r)e[n]=r[n];for(let t=0;t<N.length;t++)n=N[t],Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}}function R(e){var t=1;e=e.split(":");const n=[];for(;0<t&&e.length;)n.push(e.shift()),t--;return e.length&&n.push(e.join(":")),n}function j(e){i.setTimeout(()=>{throw e},0)}function O(){var e=U;let t=null;return e.g&&(t=e.g,e.g=e.g.next,e.g||(e.h=null),t.next=null),t}var L=new class{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new F,e=>e.reset());class F{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}let V,z=!1,U=new class{constructor(){this.h=this.g=null}add(e,t){const n=L.get();n.set(e,t),this.h?this.h.next=n:this.g=n,this.h=n}},B=()=>{const e=i.Promise.resolve(void 0);V=()=>{e.then(W)}};var W=()=>{for(var e;e=O();){try{e.h.call(e.g)}catch(n){j(n)}var t=L;t.j(e),100>t.h&&(t.h++,e.next=t.g,t.g=e)}z=!1};function q(){this.s=this.s,this.C=this.C}function H(e,t){this.type=e,this.g=this.target=t,this.defaultPrevented=!1}q.prototype.s=!1,q.prototype.ma=function(){this.s||(this.s=!0,this.N())},q.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()},H.prototype.h=function(){this.defaultPrevented=!0};var K=function(){if(!i.addEventListener||!Object.defineProperty)return!1;var e=!1,t=Object.defineProperty({},"passive",{get:function(){e=!0}});try{const e=()=>{};i.addEventListener("test",e,t),i.removeEventListener("test",e,t)}catch(n){}return e}();function G(e,t){if(H.call(this,e?e.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,e){var n=this.type=e.type,r=e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:null;if(this.target=e.target||e.srcElement,this.g=t,t=e.relatedTarget){if(A){e:{try{C(t.nodeName);var i=!0;break e}catch(s){}i=!1}i||(t=null)}}else"mouseover"==n?t=e.fromElement:"mouseout"==n&&(t=e.toElement);this.relatedTarget=t,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==e.clientX?e.clientX:e.pageX,this.clientY=void 0!==e.clientY?e.clientY:e.pageY,this.screenX=e.screenX||0,this.screenY=e.screenY||0),this.button=e.button,this.key=e.key||"",this.ctrlKey=e.ctrlKey,this.altKey=e.altKey,this.shiftKey=e.shiftKey,this.metaKey=e.metaKey,this.pointerId=e.pointerId||0,this.pointerType="string"===typeof e.pointerType?e.pointerType:Q[e.pointerType]||"",this.state=e.state,this.i=e,e.defaultPrevented&&G.aa.h.call(this)}}_(G,H);var Q={2:"touch",3:"pen",4:"mouse"};G.prototype.h=function(){G.aa.h.call(this);var e=this.i;e.preventDefault?e.preventDefault():e.returnValue=!1};var Y="closure_listenable_"+(1e6*Math.random()|0),Z=0;function $(e,t,n,r,i){this.listener=e,this.proxy=null,this.src=t,this.type=n,this.capture=!!r,this.ha=i,this.key=++Z,this.da=this.fa=!1}function J(e){e.da=!0,e.listener=null,e.proxy=null,e.src=null,e.ha=null}function X(e){this.src=e,this.g={},this.h=0}function ee(e,t){var n=t.type;if(n in e.g){var r,i=e.g[n],s=Array.prototype.indexOf.call(i,t,void 0);(r=0<=s)&&Array.prototype.splice.call(i,s,1),r&&(J(t),0==e.g[n].length&&(delete e.g[n],e.h--))}}function te(e,t,n,r){for(var i=0;i<e.length;++i){var s=e[i];if(!s.da&&s.listener==t&&s.capture==!!n&&s.ha==r)return i}return-1}X.prototype.add=function(e,t,n,r,i){var s=e.toString();(e=this.g[s])||(e=this.g[s]=[],this.h++);var a=te(e,t,r,i);return-1<a?(t=e[a],n||(t.fa=!1)):((t=new $(t,this.src,s,!!r,i)).fa=n,e.push(t)),t};var ne="closure_lm_"+(1e6*Math.random()|0),re={};function ie(e,t,n,r,i){if(r&&r.once)return ae(e,t,n,r,i);if(Array.isArray(t)){for(var s=0;s<t.length;s++)ie(e,t[s],n,r,i);return null}return n=fe(n),e&&e[Y]?e.K(t,n,a(r)?!!r.capture:!!r,i):se(e,t,n,!1,r,i)}function se(e,t,n,r,i,s){if(!t)throw Error("Invalid event type");var o=a(i)?!!i.capture:!!i,l=he(e);if(l||(e[ne]=l=new X(e)),(n=l.add(t,n,r,o,s)).proxy)return n;if(r=function(){function e(n){return t.call(e.src,e.listener,n)}const t=ue;return e}(),n.proxy=r,r.src=e,r.listener=n,e.addEventListener)K||(i=o),void 0===i&&(i=!1),e.addEventListener(t.toString(),r,i);else if(e.attachEvent)e.attachEvent(ce(t.toString()),r);else{if(!e.addListener||!e.removeListener)throw Error("addEventListener and attachEvent are unavailable.");e.addListener(r)}return n}function ae(e,t,n,r,i){if(Array.isArray(t)){for(var s=0;s<t.length;s++)ae(e,t[s],n,r,i);return null}return n=fe(n),e&&e[Y]?e.L(t,n,a(r)?!!r.capture:!!r,i):se(e,t,n,!0,r,i)}function oe(e,t,n,r,i){if(Array.isArray(t))for(var s=0;s<t.length;s++)oe(e,t[s],n,r,i);else r=a(r)?!!r.capture:!!r,n=fe(n),e&&e[Y]?(e=e.i,(t=String(t).toString())in e.g&&(-1<(n=te(s=e.g[t],n,r,i))&&(J(s[n]),Array.prototype.splice.call(s,n,1),0==s.length&&(delete e.g[t],e.h--)))):e&&(e=he(e))&&(t=e.g[t.toString()],e=-1,t&&(e=te(t,n,r,i)),(n=-1<e?t[e]:null)&&le(n))}function le(e){if("number"!==typeof e&&e&&!e.da){var t=e.src;if(t&&t[Y])ee(t.i,e);else{var n=e.type,r=e.proxy;t.removeEventListener?t.removeEventListener(n,r,e.capture):t.detachEvent?t.detachEvent(ce(n),r):t.addListener&&t.removeListener&&t.removeListener(r),(n=he(t))?(ee(n,e),0==n.h&&(n.src=null,t[ne]=null)):J(e)}}}function ce(e){return e in re?re[e]:re[e]="on"+e}function ue(e,t){if(e.da)e=!0;else{t=new G(t,this);var n=e.listener,r=e.ha||e.src;e.fa&&le(e),e=n.call(r,t)}return e}function he(e){return(e=e[ne])instanceof X?e:null}var de="__closure_events_fn_"+(1e9*Math.random()>>>0);function fe(e){return"function"===typeof e?e:(e[de]||(e[de]=function(t){return e.handleEvent(t)}),e[de])}function pe(){q.call(this),this.i=new X(this),this.M=this,this.F=null}function ge(e,t){var n,r=e.F;if(r)for(n=[];r;r=r.F)n.push(r);if(e=e.M,r=t.type||t,"string"===typeof t)t=new H(t,e);else if(t instanceof H)t.target=t.target||e;else{var i=t;M(t=new H(r,e),i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var a=t.g=n[s];i=me(a,r,!0,t)&&i}if(i=me(a=t.g=e,r,!0,t)&&i,i=me(a,r,!1,t)&&i,n)for(s=0;s<n.length;s++)i=me(a=t.g=n[s],r,!1,t)&&i}function me(e,t,n,r){if(!(t=e.i.g[String(t)]))return!0;t=t.concat();for(var i=!0,s=0;s<t.length;++s){var a=t[s];if(a&&!a.da&&a.capture==n){var o=a.listener,l=a.ha||a.src;a.fa&&ee(e.i,a),i=!1!==o.call(l,r)&&i}}return i&&!r.defaultPrevented}function ye(e,t,n){if("function"===typeof e)n&&(e=c(e,n));else{if(!e||"function"!=typeof e.handleEvent)throw Error("Invalid listener argument");e=c(e.handleEvent,e)}return 2147483647<Number(t)?-1:i.setTimeout(e,t||0)}function ve(e){e.g=ye(()=>{e.g=null,e.i&&(e.i=!1,ve(e))},e.l);const t=e.h;e.h=null,e.m.apply(null,t)}_(pe,q),pe.prototype[Y]=!0,pe.prototype.removeEventListener=function(e,t,n,r){oe(this,e,t,n,r)},pe.prototype.N=function(){if(pe.aa.N.call(this),this.i){var e,t=this.i;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)J(n[r]);delete t.g[e],t.h--}}this.F=null},pe.prototype.K=function(e,t,n,r){return this.i.add(String(e),t,!1,n,r)},pe.prototype.L=function(e,t,n,r){return this.i.add(String(e),t,!0,n,r)};class be extends q{constructor(e,t){super(),this.m=e,this.l=t,this.h=null,this.i=!1,this.g=null}j(e){this.h=arguments,this.g?this.i=!0:ve(this)}N(){super.N(),this.g&&(i.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function we(e){q.call(this),this.h=e,this.g={}}_(we,q);var xe=[];function _e(e){D(e.g,function(e,t){this.g.hasOwnProperty(t)&&le(e)},e),e.g={}}we.prototype.N=function(){we.aa.N.call(this),_e(this)},we.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ke=i.JSON.stringify,Se=i.JSON.parse,Ee=class{stringify(e){return i.JSON.stringify(e,void 0)}parse(e){return i.JSON.parse(e,void 0)}};function Te(){}function Ie(e){return e.h||(e.h=e.i())}function Ce(){}Te.prototype.h=null;var Ae={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function De(){H.call(this,"d")}function Pe(){H.call(this,"c")}_(De,H),_(Pe,H);var Ne={},Me=null;function Re(){return Me=Me||new pe}function je(e){H.call(this,Ne.La,e)}function Oe(e){const t=Re();ge(t,new je(t))}function Le(e,t){H.call(this,Ne.STAT_EVENT,e),this.stat=t}function Fe(e){const t=Re();ge(t,new Le(t,e))}function Ve(e,t){H.call(this,Ne.Ma,e),this.size=t}function ze(e,t){if("function"!==typeof e)throw Error("Fn must not be null and must be a function");return i.setTimeout(function(){e()},t)}function Ue(){this.g=!0}function Be(e,t,n,r){e.info(function(){return"XMLHTTP TEXT ("+t+"): "+function(e,t){if(!e.g)return t;if(!t)return null;try{var n=JSON.parse(t);if(n)for(e=0;e<n.length;e++)if(Array.isArray(n[e])){var r=n[e];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var a=1;a<i.length;a++)i[a]=""}}}return ke(n)}catch(o){return t}}(e,n)+(r?" "+r:"")})}Ne.La="serverreachability",_(je,H),Ne.STAT_EVENT="statevent",_(Le,H),Ne.Ma="timingevent",_(Ve,H),Ue.prototype.xa=function(){this.g=!1},Ue.prototype.info=function(){};var We,qe={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},He={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"};function Ke(){}function Ge(e,t,n,r){this.j=e,this.i=t,this.l=n,this.R=r||1,this.U=new we(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Qe}function Qe(){this.i=null,this.g="",this.h=!1}_(Ke,Te),Ke.prototype.g=function(){return new XMLHttpRequest},Ke.prototype.i=function(){return{}},We=new Ke;var Ye={},Ze={};function $e(e,t,n){e.L=1,e.v=kt(vt(t)),e.m=n,e.P=!0,Je(e,null)}function Je(e,t){e.F=Date.now(),tt(e),e.A=vt(e.v);var n=e.A,r=e.R;Array.isArray(r)||(r=[String(r)]),Lt(n.i,"t",r),e.C=0,n=e.j.J,e.h=new Qe,e.g=En(e.j,n?t:null,!e.m),0<e.O&&(e.M=new be(c(e.Y,e,e.g),e.O)),t=e.U,n=e.g,r=e.ca;var i="readystatechange";Array.isArray(i)||(i&&(xe[0]=i.toString()),i=xe);for(var s=0;s<i.length;s++){var a=ie(n,i[s],r||t.handleEvent,!1,t.h||t);if(!a)break;t.g[a.key]=a}t=e.H?P(e.H):{},e.m?(e.u||(e.u="POST"),t["Content-Type"]="application/x-www-form-urlencoded",e.g.ea(e.A,e.u,e.m,t)):(e.u="GET",e.g.ea(e.A,e.u,null,t)),Oe(),function(e,t,n,r,i,s){e.info(function(){if(e.g)if(s)for(var a="",o=s.split("&"),l=0;l<o.length;l++){var c=o[l].split("=");if(1<c.length){var u=c[0];c=c[1];var h=u.split("_");a=2<=h.length&&"type"==h[1]?a+(u+"=")+c+"&":a+(u+"=redacted&")}}else a=null;else a=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+t+"\n"+n+"\n"+a})}(e.i,e.u,e.A,e.l,e.R,e.m)}function Xe(e){return!!e.g&&("GET"==e.u&&2!=e.L&&e.j.Ca)}function et(e,t){var n=e.C,r=t.indexOf("\n",n);return-1==r?Ze:(n=Number(t.substring(n,r)),isNaN(n)?Ye:(r+=1)+n>t.length?Ze:(t=t.slice(r,r+n),e.C=r+n,t))}function tt(e){e.S=Date.now()+e.I,nt(e,e.I)}function nt(e,t){if(null!=e.B)throw Error("WatchDog timer not null");e.B=ze(c(e.ba,e),t)}function rt(e){e.B&&(i.clearTimeout(e.B),e.B=null)}function it(e){0==e.j.G||e.J||wn(e.j,e)}function st(e){rt(e);var t=e.M;t&&"function"==typeof t.ma&&t.ma(),e.M=null,_e(e.U),e.g&&(t=e.g,e.g=null,t.abort(),t.ma())}function at(e,t){try{var n=e.j;if(0!=n.G&&(n.g==e||ht(n.h,e)))if(!e.K&&ht(n.h,e)&&3==n.G){try{var r=n.Da.g.parse(t)}catch(u){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!n.u){if(n.g){if(!(n.g.F+3e3<e.F))break e;bn(n),cn(n)}mn(n),Fe(18)}}else n.za=i[1],0<n.za-n.T&&37500>i[2]&&n.F&&0==n.v&&!n.C&&(n.C=ze(c(n.Za,n),6e3));if(1>=ut(n.h)&&n.ca){try{n.ca()}catch(u){}n.ca=void 0}}else _n(n,11)}else if((e.K||n.g==e)&&bn(n),!T(t))for(i=n.Da.g.parse(t),t=0;t<i.length;t++){let c=i[t];if(n.T=c[0],c=c[1],2==n.G)if("c"==c[0]){n.K=c[1],n.ia=c[2];const t=c[3];null!=t&&(n.la=t,n.j.info("VER="+n.la));const i=c[4];null!=i&&(n.Aa=i,n.j.info("SVER="+n.Aa));const u=c[5];null!=u&&"number"===typeof u&&0<u&&(r=1.5*u,n.L=r,n.j.info("backChannelRequestTimeoutMs_="+r)),r=n;const h=e.g;if(h){const e=h.g?h.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(e){var s=r.h;s.g||-1==e.indexOf("spdy")&&-1==e.indexOf("quic")&&-1==e.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(dt(s,s.h),s.h=null))}if(r.D){const e=h.g?h.g.getResponseHeader("X-HTTP-Session-Id"):null;e&&(r.ya=e,_t(r.I,r.D,e))}}n.G=3,n.l&&n.l.ua(),n.ba&&(n.R=Date.now()-e.F,n.j.info("Handshake RTT: "+n.R+"ms"));var a=e;if((r=n).qa=Sn(r,r.J?r.ia:null,r.W),a.K){ft(r.h,a);var o=a,l=r.L;l&&(o.I=l),o.B&&(rt(o),tt(o)),r.g=a}else gn(r);0<n.i.length&&hn(n)}else"stop"!=c[0]&&"close"!=c[0]||_n(n,7);else 3==n.G&&("stop"==c[0]||"close"==c[0]?"stop"==c[0]?_n(n,7):ln(n):"noop"!=c[0]&&n.l&&n.l.ta(c),n.v=0)}Oe()}catch(u){}}Ge.prototype.ca=function(e){e=e.target;const t=this.M;t&&3==rn(e)?t.j():this.Y(e)},Ge.prototype.Y=function(e){try{if(e==this.g)e:{const d=rn(this.g);var t=this.g.Ba();this.g.Z();if(!(3>d)&&(3!=d||this.g&&(this.h.h||this.g.oa()||sn(this.g)))){this.J||4!=d||7==t||Oe(),rt(this);var n=this.g.Z();this.X=n;t:if(Xe(this)){var r=sn(this.g);e="";var s=r.length,a=4==rn(this.g);if(!this.h.i){if("undefined"===typeof TextDecoder){st(this),it(this);var o="";break t}this.h.i=new i.TextDecoder}for(t=0;t<s;t++)this.h.h=!0,e+=this.h.i.decode(r[t],{stream:!(a&&t==s-1)});r.length=0,this.h.g+=e,this.C=0,o=this.h.g}else o=this.g.oa();if(this.o=200==n,function(e,t,n,r,i,s,a){e.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+t+"\n"+n+"\n"+s+" "+a})}(this.i,this.u,this.A,this.l,this.R,d,n),this.o){if(this.T&&!this.K){t:{if(this.g){var l,c=this.g;if((l=c.g?c.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!T(l)){var u=l;break t}}u=null}if(!(n=u)){this.o=!1,this.s=3,Fe(12),st(this),it(this);break e}Be(this.i,this.l,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,at(this,n)}if(this.P){let e;for(n=!0;!this.J&&this.C<o.length;){if(e=et(this,o),e==Ze){4==d&&(this.s=4,Fe(14),n=!1),Be(this.i,this.l,null,"[Incomplete Response]");break}if(e==Ye){this.s=4,Fe(15),Be(this.i,this.l,o,"[Invalid Chunk]"),n=!1;break}Be(this.i,this.l,e,null),at(this,e)}if(Xe(this)&&0!=this.C&&(this.h.g=this.h.g.slice(this.C),this.C=0),4!=d||0!=o.length||this.h.h||(this.s=1,Fe(16),n=!1),this.o=this.o&&n,n){if(0<o.length&&!this.W){this.W=!0;var h=this.j;h.g==this&&h.ba&&!h.M&&(h.j.info("Great, no buffering proxy detected. Bytes received: "+o.length),yn(h),h.M=!0,Fe(11))}}else Be(this.i,this.l,o,"[Invalid Chunked Response]"),st(this),it(this)}else Be(this.i,this.l,o,null),at(this,o);4==d&&st(this),this.o&&!this.J&&(4==d?wn(this.j,this):(this.o=!1,tt(this)))}else(function(e){const t={};e=(e.g&&2<=rn(e)&&e.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<e.length;r++){if(T(e[r]))continue;var n=R(e[r]);const i=n[0];if("string"!==typeof(n=n[1]))continue;n=n.trim();const s=t[i]||[];t[i]=s,s.push(n)}!function(e,t){for(const n in e)t.call(void 0,e[n],n,e)}(t,function(e){return e.join(", ")})})(this.g),400==n&&0<o.indexOf("Unknown SID")?(this.s=3,Fe(12)):(this.s=0,Fe(13)),st(this),it(this)}}}catch(x){}},Ge.prototype.cancel=function(){this.J=!0,st(this)},Ge.prototype.ba=function(){this.B=null;const e=Date.now();0<=e-this.S?(function(e,t){e.info(function(){return"TIMEOUT: "+t})}(this.i,this.A),2!=this.L&&(Oe(),Fe(17)),st(this),this.s=2,it(this)):nt(this,this.S-e)};var ot=class{constructor(e,t){this.g=e,this.map=t}};function lt(e){this.l=e||10,i.PerformanceNavigationTiming?e=0<(e=i.performance.getEntriesByType("navigation")).length&&("hq"==e[0].nextHopProtocol||"h2"==e[0].nextHopProtocol):e=!!(i.chrome&&i.chrome.loadTimes&&i.chrome.loadTimes()&&i.chrome.loadTimes().wasFetchedViaSpdy),this.j=e?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function ct(e){return!!e.h||!!e.g&&e.g.size>=e.j}function ut(e){return e.h?1:e.g?e.g.size:0}function ht(e,t){return e.h?e.h==t:!!e.g&&e.g.has(t)}function dt(e,t){e.g?e.g.add(t):e.h=t}function ft(e,t){e.h&&e.h==t?e.h=null:e.g&&e.g.has(t)&&e.g.delete(t)}function pt(e){if(null!=e.h)return e.i.concat(e.h.D);if(null!=e.g&&0!==e.g.size){let t=e.i;for(const n of e.g.values())t=t.concat(n.D);return t}return k(e.i)}function gt(e,t){if(e.forEach&&"function"==typeof e.forEach)e.forEach(t,void 0);else if(s(e)||"string"===typeof e)Array.prototype.forEach.call(e,t,void 0);else for(var n=function(e){if(e.na&&"function"==typeof e.na)return e.na();if(!e.V||"function"!=typeof e.V){if("undefined"!==typeof Map&&e instanceof Map)return Array.from(e.keys());if(!("undefined"!==typeof Set&&e instanceof Set)){if(s(e)||"string"===typeof e){var t=[];e=e.length;for(var n=0;n<e;n++)t.push(n);return t}t=[],n=0;for(const r in e)t[n++]=r;return t}}}(e),r=function(e){if(e.V&&"function"==typeof e.V)return e.V();if("undefined"!==typeof Map&&e instanceof Map||"undefined"!==typeof Set&&e instanceof Set)return Array.from(e.values());if("string"===typeof e)return e.split("");if(s(e)){for(var t=[],n=e.length,r=0;r<n;r++)t.push(e[r]);return t}for(r in t=[],n=0,e)t[n++]=e[r];return t}(e),i=r.length,a=0;a<i;a++)t.call(void 0,r[a],n&&n[a],e)}lt.prototype.cancel=function(){if(this.i=pt(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const e of this.g.values())e.cancel();this.g.clear()}};var mt=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function yt(e){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,e instanceof yt){this.h=e.h,bt(this,e.j),this.o=e.o,this.g=e.g,wt(this,e.s),this.l=e.l;var t=e.i,n=new Mt;n.i=t.i,t.g&&(n.g=new Map(t.g),n.h=t.h),xt(this,n),this.m=e.m}else e&&(t=String(e).match(mt))?(this.h=!1,bt(this,t[1]||"",!0),this.o=St(t[2]||""),this.g=St(t[3]||"",!0),wt(this,t[4]),this.l=St(t[5]||"",!0),xt(this,t[6]||"",!0),this.m=St(t[7]||"")):(this.h=!1,this.i=new Mt(null,this.h))}function vt(e){return new yt(e)}function bt(e,t,n){e.j=n?St(t,!0):t,e.j&&(e.j=e.j.replace(/:$/,""))}function wt(e,t){if(t){if(t=Number(t),isNaN(t)||0>t)throw Error("Bad port number "+t);e.s=t}else e.s=null}function xt(e,t,n){t instanceof Mt?(e.i=t,function(e,t){t&&!e.j&&(Rt(e),e.i=null,e.g.forEach(function(e,t){var n=t.toLowerCase();t!=n&&(jt(this,t),Lt(this,n,e))},e)),e.j=t}(e.i,e.h)):(n||(t=Et(t,Pt)),e.i=new Mt(t,e.h))}function _t(e,t,n){e.i.set(t,n)}function kt(e){return _t(e,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),e}function St(e,t){return e?t?decodeURI(e.replace(/%25/g,"%2525")):decodeURIComponent(e):""}function Et(e,t,n){return"string"===typeof e?(e=encodeURI(e).replace(t,Tt),n&&(e=e.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),e):null}function Tt(e){return"%"+((e=e.charCodeAt(0))>>4&15).toString(16)+(15&e).toString(16)}yt.prototype.toString=function(){var e=[],t=this.j;t&&e.push(Et(t,Ct,!0),":");var n=this.g;return(n||"file"==t)&&(e.push("//"),(t=this.o)&&e.push(Et(t,Ct,!0),"@"),e.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.s)&&e.push(":",String(n))),(n=this.l)&&(this.g&&"/"!=n.charAt(0)&&e.push("/"),e.push(Et(n,"/"==n.charAt(0)?Dt:At,!0))),(n=this.i.toString())&&e.push("?",n),(n=this.m)&&e.push("#",Et(n,Nt)),e.join("")};var It,Ct=/[#\/\?@]/g,At=/[#\?:]/g,Dt=/[#\?]/g,Pt=/[#\?@]/g,Nt=/#/g;function Mt(e,t){this.h=this.g=null,this.i=e||null,this.j=!!t}function Rt(e){e.g||(e.g=new Map,e.h=0,e.i&&function(e,t){if(e){e=e.split("&");for(var n=0;n<e.length;n++){var r=e[n].indexOf("="),i=null;if(0<=r){var s=e[n].substring(0,r);i=e[n].substring(r+1)}else s=e[n];t(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(e.i,function(t,n){e.add(decodeURIComponent(t.replace(/\+/g," ")),n)}))}function jt(e,t){Rt(e),t=Ft(e,t),e.g.has(t)&&(e.i=null,e.h-=e.g.get(t).length,e.g.delete(t))}function Ot(e,t){return Rt(e),t=Ft(e,t),e.g.has(t)}function Lt(e,t,n){jt(e,t),0<n.length&&(e.i=null,e.g.set(Ft(e,t),k(n)),e.h+=n.length)}function Ft(e,t){return t=String(t),e.j&&(t=t.toLowerCase()),t}function Vt(e,t,n,r,i){try{i&&(i.onload=null,i.onerror=null,i.onabort=null,i.ontimeout=null),r(n)}catch(s){}}function zt(){this.g=new Ee}function Ut(e,t,n){const r=n||"";try{gt(e,function(e,n){let i=e;a(e)&&(i=ke(e)),t.push(r+n+"="+encodeURIComponent(i))})}catch(i){throw t.push(r+"type="+encodeURIComponent("_badmap")),i}}function Bt(e){this.l=e.Ub||null,this.j=e.eb||!1}function Wt(e,t){pe.call(this),this.D=e,this.o=t,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}function qt(e){e.j.read().then(e.Pa.bind(e)).catch(e.ga.bind(e))}function Ht(e){e.readyState=4,e.l=null,e.j=null,e.v=null,Kt(e)}function Kt(e){e.onreadystatechange&&e.onreadystatechange.call(e)}function Gt(e){let t="";return D(e,function(e,n){t+=n,t+=":",t+=e,t+="\r\n"}),t}function Qt(e,t,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=Gt(n),"string"===typeof e?null!=n&&encodeURIComponent(String(n)):_t(e,t,n))}function Yt(e){pe.call(this),this.headers=new Map,this.o=e||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}(e=Mt.prototype).add=function(e,t){Rt(this),this.i=null,e=Ft(this,e);var n=this.g.get(e);return n||this.g.set(e,n=[]),n.push(t),this.h+=1,this},e.forEach=function(e,t){Rt(this),this.g.forEach(function(n,r){n.forEach(function(n){e.call(t,n,r,this)},this)},this)},e.na=function(){Rt(this);const e=Array.from(this.g.values()),t=Array.from(this.g.keys()),n=[];for(let r=0;r<t.length;r++){const i=e[r];for(let e=0;e<i.length;e++)n.push(t[r])}return n},e.V=function(e){Rt(this);let t=[];if("string"===typeof e)Ot(this,e)&&(t=t.concat(this.g.get(Ft(this,e))));else{e=Array.from(this.g.values());for(let n=0;n<e.length;n++)t=t.concat(e[n])}return t},e.set=function(e,t){return Rt(this),this.i=null,Ot(this,e=Ft(this,e))&&(this.h-=this.g.get(e).length),this.g.set(e,[t]),this.h+=1,this},e.get=function(e,t){return e&&0<(e=this.V(e)).length?String(e[0]):t},e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const e=[],t=Array.from(this.g.keys());for(var n=0;n<t.length;n++){var r=t[n];const s=encodeURIComponent(String(r)),a=this.V(r);for(r=0;r<a.length;r++){var i=s;""!==a[r]&&(i+="="+encodeURIComponent(String(a[r]))),e.push(i)}}return this.i=e.join("&")},_(Bt,Te),Bt.prototype.g=function(){return new Wt(this.l,this.j)},Bt.prototype.i=(It={},function(){return It}),_(Wt,pe),(e=Wt.prototype).open=function(e,t){if(0!=this.readyState)throw this.abort(),Error("Error reopening a connection");this.B=e,this.A=t,this.readyState=1,Kt(this)},e.send=function(e){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const t={headers:this.u,method:this.B,credentials:this.m,cache:void 0};e&&(t.body=e),(this.D||i).fetch(new Request(this.A,t)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ht(this)),this.readyState=0},e.Sa=function(e){if(this.g&&(this.l=e,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=e.headers,this.readyState=2,Kt(this)),this.g&&(this.readyState=3,Kt(this),this.g)))if("arraybuffer"===this.responseType)e.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if("undefined"!==typeof i.ReadableStream&&"body"in e){if(this.j=e.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;qt(this)}else e.text().then(this.Ra.bind(this),this.ga.bind(this))},e.Pa=function(e){if(this.g){if(this.o&&e.value)this.response.push(e.value);else if(!this.o){var t=e.value?e.value:new Uint8Array(0);(t=this.v.decode(t,{stream:!e.done}))&&(this.response=this.responseText+=t)}e.done?Ht(this):Kt(this),3==this.readyState&&qt(this)}},e.Ra=function(e){this.g&&(this.response=this.responseText=e,Ht(this))},e.Qa=function(e){this.g&&(this.response=e,Ht(this))},e.ga=function(){this.g&&Ht(this)},e.setRequestHeader=function(e,t){this.u.append(e,t)},e.getResponseHeader=function(e){return this.h&&this.h.get(e.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const e=[],t=this.h.entries();for(var n=t.next();!n.done;)n=n.value,e.push(n[0]+": "+n[1]),n=t.next();return e.join("\r\n")},Object.defineProperty(Wt.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(e){this.m=e?"include":"same-origin"}}),_(Yt,pe);var Zt=/^https?$/i,$t=["POST","PUT"];function Jt(e,t){e.h=!1,e.g&&(e.j=!0,e.g.abort(),e.j=!1),e.l=t,e.m=5,Xt(e),tn(e)}function Xt(e){e.A||(e.A=!0,ge(e,"complete"),ge(e,"error"))}function en(e){if(e.h&&"undefined"!=typeof r&&(!e.v[1]||4!=rn(e)||2!=e.Z()))if(e.u&&4==rn(e))ye(e.Ea,0,e);else if(ge(e,"readystatechange"),4==rn(e)){e.h=!1;try{const r=e.Z();e:switch(r){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var t=!0;break e;default:t=!1}var n;if(!(n=t)){var s;if(s=0===r){var a=String(e.D).match(mt)[1]||null;!a&&i.self&&i.self.location&&(a=i.self.location.protocol.slice(0,-1)),s=!Zt.test(a?a.toLowerCase():"")}n=s}if(n)ge(e,"complete"),ge(e,"success");else{e.m=6;try{var o=2<rn(e)?e.g.statusText:""}catch(l){o=""}e.l=o+" ["+e.Z()+"]",Xt(e)}}finally{tn(e)}}}function tn(e,t){if(e.g){nn(e);const r=e.g,i=e.v[0]?()=>{}:null;e.g=null,e.v=null,t||ge(e,"ready");try{r.onreadystatechange=i}catch(n){}}}function nn(e){e.I&&(i.clearTimeout(e.I),e.I=null)}function rn(e){return e.g?e.g.readyState:0}function sn(e){try{if(!e.g)return null;if("response"in e.g)return e.g.response;switch(e.H){case"":case"text":return e.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in e.g)return e.g.mozResponseArrayBuffer}return null}catch(S){return null}}function an(e,t,n){return n&&n.internalChannelParams&&n.internalChannelParams[e]||t}function on(e){this.Aa=0,this.i=[],this.j=new Ue,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=an("failFast",!1,e),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=an("baseRetryDelayMs",5e3,e),this.cb=an("retryDelaySeedMs",1e4,e),this.Wa=an("forwardChannelMaxRetries",2,e),this.wa=an("forwardChannelRequestTimeoutMs",2e4,e),this.pa=e&&e.xmlHttpFactory||void 0,this.Xa=e&&e.Tb||void 0,this.Ca=e&&e.useFetchStreams||!1,this.L=void 0,this.J=e&&e.supportsCrossDomainXhr||!1,this.K="",this.h=new lt(e&&e.concurrentRequestLimit),this.Da=new zt,this.P=e&&e.fastHandshake||!1,this.O=e&&e.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=e&&e.Rb||!1,e&&e.xa&&this.j.xa(),e&&e.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&e&&e.detectBufferingProxy||!1,this.ja=void 0,e&&e.longPollingTimeout&&0<e.longPollingTimeout&&(this.ja=e.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}function ln(e){if(un(e),3==e.G){var t=e.U++,n=vt(e.I);if(_t(n,"SID",e.K),_t(n,"RID",t),_t(n,"TYPE","terminate"),fn(e,n),(t=new Ge(e,e.j,t)).L=2,t.v=kt(vt(n)),n=!1,i.navigator&&i.navigator.sendBeacon)try{n=i.navigator.sendBeacon(t.v.toString(),"")}catch(r){}!n&&i.Image&&((new Image).src=t.v,n=!0),n||(t.g=En(t.j,null),t.g.ea(t.v)),t.F=Date.now(),tt(t)}kn(e)}function cn(e){e.g&&(yn(e),e.g.cancel(),e.g=null)}function un(e){cn(e),e.u&&(i.clearTimeout(e.u),e.u=null),bn(e),e.h.cancel(),e.s&&("number"===typeof e.s&&i.clearTimeout(e.s),e.s=null)}function hn(e){if(!ct(e.h)&&!e.s){e.s=!0;var t=e.Ga;V||B(),z||(V(),z=!0),U.add(t,e),e.B=0}}function dn(e,t){var n;n=t?t.l:e.U++;const r=vt(e.I);_t(r,"SID",e.K),_t(r,"RID",n),_t(r,"AID",e.T),fn(e,r),e.m&&e.o&&Qt(r,e.m,e.o),n=new Ge(e,e.j,n,e.B+1),null===e.m&&(n.H=e.o),t&&(e.i=t.D.concat(e.i)),t=pn(e,n,1e3),n.I=Math.round(.5*e.wa)+Math.round(.5*e.wa*Math.random()),dt(e.h,n),$e(n,r,t)}function fn(e,t){e.H&&D(e.H,function(e,n){_t(t,n,e)}),e.l&&gt({},function(e,n){_t(t,n,e)})}function pn(e,t,n){n=Math.min(e.i.length,n);var r=e.l?c(e.l.Na,e.l,e):null;e:{var i=e.i;let t=-1;for(;;){const e=["count="+n];-1==t?0<n?(t=i[0].g,e.push("ofs="+t)):t=0:e.push("ofs="+t);let s=!0;for(let a=0;a<n;a++){let n=i[a].g;const o=i[a].map;if(n-=t,0>n)t=Math.max(0,i[a].g-100),s=!1;else try{Ut(o,e,"req"+n+"_")}catch(x){r&&r(o)}}if(s){r=e.join("&");break e}}}return e=e.i.splice(0,n),t.D=e,r}function gn(e){if(!e.g&&!e.u){e.Y=1;var t=e.Fa;V||B(),z||(V(),z=!0),U.add(t,e),e.v=0}}function mn(e){return!(e.g||e.u||3<=e.v)&&(e.Y++,e.u=ze(c(e.Fa,e),xn(e,e.v)),e.v++,!0)}function yn(e){null!=e.A&&(i.clearTimeout(e.A),e.A=null)}function vn(e){e.g=new Ge(e,e.j,"rpc",e.Y),null===e.m&&(e.g.H=e.o),e.g.O=0;var t=vt(e.qa);_t(t,"RID","rpc"),_t(t,"SID",e.K),_t(t,"AID",e.T),_t(t,"CI",e.F?"0":"1"),!e.F&&e.ja&&_t(t,"TO",e.ja),_t(t,"TYPE","xmlhttp"),fn(e,t),e.m&&e.o&&Qt(t,e.m,e.o),e.L&&(e.g.I=e.L);var n=e.g;e=e.ia,n.L=1,n.v=kt(vt(t)),n.m=null,n.P=!0,Je(n,e)}function bn(e){null!=e.C&&(i.clearTimeout(e.C),e.C=null)}function wn(e,t){var n=null;if(e.g==t){bn(e),yn(e),e.g=null;var r=2}else{if(!ht(e.h,t))return;n=t.D,ft(e.h,t),r=1}if(0!=e.G)if(t.o)if(1==r){n=t.m?t.m.length:0,t=Date.now()-t.F;var i=e.B;ge(r=Re(),new Ve(r,n)),hn(e)}else gn(e);else if(3==(i=t.s)||0==i&&0<t.X||!(1==r&&function(e,t){return!(ut(e.h)>=e.h.j-(e.s?1:0))&&(e.s?(e.i=t.D.concat(e.i),!0):!(1==e.G||2==e.G||e.B>=(e.Va?0:e.Wa))&&(e.s=ze(c(e.Ga,e,t),xn(e,e.B)),e.B++,!0))}(e,t)||2==r&&mn(e)))switch(n&&0<n.length&&(t=e.h,t.i=t.i.concat(n)),i){case 1:_n(e,5);break;case 4:_n(e,10);break;case 3:_n(e,6);break;default:_n(e,2)}}function xn(e,t){let n=e.Ta+Math.floor(Math.random()*e.cb);return e.isActive()||(n*=2),n*t}function _n(e,t){if(e.j.info("Error code "+t),2==t){var n=c(e.fb,e),r=e.Xa;const t=!r;r=new yt(r||"//www.google.com/images/cleardot.gif"),i.location&&"http"==i.location.protocol||bt(r,"https"),kt(r),t?function(e,t){const n=new Ue;if(i.Image){const r=new Image;r.onload=u(Vt,n,"TestLoadImage: loaded",!0,t,r),r.onerror=u(Vt,n,"TestLoadImage: error",!1,t,r),r.onabort=u(Vt,n,"TestLoadImage: abort",!1,t,r),r.ontimeout=u(Vt,n,"TestLoadImage: timeout",!1,t,r),i.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=e}else t(!1)}(r.toString(),n):function(e,t){new Ue;const n=new AbortController,r=setTimeout(()=>{n.abort(),Vt(0,0,!1,t)},1e4);fetch(e,{signal:n.signal}).then(e=>{clearTimeout(r),e.ok?Vt(0,0,!0,t):Vt(0,0,!1,t)}).catch(()=>{clearTimeout(r),Vt(0,0,!1,t)})}(r.toString(),n)}else Fe(2);e.G=0,e.l&&e.l.sa(t),kn(e),un(e)}function kn(e){if(e.G=0,e.ka=[],e.l){const t=pt(e.h);0==t.length&&0==e.i.length||(E(e.ka,t),E(e.ka,e.i),e.h.i.length=0,k(e.i),e.i.length=0),e.l.ra()}}function Sn(e,t,n){var r=n instanceof yt?vt(n):new yt(n);if(""!=r.g)t&&(r.g=t+"."+r.g),wt(r,r.s);else{var s=i.location;r=s.protocol,t=t?t+"."+s.hostname:s.hostname,s=+s.port;var a=new yt(null);r&&bt(a,r),t&&(a.g=t),s&&wt(a,s),n&&(a.l=n),r=a}return n=e.D,t=e.ya,n&&t&&_t(r,n,t),_t(r,"VER",e.la),fn(e,r),r}function En(e,t,n){if(t&&!e.J)throw Error("Can't create secondary domain capable XhrIo object.");return(t=e.Ca&&!e.pa?new Yt(new Bt({eb:n})):new Yt(e.pa)).Ha(e.J),t}function Tn(){}function In(){}function Cn(e,t){pe.call(this),this.g=new on(t),this.l=e,this.h=t&&t.messageUrlParams||null,e=t&&t.messageHeaders||null,t&&t.clientProtocolHeaderRequired&&(e?e["X-Client-Protocol"]="webchannel":e={"X-Client-Protocol":"webchannel"}),this.g.o=e,e=t&&t.initMessageHeaders||null,t&&t.messageContentType&&(e?e["X-WebChannel-Content-Type"]=t.messageContentType:e={"X-WebChannel-Content-Type":t.messageContentType}),t&&t.va&&(e?e["X-WebChannel-Client-Profile"]=t.va:e={"X-WebChannel-Client-Profile":t.va}),this.g.S=e,(e=t&&t.Sb)&&!T(e)&&(this.g.m=e),this.v=t&&t.supportsCrossDomainXhr||!1,this.u=t&&t.sendRawJson||!1,(t=t&&t.httpSessionIdParam)&&!T(t)&&(this.g.D=t,null!==(e=this.h)&&t in e&&(t in(e=this.h)&&delete e[t])),this.j=new Pn(this)}function An(e){De.call(this),e.__headers__&&(this.headers=e.__headers__,this.statusCode=e.__status__,delete e.__headers__,delete e.__status__);var t=e.__sm__;if(t){e:{for(const n in t){e=n;break e}e=void 0}(this.i=e)&&(e=this.i,t=null!==t&&e in t?t[e]:void 0),this.data=t}else this.data=e}function Dn(){Pe.call(this),this.status=1}function Pn(e){this.g=e}(e=Yt.prototype).Ha=function(e){this.J=e},e.ea=function(e,t,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+e);t=t?t.toUpperCase():"GET",this.D=e,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():We.g(),this.v=this.o?Ie(this.o):Ie(We),this.g.onreadystatechange=c(this.Ea,this);try{this.B=!0,this.g.open(t,String(e),!0),this.B=!1}catch(a){return void Jt(this,a)}if(e=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var s in r)n.set(s,r[s]);else{if("function"!==typeof r.keys||"function"!==typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const e of r.keys())n.set(e,r.get(e))}r=Array.from(n.keys()).find(e=>"content-type"==e.toLowerCase()),s=i.FormData&&e instanceof i.FormData,!(0<=Array.prototype.indexOf.call($t,t,void 0))||r||s||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[i,o]of n)this.g.setRequestHeader(i,o);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{nn(this),this.u=!0,this.g.send(e),this.u=!1}catch(a){Jt(this,a)}},e.abort=function(e){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=e||7,ge(this,"complete"),ge(this,"abort"),tn(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),tn(this,!0)),Yt.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?en(this):this.bb())},e.bb=function(){en(this)},e.isActive=function(){return!!this.g},e.Z=function(){try{return 2<rn(this)?this.g.status:-1}catch(It){return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch(It){return""}},e.Oa=function(e){if(this.g){var t=this.g.responseText;return e&&0==t.indexOf(e)&&(t=t.substring(e.length)),Se(t)}},e.Ba=function(){return this.m},e.Ka=function(){return"string"===typeof this.l?this.l:String(this.l)},(e=on.prototype).la=8,e.G=1,e.connect=function(e,t,n,r){Fe(0),this.W=e,this.H=t||{},n&&void 0!==r&&(this.H.OSID=n,this.H.OAID=r),this.F=this.X,this.I=Sn(this,null,this.W),hn(this)},e.Ga=function(e){if(this.s)if(this.s=null,1==this.G){if(!e){this.U=Math.floor(1e5*Math.random()),e=this.U++;const i=new Ge(this,this.j,e);let s=this.o;if(this.S&&(s?(s=P(s),M(s,this.S)):s=this.S),null!==this.m||this.O||(i.H=s,s=null),this.P)e:{for(var t=0,n=0;n<this.i.length;n++){var r=this.i[n];if(void 0===(r="__data__"in r.map&&"string"===typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(t+=r)){t=n;break e}if(4096===t||n===this.i.length-1){t=n+1;break e}}t=1e3}else t=1e3;t=pn(this,i,t),_t(n=vt(this.I),"RID",e),_t(n,"CVER",22),this.D&&_t(n,"X-HTTP-Session-Id",this.D),fn(this,n),s&&(this.O?t="headers="+encodeURIComponent(String(Gt(s)))+"&"+t:this.m&&Qt(n,this.m,s)),dt(this.h,i),this.Ua&&_t(n,"TYPE","init"),this.P?(_t(n,"$req",t),_t(n,"SID","null"),i.T=!0,$e(i,n,null)):$e(i,n,t),this.G=2}}else 3==this.G&&(e?dn(this,e):0==this.i.length||ct(this.h)||dn(this))},e.Fa=function(){if(this.u=null,vn(this),this.ba&&!(this.M||null==this.g||0>=this.R)){var e=2*this.R;this.j.info("BP detection timer enabled: "+e),this.A=ze(c(this.ab,this),e)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Fe(10),cn(this),vn(this))},e.Za=function(){null!=this.C&&(this.C=null,cn(this),mn(this),Fe(19))},e.fb=function(e){e?(this.j.info("Successfully pinged google.com"),Fe(2)):(this.j.info("Failed to ping google.com"),Fe(1))},e.isActive=function(){return!!this.l&&this.l.isActive(this)},(e=Tn.prototype).ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){},In.prototype.g=function(e,t){return new Cn(e,t)},_(Cn,pe),Cn.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},Cn.prototype.close=function(){ln(this.g)},Cn.prototype.o=function(e){var t=this.g;if("string"===typeof e){var n={};n.__data__=e,e=n}else this.u&&((n={}).__data__=ke(e),e=n);t.i.push(new ot(t.Ya++,e)),3==t.G&&hn(t)},Cn.prototype.N=function(){this.g.l=null,delete this.j,ln(this.g),delete this.g,Cn.aa.N.call(this)},_(An,De),_(Dn,Pe),_(Pn,Tn),Pn.prototype.ua=function(){ge(this.g,"a")},Pn.prototype.ta=function(e){ge(this.g,new An(e))},Pn.prototype.sa=function(e){ge(this.g,new Dn)},Pn.prototype.ra=function(){ge(this.g,"b")},In.prototype.createWebChannel=In.prototype.g,Cn.prototype.send=Cn.prototype.o,Cn.prototype.open=Cn.prototype.m,Cn.prototype.close=Cn.prototype.close,v=w.createWebChannelTransport=function(){return new In},y=w.getStatEventTarget=function(){return Re()},m=w.Event=Ne,g=w.Stat={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},qe.NO_ERROR=0,qe.TIMEOUT=8,qe.HTTP_ERROR=6,p=w.ErrorCode=qe,He.COMPLETE="complete",f=w.EventType=He,Ce.EventType=Ae,Ae.OPEN="a",Ae.CLOSE="b",Ae.ERROR="c",Ae.MESSAGE="d",pe.prototype.listen=pe.prototype.K,d=w.WebChannel=Ce,w.FetchXmlHttpFactory=Bt,Yt.prototype.listenOnce=Yt.prototype.L,Yt.prototype.getLastError=Yt.prototype.Ka,Yt.prototype.getLastErrorCode=Yt.prototype.Ba,Yt.prototype.getStatus=Yt.prototype.Z,Yt.prototype.getResponseJson=Yt.prototype.Oa,Yt.prototype.getResponseText=Yt.prototype.oa,Yt.prototype.send=Yt.prototype.ea,Yt.prototype.setWithCredentials=Yt.prototype.Ha,h=w.XhrIo=Yt}).apply("undefined"!==typeof b?b:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{});const x="@firebase/firestore";class _{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_.UNAUTHENTICATED=new _(null),_.GOOGLE_CREDENTIALS=new _("google-credentials-uid"),_.FIRST_PARTY=new _("first-party-uid"),_.MOCK_USER=new _("mock-user");let k="11.0.2";const S=new o.Vy("@firebase/firestore");function E(){return S.logLevel}function T(e){S.setLogLevel(e)}function I(e){if(S.logLevel<=o.$b.DEBUG){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(D);S.debug("Firestore (".concat(k,"): ").concat(e),...i)}}function C(e){if(S.logLevel<=o.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(D);S.error("Firestore (".concat(k,"): ").concat(e),...i)}}function A(e){if(S.logLevel<=o.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];const i=n.map(D);S.warn("Firestore (".concat(k,"): ").concat(e),...i)}}function D(e){if("string"==typeof e)return e;try{return function(e){return JSON.stringify(e)}(e)}catch(t){return e}}function P(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"Unexpected state";const t="FIRESTORE (".concat(k,") INTERNAL ASSERTION FAILED: ")+e;throw C(t),new Error(t)}function N(e,t){e||P()}function M(e,t){e||P()}function R(e,t){return e}const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class O extends l.g{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>"".concat(this.name,": [code=").concat(this.code,"]: ").concat(this.message)}}class L{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class F{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization","Bearer ".concat(e))}}class V{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(_.UNAUTHENTICATED))}shutdown(){}}class z{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class U{constructor(e){this.t=e,this.currentUser=_.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){N(void 0===this.o);let n=this.i;const r=e=>this.i!==n?(n=this.i,t(e)):Promise.resolve();let i=new L;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new L,e.enqueueRetryable(()=>r(this.currentUser))};const s=()=>{const t=i;e.enqueueRetryable(async()=>{await t.promise,await r(this.currentUser)})},a=e=>{I("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=e,this.o&&(this.auth.addAuthTokenListener(this.o),s())};this.t.onInit(e=>a(e)),setTimeout(()=>{if(!this.auth){const e=this.t.getImmediate({optional:!0});e?a(e):(I("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new L)}},0),s()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(t=>this.i!==e?(I("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):t?(N("string"==typeof t.accessToken),new F(t.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return N(null===e||"string"==typeof e),new _(e)}}class B{constructor(e,t,n){this.l=e,this.h=t,this.P=n,this.type="FirstParty",this.user=_.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class W{constructor(e,t,n){this.l=e,this.h=t,this.P=n}getToken(){return Promise.resolve(new B(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(_.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class q{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){N(void 0===this.o);const n=e=>{null!=e.error&&I("FirebaseAppCheckTokenProvider","Error getting App Check token; using placeholder token instead. Error: ".concat(e.error.message));const n=e.token!==this.R;return this.R=e.token,I("FirebaseAppCheckTokenProvider","Received ".concat(n?"new":"existing"," token.")),n?t(e.token):Promise.resolve()};this.o=t=>{e.enqueueRetryable(()=>n(t))};const r=e=>{I("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=e,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(e=>r(e)),setTimeout(()=>{if(!this.appCheck){const e=this.A.getImmediate({optional:!0});e?r(e):I("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(e=>e?(N("string"==typeof e.token),this.R=e.token,new q(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}class K{getToken(){return Promise.resolve(new q(""))}invalidateToken(){}start(e,t){}shutdown(){}}function G(e){const t="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&"function"==typeof t.getRandomValues)t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}class Q{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(256/62);let n="";for(;n.length<20;){const r=G(40);for(let i=0;i<r.length;++i)n.length<20&&r[i]<t&&(n+=e.charAt(r[i]%62))}return n}}function Y(e,t){return e<t?-1:e>t?1:0}function Z(e,t,n){return e.length===t.length&&e.every((e,r)=>n(e,t[r]))}function $(e){return e+"\0"}class J{static now(){return J.fromMillis(Date.now())}static fromDate(e){return J.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),n=Math.floor(1e6*(e-1e3*t));return new J(t,n)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new O(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new O(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new O(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new O(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Y(this.nanoseconds,e.nanoseconds):Y(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{static fromTimestamp(e){return new X(e)}static min(){return new X(new J(0,0))}static max(){return new X(new J(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class ee{constructor(e,t,n){void 0===t?t=0:t>e.length&&P(),void 0===n?n=e.length-t:n>e.length-t&&P(),this.segments=e,this.offset=t,this.len=n}get length(){return this.len}isEqual(e){return 0===ee.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof ee?e.forEach(e=>{t.push(e)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=void 0===e?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,n=this.limit();t<n;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const n=Math.min(e.length,t.length);for(let r=0;r<n;r++){const n=e.get(r),i=t.get(r);if(n<i)return-1;if(n>i)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class te extends ee{construct(e,t,n){return new te(e,t,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(){const e=[];for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n){if(i.indexOf("//")>=0)throw new O(j.INVALID_ARGUMENT,"Invalid segment (".concat(i,"). Paths must not contain // in them."));e.push(...i.split("/").filter(e=>e.length>0))}return new te(e)}static emptyPath(){return new te([])}}const ne=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class re extends ee{construct(e,t,n){return new re(e,t,n)}static isValidIdentifier(e){return ne.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),re.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new re(["__name__"])}static fromServerFormat(e){const t=[];let n="",r=0;const i=()=>{if(0===n.length)throw new O(j.INVALID_ARGUMENT,"Invalid field path (".concat(e,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"));t.push(n),n=""};let s=!1;for(;r<e.length;){const t=e[r];if("\\"===t){if(r+1===e.length)throw new O(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const t=e[r+1];if("\\"!==t&&"."!==t&&"`"!==t)throw new O(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);n+=t,r+=2}else"`"===t?(s=!s,r++):"."!==t||s?(n+=t,r++):(i(),r++)}if(i(),s)throw new O(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new re(t)}static emptyPath(){return new re([])}}class ie{constructor(e){this.path=e}static fromPath(e){return new ie(te.fromString(e))}static fromName(e){return new ie(te.fromString(e).popFirst(5))}static empty(){return new ie(te.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===te.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return te.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ie(new te(e.slice()))}}class se{constructor(e,t,n,r){this.indexId=e,this.collectionGroup=t,this.fields=n,this.indexState=r}}function ae(e){return e.fields.find(e=>2===e.kind)}function oe(e){return e.fields.filter(e=>2!==e.kind)}function le(e,t){let n=Y(e.collectionGroup,t.collectionGroup);if(0!==n)return n;for(let r=0;r<Math.min(e.fields.length,t.fields.length);++r)if(n=ue(e.fields[r],t.fields[r]),0!==n)return n;return Y(e.fields.length,t.fields.length)}se.UNKNOWN_ID=-1;class ce{constructor(e,t){this.fieldPath=e,this.kind=t}}function ue(e,t){const n=re.comparator(e.fieldPath,t.fieldPath);return 0!==n?n:Y(e.kind,t.kind)}class he{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new he(0,pe.min())}}function de(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,i=X.fromTimestamp(1e9===r?new J(n+1,0):new J(n,r));return new pe(i,ie.empty(),t)}function fe(e){return new pe(e.readTime,e.key,-1)}class pe{constructor(e,t,n){this.readTime=e,this.documentKey=t,this.largestBatchId=n}static min(){return new pe(X.min(),ie.empty(),-1)}static max(){return new pe(X.max(),ie.empty(),-1)}}function ge(e,t){let n=e.readTime.compareTo(t.readTime);return 0!==n?n:(n=ie.comparator(e.documentKey,t.documentKey),0!==n?n:Y(e.largestBatchId,t.largestBatchId))}const me="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class ye{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}async function ve(e){if(e.code!==j.FAILED_PRECONDITION||e.message!==me)throw e;I("LocalStore","Unexpectedly lost primary lease")}class be{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&P(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new be((n,r)=>{this.nextCallback=t=>{this.wrapSuccess(e,t).next(n,r)},this.catchCallback=e=>{this.wrapFailure(t,e).next(n,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof be?t:be.resolve(t)}catch(e){return be.reject(e)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):be.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):be.reject(t)}static resolve(e){return new be((t,n)=>{t(e)})}static reject(e){return new be((t,n)=>{n(e)})}static waitFor(e){return new be((t,n)=>{let r=0,i=0,s=!1;e.forEach(e=>{++r,e.next(()=>{++i,s&&i===r&&t()},e=>n(e))}),s=!0,i===r&&t()})}static or(e){let t=be.resolve(!1);for(const n of e)t=t.next(e=>e?be.resolve(e):n());return t}static forEach(e,t){const n=[];return e.forEach((e,r)=>{n.push(t.call(this,e,r))}),this.waitFor(n)}static mapArray(e,t){return new be((n,r)=>{const i=e.length,s=new Array(i);let a=0;for(let o=0;o<i;o++){const l=o;t(e[l]).next(e=>{s[l]=e,++a,a===i&&n(s)},e=>r(e))}})}static doWhile(e,t){return new be((n,r)=>{const i=()=>{!0===e()?t().next(()=>{i()},r):n()};i()})}}class we{static open(e,t,n,r){try{return new we(t,e.transaction(r,n))}catch(e){throw new Se(t,e)}}constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.V=new L,this.transaction.oncomplete=()=>{this.V.resolve()},this.transaction.onabort=()=>{t.error?this.V.reject(new Se(e,t.error)):this.V.resolve()},this.transaction.onerror=t=>{const n=Ae(t.target.error);this.V.reject(new Se(e,n))}}get m(){return this.V.promise}abort(e){e&&this.V.reject(e),this.aborted||(I("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}g(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Te(t)}}class xe{static delete(e){return I("SimpleDb","Removing database:",e),Ie(window.indexedDB.deleteDatabase(e)).toPromise()}static p(){if(!(0,l.zW)())return!1;if(xe.S())return!0;const e=(0,l.ZQ)(),t=xe.D(e),n=0<t&&t<10,r=_e(e),i=0<r&&r<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||n||i)}static S(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.__PRIVATE_env)||void 0===e?void 0:e.v)}static C(e,t){return e.store(t)}static D(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(n)}constructor(e,t,n){this.name=e,this.version=t,this.F=n,12.2===xe.D((0,l.ZQ)())&&C("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async M(e){return this.db||(I("SimpleDb","Opening database:",this.name),this.db=await new Promise((t,n)=>{const r=indexedDB.open(this.name,this.version);r.onsuccess=e=>{const n=e.target.result;t(n)},r.onblocked=()=>{n(new Se(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=t=>{const r=t.target.error;"VersionError"===r.name?n(new O(j.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):"InvalidStateError"===r.name?n(new O(j.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+r)):n(new Se(e,r))},r.onupgradeneeded=e=>{I("SimpleDb",'Database "'+this.name+'" requires upgrade from version:',e.oldVersion);const t=e.target.result;this.F.O(t,r.transaction,e.oldVersion,this.version).next(()=>{I("SimpleDb","Database upgrade to version "+this.version+" complete")})}})),this.N&&(this.db.onversionchange=e=>this.N(e)),this.db}L(e){this.N=e,this.db&&(this.db.onversionchange=t=>e(t))}async runTransaction(e,t,n,r){const i="readonly"===t;let s=0;for(;;){++s;try{this.db=await this.M(e);const t=we.open(this.db,e,i?"readonly":"readwrite",n),s=r(t).next(e=>(t.g(),e)).catch(e=>(t.abort(e),be.reject(e))).toPromise();return s.catch(()=>{}),await t.m,s}catch(e){const t=e,n="FirebaseError"!==t.name&&s<3;if(I("SimpleDb","Transaction failed with error:",t.message,"Retrying:",n),this.close(),!n)return Promise.reject(t)}}}close(){this.db&&this.db.close(),this.db=void 0}}function _e(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class ke{constructor(e){this.B=e,this.k=!1,this.q=null}get isDone(){return this.k}get K(){return this.q}set cursor(e){this.B=e}done(){this.k=!0}$(e){this.q=e}delete(){return Ie(this.B.delete())}}class Se extends O{constructor(e,t){super(j.UNAVAILABLE,"IndexedDB transaction '".concat(e,"' failed: ").concat(t)),this.name="IndexedDbTransactionError"}}function Ee(e){return"IndexedDbTransactionError"===e.name}class Te{constructor(e){this.store=e}put(e,t){let n;return void 0!==t?(I("SimpleDb","PUT",this.store.name,e,t),n=this.store.put(t,e)):(I("SimpleDb","PUT",this.store.name,"<auto-key>",e),n=this.store.put(e)),Ie(n)}add(e){return I("SimpleDb","ADD",this.store.name,e,e),Ie(this.store.add(e))}get(e){return Ie(this.store.get(e)).next(t=>(void 0===t&&(t=null),I("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return I("SimpleDb","DELETE",this.store.name,e),Ie(this.store.delete(e))}count(){return I("SimpleDb","COUNT",this.store.name),Ie(this.store.count())}U(e,t){const n=this.options(e,t),r=n.index?this.store.index(n.index):this.store;if("function"==typeof r.getAll){const e=r.getAll(n.range);return new be((t,n)=>{e.onerror=e=>{n(e.target.error)},e.onsuccess=e=>{t(e.target.result)}})}{const e=this.cursor(n),t=[];return this.W(e,(e,n)=>{t.push(n)}).next(()=>t)}}G(e,t){const n=this.store.getAll(e,null===t?void 0:t);return new be((e,t)=>{n.onerror=e=>{t(e.target.error)},n.onsuccess=t=>{e(t.target.result)}})}j(e,t){I("SimpleDb","DELETE ALL",this.store.name);const n=this.options(e,t);n.H=!1;const r=this.cursor(n);return this.W(r,(e,t,n)=>n.delete())}J(e,t){let n;t?n=e:(n={},t=e);const r=this.cursor(n);return this.W(r,t)}Y(e){const t=this.cursor({});return new be((n,r)=>{t.onerror=e=>{const t=Ae(e.target.error);r(t)},t.onsuccess=t=>{const r=t.target.result;r?e(r.primaryKey,r.value).next(e=>{e?r.continue():n()}):n()}})}W(e,t){const n=[];return new be((r,i)=>{e.onerror=e=>{i(e.target.error)},e.onsuccess=e=>{const i=e.target.result;if(!i)return void r();const s=new ke(i),a=t(i.primaryKey,i.value,s);if(a instanceof be){const e=a.catch(e=>(s.done(),be.reject(e)));n.push(e)}s.isDone?r():null===s.K?i.continue():i.continue(s.K)}}).next(()=>be.waitFor(n))}options(e,t){let n;return void 0!==e&&("string"==typeof e?n=e:t=e),{index:n,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const n=this.store.index(e.index);return e.H?n.openKeyCursor(e.range,t):n.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ie(e){return new be((t,n)=>{e.onsuccess=e=>{const n=e.target.result;t(n)},e.onerror=e=>{const t=Ae(e.target.error);n(t)}})}let Ce=!1;function Ae(e){const t=xe.D((0,l.ZQ)());if(t>=12.2&&t<13){const t="An internal error was encountered in the Indexed Database server";if(e.message.indexOf(t)>=0){const e=new O("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '".concat(t,"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround."));return Ce||(Ce=!0,setTimeout(()=>{throw e},0)),e}}return e}class De{constructor(e,t){this.asyncQueue=e,this.Z=t,this.task=null}start(){this.X(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}X(e){I("IndexBackfiller","Scheduled in ".concat(e,"ms")),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,async()=>{this.task=null;try{I("IndexBackfiller","Documents written: ".concat(await this.Z.ee()))}catch(e){Ee(e)?I("IndexBackfiller","Ignoring IndexedDB error during index backfill: ",e):await ve(e)}await this.X(6e4)})}}class Pe{constructor(e,t){this.localStore=e,this.persistence=t}async ee(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:50;return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",t=>this.te(t,e))}te(e,t){const n=new Set;let r=t,i=!0;return be.doWhile(()=>!0===i&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(t=>{if(null!==t&&!n.has(t))return I("IndexBackfiller","Processing collection: ".concat(t)),this.ne(e,t,r).next(e=>{r-=e,n.add(t)});i=!1})).next(()=>t-r)}ne(e,t,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(r=>this.localStore.localDocuments.getNextDocuments(e,t,r,n).next(n=>{const i=n.changes;return this.localStore.indexManager.updateIndexEntries(e,i).next(()=>this.re(r,n)).next(n=>(I("IndexBackfiller","Updating offset: ".concat(n)),this.localStore.indexManager.updateCollectionGroup(e,t,n))).next(()=>i.size)}))}re(e,t){let n=e;return t.changes.forEach((e,t)=>{const r=fe(t);ge(r,n)>0&&(n=r)}),new pe(n.readTime,n.documentKey,Math.max(t.batchId,e.largestBatchId))}}class Ne{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=e=>this.ie(e),this.se=e=>t.writeSequenceNumber(e))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}function Me(e){return null==e}function Re(e){return 0===e&&1/e==-1/0}function je(e){return"number"==typeof e&&Number.isInteger(e)&&!Re(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}function Oe(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Fe(t)),t=Le(e.get(n),t);return Fe(t)}function Le(e,t){let n=t;const r=e.length;for(let i=0;i<r;i++){const t=e.charAt(i);switch(t){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=t}}return n}function Fe(e){return e+"\x01\x01"}function Ve(e){const t=e.length;if(N(t>=2),2===t)return N("\x01"===e.charAt(0)&&"\x01"===e.charAt(1)),te.emptyPath();const n=t-2,r=[];let i="";for(let s=0;s<t;){const t=e.indexOf("\x01",s);switch((t<0||t>n)&&P(),e.charAt(t+1)){case"\x01":const n=e.substring(s,t);let a;0===i.length?a=n:(i+=n,a=i,i=""),r.push(a);break;case"\x10":i+=e.substring(s,t),i+="\0";break;case"\x11":i+=e.substring(s,t+1);break;default:P()}s=t+2}return new te(r)}Ne.oe=-1;const ze=["userId","batchId"];function Ue(e,t){return[e,Oe(t)]}function Be(e,t,n){return[e,Oe(t),n]}const We={},qe=["prefixPath","collectionGroup","readTime","documentId"],He=["prefixPath","collectionGroup","documentId"],Ke=["collectionGroup","readTime","prefixPath","documentId"],Ge=["canonicalId","targetId"],Qe=["targetId","path"],Ye=["path","targetId"],Ze=["collectionId","parent"],$e=["indexId","uid"],Je=["uid","sequenceNumber"],Xe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],et=["indexId","uid","orderedDocumentKey"],tt=["userId","collectionPath","documentId"],nt=["userId","collectionPath","largestBatchId"],rt=["userId","collectionGroup","largestBatchId"],it=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],st=[...it,"documentOverlays"],at=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],ot=at,lt=[...ot,"indexConfiguration","indexState","indexEntries"],ct=lt,ut=[...lt,"globals"];class ht extends ye{constructor(e,t){super(),this._e=e,this.currentSequenceNumber=t}}function dt(e,t){const n=R(e);return xe.C(n._e,t)}function ft(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function pt(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function gt(e,t){const n=[];for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&n.push(t(e[r],r,e));return n}function mt(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}class yt{constructor(e,t){this.comparator=e,this.root=t||bt.EMPTY}insert(e,t){return new yt(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,bt.BLACK,null,null))}remove(e){return new yt(this.comparator,this.root.remove(e,this.comparator).copy(null,null,bt.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const n=this.comparator(e,t.key);if(0===n)return t.value;n<0?t=t.left:n>0&&(t=t.right)}return null}indexOf(e){let t=0,n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(0===r)return t+n.left.size;r<0?n=n.left:(t+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,n)=>(e(t,n),!1))}toString(){const e=[];return this.inorderTraversal((t,n)=>(e.push("".concat(t,":").concat(n)),!1)),"{".concat(e.join(", "),"}")}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new vt(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new vt(this.root,e,this.comparator,!1)}getReverseIterator(){return new vt(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new vt(this.root,e,this.comparator,!0)}}class vt{constructor(e,t,n,r){this.isReverse=r,this.nodeStack=[];let i=1;for(;!e.isEmpty();)if(i=t?n(e.key,t):1,t&&r&&(i*=-1),i<0)e=this.isReverse?e.left:e.right;else{if(0===i){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class bt{constructor(e,t,n,r,i){this.key=e,this.value=t,this.color=null!=n?n:bt.RED,this.left=null!=r?r:bt.EMPTY,this.right=null!=i?i:bt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,n,r,i){return new bt(null!=e?e:this.key,null!=t?t:this.value,null!=n?n:this.color,null!=r?r:this.left,null!=i?i:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,n){let r=this;const i=n(e,r.key);return r=i<0?r.copy(null,null,null,r.left.insert(e,t,n),null):0===i?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,n)),r.fixUp()}removeMin(){if(this.left.isEmpty())return bt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let n,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),0===t(e,r.key)){if(r.right.isEmpty())return bt.EMPTY;n=r.right.min(),r=r.copy(n.key,n.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,bt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,bt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw P();if(this.right.isRed())throw P();const e=this.left.check();if(e!==this.right.check())throw P();return e+(this.isRed()?0:1)}}bt.EMPTY=null,bt.RED=!0,bt.BLACK=!1,bt.EMPTY=new class{constructor(){this.size=0}get key(){throw P()}get value(){throw P()}get color(){throw P()}get left(){throw P()}get right(){throw P()}copy(e,t,n,r,i){return this}insert(e,t,n){return new bt(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class wt{constructor(e){this.comparator=e,this.data=new yt(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,n)=>(e(t),!1))}forEachInRange(e,t){const n=this.data.getIteratorFrom(e[0]);for(;n.hasNext();){const r=n.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let n;for(n=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();n.hasNext();)if(!e(n.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new xt(this.data.getIterator())}getIteratorFrom(e){return new xt(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(e=>{t=t.add(e)}),t}isEqual(e){if(!(e instanceof wt))return!1;if(this.size!==e.size)return!1;const t=this.data.getIterator(),n=e.data.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(0!==this.comparator(e,r))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new wt(this.comparator);return t.data=e,t}}class xt{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function _t(e){return e.hasNext()?e.getNext():void 0}class kt{constructor(e){this.fields=e,e.sort(re.comparator)}static empty(){return new kt([])}unionWith(e){let t=new wt(re.comparator);for(const n of this.fields)t=t.add(n);for(const n of e)t=t.add(n);return new kt(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Z(this.fields,e.fields,(e,t)=>e.isEqual(t))}}class St extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}function Et(){return"undefined"!=typeof atob}class Tt{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(e){try{return atob(e)}catch(e){throw"undefined"!=typeof DOMException&&e instanceof DOMException?new St("Invalid base64 string: "+e):e}}(e);return new Tt(t)}static fromUint8Array(e){const t=function(e){let t="";for(let n=0;n<e.length;++n)t+=String.fromCharCode(e[n]);return t}(e);return new Tt(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return e=this.binaryString,btoa(e);var e}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Y(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Tt.EMPTY_BYTE_STRING=new Tt("");const It=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ct(e){if(N(!!e),"string"==typeof e){let t=0;const n=It.exec(e);if(N(!!n),n[1]){let e=n[1];e=(e+"000000000").substr(0,9),t=Number(e)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:At(e.seconds),nanos:At(e.nanos)}}function At(e){return"number"==typeof e?e:"string"==typeof e?Number(e):0}function Dt(e){return"string"==typeof e?Tt.fromBase64String(e):Tt.fromUint8Array(e)}function Pt(e){var t,n;return"server_timestamp"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Nt(e){const t=e.mapValue.fields.__previous_value__;return Pt(t)?Nt(t):t}function Mt(e){const t=Ct(e.mapValue.fields.__local_write_time__.timestampValue);return new J(t.seconds,t.nanos)}class Rt{constructor(e,t,n,r,i,s,a,o,l){this.databaseId=e,this.appId=t,this.persistenceKey=n,this.host=r,this.ssl=i,this.forceLongPolling=s,this.autoDetectLongPolling=a,this.longPollingOptions=o,this.useFetchStreams=l}}class jt{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new jt("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof jt&&e.projectId===this.projectId&&e.database===this.database}}const Ot={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Lt={nullValue:"NULL_VALUE"};function Ft(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?Pt(e)?4:tn(e)?9007199254740991:Xt(e)?10:11:P()}function Vt(e,t){if(e===t)return!0;const n=Ft(e);if(n!==Ft(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Mt(e).isEqual(Mt(t));case 3:return function(e,t){if("string"==typeof e.timestampValue&&"string"==typeof t.timestampValue&&e.timestampValue.length===t.timestampValue.length)return e.timestampValue===t.timestampValue;const n=Ct(e.timestampValue),r=Ct(t.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(e,t){return Dt(e.bytesValue).isEqual(Dt(t.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(e,t){return At(e.geoPointValue.latitude)===At(t.geoPointValue.latitude)&&At(e.geoPointValue.longitude)===At(t.geoPointValue.longitude)}(e,t);case 2:return function(e,t){if("integerValue"in e&&"integerValue"in t)return At(e.integerValue)===At(t.integerValue);if("doubleValue"in e&&"doubleValue"in t){const n=At(e.doubleValue),r=At(t.doubleValue);return n===r?Re(n)===Re(r):isNaN(n)&&isNaN(r)}return!1}(e,t);case 9:return Z(e.arrayValue.values||[],t.arrayValue.values||[],Vt);case 10:case 11:return function(e,t){const n=e.mapValue.fields||{},r=t.mapValue.fields||{};if(ft(n)!==ft(r))return!1;for(const i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!Vt(n[i],r[i])))return!1;return!0}(e,t);default:return P()}}function zt(e,t){return void 0!==(e.values||[]).find(e=>Vt(e,t))}function Ut(e,t){if(e===t)return 0;const n=Ft(e),r=Ft(t);if(n!==r)return Y(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return Y(e.booleanValue,t.booleanValue);case 2:return function(e,t){const n=At(e.integerValue||e.doubleValue),r=At(t.integerValue||t.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(e,t);case 3:return Bt(e.timestampValue,t.timestampValue);case 4:return Bt(Mt(e),Mt(t));case 5:return Y(e.stringValue,t.stringValue);case 6:return function(e,t){const n=Dt(e),r=Dt(t);return n.compareTo(r)}(e.bytesValue,t.bytesValue);case 7:return function(e,t){const n=e.split("/"),r=t.split("/");for(let i=0;i<n.length&&i<r.length;i++){const e=Y(n[i],r[i]);if(0!==e)return e}return Y(n.length,r.length)}(e.referenceValue,t.referenceValue);case 8:return function(e,t){const n=Y(At(e.latitude),At(t.latitude));return 0!==n?n:Y(At(e.longitude),At(t.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Wt(e.arrayValue,t.arrayValue);case 10:return function(e,t){var n,r,i,s;const a=e.fields||{},o=t.fields||{},l=null===(n=a.value)||void 0===n?void 0:n.arrayValue,c=null===(r=o.value)||void 0===r?void 0:r.arrayValue,u=Y((null===(i=null==l?void 0:l.values)||void 0===i?void 0:i.length)||0,(null===(s=null==c?void 0:c.values)||void 0===s?void 0:s.length)||0);return 0!==u?u:Wt(l,c)}(e.mapValue,t.mapValue);case 11:return function(e,t){if(e===Ot.mapValue&&t===Ot.mapValue)return 0;if(e===Ot.mapValue)return 1;if(t===Ot.mapValue)return-1;const n=e.fields||{},r=Object.keys(n),i=t.fields||{},s=Object.keys(i);r.sort(),s.sort();for(let a=0;a<r.length&&a<s.length;++a){const e=Y(r[a],s[a]);if(0!==e)return e;const t=Ut(n[r[a]],i[s[a]]);if(0!==t)return t}return Y(r.length,s.length)}(e.mapValue,t.mapValue);default:throw P()}}function Bt(e,t){if("string"==typeof e&&"string"==typeof t&&e.length===t.length)return Y(e,t);const n=Ct(e),r=Ct(t),i=Y(n.seconds,r.seconds);return 0!==i?i:Y(n.nanos,r.nanos)}function Wt(e,t){const n=e.values||[],r=t.values||[];for(let i=0;i<n.length&&i<r.length;++i){const e=Ut(n[i],r[i]);if(e)return e}return Y(n.length,r.length)}function qt(e){return Ht(e)}function Ht(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(e){const t=Ct(e);return"time(".concat(t.seconds,",").concat(t.nanos,")")}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(e){return Dt(e).toBase64()}(e.bytesValue):"referenceValue"in e?function(e){return ie.fromName(e).toString()}(e.referenceValue):"geoPointValue"in e?function(e){return"geo(".concat(e.latitude,",").concat(e.longitude,")")}(e.geoPointValue):"arrayValue"in e?function(e){let t="[",n=!0;for(const r of e.values||[])n?n=!1:t+=",",t+=Ht(r);return t+"]"}(e.arrayValue):"mapValue"in e?function(e){const t=Object.keys(e.fields||{}).sort();let n="{",r=!0;for(const i of t)r?r=!1:n+=",",n+="".concat(i,":").concat(Ht(e.fields[i]));return n+"}"}(e.mapValue):P()}function Kt(e){switch(Ft(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Nt(e);return t?16+Kt(t):16;case 5:return 2*e.stringValue.length;case 6:return Dt(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(e){return(e.values||[]).reduce((e,t)=>e+Kt(t),0)}(e.arrayValue);case 10:case 11:return function(e){let t=0;return pt(e.fields,(e,n)=>{t+=e.length+Kt(n)}),t}(e.mapValue);default:throw P()}}function Gt(e,t){return{referenceValue:"projects/".concat(e.projectId,"/databases/").concat(e.database,"/documents/").concat(t.path.canonicalString())}}function Qt(e){return!!e&&"integerValue"in e}function Yt(e){return!!e&&"arrayValue"in e}function Zt(e){return!!e&&"nullValue"in e}function $t(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function Jt(e){return!!e&&"mapValue"in e}function Xt(e){var t,n;return"__vector__"===(null===(n=((null===(t=null==e?void 0:e.mapValue)||void 0===t?void 0:t.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function en(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&"object"==typeof e.timestampValue)return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return pt(e.mapValue.fields,(e,n)=>t.mapValue.fields[e]=en(n)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=en(e.arrayValue.values[n]);return t}return Object.assign({},e)}function tn(e){return"__max__"===(((e.mapValue||{}).fields||{}).__type__||{}).stringValue}const nn={mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{}}}}};function rn(e){return"nullValue"in e?Lt:"booleanValue"in e?{booleanValue:!1}:"integerValue"in e||"doubleValue"in e?{doubleValue:NaN}:"timestampValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in e?{stringValue:""}:"bytesValue"in e?{bytesValue:""}:"referenceValue"in e?Gt(jt.empty(),ie.empty()):"geoPointValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in e?{arrayValue:{}}:"mapValue"in e?Xt(e)?nn:{mapValue:{}}:P()}function sn(e){return"nullValue"in e?{booleanValue:!1}:"booleanValue"in e?{doubleValue:NaN}:"integerValue"in e||"doubleValue"in e?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in e?{stringValue:""}:"stringValue"in e?{bytesValue:""}:"bytesValue"in e?Gt(jt.empty(),ie.empty()):"referenceValue"in e?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in e?{arrayValue:{}}:"arrayValue"in e?nn:"mapValue"in e?Xt(e)?{mapValue:{}}:Ot:P()}function an(e,t){const n=Ut(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?-1:!e.inclusive&&t.inclusive?1:0}function on(e,t){const n=Ut(e.value,t.value);return 0!==n?n:e.inclusive&&!t.inclusive?1:!e.inclusive&&t.inclusive?-1:0}class ln{constructor(e){this.value=e}static empty(){return new ln({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let n=0;n<e.length-1;++n)if(t=(t.mapValue.fields||{})[e.get(n)],!Jt(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=en(t)}setAll(e){let t=re.emptyPath(),n={},r=[];e.forEach((e,i)=>{if(!t.isImmediateParentOf(i)){const e=this.getFieldsMap(t);this.applyChanges(e,n,r),n={},r=[],t=i.popLast()}e?n[i.lastSegment()]=en(e):r.push(i.lastSegment())});const i=this.getFieldsMap(t);this.applyChanges(i,n,r)}delete(e){const t=this.field(e.popLast());Jt(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Vt(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let n=0;n<e.length;++n){let r=t.mapValue.fields[e.get(n)];Jt(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(n)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,n){pt(t,(t,n)=>e[t]=n);for(const r of n)delete e[r]}clone(){return new ln(en(this.value))}}function cn(e){const t=[];return pt(e.fields,(e,n)=>{const r=new re([e]);if(Jt(n)){const e=cn(n.mapValue).fields;if(0===e.length)t.push(r);else for(const n of e)t.push(r.child(n))}else t.push(r)}),new kt(t)}class un{constructor(e,t,n,r,i,s,a){this.key=e,this.documentType=t,this.version=n,this.readTime=r,this.createTime=i,this.data=s,this.documentState=a}static newInvalidDocument(e){return new un(e,0,X.min(),X.min(),X.min(),ln.empty(),0)}static newFoundDocument(e,t,n,r){return new un(e,1,t,X.min(),n,r,0)}static newNoDocument(e,t){return new un(e,2,t,X.min(),X.min(),ln.empty(),0)}static newUnknownDocument(e,t){return new un(e,3,t,X.min(),X.min(),ln.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(X.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ln.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ln.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=X.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof un&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new un(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return"Document(".concat(this.key,", ").concat(this.version,", ").concat(JSON.stringify(this.data.value),", {createTime: ").concat(this.createTime,"}), {documentType: ").concat(this.documentType,"}), {documentState: ").concat(this.documentState,"})")}}class hn{constructor(e,t){this.position=e,this.inclusive=t}}function dn(e,t,n){let r=0;for(let i=0;i<e.position.length;i++){const s=t[i],a=e.position[i];if(r=s.field.isKeyField()?ie.comparator(ie.fromName(a.referenceValue),n.key):Ut(a,n.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function fn(e,t){if(null===e)return null===t;if(null===t)return!1;if(e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Vt(e.position[n],t.position[n]))return!1;return!0}class pn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc";this.field=e,this.dir=t}}function gn(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}class mn{}class yn extends mn{constructor(e,t,n){super(),this.field=e,this.op=t,this.value=n}static create(e,t,n){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,n):new In(e,t,n):"array-contains"===t?new Pn(e,n):"in"===t?new Nn(e,n):"not-in"===t?new Mn(e,n):"array-contains-any"===t?new Rn(e,n):new yn(e,t,n)}static createKeyFieldInFilter(e,t,n){return"in"===t?new Cn(e,n):new An(e,n)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(Ut(t,this.value)):null!==t&&Ft(this.value)===Ft(t)&&this.matchesComparison(Ut(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return P()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vn extends mn{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new vn(e,t)}matches(e){return bn(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.ae||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function bn(e){return"and"===e.op}function wn(e){return"or"===e.op}function xn(e){return _n(e)&&bn(e)}function _n(e){for(const t of e.filters)if(t instanceof vn)return!1;return!0}function kn(e){if(e instanceof yn)return e.field.canonicalString()+e.op.toString()+qt(e.value);if(xn(e))return e.filters.map(e=>kn(e)).join(",");{const t=e.filters.map(e=>kn(e)).join(",");return"".concat(e.op,"(").concat(t,")")}}function Sn(e,t){return e instanceof yn?function(e,t){return t instanceof yn&&e.op===t.op&&e.field.isEqual(t.field)&&Vt(e.value,t.value)}(e,t):e instanceof vn?function(e,t){return t instanceof vn&&e.op===t.op&&e.filters.length===t.filters.length&&e.filters.reduce((e,n,r)=>e&&Sn(n,t.filters[r]),!0)}(e,t):void P()}function En(e,t){const n=e.filters.concat(t);return vn.create(n,e.op)}function Tn(e){return e instanceof yn?function(e){return"".concat(e.field.canonicalString()," ").concat(e.op," ").concat(qt(e.value))}(e):e instanceof vn?function(e){return e.op.toString()+" {"+e.getFilters().map(Tn).join(" ,")+"}"}(e):"Filter"}class In extends yn{constructor(e,t,n){super(e,t,n),this.key=ie.fromName(n.referenceValue)}matches(e){const t=ie.comparator(e.key,this.key);return this.matchesComparison(t)}}class Cn extends yn{constructor(e,t){super(e,"in",t),this.keys=Dn("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class An extends yn{constructor(e,t){super(e,"not-in",t),this.keys=Dn("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Dn(e,t){var n;return((null===(n=t.arrayValue)||void 0===n?void 0:n.values)||[]).map(e=>ie.fromName(e.referenceValue))}class Pn extends yn{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Yt(t)&&zt(t.arrayValue,this.value)}}class Nn extends yn{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zt(this.value.arrayValue,t)}}class Mn extends yn{constructor(e,t){super(e,"not-in",t)}matches(e){if(zt(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zt(this.value.arrayValue,t)}}class Rn extends yn{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Yt(t)||!t.arrayValue.values)&&t.arrayValue.values.some(e=>zt(this.value.arrayValue,e))}}class jn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null;this.path=e,this.collectionGroup=t,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=s,this.endAt=a,this.ue=null}}function On(e){return new jn(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,arguments.length>6&&void 0!==arguments[6]?arguments[6]:null)}function Ln(e){const t=R(e);if(null===t.ue){let e=t.path.canonicalString();null!==t.collectionGroup&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(e=>kn(e)).join(","),e+="|ob:",e+=t.orderBy.map(e=>function(e){return e.field.canonicalString()+e.dir}(e)).join(","),Me(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(e=>qt(e)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(e=>qt(e)).join(",")),t.ue=e}return t.ue}function Fn(e,t){if(e.limit!==t.limit)return!1;if(e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!gn(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Sn(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!fn(e.startAt,t.startAt)&&fn(e.endAt,t.endAt)}function Vn(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}function zn(e,t){return e.filters.filter(e=>e instanceof yn&&e.field.isEqual(t))}function Un(e,t,n){let r=Lt,i=!0;for(const s of zn(e,t)){let e=Lt,t=!0;switch(s.op){case"<":case"<=":e=rn(s.value);break;case"==":case"in":case">=":e=s.value;break;case">":e=s.value,t=!1;break;case"!=":case"not-in":e=Lt}an({value:r,inclusive:i},{value:e,inclusive:t})<0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];an({value:r,inclusive:i},{value:e,inclusive:n.inclusive})<0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}function Bn(e,t,n){let r=Ot,i=!0;for(const s of zn(e,t)){let e=Ot,t=!0;switch(s.op){case">=":case">":e=sn(s.value),t=!1;break;case"==":case"in":case"<=":e=s.value;break;case"<":e=s.value,t=!1;break;case"!=":case"not-in":e=Ot}on({value:r,inclusive:i},{value:e,inclusive:t})>0&&(r=e,i=t)}if(null!==n)for(let s=0;s<e.orderBy.length;++s)if(e.orderBy[s].field.isEqual(t)){const e=n.position[s];on({value:r,inclusive:i},{value:e,inclusive:n.inclusive})>0&&(r=e,i=n.inclusive);break}return{value:r,inclusive:i}}class Wn{constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"F",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.path=e,this.collectionGroup=t,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=s,this.startAt=a,this.endAt=o,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function qn(e,t,n,r,i,s,a,o){return new Wn(e,t,n,r,i,s,a,o)}function Hn(e){return new Wn(e)}function Kn(e){return 0===e.filters.length&&null===e.limit&&null==e.startAt&&null==e.endAt&&(0===e.explicitOrderBy.length||1===e.explicitOrderBy.length&&e.explicitOrderBy[0].field.isKeyField())}function Gn(e){return null!==e.collectionGroup}function Qn(e){const t=R(e);if(null===t.ce){t.ce=[];const e=new Set;for(const i of t.explicitOrderBy)t.ce.push(i),e.add(i.field.canonicalString());const n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc",r=function(e){let t=new wt(re.comparator);return e.filters.forEach(e=>{e.getFlattenedFilters().forEach(e=>{e.isInequality()&&(t=t.add(e.field))})}),t}(t);r.forEach(r=>{e.has(r.canonicalString())||r.isKeyField()||t.ce.push(new pn(r,n))}),e.has(re.keyField().canonicalString())||t.ce.push(new pn(re.keyField(),n))}return t.ce}function Yn(e){const t=R(e);return t.le||(t.le=$n(t,Qn(e))),t.le}function Zn(e){const t=R(e);return t.he||(t.he=$n(t,e.explicitOrderBy)),t.he}function $n(e,t){if("F"===e.limitType)return On(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(e=>{const t="desc"===e.dir?"asc":"desc";return new pn(e.field,t)});const n=e.endAt?new hn(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new hn(e.startAt.position,e.startAt.inclusive):null;return On(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function Jn(e,t){const n=e.filters.concat([t]);return new Wn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function Xn(e,t,n){return new Wn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function er(e,t){return Fn(Yn(e),Yn(t))&&e.limitType===t.limitType}function tr(e){return"".concat(Ln(Yn(e)),"|lt:").concat(e.limitType)}function nr(e){return"Query(target=".concat(function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=", filters: [".concat(e.filters.map(e=>Tn(e)).join(", "),"]")),Me(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=", orderBy: [".concat(e.orderBy.map(e=>function(e){return"".concat(e.field.canonicalString()," (").concat(e.dir,")")}(e)).join(", "),"]")),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(e=>qt(e)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(e=>qt(e)).join(",")),"Target(".concat(t,")")}(Yn(e)),"; limitType=").concat(e.limitType,")")}function rr(e,t){return t.isFoundDocument()&&function(e,t){const n=t.key.path;return null!==e.collectionGroup?t.key.hasCollectionId(e.collectionGroup)&&e.path.isPrefixOf(n):ie.isDocumentKey(e.path)?e.path.isEqual(n):e.path.isImmediateParentOf(n)}(e,t)&&function(e,t){for(const n of Qn(e))if(!n.field.isKeyField()&&null===t.data.field(n.field))return!1;return!0}(e,t)&&function(e,t){for(const n of e.filters)if(!n.matches(t))return!1;return!0}(e,t)&&function(e,t){return!(e.startAt&&!function(e,t,n){const r=dn(e,t,n);return e.inclusive?r<=0:r<0}(e.startAt,Qn(e),t))&&!(e.endAt&&!function(e,t,n){const r=dn(e,t,n);return e.inclusive?r>=0:r>0}(e.endAt,Qn(e),t))}(e,t)}function ir(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function sr(e){return(t,n)=>{let r=!1;for(const i of Qn(e)){const e=ar(i,t,n);if(0!==e)return e;r=r||i.field.isKeyField()}return 0}}function ar(e,t,n){const r=e.field.isKeyField()?ie.comparator(t.key,n.key):function(e,t,n){const r=t.data.field(e),i=n.data.field(e);return null!==r&&null!==i?Ut(r,i):P()}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return P()}}class or{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0!==n)for(const[r,i]of n)if(this.equalsFn(r,e))return i}has(e){return void 0!==this.get(e)}set(e,t){const n=this.mapKeyFn(e),r=this.inner[n];if(void 0===r)return this.inner[n]=[[e,t]],void this.innerSize++;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return void(r[i]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),n=this.inner[t];if(void 0===n)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],e))return 1===n.length?delete this.inner[t]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pt(this.inner,(t,n)=>{for(const[r,i]of n)e(r,i)})}isEmpty(){return mt(this.inner)}size(){return this.innerSize}}const lr=new yt(ie.comparator);function cr(){return lr}const ur=new yt(ie.comparator);function hr(){let e=ur;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.insert(i.key,i);return e}function dr(e){let t=ur;return e.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function fr(){return gr()}function pr(){return gr()}function gr(){return new or(e=>e.toString(),(e,t)=>e.isEqual(t))}const mr=new yt(ie.comparator),yr=new wt(ie.comparator);function vr(){let e=yr;for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(const i of n)e=e.add(i);return e}const br=new wt(Y);function wr(){return br}function xr(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Re(t)?"-0":t}}function _r(e){return{integerValue:""+e}}function kr(e,t){return je(t)?_r(t):xr(e,t)}class Sr{constructor(){this._=void 0}}function Er(e,t,n){return e instanceof Cr?function(e,t){const n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:e.seconds,nanos:e.nanoseconds}}}};return t&&Pt(t)&&(t=Nt(t)),t&&(n.fields.__previous_value__=t),{mapValue:n}}(n,t):e instanceof Ar?Dr(e,t):e instanceof Pr?Nr(e,t):function(e,t){const n=Ir(e,t),r=Rr(n)+Rr(e.Pe);return Qt(n)&&Qt(e.Pe)?_r(r):xr(e.serializer,r)}(e,t)}function Tr(e,t,n){return e instanceof Ar?Dr(e,t):e instanceof Pr?Nr(e,t):n}function Ir(e,t){return e instanceof Mr?function(e){return Qt(e)||function(e){return!!e&&"doubleValue"in e}(e)}(t)?t:{integerValue:0}:null}class Cr extends Sr{}class Ar extends Sr{constructor(e){super(),this.elements=e}}function Dr(e,t){const n=jr(t);for(const r of e.elements)n.some(e=>Vt(e,r))||n.push(r);return{arrayValue:{values:n}}}class Pr extends Sr{constructor(e){super(),this.elements=e}}function Nr(e,t){let n=jr(t);for(const r of e.elements)n=n.filter(e=>!Vt(e,r));return{arrayValue:{values:n}}}class Mr extends Sr{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function Rr(e){return At(e.integerValue||e.doubleValue)}function jr(e){return Yt(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}class Or{constructor(e,t){this.field=e,this.transform=t}}class Lr{constructor(e,t){this.version=e,this.transformResults=t}}class Fr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Fr}static exists(e){return new Fr(void 0,e)}static updateTime(e){return new Fr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Vr(e,t){return void 0!==e.updateTime?t.isFoundDocument()&&t.version.isEqual(e.updateTime):void 0===e.exists||e.exists===t.isFoundDocument()}class zr{}function Ur(e,t){if(!e.hasLocalMutations||t&&0===t.fields.length)return null;if(null===t)return e.isNoDocument()?new $r(e.key,Fr.none()):new Kr(e.key,e.data,Fr.none());{const n=e.data,r=ln.empty();let i=new wt(re.comparator);for(let e of t.fields)if(!i.has(e)){let t=n.field(e);null===t&&e.length>1&&(e=e.popLast(),t=n.field(e)),null===t?r.delete(e):r.set(e,t),i=i.add(e)}return new Gr(e.key,r,new kt(i.toArray()),Fr.none())}}function Br(e,t,n){e instanceof Kr?function(e,t,n){const r=e.value.clone(),i=Yr(e.fieldTransforms,t,n.transformResults);r.setAll(i),t.convertToFoundDocument(n.version,r).setHasCommittedMutations()}(e,t,n):e instanceof Gr?function(e,t,n){if(!Vr(e.precondition,t))return void t.convertToUnknownDocument(n.version);const r=Yr(e.fieldTransforms,t,n.transformResults),i=t.data;i.setAll(Qr(e)),i.setAll(r),t.convertToFoundDocument(n.version,i).setHasCommittedMutations()}(e,t,n):function(e,t,n){t.convertToNoDocument(n.version).setHasCommittedMutations()}(0,t,n)}function Wr(e,t,n,r){return e instanceof Kr?function(e,t,n,r){if(!Vr(e.precondition,t))return n;const i=e.value.clone(),s=Zr(e.fieldTransforms,r,t);return i.setAll(s),t.convertToFoundDocument(t.version,i).setHasLocalMutations(),null}(e,t,n,r):e instanceof Gr?function(e,t,n,r){if(!Vr(e.precondition,t))return n;const i=Zr(e.fieldTransforms,r,t),s=t.data;return s.setAll(Qr(e)),s.setAll(i),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),null===n?null:n.unionWith(e.fieldMask.fields).unionWith(e.fieldTransforms.map(e=>e.field))}(e,t,n,r):function(e,t,n){return Vr(e.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):n}(e,t,n)}function qr(e,t){let n=null;for(const r of e.fieldTransforms){const e=t.data.field(r.field),i=Ir(r.transform,e||null);null!=i&&(null===n&&(n=ln.empty()),n.set(r.field,i))}return n||null}function Hr(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(e,t){return void 0===e&&void 0===t||!(!e||!t)&&Z(e,t,(e,t)=>function(e,t){return e.field.isEqual(t.field)&&function(e,t){return e instanceof Ar&&t instanceof Ar||e instanceof Pr&&t instanceof Pr?Z(e.elements,t.elements,Vt):e instanceof Mr&&t instanceof Mr?Vt(e.Pe,t.Pe):e instanceof Cr&&t instanceof Cr}(e.transform,t.transform)}(e,t))}(e.fieldTransforms,t.fieldTransforms)&&(0===e.type?e.value.isEqual(t.value):1!==e.type||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class Kr extends zr{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];super(),this.key=e,this.value=t,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Gr extends zr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[];super(),this.key=e,this.data=t,this.fieldMask=n,this.precondition=r,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function Qr(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Yr(e,t,n){const r=new Map;N(e.length===n.length);for(let i=0;i<n.length;i++){const s=e[i],a=s.transform,o=t.data.field(s.field);r.set(s.field,Tr(a,o,n[i]))}return r}function Zr(e,t,n){const r=new Map;for(const i of e){const e=i.transform,s=n.data.field(i.field);r.set(i.field,Er(e,s,t))}return r}class $r extends zr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Jr extends zr{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class Xr{constructor(e,t,n,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(e,t){const n=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const t=this.mutations[r];t.key.isEqual(e.key)&&Br(t,e,n[r])}}applyToLocalView(e,t){for(const n of this.baseMutations)n.key.isEqual(e.key)&&(t=Wr(n,e,t,this.localWriteTime));for(const n of this.mutations)n.key.isEqual(e.key)&&(t=Wr(n,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const n=pr();return this.mutations.forEach(r=>{const i=e.get(r.key),s=i.overlayedDocument;let a=this.applyToLocalView(s,i.mutatedFields);a=t.has(r.key)?null:a;const o=Ur(s,a);null!==o&&n.set(r.key,o),s.isValidDocument()||s.convertToNoDocument(X.min())}),n}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),vr())}isEqual(e){return this.batchId===e.batchId&&Z(this.mutations,e.mutations,(e,t)=>Hr(e,t))&&Z(this.baseMutations,e.baseMutations,(e,t)=>Hr(e,t))}}class ei{constructor(e,t,n,r){this.batch=e,this.commitVersion=t,this.mutationResults=n,this.docVersions=r}static from(e,t,n){N(e.mutations.length===n.length);let r=mr;const i=e.mutations;for(let s=0;s<i.length;s++)r=r.insert(i[s].key,n[s].version);return new ei(e,t,n,r)}}class ti{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return"Overlay{\n      largestBatchId: ".concat(this.largestBatchId,",\n      mutation: ").concat(this.mutation.toString(),"\n    }")}}class ni{constructor(e,t,n){this.alias=e,this.aggregateType=t,this.fieldPath=n}}class ri{constructor(e,t){this.count=e,this.unchangedNames=t}}var ii,si;function ai(e){switch(e){default:return P();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function oi(e){if(void 0===e)return C("GRPC error has no .code"),j.UNKNOWN;switch(e){case ii.OK:return j.OK;case ii.CANCELLED:return j.CANCELLED;case ii.UNKNOWN:return j.UNKNOWN;case ii.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ii.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ii.INTERNAL:return j.INTERNAL;case ii.UNAVAILABLE:return j.UNAVAILABLE;case ii.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ii.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ii.NOT_FOUND:return j.NOT_FOUND;case ii.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ii.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ii.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ii.ABORTED:return j.ABORTED;case ii.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ii.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ii.DATA_LOSS:return j.DATA_LOSS;default:return P()}}(si=ii||(ii={}))[si.OK=0]="OK",si[si.CANCELLED=1]="CANCELLED",si[si.UNKNOWN=2]="UNKNOWN",si[si.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",si[si.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",si[si.NOT_FOUND=5]="NOT_FOUND",si[si.ALREADY_EXISTS=6]="ALREADY_EXISTS",si[si.PERMISSION_DENIED=7]="PERMISSION_DENIED",si[si.UNAUTHENTICATED=16]="UNAUTHENTICATED",si[si.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",si[si.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",si[si.ABORTED=10]="ABORTED",si[si.OUT_OF_RANGE=11]="OUT_OF_RANGE",si[si.UNIMPLEMENTED=12]="UNIMPLEMENTED",si[si.INTERNAL=13]="INTERNAL",si[si.UNAVAILABLE=14]="UNAVAILABLE",si[si.DATA_LOSS=15]="DATA_LOSS";let li=null;function ci(){return new TextEncoder}const ui=new r([4294967295,4294967295],0);function hi(e){const t=ci().encode(e),n=new i;return n.update(t),new Uint8Array(n.digest())}function di(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),i=t.getUint32(4,!0),s=t.getUint32(8,!0),a=t.getUint32(12,!0);return[new r([n,i],0),new r([s,a],0)]}class fi{constructor(e,t,n){if(this.bitmap=e,this.padding=t,this.hashCount=n,t<0||t>=8)throw new pi("Invalid padding: ".concat(t));if(n<0)throw new pi("Invalid hash count: ".concat(n));if(e.length>0&&0===this.hashCount)throw new pi("Invalid hash count: ".concat(n));if(0===e.length&&0!==t)throw new pi("Invalid padding when bitmap length is 0: ".concat(t));this.Te=8*e.length-t,this.Ie=r.fromNumber(this.Te)}Ee(e,t,n){let i=e.add(t.multiply(r.fromNumber(n)));return 1===i.compare(ui)&&(i=new r([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Ie).toNumber()}de(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(0===this.Te)return!1;const t=hi(e),[n,r]=di(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);if(!this.de(e))return!1}return!0}static create(e,t,n){const r=e%8==0?0:8-e%8,i=new Uint8Array(Math.ceil(e/8)),s=new fi(i,r,t);return n.forEach(e=>s.insert(e)),s}insert(e){if(0===this.Te)return;const t=hi(e),[n,r]=di(t);for(let i=0;i<this.hashCount;i++){const e=this.Ee(n,r,i);this.Ae(e)}}Ae(e){const t=Math.floor(e/8),n=e%8;this.bitmap[t]|=1<<n}}class pi extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class gi{constructor(e,t,n,r,i){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(e,t,n){const r=new Map;return r.set(e,mi.createSynthesizedTargetChangeForCurrentChange(e,t,n)),new gi(X.min(),r,new yt(Y),cr(),vr())}}class mi{constructor(e,t,n,r,i){this.resumeToken=e,this.current=t,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(e,t,n){return new mi(n,t,vr(),vr(),vr())}}class yi{constructor(e,t,n,r){this.Re=e,this.removedTargetIds=t,this.key=n,this.Ve=r}}class vi{constructor(e,t){this.targetId=e,this.me=t}}class bi{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt.EMPTY_BYTE_STRING,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;this.state=e,this.targetIds=t,this.resumeToken=n,this.cause=r}}class wi{constructor(){this.fe=0,this.ge=ki(),this.pe=Tt.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return 0!==this.fe}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=vr(),t=vr(),n=vr();return this.ge.forEach((r,i)=>{switch(i){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:n=n.add(r);break;default:P()}}),new mi(this.pe,this.ye,e,t,n)}Ce(){this.we=!1,this.ge=ki()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,N(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class xi{constructor(e){this.Le=e,this.Be=new Map,this.ke=cr(),this.qe=_i(),this.Qe=_i(),this.Ke=new yt(Y)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const n=this.ze(t);switch(e.state){case 0:this.je(t)&&n.De(e.resumeToken);break;case 1:n.Oe(),n.Se||n.Ce(),n.De(e.resumeToken);break;case 2:n.Oe(),n.Se||this.removeTarget(t);break;case 3:this.je(t)&&(n.Ne(),n.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),n.De(e.resumeToken));break;default:P()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((e,n)=>{this.je(n)&&t(n)})}Je(e){const t=e.targetId,n=e.me.count,r=this.Ye(t);if(r){const i=r.target;if(Vn(i))if(0===n){const e=new ie(i.path);this.We(t,e,un.newNoDocument(e,X.min()))}else N(1===n);else{const r=this.Ze(t);if(r!==n){const n=this.Xe(e),i=n?this.et(n,e,r):1;if(0!==i){this.He(t);const e=2===i?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,e)}null==li||li.tt(function(e,t,n,r,i){var s,a,o,l,c,u;const h={localCacheCount:e,existenceFilterCount:t.count,databaseId:n.database,projectId:n.projectId},d=t.unchangedNames;return d&&(h.bloomFilter={applied:0===i,hashCount:null!==(s=null==d?void 0:d.hashCount)&&void 0!==s?s:0,bitmapLength:null!==(l=null===(o=null===(a=null==d?void 0:d.bits)||void 0===a?void 0:a.bitmap)||void 0===o?void 0:o.length)&&void 0!==l?l:0,padding:null!==(u=null===(c=null==d?void 0:d.bits)||void 0===c?void 0:c.padding)&&void 0!==u?u:0,mightContain:e=>{var t;return null!==(t=null==r?void 0:r.mightContain(e))&&void 0!==t&&t}}),h}(r,e.me,this.Le.nt(),n,i))}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:n="",padding:r=0},hashCount:i=0}=t;let s,a;try{s=Dt(n).toUint8Array()}catch(e){if(e instanceof St)return A("Decoding the base64 bloom filter in existence filter failed ("+e.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw e}try{a=new fi(s,r,i)}catch(e){return A(e instanceof pi?"BloomFilter error: ":"Applying bloom filter failed: ",e),null}return 0===a.Te?null:a}et(e,t,n){return t.me.count===n-this.rt(e,t.targetId)?0:2}rt(e,t){const n=this.Le.getRemoteKeysForTarget(t);let r=0;return n.forEach(n=>{const i=this.Le.nt(),s="projects/".concat(i.projectId,"/databases/").concat(i.database,"/documents/").concat(n.path.canonicalString());e.mightContain(s)||(this.We(t,n,null),r++)}),r}it(e){const t=new Map;this.Be.forEach((n,r)=>{const i=this.Ye(r);if(i){if(n.current&&Vn(i.target)){const t=new ie(i.target.path);this.st(t).has(r)||this.ot(r,t)||this.We(r,t,un.newNoDocument(t,e))}n.be&&(t.set(r,n.ve()),n.Ce())}});let n=vr();this.Qe.forEach((e,t)=>{let r=!0;t.forEachWhile(e=>{const t=this.Ye(e);return!t||"TargetPurposeLimboResolution"===t.purpose||(r=!1,!1)}),r&&(n=n.add(e))}),this.ke.forEach((t,n)=>n.setReadTime(e));const r=new gi(e,t,this.Ke,this.ke,n);return this.ke=cr(),this.qe=_i(),this.Qe=_i(),this.Ke=new yt(Y),r}Ue(e,t){if(!this.je(e))return;const n=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,n),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,n){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),n&&(this.ke=this.ke.insert(t,n))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new wi,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new wt(Y),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new wt(Y),this.qe=this.qe.insert(e,t)),t}je(e){const t=null!==this.Ye(e);return t||I("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new wi),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function _i(){return new yt(ie.comparator)}function ki(){return new yt(ie.comparator)}const Si={asc:"ASCENDING",desc:"DESCENDING"},Ei={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Ti={and:"AND",or:"OR"};class Ii{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function Ci(e,t){return e.useProto3Json||Me(t)?t:{value:t}}function Ai(e,t){return e.useProto3Json?"".concat(new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z",""),".").concat(("000000000"+t.nanoseconds).slice(-9),"Z"):{seconds:""+t.seconds,nanos:t.nanoseconds}}function Di(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function Pi(e,t){return Ai(e,t.toTimestamp())}function Ni(e){return N(!!e),X.fromTimestamp(function(e){const t=Ct(e);return new J(t.seconds,t.nanos)}(e))}function Mi(e,t){return Ri(e,t).canonicalString()}function Ri(e,t){const n=function(e){return new te(["projects",e.projectId,"databases",e.database])}(e).child("documents");return void 0===t?n:n.child(t)}function ji(e){const t=te.fromString(e);return N(is(t)),t}function Oi(e,t){return Mi(e.databaseId,t.path)}function Li(e,t){const n=ji(t);if(n.get(1)!==e.databaseId.projectId)throw new O(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new O(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new ie(Ui(n))}function Fi(e,t){return Mi(e.databaseId,t)}function Vi(e){const t=ji(e);return 4===t.length?te.emptyPath():Ui(t)}function zi(e){return new te(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Ui(e){return N(e.length>4&&"documents"===e.get(4)),e.popFirst(5)}function Bi(e,t,n){return{name:Oi(e,t),fields:n.value.mapValue.fields}}function Wi(e,t,n){const r=Li(e,t.name),i=Ni(t.updateTime),s=t.createTime?Ni(t.createTime):X.min(),a=new ln({mapValue:{fields:t.fields}}),o=un.newFoundDocument(r,i,s,a);return n&&o.setHasCommittedMutations(),n?o.setHasCommittedMutations():o}function qi(e,t){let n;if(t instanceof Kr)n={update:Bi(e,t.key,t.value)};else if(t instanceof $r)n={delete:Oi(e,t.key)};else if(t instanceof Gr)n={update:Bi(e,t.key,t.data),updateMask:rs(t.fieldMask)};else{if(!(t instanceof Jr))return P();n={verify:Oi(e,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map(e=>function(e,t){const n=t.transform;if(n instanceof Cr)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof Ar)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Pr)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Mr)return{fieldPath:t.field.canonicalString(),increment:n.Pe};throw P()}(0,e))),t.precondition.isNone||(n.currentDocument=function(e,t){return void 0!==t.updateTime?{updateTime:Pi(e,t.updateTime)}:void 0!==t.exists?{exists:t.exists}:P()}(e,t.precondition)),n}function Hi(e,t){const n=t.currentDocument?function(e){return void 0!==e.updateTime?Fr.updateTime(Ni(e.updateTime)):void 0!==e.exists?Fr.exists(e.exists):Fr.none()}(t.currentDocument):Fr.none(),r=t.updateTransforms?t.updateTransforms.map(t=>function(e,t){let n=null;if("setToServerValue"in t)N("REQUEST_TIME"===t.setToServerValue),n=new Cr;else if("appendMissingElements"in t){const e=t.appendMissingElements.values||[];n=new Ar(e)}else if("removeAllFromArray"in t){const e=t.removeAllFromArray.values||[];n=new Pr(e)}else"increment"in t?n=new Mr(e,t.increment):P();const r=re.fromServerFormat(t.fieldPath);return new Or(r,n)}(e,t)):[];if(t.update){t.update.name;const i=Li(e,t.update.name),s=new ln({mapValue:{fields:t.update.fields}});if(t.updateMask){const e=function(e){const t=e.fieldPaths||[];return new kt(t.map(e=>re.fromServerFormat(e)))}(t.updateMask);return new Gr(i,s,e,n,r)}return new Kr(i,s,n,r)}if(t.delete){const r=Li(e,t.delete);return new $r(r,n)}if(t.verify){const r=Li(e,t.verify);return new Jr(r,n)}return P()}function Ki(e,t){return{documents:[Fi(e,t.path)]}}function Gi(e,t){const n={structuredQuery:{}},r=t.path;let i;null!==t.collectionGroup?(i=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Fi(e,i);const s=function(e){if(0!==e.length)return ns(vn.create(e,"and"))}(t.filters);s&&(n.structuredQuery.where=s);const a=function(e){if(0!==e.length)return e.map(e=>function(e){return{field:es(e.field),direction:$i(e.dir)}}(e))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const o=Ci(e,t.limit);return null!==o&&(n.structuredQuery.limit=o),t.startAt&&(n.structuredQuery.startAt=function(e){return{before:e.inclusive,values:e.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(e){return{before:!e.inclusive,values:e.position}}(t.endAt)),{ct:n,parent:i}}function Qi(e,t,n,r){const{ct:i,parent:s}=Gi(e,t),a={},o=[];let l=0;return n.forEach(e=>{const t=r?e.alias:"aggregate_"+l++;a[t]=e.alias,"count"===e.aggregateType?o.push({alias:t,count:{}}):"avg"===e.aggregateType?o.push({alias:t,avg:{field:es(e.fieldPath)}}):"sum"===e.aggregateType&&o.push({alias:t,sum:{field:es(e.fieldPath)}})}),{request:{structuredAggregationQuery:{aggregations:o,structuredQuery:i.structuredQuery},parent:i.parent},lt:a,parent:s}}function Yi(e){let t=Vi(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){N(1===r);const e=n.from[0];e.allDescendants?i=e.collectionId:t=t.child(e.collectionId)}let s=[];n.where&&(s=function(e){const t=Zi(e);return t instanceof vn&&xn(t)?t.getFilters():[t]}(n.where));let a=[];n.orderBy&&(a=function(e){return e.map(e=>function(e){return new pn(ts(e.field),function(e){switch(e){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(e.direction))}(e))}(n.orderBy));let o=null;n.limit&&(o=function(e){let t;return t="object"==typeof e?e.value:e,Me(t)?null:t}(n.limit));let l=null;n.startAt&&(l=function(e){const t=!!e.before,n=e.values||[];return new hn(n,t)}(n.startAt));let c=null;return n.endAt&&(c=function(e){const t=!e.before,n=e.values||[];return new hn(n,t)}(n.endAt)),qn(t,i,a,s,o,"F",l,c)}function Zi(e){return void 0!==e.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=ts(e.unaryFilter.field);return yn.create(t,"==",{doubleValue:NaN});case"IS_NULL":const n=ts(e.unaryFilter.field);return yn.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const r=ts(e.unaryFilter.field);return yn.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const i=ts(e.unaryFilter.field);return yn.create(i,"!=",{nullValue:"NULL_VALUE"});default:return P()}}(e):void 0!==e.fieldFilter?function(e){return yn.create(ts(e.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return P()}}(e.fieldFilter.op),e.fieldFilter.value)}(e):void 0!==e.compositeFilter?function(e){return vn.create(e.compositeFilter.filters.map(e=>Zi(e)),function(e){switch(e){case"AND":return"and";case"OR":return"or";default:return P()}}(e.compositeFilter.op))}(e):P()}function $i(e){return Si[e]}function Ji(e){return Ei[e]}function Xi(e){return Ti[e]}function es(e){return{fieldPath:e.canonicalString()}}function ts(e){return re.fromServerFormat(e.fieldPath)}function ns(e){return e instanceof yn?function(e){if("=="===e.op){if($t(e.value))return{unaryFilter:{field:es(e.field),op:"IS_NAN"}};if(Zt(e.value))return{unaryFilter:{field:es(e.field),op:"IS_NULL"}}}else if("!="===e.op){if($t(e.value))return{unaryFilter:{field:es(e.field),op:"IS_NOT_NAN"}};if(Zt(e.value))return{unaryFilter:{field:es(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:es(e.field),op:Ji(e.op),value:e.value}}}(e):e instanceof vn?function(e){const t=e.getFilters().map(e=>ns(e));return 1===t.length?t[0]:{compositeFilter:{op:Xi(e.op),filters:t}}}(e):P()}function rs(e){const t=[];return e.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function is(e){return e.length>=4&&"projects"===e.get(0)&&"databases"===e.get(2)}class ss{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:X.min(),s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:X.min(),a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:Tt.EMPTY_BYTE_STRING,o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null;this.target=e,this.targetId=t,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=a,this.expectedCount=o}withSequenceNumber(e){return new ss(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ss(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class as{constructor(e){this.ht=e}}function os(e,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:ls(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=function(e,t){return{name:Oi(e,t.key),fields:t.data.value.mapValue.fields,updateTime:Ai(e,t.version.toTimestamp()),createTime:Ai(e,t.createTime.toTimestamp())}}(e.ht,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:cs(t.version)};else{if(!t.isUnknownDocument())return P();r.unknownDocument={path:n.path.toArray(),version:cs(t.version)}}return r}function ls(e){const t=e.toTimestamp();return[t.seconds,t.nanoseconds]}function cs(e){const t=e.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function us(e){const t=new J(e.seconds,e.nanoseconds);return X.fromTimestamp(t)}function hs(e,t){const n=(t.baseMutations||[]).map(t=>Hi(e.ht,t));for(let s=0;s<t.mutations.length-1;++s){const e=t.mutations[s];if(s+1<t.mutations.length&&void 0!==t.mutations[s+1].transform){const n=t.mutations[s+1];e.updateTransforms=n.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}const r=t.mutations.map(t=>Hi(e.ht,t)),i=J.fromMillis(t.localWriteTimeMs);return new Xr(t.batchId,i,n,r)}function ds(e){const t=us(e.readTime),n=void 0!==e.lastLimboFreeSnapshotVersion?us(e.lastLimboFreeSnapshotVersion):X.min();let r;return r=function(e){return void 0!==e.documents}(e.query)?function(e){return N(1===e.documents.length),Yn(Hn(Vi(e.documents[0])))}(e.query):function(e){return Yn(Yi(e))}(e.query),new ss(r,e.targetId,"TargetPurposeListen",e.lastListenSequenceNumber,t,n,Tt.fromBase64String(e.resumeToken))}function fs(e,t){const n=cs(t.snapshotVersion),r=cs(t.lastLimboFreeSnapshotVersion);let i;i=Vn(t.target)?Ki(e.ht,t.target):Gi(e.ht,t.target).ct;const s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:Ln(t.target),readTime:n,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function ps(e){const t=Yi({parent:e.parent,structuredQuery:e.structuredQuery});return"LAST"===e.limitType?Xn(t,t.limit,"L"):t}function gs(e,t){return new ti(t.largestBatchId,Hi(e.ht,t.overlayMutation))}function ms(e,t){const n=t.path.lastSegment();return[e,Oe(t.path.popLast()),n]}function ys(e,t,n,r){return{indexId:e,uid:t,sequenceNumber:n,readTime:cs(r.readTime),documentKey:Oe(r.documentKey.path),largestBatchId:r.largestBatchId}}class vs{getBundleMetadata(e,t){return bs(e).get(t).next(e=>{if(e)return function(e){return{id:e.bundleId,createTime:us(e.createTime),version:e.version}}(e)})}saveBundleMetadata(e,t){return bs(e).put(function(e){return{bundleId:e.id,createTime:cs(Ni(e.createTime)),version:e.version}}(t))}getNamedQuery(e,t){return ws(e).get(t).next(e=>{if(e)return function(e){return{name:e.name,query:ps(e.bundledQuery),readTime:us(e.readTime)}}(e)})}saveNamedQuery(e,t){return ws(e).put(function(e){return{name:e.name,readTime:cs(Ni(e.readTime)),bundledQuery:e.bundledQuery}}(t))}}function bs(e){return dt(e,"bundles")}function ws(e){return dt(e,"namedQueries")}class xs{constructor(e,t){this.serializer=e,this.userId=t}static Pt(e,t){const n=t.uid||"";return new xs(e,n)}getOverlay(e,t){return _s(e).get(ms(this.userId,t)).next(e=>e?gs(this.serializer,e):null)}getOverlays(e,t){const n=fr();return be.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){const r=[];return n.forEach((n,i)=>{const s=new ti(t,i);r.push(this.Tt(e,s))}),be.waitFor(r)}removeOverlaysForBatchId(e,t,n){const r=new Set;t.forEach(e=>r.add(Oe(e.getCollectionPath())));const i=[];return r.forEach(t=>{const r=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,n+1],!1,!0);i.push(_s(e).j("collectionPathOverlayIndex",r))}),be.waitFor(i)}getOverlaysForCollection(e,t,n){const r=fr(),i=Oe(t),s=IDBKeyRange.bound([this.userId,i,n],[this.userId,i,Number.POSITIVE_INFINITY],!0);return _s(e).U("collectionPathOverlayIndex",s).next(e=>{for(const t of e){const e=gs(this.serializer,t);r.set(e.getKey(),e)}return r})}getOverlaysForCollectionGroup(e,t,n,r){const i=fr();let s;const a=IDBKeyRange.bound([this.userId,t,n],[this.userId,t,Number.POSITIVE_INFINITY],!0);return _s(e).J({index:"collectionGroupOverlayIndex",range:a},(e,t,n)=>{const a=gs(this.serializer,t);i.size()<r||a.largestBatchId===s?(i.set(a.getKey(),a),s=a.largestBatchId):n.done()}).next(()=>i)}Tt(e,t){return _s(e).put(function(e,t,n){const[r,i,s]=ms(t,n.mutation.key);return{userId:t,collectionPath:i,documentId:s,collectionGroup:n.mutation.key.getCollectionGroup(),largestBatchId:n.largestBatchId,overlayMutation:qi(e.ht,n.mutation)}}(this.serializer,this.userId,t))}}function _s(e){return dt(e,"documentOverlays")}class ks{It(e){return dt(e,"globals")}getSessionToken(e){return this.It(e).get("sessionToken").next(e=>{const t=null==e?void 0:e.value;return t?Tt.fromUint8Array(t):Tt.EMPTY_BYTE_STRING})}setSessionToken(e,t){return this.It(e).put({name:"sessionToken",value:t.toUint8Array()})}}class Ss{constructor(){}Et(e,t){this.dt(e,t),t.At()}dt(e,t){if("nullValue"in e)this.Rt(t,5);else if("booleanValue"in e)this.Rt(t,10),t.Vt(e.booleanValue?1:0);else if("integerValue"in e)this.Rt(t,15),t.Vt(At(e.integerValue));else if("doubleValue"in e){const n=At(e.doubleValue);isNaN(n)?this.Rt(t,13):(this.Rt(t,15),Re(n)?t.Vt(0):t.Vt(n))}else if("timestampValue"in e){let n=e.timestampValue;this.Rt(t,20),"string"==typeof n&&(n=Ct(n)),t.ft("".concat(n.seconds||"")),t.Vt(n.nanos||0)}else if("stringValue"in e)this.gt(e.stringValue,t),this.yt(t);else if("bytesValue"in e)this.Rt(t,30),t.wt(Dt(e.bytesValue)),this.yt(t);else if("referenceValue"in e)this.St(e.referenceValue,t);else if("geoPointValue"in e){const n=e.geoPointValue;this.Rt(t,45),t.Vt(n.latitude||0),t.Vt(n.longitude||0)}else"mapValue"in e?tn(e)?this.Rt(t,Number.MAX_SAFE_INTEGER):Xt(e)?this.bt(e.mapValue,t):(this.Dt(e.mapValue,t),this.yt(t)):"arrayValue"in e?(this.vt(e.arrayValue,t),this.yt(t)):P()}gt(e,t){this.Rt(t,25),this.Ct(e,t)}Ct(e,t){t.ft(e)}Dt(e,t){const n=e.fields||{};this.Rt(t,55);for(const r of Object.keys(n))this.gt(r,t),this.dt(n[r],t)}bt(e,t){var n,r;const i=e.fields||{};this.Rt(t,53);const s="value",a=(null===(r=null===(n=i[s].arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.length)||0;this.Rt(t,15),t.Vt(At(a)),this.gt(s,t),this.dt(i[s],t)}vt(e,t){const n=e.values||[];this.Rt(t,50);for(const r of n)this.dt(r,t)}St(e,t){this.Rt(t,37),ie.fromName(e).path.forEach(e=>{this.Rt(t,60),this.Ct(e,t)})}Rt(e,t){e.Vt(t)}yt(e){e.Vt(2)}}function Es(e){if(0===e)return 8;let t=0;return e>>4==0&&(t+=4,e<<=4),e>>6==0&&(t+=2,e<<=2),e>>7==0&&(t+=1),t}function Ts(e){const t=64-function(e){let t=0;for(let n=0;n<8;++n){const r=Es(255&e[n]);if(t+=r,8!==r)break}return t}(e);return Math.ceil(t/8)}Ss.Ft=new Ss;class Is{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Mt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.xt(n.value),n=t.next();this.Ot()}Nt(e){const t=e[Symbol.iterator]();let n=t.next();for(;!n.done;)this.Lt(n.value),n=t.next();this.Bt()}kt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.xt(e);else if(e<2048)this.xt(960|e>>>6),this.xt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.xt(480|e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e);else{const e=t.codePointAt(0);this.xt(240|e>>>18),this.xt(128|63&e>>>12),this.xt(128|63&e>>>6),this.xt(128|63&e)}}this.Ot()}qt(e){for(const t of e){const e=t.charCodeAt(0);if(e<128)this.Lt(e);else if(e<2048)this.Lt(960|e>>>6),this.Lt(128|63&e);else if(t<"\ud800"||"\udbff"<t)this.Lt(480|e>>>12),this.Lt(128|63&e>>>6),this.Lt(128|63&e);else{const e=t.codePointAt(0);this.Lt(240|e>>>18),this.Lt(128|63&e>>>12),this.Lt(128|63&e>>>6),this.Lt(128|63&e)}}this.Bt()}Qt(e){const t=this.Kt(e),n=Ts(t);this.$t(1+n),this.buffer[this.position++]=255&n;for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=255&t[r]}Ut(e){const t=this.Kt(e),n=Ts(t);this.$t(1+n),this.buffer[this.position++]=~(255&n);for(let r=t.length-n;r<t.length;++r)this.buffer[this.position++]=~(255&t[r])}Wt(){this.Gt(255),this.Gt(255)}zt(){this.jt(255),this.jt(255)}reset(){this.position=0}seed(e){this.$t(e.length),this.buffer.set(e,this.position),this.position+=e.length}Ht(){return this.buffer.slice(0,this.position)}Kt(e){const t=function(e){const t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,e,!1),new Uint8Array(t.buffer)}(e),n=0!=(128&t[0]);t[0]^=n?255:128;for(let r=1;r<t.length;++r)t[r]^=n?255:0;return t}xt(e){const t=255&e;0===t?(this.Gt(0),this.Gt(255)):255===t?(this.Gt(255),this.Gt(0)):this.Gt(t)}Lt(e){const t=255&e;0===t?(this.jt(0),this.jt(255)):255===t?(this.jt(255),this.jt(0)):this.jt(e)}Ot(){this.Gt(0),this.Gt(1)}Bt(){this.jt(0),this.jt(1)}Gt(e){this.$t(1),this.buffer[this.position++]=e}jt(e){this.$t(1),this.buffer[this.position++]=~e}$t(e){const t=e+this.position;if(t<=this.buffer.length)return;let n=2*this.buffer.length;n<t&&(n=t);const r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}}class Cs{constructor(e){this.Jt=e}wt(e){this.Jt.Mt(e)}ft(e){this.Jt.kt(e)}Vt(e){this.Jt.Qt(e)}At(){this.Jt.Wt()}}class As{constructor(e){this.Jt=e}wt(e){this.Jt.Nt(e)}ft(e){this.Jt.qt(e)}Vt(e){this.Jt.Ut(e)}At(){this.Jt.zt()}}class Ds{constructor(){this.Jt=new Is,this.Yt=new Cs(this.Jt),this.Zt=new As(this.Jt)}seed(e){this.Jt.seed(e)}Xt(e){return 0===e?this.Yt:this.Zt}Ht(){return this.Jt.Ht()}reset(){this.Jt.reset()}}class Ps{constructor(e,t,n,r){this.indexId=e,this.documentKey=t,this.arrayValue=n,this.directionalValue=r}en(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,n=new Uint8Array(t);return n.set(this.directionalValue,0),t!==e?n.set([0],this.directionalValue.length):++n[n.length-1],new Ps(this.indexId,this.documentKey,this.arrayValue,n)}}function Ns(e,t){let n=e.indexId-t.indexId;return 0!==n?n:(n=Ms(e.arrayValue,t.arrayValue),0!==n?n:(n=Ms(e.directionalValue,t.directionalValue),0!==n?n:ie.comparator(e.documentKey,t.documentKey)))}function Ms(e,t){for(let n=0;n<e.length&&n<t.length;++n){const r=e[n]-t[n];if(0!==r)return r}return e.length-t.length}class Rs{constructor(e){this.tn=new wt((e,t)=>re.comparator(e.field,t.field)),this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.nn=e.orderBy,this.rn=[];for(const t of e.filters){const e=t;e.isInequality()?this.tn=this.tn.add(e):this.rn.push(e)}}get sn(){return this.tn.size>1}on(e){if(N(e.collectionGroup===this.collectionId),this.sn)return!1;const t=ae(e);if(void 0!==t&&!this._n(t))return!1;const n=oe(e);let r=new Set,i=0,s=0;for(;i<n.length&&this._n(n[i]);++i)r=r.add(n[i].fieldPath.canonicalString());if(i===n.length)return!0;if(this.tn.size>0){const e=this.tn.getIterator().getNext();if(!r.has(e.field.canonicalString())){const t=n[i];if(!this.an(e,t)||!this.un(this.nn[s++],t))return!1}++i}for(;i<n.length;++i){const e=n[i];if(s>=this.nn.length||!this.un(this.nn[s++],e))return!1}return!0}cn(){if(this.sn)return null;let e=new wt(re.comparator);const t=[];for(const n of this.rn)if(!n.field.isKeyField())if("array-contains"===n.op||"array-contains-any"===n.op)t.push(new ce(n.field,2));else{if(e.has(n.field))continue;e=e.add(n.field),t.push(new ce(n.field,0))}for(const n of this.nn)n.field.isKeyField()||e.has(n.field)||(e=e.add(n.field),t.push(new ce(n.field,"asc"===n.dir?0:1)));return new se(se.UNKNOWN_ID,this.collectionId,t,he.empty())}_n(e){for(const t of this.rn)if(this.an(t,e))return!0;return!1}an(e,t){if(void 0===e||!e.field.isEqual(t.fieldPath))return!1;const n="array-contains"===e.op||"array-contains-any"===e.op;return 2===t.kind===n}un(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function js(e){var t,n;if(N(e instanceof yn||e instanceof vn),e instanceof yn){if(e instanceof Nn){const r=(null===(n=null===(t=e.value.arrayValue)||void 0===t?void 0:t.values)||void 0===n?void 0:n.map(t=>yn.create(e.field,"==",t)))||[];return vn.create(r,"or")}return e}const r=e.filters.map(e=>js(e));return vn.create(r,e.op)}function Os(e){if(0===e.getFilters().length)return[];const t=zs(js(e));return N(Vs(t)),Ls(t)||Fs(t)?[t]:t.getFilters()}function Ls(e){return e instanceof yn}function Fs(e){return e instanceof vn&&xn(e)}function Vs(e){return Ls(e)||Fs(e)||function(e){if(e instanceof vn&&wn(e)){for(const t of e.getFilters())if(!Ls(t)&&!Fs(t))return!1;return!0}return!1}(e)}function zs(e){if(N(e instanceof yn||e instanceof vn),e instanceof yn)return e;if(1===e.filters.length)return zs(e.filters[0]);const t=e.filters.map(e=>zs(e));let n=vn.create(t,e.op);return n=Ws(n),Vs(n)?n:(N(n instanceof vn),N(bn(n)),N(n.filters.length>1),n.filters.reduce((e,t)=>Us(e,t)))}function Us(e,t){let n;return N(e instanceof yn||e instanceof vn),N(t instanceof yn||t instanceof vn),n=e instanceof yn?t instanceof yn?function(e,t){return vn.create([e,t],"and")}(e,t):Bs(e,t):t instanceof yn?Bs(t,e):function(e,t){if(N(e.filters.length>0&&t.filters.length>0),bn(e)&&bn(t))return En(e,t.getFilters());const n=wn(e)?e:t,r=wn(e)?t:e,i=n.filters.map(e=>Us(e,r));return vn.create(i,"or")}(e,t),Ws(n)}function Bs(e,t){if(bn(t))return En(t,e.getFilters());{const n=t.filters.map(t=>Us(e,t));return vn.create(n,"or")}}function Ws(e){if(N(e instanceof yn||e instanceof vn),e instanceof yn)return e;const t=e.getFilters();if(1===t.length)return Ws(t[0]);if(_n(e))return e;const n=t.map(e=>Ws(e)),r=[];return n.forEach(t=>{t instanceof yn?r.push(t):t instanceof vn&&(t.op===e.op?r.push(...t.filters):r.push(t))}),1===r.length?r[0]:vn.create(r,e.op)}class qs{constructor(){this.ln=new Hs}addToCollectionParentIndex(e,t){return this.ln.add(t),be.resolve()}getCollectionParents(e,t){return be.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return be.resolve()}deleteFieldIndex(e,t){return be.resolve()}deleteAllFieldIndexes(e){return be.resolve()}createTargetIndexes(e,t){return be.resolve()}getDocumentsMatchingTarget(e,t){return be.resolve(null)}getIndexType(e,t){return be.resolve(0)}getFieldIndexes(e,t){return be.resolve([])}getNextCollectionGroupToUpdate(e){return be.resolve(null)}getMinOffset(e,t){return be.resolve(pe.min())}getMinOffsetFromCollectionGroup(e,t){return be.resolve(pe.min())}updateCollectionGroup(e,t,n){return be.resolve()}updateIndexEntries(e,t){return be.resolve()}}class Hs{constructor(){this.index={}}add(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t]||new wt(te.comparator),i=!r.has(n);return this.index[t]=r.add(n),i}has(e){const t=e.lastSegment(),n=e.popLast(),r=this.index[t];return r&&r.has(n)}getEntries(e){return(this.index[e]||new wt(te.comparator)).toArray()}}const Ks=new Uint8Array(0);class Gs{constructor(e,t){this.databaseId=t,this.hn=new Hs,this.Pn=new or(e=>Ln(e),(e,t)=>Fn(e,t)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.hn.has(t)){const n=t.lastSegment(),r=t.popLast();e.addOnCommittedListener(()=>{this.hn.add(t)});const i={collectionId:n,parent:Oe(r)};return Qs(e).put(i)}return be.resolve()}getCollectionParents(e,t){const n=[],r=IDBKeyRange.bound([t,""],[$(t),""],!1,!0);return Qs(e).U(r).next(e=>{for(const r of e){if(r.collectionId!==t)break;n.push(Ve(r.parent))}return n})}addFieldIndex(e,t){const n=Zs(e),r=function(e){return{indexId:e.indexId,collectionGroup:e.collectionGroup,fields:e.fields.map(e=>[e.fieldPath.canonicalString(),e.kind])}}(t);delete r.indexId;const i=n.add(r);if(t.indexState){const n=$s(e);return i.next(e=>{n.put(ys(e,this.uid,t.indexState.sequenceNumber,t.indexState.offset))})}return i.next()}deleteFieldIndex(e,t){const n=Zs(e),r=$s(e),i=Ys(e);return n.delete(t.indexId).next(()=>r.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}deleteAllFieldIndexes(e){const t=Zs(e),n=Ys(e),r=$s(e);return t.j().next(()=>n.j()).next(()=>r.j())}createTargetIndexes(e,t){return be.forEach(this.Tn(t),t=>this.getIndexType(e,t).next(n=>{if(0===n||1===n){const n=new Rs(t).cn();if(null!=n)return this.addFieldIndex(e,n)}}))}getDocumentsMatchingTarget(e,t){const n=Ys(e);let r=!0;const i=new Map;return be.forEach(this.Tn(t),t=>this.In(e,t).next(e=>{r&&(r=!!e),i.set(t,e)})).next(()=>{if(r){let e=vr();const r=[];return be.forEach(i,(i,s)=>{I("IndexedDbIndexManager","Using index ".concat(function(e){return"id=".concat(e.indexId,"|cg=").concat(e.collectionGroup,"|f=").concat(e.fields.map(e=>"".concat(e.fieldPath,":").concat(e.kind)).join(","))}(i)," to execute ").concat(Ln(t)));const a=function(e,t){const n=ae(t);if(void 0===n)return null;for(const r of zn(e,n.fieldPath))switch(r.op){case"array-contains-any":return r.value.arrayValue.values||[];case"array-contains":return[r.value]}return null}(s,i),o=function(e,t){const n=new Map;for(const r of oe(t))for(const t of zn(e,r.fieldPath))switch(t.op){case"==":case"in":n.set(r.fieldPath.canonicalString(),t.value);break;case"not-in":case"!=":return n.set(r.fieldPath.canonicalString(),t.value),Array.from(n.values())}return null}(s,i),l=function(e,t){const n=[];let r=!0;for(const i of oe(t)){const t=0===i.kind?Un(e,i.fieldPath,e.startAt):Bn(e,i.fieldPath,e.startAt);n.push(t.value),r&&(r=t.inclusive)}return new hn(n,r)}(s,i),c=function(e,t){const n=[];let r=!0;for(const i of oe(t)){const t=0===i.kind?Bn(e,i.fieldPath,e.endAt):Un(e,i.fieldPath,e.endAt);n.push(t.value),r&&(r=t.inclusive)}return new hn(n,r)}(s,i),u=this.En(i,s,l),h=this.En(i,s,c),d=this.dn(i,s,o),f=this.An(i.indexId,a,u,l.inclusive,h,c.inclusive,d);return be.forEach(f,i=>n.G(i,t.limit).next(t=>{t.forEach(t=>{const n=ie.fromSegments(t.documentKey);e.has(n)||(e=e.add(n),r.push(n))})}))}).next(()=>r)}return be.resolve(null)})}Tn(e){let t=this.Pn.get(e);return t||(t=0===e.filters.length?[e]:Os(vn.create(e.filters,"and")).map(t=>On(e.path,e.collectionGroup,e.orderBy,t.getFilters(),e.limit,e.startAt,e.endAt)),this.Pn.set(e,t),t)}An(e,t,n,r,i,s,a){const o=(null!=t?t.length:1)*Math.max(n.length,i.length),l=o/(null!=t?t.length:1),c=[];for(let u=0;u<o;++u){const o=t?this.Rn(t[u/l]):Ks,h=this.Vn(e,o,n[u%l],r),d=this.mn(e,o,i[u%l],s),f=a.map(t=>this.Vn(e,o,t,!0));c.push(...this.createRange(h,d,f))}return c}Vn(e,t,n,r){const i=new Ps(e,ie.empty(),t,n);return r?i:i.en()}mn(e,t,n,r){const i=new Ps(e,ie.empty(),t,n);return r?i.en():i}In(e,t){const n=new Rs(t),r=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,r).next(e=>{let t=null;for(const r of e)n.on(r)&&(!t||r.fields.length>t.fields.length)&&(t=r);return t})}getIndexType(e,t){let n=2;const r=this.Tn(t);return be.forEach(r,t=>this.In(e,t).next(e=>{e?0!==n&&e.fields.length<function(e){let t=new wt(re.comparator),n=!1;for(const r of e.filters)for(const e of r.getFlattenedFilters())e.field.isKeyField()||("array-contains"===e.op||"array-contains-any"===e.op?n=!0:t=t.add(e.field));for(const r of e.orderBy)r.field.isKeyField()||(t=t.add(r.field));return t.size+(n?1:0)}(t)&&(n=1):n=0})).next(()=>function(e){return null!==e.limit}(t)&&r.length>1&&2===n?1:n)}fn(e,t){const n=new Ds;for(const r of oe(e)){const e=t.data.field(r.fieldPath);if(null==e)return null;const i=n.Xt(r.kind);Ss.Ft.Et(e,i)}return n.Ht()}Rn(e){const t=new Ds;return Ss.Ft.Et(e,t.Xt(0)),t.Ht()}gn(e,t){const n=new Ds;return Ss.Ft.Et(Gt(this.databaseId,t),n.Xt(function(e){const t=oe(e);return 0===t.length?0:t[t.length-1].kind}(e))),n.Ht()}dn(e,t,n){if(null===n)return[];let r=[];r.push(new Ds);let i=0;for(const s of oe(e)){const e=n[i++];for(const n of r)if(this.pn(t,s.fieldPath)&&Yt(e))r=this.yn(r,s,e);else{const t=n.Xt(s.kind);Ss.Ft.Et(e,t)}}return this.wn(r)}En(e,t,n){return this.dn(e,t,n.position)}wn(e){const t=[];for(let n=0;n<e.length;++n)t[n]=e[n].Ht();return t}yn(e,t,n){const r=[...e],i=[];for(const s of n.arrayValue.values||[])for(const e of r){const n=new Ds;n.seed(e.Ht()),Ss.Ft.Et(s,n.Xt(t.kind)),i.push(n)}return i}pn(e,t){return!!e.filters.find(e=>e instanceof yn&&e.field.isEqual(t)&&("in"===e.op||"not-in"===e.op))}getFieldIndexes(e,t){const n=Zs(e),r=$s(e);return(t?n.U("collectionGroupIndex",IDBKeyRange.bound(t,t)):n.U()).next(e=>{const t=[];return be.forEach(e,e=>r.get([e.indexId,this.uid]).next(n=>{t.push(function(e,t){const n=t?new he(t.sequenceNumber,new pe(us(t.readTime),new ie(Ve(t.documentKey)),t.largestBatchId)):he.empty(),r=e.fields.map(e=>{let[t,n]=e;return new ce(re.fromServerFormat(t),n)});return new se(e.indexId,e.collectionGroup,r,n)}(e,n))})).next(()=>t)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(e=>0===e.length?null:(e.sort((e,t)=>{const n=e.indexState.sequenceNumber-t.indexState.sequenceNumber;return 0!==n?n:Y(e.collectionGroup,t.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(e,t,n){const r=Zs(e),i=$s(e);return this.Sn(e).next(e=>r.U("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(t=>be.forEach(t,t=>i.put(ys(t.indexId,this.uid,e,n)))))}updateIndexEntries(e,t){const n=new Map;return be.forEach(t,(t,r)=>{const i=n.get(t.collectionGroup);return(i?be.resolve(i):this.getFieldIndexes(e,t.collectionGroup)).next(i=>(n.set(t.collectionGroup,i),be.forEach(i,n=>this.bn(e,t,n).next(t=>{const i=this.Dn(r,n);return t.isEqual(i)?be.resolve():this.vn(e,r,n,t,i)}))))})}Cn(e,t,n,r){return Ys(e).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.gn(n,t.key),documentKey:t.key.path.toArray()})}Fn(e,t,n,r){return Ys(e).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.gn(n,t.key),t.key.path.toArray()])}bn(e,t,n){const r=Ys(e);let i=new wt(Ns);return r.J({index:"documentKeyIndex",range:IDBKeyRange.only([n.indexId,this.uid,this.gn(n,t)])},(e,r)=>{i=i.add(new Ps(n.indexId,t,r.arrayValue,r.directionalValue))}).next(()=>i)}Dn(e,t){let n=new wt(Ns);const r=this.fn(t,e);if(null==r)return n;const i=ae(t);if(null!=i){const s=e.data.field(i.fieldPath);if(Yt(s))for(const i of s.arrayValue.values||[])n=n.add(new Ps(t.indexId,e.key,this.Rn(i),r))}else n=n.add(new Ps(t.indexId,e.key,Ks,r));return n}vn(e,t,n,r,i){I("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const s=[];return function(e,t,n,r,i){const s=e.getIterator(),a=t.getIterator();let o=_t(s),l=_t(a);for(;o||l;){let e=!1,t=!1;if(o&&l){const r=n(o,l);r<0?t=!0:r>0&&(e=!0)}else null!=o?t=!0:e=!0;e?(r(l),l=_t(a)):t?(i(o),o=_t(s)):(o=_t(s),l=_t(a))}}(r,i,Ns,r=>{s.push(this.Cn(e,t,n,r))},r=>{s.push(this.Fn(e,t,n,r))}),be.waitFor(s)}Sn(e){let t=1;return $s(e).J({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(e,n,r)=>{r.done(),t=n.sequenceNumber+1}).next(()=>t)}createRange(e,t,n){n=n.sort((e,t)=>Ns(e,t)).filter((e,t,n)=>!t||0!==Ns(e,n[t-1]));const r=[];r.push(e);for(const s of n){const n=Ns(s,e),i=Ns(s,t);if(0===n)r[0]=e.en();else if(n>0&&i<0)r.push(s),r.push(s.en());else if(i>0)break}r.push(t);const i=[];for(let s=0;s<r.length;s+=2){if(this.Mn(r[s],r[s+1]))return[];const e=[r[s].indexId,this.uid,r[s].arrayValue,r[s].directionalValue,Ks,[]],t=[r[s+1].indexId,this.uid,r[s+1].arrayValue,r[s+1].directionalValue,Ks,[]];i.push(IDBKeyRange.bound(e,t))}return i}Mn(e,t){return Ns(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(Js)}getMinOffset(e,t){return be.mapArray(this.Tn(t),t=>this.In(e,t).next(e=>e||P())).next(Js)}}function Qs(e){return dt(e,"collectionParents")}function Ys(e){return dt(e,"indexEntries")}function Zs(e){return dt(e,"indexConfiguration")}function $s(e){return dt(e,"indexState")}function Js(e){N(0!==e.length);let t=e[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<e.length;r++){const i=e[r].indexState.offset;ge(i,t)<0&&(t=i),n<i.largestBatchId&&(n=i.largestBatchId)}return new pe(t.readTime,t.documentKey,n)}const Xs={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ea{static withCacheSize(e){return new ea(e,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,n){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=n}}function ta(e,t,n){const r=e.store("mutations"),i=e.store("documentMutations"),s=[],a=IDBKeyRange.only(n.batchId);let o=0;const l=r.J({range:a},(e,t,n)=>(o++,n.delete()));s.push(l.next(()=>{N(1===o)}));const c=[];for(const u of n.mutations){const e=Be(t,u.key.path,n.batchId);s.push(i.delete(e)),c.push(u.key)}return be.waitFor(s).next(()=>c)}function na(e){if(!e)return 0;let t;if(e.document)t=e.document;else if(e.unknownDocument)t=e.unknownDocument;else{if(!e.noDocument)throw P();t=e.noDocument}return JSON.stringify(t).length}ea.DEFAULT_COLLECTION_PERCENTILE=10,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ea.DEFAULT=new ea(41943040,ea.DEFAULT_COLLECTION_PERCENTILE,ea.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ea.DISABLED=new ea(-1,0,0);class ra{constructor(e,t,n,r){this.userId=e,this.serializer=t,this.indexManager=n,this.referenceDelegate=r,this.xn={}}static Pt(e,t,n,r){N(""!==e.uid);const i=e.isAuthenticated()?e.uid:"";return new ra(i,t,n,r)}checkEmpty(e){let t=!0;const n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).J({index:"userMutationsIndex",range:n},(e,n,r)=>{t=!1,r.done()}).next(()=>t)}addMutationBatch(e,t,n,r){const i=aa(e),s=sa(e);return s.add({}).next(a=>{N("number"==typeof a);const o=new Xr(a,t,n,r),l=function(e,t,n){const r=n.baseMutations.map(t=>qi(e.ht,t)),i=n.mutations.map(t=>qi(e.ht,t));return{userId:t,batchId:n.batchId,localWriteTimeMs:n.localWriteTime.toMillis(),baseMutations:r,mutations:i}}(this.serializer,this.userId,o),c=[];let u=new wt((e,t)=>Y(e.canonicalString(),t.canonicalString()));for(const e of r){const t=Be(this.userId,e.key.path,a);u=u.add(e.key.path.popLast()),c.push(s.put(l)),c.push(i.put(t,We))}return u.forEach(t=>{c.push(this.indexManager.addToCollectionParentIndex(e,t))}),e.addOnCommittedListener(()=>{this.xn[a]=o.keys()}),be.waitFor(c).next(()=>o)})}lookupMutationBatch(e,t){return sa(e).get(t).next(e=>e?(N(e.userId===this.userId),hs(this.serializer,e)):null)}On(e,t){return this.xn[t]?be.resolve(this.xn[t]):this.lookupMutationBatch(e,t).next(e=>{if(e){const n=e.keys();return this.xn[t]=n,n}return null})}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=IDBKeyRange.lowerBound([this.userId,n]);let i=null;return sa(e).J({index:"userMutationsIndex",range:r},(e,t,r)=>{t.userId===this.userId&&(N(t.batchId>=n),i=hs(this.serializer,t)),r.done()}).next(()=>i)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let n=-1;return sa(e).J({index:"userMutationsIndex",range:t,reverse:!0},(e,t,r)=>{n=t.batchId,r.done()}).next(()=>n)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return sa(e).U("userMutationsIndex",t).next(e=>e.map(e=>hs(this.serializer,e)))}getAllMutationBatchesAffectingDocumentKey(e,t){const n=Ue(this.userId,t.path),r=IDBKeyRange.lowerBound(n),i=[];return aa(e).J({range:r},(n,r,s)=>{const[a,o,l]=n,c=Ve(o);if(a===this.userId&&t.path.isEqual(c))return sa(e).get(l).next(e=>{if(!e)throw P();N(e.userId===this.userId),i.push(hs(this.serializer,e))});s.done()}).next(()=>i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wt(Y);const r=[];return t.forEach(t=>{const i=Ue(this.userId,t.path),s=IDBKeyRange.lowerBound(i),a=aa(e).J({range:s},(e,r,i)=>{const[s,a,o]=e,l=Ve(a);s===this.userId&&t.path.isEqual(l)?n=n.add(o):i.done()});r.push(a)}),be.waitFor(r).next(()=>this.Nn(e,n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1,i=Ue(this.userId,n),s=IDBKeyRange.lowerBound(i);let a=new wt(Y);return aa(e).J({range:s},(e,t,i)=>{const[s,o,l]=e,c=Ve(o);s===this.userId&&n.isPrefixOf(c)?c.length===r&&(a=a.add(l)):i.done()}).next(()=>this.Nn(e,a))}Nn(e,t){const n=[],r=[];return t.forEach(t=>{r.push(sa(e).get(t).next(e=>{if(null===e)throw P();N(e.userId===this.userId),n.push(hs(this.serializer,e))}))}),be.waitFor(r).next(()=>n)}removeMutationBatch(e,t){return ta(e._e,this.userId,t).next(n=>(e.addOnCommittedListener(()=>{this.Ln(t.batchId)}),be.forEach(n,t=>this.referenceDelegate.markPotentiallyOrphaned(e,t))))}Ln(e){delete this.xn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return be.resolve();const n=IDBKeyRange.lowerBound(function(e){return[e]}(this.userId)),r=[];return aa(e).J({range:n},(e,t,n)=>{if(e[0]===this.userId){const t=Ve(e[1]);r.push(t)}else n.done()}).next(()=>{N(0===r.length)})})}containsKey(e,t){return ia(e,this.userId,t)}Bn(e){return oa(e).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function ia(e,t,n){const r=Ue(t,n.path),i=r[1],s=IDBKeyRange.lowerBound(r);let a=!1;return aa(e).J({range:s,H:!0},(e,n,r)=>{const[s,o,l]=e;s===t&&o===i&&(a=!0),r.done()}).next(()=>a)}function sa(e){return dt(e,"mutations")}function aa(e){return dt(e,"documentMutations")}function oa(e){return dt(e,"mutationQueues")}class la{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new la(0)}static Qn(){return new la(-1)}}class ca{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.Kn(e).next(t=>{const n=new la(t.highestTargetId);return t.highestTargetId=n.next(),this.$n(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.Kn(e).next(e=>X.fromTimestamp(new J(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.Kn(e).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(e,t,n){return this.Kn(e).next(r=>(r.highestListenSequenceNumber=t,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),t>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=t),this.$n(e,r)))}addTargetData(e,t){return this.Un(e,t).next(()=>this.Kn(e).next(n=>(n.targetCount+=1,this.Wn(t,n),this.$n(e,n))))}updateTargetData(e,t){return this.Un(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>ua(e).delete(t.targetId)).next(()=>this.Kn(e)).next(t=>(N(t.targetCount>0),t.targetCount-=1,this.$n(e,t)))}removeTargets(e,t,n){let r=0;const i=[];return ua(e).J((s,a)=>{const o=ds(a);o.sequenceNumber<=t&&null===n.get(o.targetId)&&(r++,i.push(this.removeTargetData(e,o)))}).next(()=>be.waitFor(i)).next(()=>r)}forEachTarget(e,t){return ua(e).J((e,n)=>{const r=ds(n);t(r)})}Kn(e){return ha(e).get("targetGlobalKey").next(e=>(N(null!==e),e))}$n(e,t){return ha(e).put("targetGlobalKey",t)}Un(e,t){return ua(e).put(fs(this.serializer,t))}Wn(e,t){let n=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,n=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,n=!0),n}getTargetCount(e){return this.Kn(e).next(e=>e.targetCount)}getTargetData(e,t){const n=Ln(t),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]);let i=null;return ua(e).J({range:r,index:"queryTargetsIndex"},(e,n,r)=>{const s=ds(n);Fn(t,s.target)&&(i=s,r.done())}).next(()=>i)}addMatchingKeys(e,t,n){const r=[],i=da(e);return t.forEach(t=>{const s=Oe(t.path);r.push(i.put({targetId:n,path:s})),r.push(this.referenceDelegate.addReference(e,n,t))}),be.waitFor(r)}removeMatchingKeys(e,t,n){const r=da(e);return be.forEach(t,t=>{const i=Oe(t.path);return be.waitFor([r.delete([n,i]),this.referenceDelegate.removeReference(e,n,t)])})}removeMatchingKeysForTargetId(e,t){const n=da(e),r=IDBKeyRange.bound([t],[t+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(e,t){const n=IDBKeyRange.bound([t],[t+1],!1,!0),r=da(e);let i=vr();return r.J({range:n,H:!0},(e,t,n)=>{const r=Ve(e[1]),s=new ie(r);i=i.add(s)}).next(()=>i)}containsKey(e,t){const n=Oe(t.path),r=IDBKeyRange.bound([n],[$(n)],!1,!0);let i=0;return da(e).J({index:"documentTargetsIndex",H:!0,range:r},(e,t,n)=>{let[r,s]=e;0!==r&&(i++,n.done())}).next(()=>i>0)}ut(e,t){return ua(e).get(t).next(e=>e?ds(e):null)}}function ua(e){return dt(e,"targets")}function ha(e){return dt(e,"targetGlobal")}function da(e){return dt(e,"targetDocuments")}function fa(e,t){let[n,r]=e,[i,s]=t;const a=Y(n,i);return 0===a?Y(r,s):a}class pa{constructor(e){this.Gn=e,this.buffer=new wt(fa),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const e=this.buffer.last();fa(t,e)<0&&(this.buffer=this.buffer.delete(e).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ga{constructor(e,t,n){this.garbageCollector=e,this.asyncQueue=t,this.localStore=n,this.Jn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return null!==this.Jn}Yn(e){I("LruGarbageCollector","Garbage collection scheduled in ".concat(e,"ms")),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(e){Ee(e)?I("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e):await ve(e)}await this.Yn(3e5)})}}class ma{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(e=>Math.floor(t/100*e))}nthSequenceNumber(e,t){if(0===t)return be.resolve(Ne.oe);const n=new pa(t);return this.Zn.forEachTarget(e,e=>n.Hn(e.sequenceNumber)).next(()=>this.Zn.er(e,e=>n.Hn(e))).next(()=>n.maxValue)}removeTargets(e,t,n){return this.Zn.removeTargets(e,t,n)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; disabled"),be.resolve(Xs)):this.getCacheSize(e).next(n=>n<this.params.cacheSizeCollectionThreshold?(I("LruGarbageCollector","Garbage collection skipped; Cache size ".concat(n," is lower than threshold ").concat(this.params.cacheSizeCollectionThreshold)),Xs):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let n,r,i,s,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(t=>(t>this.params.maximumSequenceNumbersToCollect?(I("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of ".concat(this.params.maximumSequenceNumbersToCollect," from ").concat(t)),r=this.params.maximumSequenceNumbersToCollect):r=t,s=Date.now(),this.nthSequenceNumber(e,r))).next(r=>(n=r,a=Date.now(),this.removeTargets(e,n,t))).next(t=>(i=t,l=Date.now(),this.removeOrphanedDocuments(e,n))).next(e=>(c=Date.now(),E()<=o.$b.DEBUG&&I("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in ".concat(s-u,"ms\n\tDetermined least recently used ").concat(r," in ")+(a-s)+"ms\n"+"\tRemoved ".concat(i," targets in ")+(l-a)+"ms\n"+"\tRemoved ".concat(e," documents in ")+(c-l)+"ms\n"+"Total Duration: ".concat(c-u,"ms")),be.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:e})))}}function ya(e,t){return new ma(e,t)}class va{constructor(e,t){this.db=e,this.garbageCollector=ya(this,t)}Xn(e){const t=this.nr(e);return this.db.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}nr(e){let t=0;return this.er(e,e=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}er(e,t){return this.rr(e,(e,n)=>t(n))}addReference(e,t,n){return ba(e,n)}removeReference(e,t,n){return ba(e,n)}removeTargets(e,t,n){return this.db.getTargetCache().removeTargets(e,t,n)}markPotentiallyOrphaned(e,t){return ba(e,t)}ir(e,t){return function(e,t){let n=!1;return oa(e).Y(r=>ia(e,r,t).next(e=>(e&&(n=!0),be.resolve(!e)))).next(()=>n)}(e,t)}removeOrphanedDocuments(e,t){const n=this.db.getRemoteDocumentCache().newChangeBuffer(),r=[];let i=0;return this.rr(e,(s,a)=>{if(a<=t){const t=this.ir(e,s).next(t=>{if(!t)return i++,n.getEntry(e,s).next(()=>(n.removeEntry(s,X.min()),da(e).delete(function(e){return[0,Oe(e.path)]}(s))))});r.push(t)}}).next(()=>be.waitFor(r)).next(()=>n.apply(e)).next(()=>i)}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,n)}updateLimboDocument(e,t){return ba(e,t)}rr(e,t){const n=da(e);let r,i=Ne.oe;return n.J({index:"documentTargetsIndex"},(e,n)=>{let[s,a]=e,{path:o,sequenceNumber:l}=n;0===s?(i!==Ne.oe&&t(new ie(Ve(r)),i),i=l,r=o):i=Ne.oe}).next(()=>{i!==Ne.oe&&t(new ie(Ve(r)),i)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function ba(e,t){return da(e).put(function(e,t){return{targetId:0,path:Oe(e.path),sequenceNumber:t}}(t,e.currentSequenceNumber))}class wa{constructor(){this.changes=new or(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,un.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const n=this.changes.get(t);return void 0!==n?be.resolve(n):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class xa{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,n){return Ea(e).put(n)}removeEntry(e,t,n){return Ea(e).delete(function(e,t){const n=e.path.toArray();return[n.slice(0,n.length-2),n[n.length-2],ls(t),n[n.length-1]]}(t,n))}updateMetadata(e,t){return this.getMetadata(e).next(n=>(n.byteSize+=t,this.sr(e,n)))}getEntry(e,t){let n=un.newInvalidDocument(t);return Ea(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ta(t))},(e,r)=>{n=this._r(t,r)}).next(()=>n)}ar(e,t){let n={size:0,document:un.newInvalidDocument(t)};return Ea(e).J({index:"documentKeyIndex",range:IDBKeyRange.only(Ta(t))},(e,r)=>{n={document:this._r(t,r),size:na(r)}}).next(()=>n)}getEntries(e,t){let n=cr();return this.ur(e,t,(e,t)=>{const r=this._r(e,t);n=n.insert(e,r)}).next(()=>n)}cr(e,t){let n=cr(),r=new yt(ie.comparator);return this.ur(e,t,(e,t)=>{const i=this._r(e,t);n=n.insert(e,i),r=r.insert(e,na(t))}).next(()=>({documents:n,lr:r}))}ur(e,t,n){if(t.isEmpty())return be.resolve();let r=new wt(Ca);t.forEach(e=>r=r.add(e));const i=IDBKeyRange.bound(Ta(r.first()),Ta(r.last())),s=r.getIterator();let a=s.getNext();return Ea(e).J({index:"documentKeyIndex",range:i},(e,t,r)=>{const i=ie.fromSegments([...t.prefixPath,t.collectionGroup,t.documentId]);for(;a&&Ca(a,i)<0;)n(a,null),a=s.getNext();a&&a.isEqual(i)&&(n(a,t),a=s.hasNext()?s.getNext():null),a?r.$(Ta(a)):r.done()}).next(()=>{for(;a;)n(a,null),a=s.hasNext()?s.getNext():null})}getDocumentsMatchingQuery(e,t,n,r,i){const s=t.path,a=[s.popLast().toArray(),s.lastSegment(),ls(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],o=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ea(e).U(IDBKeyRange.bound(a,o,!0)).next(e=>{null==i||i.incrementDocumentReadCount(e.length);let n=cr();for(const i of e){const e=this._r(ie.fromSegments(i.prefixPath.concat(i.collectionGroup,i.documentId)),i);e.isFoundDocument()&&(rr(t,e)||r.has(e.key))&&(n=n.insert(e.key,e))}return n})}getAllFromCollectionGroup(e,t,n,r){let i=cr();const s=Ia(t,n),a=Ia(t,pe.max());return Ea(e).J({index:"collectionGroupIndex",range:IDBKeyRange.bound(s,a,!0)},(e,t,n)=>{const s=this._r(ie.fromSegments(t.prefixPath.concat(t.collectionGroup,t.documentId)),t);i=i.insert(s.key,s),i.size===r&&n.done()}).next(()=>i)}newChangeBuffer(e){return new ka(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(e=>e.byteSize)}getMetadata(e){return Sa(e).get("remoteDocumentGlobalKey").next(e=>(N(!!e),e))}sr(e,t){return Sa(e).put("remoteDocumentGlobalKey",t)}_r(e,t){if(t){const e=function(e,t){let n;if(t.document)n=Wi(e.ht,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const e=ie.fromSegments(t.noDocument.path),r=us(t.noDocument.readTime);n=un.newNoDocument(e,r),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return P();{const e=ie.fromSegments(t.unknownDocument.path),r=us(t.unknownDocument.version);n=un.newUnknownDocument(e,r)}}return t.readTime&&n.setReadTime(function(e){const t=new J(e[0],e[1]);return X.fromTimestamp(t)}(t.readTime)),n}(this.serializer,t);if(!e.isNoDocument()||!e.version.isEqual(X.min()))return e}return un.newInvalidDocument(e)}}function _a(e){return new xa(e)}class ka extends wa{constructor(e,t){super(),this.hr=e,this.trackRemovals=t,this.Pr=new or(e=>e.toString(),(e,t)=>e.isEqual(t))}applyChanges(e){const t=[];let n=0,r=new wt((e,t)=>Y(e.canonicalString(),t.canonicalString()));return this.changes.forEach((i,s)=>{const a=this.Pr.get(i);if(t.push(this.hr.removeEntry(e,i,a.readTime)),s.isValidDocument()){const o=os(this.hr.serializer,s);r=r.add(i.path.popLast());const l=na(o);n+=l-a.size,t.push(this.hr.addEntry(e,i,o))}else if(n-=a.size,this.trackRemovals){const n=os(this.hr.serializer,s.convertToNoDocument(X.min()));t.push(this.hr.addEntry(e,i,n))}}),r.forEach(n=>{t.push(this.hr.indexManager.addToCollectionParentIndex(e,n))}),t.push(this.hr.updateMetadata(e,n)),be.waitFor(t)}getFromCache(e,t){return this.hr.ar(e,t).next(e=>(this.Pr.set(t,{size:e.size,readTime:e.document.readTime}),e.document))}getAllFromCache(e,t){return this.hr.cr(e,t).next(e=>{let{documents:t,lr:n}=e;return n.forEach((e,n)=>{this.Pr.set(e,{size:n,readTime:t.get(e).readTime})}),t})}}function Sa(e){return dt(e,"remoteDocumentGlobal")}function Ea(e){return dt(e,"remoteDocumentsV14")}function Ta(e){const t=e.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function Ia(e,t){const n=t.documentKey.path.toArray();return[e,ls(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Ca(e,t){const n=e.path.toArray(),r=t.path.toArray();let i=0;for(let s=0;s<n.length-2&&s<r.length-2;++s)if(i=Y(n[s],r[s]),i)return i;return i=Y(n.length,r.length),i||(i=Y(n[n.length-2],r[r.length-2]),i||Y(n[n.length-1],r[r.length-1]))}class Aa{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class Da{constructor(e,t,n,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=n,this.indexManager=r}getDocument(e,t){let n=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(n=r,this.remoteDocumentCache.getEntry(e,t))).next(e=>(null!==n&&Wr(n.mutation,e,kt.empty(),J.now()),e))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.getLocalViewOfDocuments(e,t,vr()).next(()=>t))}getLocalViewOfDocuments(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr();const r=fr();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,n).next(e=>{let t=hr();return e.forEach((e,n)=>{t=t.insert(e,n.overlayedDocument)}),t}))}getOverlayedDocuments(e,t){const n=fr();return this.populateOverlays(e,n,t).next(()=>this.computeViews(e,t,n,vr()))}populateOverlays(e,t,n){const r=[];return n.forEach(e=>{t.has(e)||r.push(e)}),this.documentOverlayCache.getOverlays(e,r).next(e=>{e.forEach((e,n)=>{t.set(e,n)})})}computeViews(e,t,n,r){let i=cr();const s=gr(),a=gr();return t.forEach((e,t)=>{const a=n.get(t.key);r.has(t.key)&&(void 0===a||a.mutation instanceof Gr)?i=i.insert(t.key,t):void 0!==a?(s.set(t.key,a.mutation.getFieldMask()),Wr(a.mutation,t,a.mutation.getFieldMask(),J.now())):s.set(t.key,kt.empty())}),this.recalculateAndSaveOverlays(e,i).next(e=>(e.forEach((e,t)=>s.set(e,t)),t.forEach((e,t)=>{var n;return a.set(e,new Aa(t,null!==(n=s.get(e))&&void 0!==n?n:null))}),a))}recalculateAndSaveOverlays(e,t){const n=gr();let r=new yt((e,t)=>e-t),i=vr();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(e=>{for(const i of e)i.keys().forEach(e=>{const s=t.get(e);if(null===s)return;let a=n.get(e)||kt.empty();a=i.applyToLocalView(s,a),n.set(e,a);const o=(r.get(i.batchId)||vr()).add(e);r=r.insert(i.batchId,o)})}).next(()=>{const s=[],a=r.getReverseIterator();for(;a.hasNext();){const r=a.getNext(),o=r.key,l=r.value,c=pr();l.forEach(e=>{if(!i.has(e)){const r=Ur(t.get(e),n.get(e));null!==r&&c.set(e,r),i=i.add(e)}}),s.push(this.documentOverlayCache.saveOverlays(e,o,c))}return be.waitFor(s)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(t=>this.recalculateAndSaveOverlays(e,t))}getDocumentsMatchingQuery(e,t,n,r){return function(e){return ie.isDocumentKey(e.path)&&null===e.collectionGroup&&0===e.filters.length}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Gn(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,n,r):this.getDocumentsMatchingCollectionQuery(e,t,n,r)}getNextDocuments(e,t,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,n,r).next(i=>{const s=r-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,n.largestBatchId,r-i.size):be.resolve(fr());let a=-1,o=i;return s.next(t=>be.forEach(t,(t,n)=>(a<n.largestBatchId&&(a=n.largestBatchId),i.get(t)?be.resolve():this.remoteDocumentCache.getEntry(e,t).next(e=>{o=o.insert(t,e)}))).next(()=>this.populateOverlays(e,t,i)).next(()=>this.computeViews(e,o,t,vr())).next(e=>({batchId:a,changes:dr(e)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new ie(t)).next(e=>{let t=hr();return e.isFoundDocument()&&(t=t.insert(e.key,e)),t})}getDocumentsMatchingCollectionGroupQuery(e,t,n,r){const i=t.collectionGroup;let s=hr();return this.indexManager.getCollectionParents(e,i).next(a=>be.forEach(a,a=>{const o=function(e,t){return new Wn(t,null,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(t,a.child(i));return this.getDocumentsMatchingCollectionQuery(e,o,n,r).next(e=>{e.forEach((e,t)=>{s=s.insert(e,t)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,n.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,n,i,r))).next(e=>{i.forEach((t,n)=>{const r=n.getKey();null===e.get(r)&&(e=e.insert(r,un.newInvalidDocument(r)))});let n=hr();return e.forEach((e,r)=>{const s=i.get(e);void 0!==s&&Wr(s.mutation,r,kt.empty(),J.now()),rr(t,r)&&(n=n.insert(e,r))}),n})}}class Pa{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return be.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(e){return{id:e.id,version:e.version,createTime:Ni(e.createTime)}}(t)),be.resolve()}getNamedQuery(e,t){return be.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(e){return{name:e.name,query:ps(e.bundledQuery),readTime:Ni(e.readTime)}}(t)),be.resolve()}}class Na{constructor(){this.overlays=new yt(ie.comparator),this.Er=new Map}getOverlay(e,t){return be.resolve(this.overlays.get(t))}getOverlays(e,t){const n=fr();return be.forEach(t,t=>this.getOverlay(e,t).next(e=>{null!==e&&n.set(t,e)})).next(()=>n)}saveOverlays(e,t,n){return n.forEach((n,r)=>{this.Tt(e,t,r)}),be.resolve()}removeOverlaysForBatchId(e,t,n){const r=this.Er.get(n);return void 0!==r&&(r.forEach(e=>this.overlays=this.overlays.remove(e)),this.Er.delete(n)),be.resolve()}getOverlaysForCollection(e,t,n){const r=fr(),i=t.length+1,s=new ie(t.child("")),a=this.overlays.getIteratorFrom(s);for(;a.hasNext();){const e=a.getNext().value,s=e.getKey();if(!t.isPrefixOf(s.path))break;s.path.length===i&&e.largestBatchId>n&&r.set(e.getKey(),e)}return be.resolve(r)}getOverlaysForCollectionGroup(e,t,n,r){let i=new yt((e,t)=>e-t);const s=this.overlays.getIterator();for(;s.hasNext();){const e=s.getNext().value;if(e.getKey().getCollectionGroup()===t&&e.largestBatchId>n){let t=i.get(e.largestBatchId);null===t&&(t=fr(),i=i.insert(e.largestBatchId,t)),t.set(e.getKey(),e)}}const a=fr(),o=i.getIterator();for(;o.hasNext()&&(o.getNext().value.forEach((e,t)=>a.set(e,t)),!(a.size()>=r)););return be.resolve(a)}Tt(e,t,n){const r=this.overlays.get(n.key);if(null!==r){const e=this.Er.get(r.largestBatchId).delete(n.key);this.Er.set(r.largestBatchId,e)}this.overlays=this.overlays.insert(n.key,new ti(t,n));let i=this.Er.get(t);void 0===i&&(i=vr(),this.Er.set(t,i)),this.Er.set(t,i.add(n.key))}}class Ma{constructor(){this.sessionToken=Tt.EMPTY_BYTE_STRING}getSessionToken(e){return be.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,be.resolve()}}class Ra{constructor(){this.dr=new wt(ja.Ar),this.Rr=new wt(ja.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const n=new ja(e,t);this.dr=this.dr.add(n),this.Rr=this.Rr.add(n)}mr(e,t){e.forEach(e=>this.addReference(e,t))}removeReference(e,t){this.gr(new ja(e,t))}pr(e,t){e.forEach(e=>this.removeReference(e,t))}yr(e){const t=new ie(new te([])),n=new ja(t,e),r=new ja(t,e+1),i=[];return this.Rr.forEachInRange([n,r],e=>{this.gr(e),i.push(e.key)}),i}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new ie(new te([])),n=new ja(t,e),r=new ja(t,e+1);let i=vr();return this.Rr.forEachInRange([n,r],e=>{i=i.add(e.key)}),i}containsKey(e){const t=new ja(e,0),n=this.dr.firstAfterOrEqual(t);return null!==n&&e.isEqual(n.key)}}class ja{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return ie.comparator(e.key,t.key)||Y(e.br,t.br)}static Vr(e,t){return Y(e.br,t.br)||ie.comparator(e.key,t.key)}}class Oa{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new wt(ja.Ar)}checkEmpty(e){return be.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,n,r){const i=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new Xr(i,t,n,r);this.mutationQueue.push(s);for(const a of r)this.vr=this.vr.add(new ja(a.key,i)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return be.resolve(s)}lookupMutationBatch(e,t){return be.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const n=t+1,r=this.Fr(n),i=r<0?0:r;return be.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return be.resolve(0===this.mutationQueue.length?-1:this.Dr-1)}getAllMutationBatches(e){return be.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const n=new ja(t,0),r=new ja(t,Number.POSITIVE_INFINITY),i=[];return this.vr.forEachInRange([n,r],e=>{const t=this.Cr(e.br);i.push(t)}),be.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(e,t){let n=new wt(Y);return t.forEach(e=>{const t=new ja(e,0),r=new ja(e,Number.POSITIVE_INFINITY);this.vr.forEachInRange([t,r],e=>{n=n.add(e.br)})}),be.resolve(this.Mr(n))}getAllMutationBatchesAffectingQuery(e,t){const n=t.path,r=n.length+1;let i=n;ie.isDocumentKey(i)||(i=i.child(""));const s=new ja(new ie(i),0);let a=new wt(Y);return this.vr.forEachWhile(e=>{const t=e.key.path;return!!n.isPrefixOf(t)&&(t.length===r&&(a=a.add(e.br)),!0)},s),be.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(e=>{const n=this.Cr(e);null!==n&&t.push(n)}),t}removeMutationBatch(e,t){N(0===this.Or(t.batchId,"removed")),this.mutationQueue.shift();let n=this.vr;return be.forEach(t.mutations,r=>{const i=new ja(r.key,t.batchId);return n=n.delete(i),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.vr=n})}Ln(e){}containsKey(e,t){const n=new ja(t,0),r=this.vr.firstAfterOrEqual(n);return be.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,be.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class La{constructor(e){this.Nr=e,this.docs=new yt(ie.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const n=t.key,r=this.docs.get(n),i=r?r.size:0,s=this.Nr(t);return this.docs=this.docs.insert(n,{document:t.mutableCopy(),size:s}),this.size+=s-i,this.indexManager.addToCollectionParentIndex(e,n.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const n=this.docs.get(t);return be.resolve(n?n.document.mutableCopy():un.newInvalidDocument(t))}getEntries(e,t){let n=cr();return t.forEach(e=>{const t=this.docs.get(e);n=n.insert(e,t?t.document.mutableCopy():un.newInvalidDocument(e))}),be.resolve(n)}getDocumentsMatchingQuery(e,t,n,r){let i=cr();const s=t.path,a=new ie(s.child("")),o=this.docs.getIteratorFrom(a);for(;o.hasNext();){const{key:e,value:{document:a}}=o.getNext();if(!s.isPrefixOf(e.path))break;e.path.length>s.length+1||ge(fe(a),n)<=0||(r.has(a.key)||rr(t,a))&&(i=i.insert(a.key,a.mutableCopy()))}return be.resolve(i)}getAllFromCollectionGroup(e,t,n,r){P()}Lr(e,t){return be.forEach(this.docs,e=>t(e))}newChangeBuffer(e){return new Fa(this)}getSize(e){return be.resolve(this.size)}}class Fa extends wa{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(n)}),be.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}class Va{constructor(e){this.persistence=e,this.Br=new or(e=>Ln(e),Fn),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.kr=0,this.qr=new Ra,this.targetCount=0,this.Qr=la.qn()}forEachTarget(e,t){return this.Br.forEach((e,n)=>t(n)),be.resolve()}getLastRemoteSnapshotVersion(e){return be.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return be.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),be.resolve(this.highestTargetId)}setTargetsMetadata(e,t,n){return n&&(this.lastRemoteSnapshotVersion=n),t>this.kr&&(this.kr=t),be.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new la(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,be.resolve()}updateTargetData(e,t){return this.Un(t),be.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,be.resolve()}removeTargets(e,t,n){let r=0;const i=[];return this.Br.forEach((s,a)=>{a.sequenceNumber<=t&&null===n.get(a.targetId)&&(this.Br.delete(s),i.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),be.waitFor(i).next(()=>r)}getTargetCount(e){return be.resolve(this.targetCount)}getTargetData(e,t){const n=this.Br.get(t)||null;return be.resolve(n)}addMatchingKeys(e,t,n){return this.qr.mr(t,n),be.resolve()}removeMatchingKeys(e,t,n){this.qr.pr(t,n);const r=this.persistence.referenceDelegate,i=[];return r&&t.forEach(t=>{i.push(r.markPotentiallyOrphaned(e,t))}),be.waitFor(i)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),be.resolve()}getMatchingKeysForTargetId(e,t){const n=this.qr.Sr(t);return be.resolve(n)}containsKey(e,t){return be.resolve(this.qr.containsKey(t))}}class za{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Ne(0),this.Ur=!1,this.Ur=!0,this.Wr=new Ma,this.referenceDelegate=e(this),this.Gr=new Va(this),this.indexManager=new qs,this.remoteDocumentCache=function(e){return new La(e)}(e=>this.referenceDelegate.zr(e)),this.serializer=new as(t),this.jr=new Pa(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Na,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let n=this.Kr[e.toKey()];return n||(n=new Oa(t,this.referenceDelegate),this.Kr[e.toKey()]=n),n}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,n){I("MemoryPersistence","Starting transaction:",e);const r=new Ua(this.$r.next());return this.referenceDelegate.Hr(),n(r).next(e=>this.referenceDelegate.Jr(r).next(()=>e)).toPromise().then(e=>(r.raiseOnCommittedEvent(),e))}Yr(e,t){return be.or(Object.values(this.Kr).map(n=>()=>n.containsKey(e,t)))}}class Ua extends ye{constructor(e){super(),this.currentSequenceNumber=e}}class Ba{constructor(e){this.persistence=e,this.Zr=new Ra,this.Xr=null}static ei(e){return new Ba(e)}get ti(){if(this.Xr)return this.Xr;throw P()}addReference(e,t,n){return this.Zr.addReference(n,t),this.ti.delete(n.toString()),be.resolve()}removeReference(e,t,n){return this.Zr.removeReference(n,t),this.ti.add(n.toString()),be.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),be.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(e=>this.ti.add(e.toString()));const n=this.persistence.getTargetCache();return n.getMatchingKeysForTargetId(e,t.targetId).next(e=>{e.forEach(e=>this.ti.add(e.toString()))}).next(()=>n.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return be.forEach(this.ti,n=>{const r=ie.fromPath(n);return this.ni(e,r).next(e=>{e||t.removeEntry(r,X.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(e=>{e?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return be.or([()=>be.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class Wa{constructor(e,t){this.persistence=e,this.ri=new or(e=>Oe(e.path),(e,t)=>e.isEqual(t)),this.garbageCollector=ya(this,t)}static ei(e,t){return new Wa(e,t)}Hr(){}Jr(e){return be.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(e=>t.next(t=>e+t))}nr(e){let t=0;return this.er(e,e=>{t++}).next(()=>t)}er(e,t){return be.forEach(this.ri,(n,r)=>this.ir(e,n,r).next(e=>e?be.resolve():t(r)))}removeTargets(e,t,n){return this.persistence.getTargetCache().removeTargets(e,t,n)}removeOrphanedDocuments(e,t){let n=0;const r=this.persistence.getRemoteDocumentCache(),i=r.newChangeBuffer();return r.Lr(e,r=>this.ir(e,r,t).next(e=>{e||(n++,i.removeEntry(r,X.min()))})).next(()=>i.apply(e)).next(()=>n)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),be.resolve()}removeTarget(e,t){const n=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,n)}addReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),be.resolve()}removeReference(e,t,n){return this.ri.set(n,e.currentSequenceNumber),be.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),be.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Kt(e.data.value)),t}ir(e,t,n){return be.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const e=this.ri.get(t);return be.resolve(void 0!==e&&e>n)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}class qa{constructor(e){this.serializer=e}O(e,t,n,r){const i=new we("createOrUpgrade",t);n<1&&r>=1&&(function(e){e.createObjectStore("owner")}(e),function(e){e.createObjectStore("mutationQueues",{keyPath:"userId"}),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ze,{unique:!0}),e.createObjectStore("documentMutations")}(e),Ha(e),function(e){e.createObjectStore("remoteDocuments")}(e));let s=be.resolve();return n<3&&r>=3&&(0!==n&&(function(e){e.deleteObjectStore("targetDocuments"),e.deleteObjectStore("targets"),e.deleteObjectStore("targetGlobal")}(e),Ha(e)),s=s.next(()=>function(e){const t=e.store("targetGlobal"),n={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return t.put("targetGlobalKey",n)}(i))),n<4&&r>=4&&(0!==n&&(s=s.next(()=>function(e,t){return t.store("mutations").U().next(n=>{e.deleteObjectStore("mutations"),e.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",ze,{unique:!0});const r=t.store("mutations"),i=n.map(e=>r.put(e));return be.waitFor(i)})}(e,i))),s=s.next(()=>{!function(e){e.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),n<5&&r>=5&&(s=s.next(()=>this.ii(i))),n<6&&r>=6&&(s=s.next(()=>(function(e){e.createObjectStore("remoteDocumentGlobal")}(e),this.si(i)))),n<7&&r>=7&&(s=s.next(()=>this.oi(i))),n<8&&r>=8&&(s=s.next(()=>this._i(e,i))),n<9&&r>=9&&(s=s.next(()=>{!function(e){e.objectStoreNames.contains("remoteDocumentChanges")&&e.deleteObjectStore("remoteDocumentChanges")}(e)})),n<10&&r>=10&&(s=s.next(()=>this.ai(i))),n<11&&r>=11&&(s=s.next(()=>{!function(e){e.createObjectStore("bundles",{keyPath:"bundleId"})}(e),function(e){e.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),n<12&&r>=12&&(s=s.next(()=>{!function(e){const t=e.createObjectStore("documentOverlays",{keyPath:tt});t.createIndex("collectionPathOverlayIndex",nt,{unique:!1}),t.createIndex("collectionGroupOverlayIndex",rt,{unique:!1})}(e)})),n<13&&r>=13&&(s=s.next(()=>function(e){const t=e.createObjectStore("remoteDocumentsV14",{keyPath:qe});t.createIndex("documentKeyIndex",He),t.createIndex("collectionGroupIndex",Ke)}(e)).next(()=>this.ui(e,i)).next(()=>e.deleteObjectStore("remoteDocuments"))),n<14&&r>=14&&(s=s.next(()=>this.ci(e,i))),n<15&&r>=15&&(s=s.next(()=>function(e){e.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),e.createObjectStore("indexState",{keyPath:$e}).createIndex("sequenceNumberIndex",Je,{unique:!1}),e.createObjectStore("indexEntries",{keyPath:Xe}).createIndex("documentKeyIndex",et,{unique:!1})}(e))),n<16&&r>=16&&(s=s.next(()=>{t.objectStore("indexState").clear()}).next(()=>{t.objectStore("indexEntries").clear()})),n<17&&r>=17&&(s=s.next(()=>{!function(e){e.createObjectStore("globals",{keyPath:"name"})}(e)})),s}si(e){let t=0;return e.store("remoteDocuments").J((e,n)=>{t+=na(n)}).next(()=>{const n={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",n)})}ii(e){const t=e.store("mutationQueues"),n=e.store("mutations");return t.U().next(t=>be.forEach(t,t=>{const r=IDBKeyRange.bound([t.userId,-1],[t.userId,t.lastAcknowledgedBatchId]);return n.U("userMutationsIndex",r).next(n=>be.forEach(n,n=>{N(n.userId===t.userId);const r=hs(this.serializer,n);return ta(e,t.userId,r).next(()=>{})}))}))}oi(e){const t=e.store("targetDocuments"),n=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(e=>{const r=[];return n.J((n,i)=>{const s=new te(n),a=function(e){return[0,Oe(e)]}(s);r.push(t.get(a).next(n=>n?be.resolve():(n=>t.put({targetId:0,path:Oe(n),sequenceNumber:e.highestListenSequenceNumber}))(s)))}).next(()=>be.waitFor(r))})}_i(e,t){e.createObjectStore("collectionParents",{keyPath:Ze});const n=t.store("collectionParents"),r=new Hs,i=e=>{if(r.add(e)){const t=e.lastSegment(),r=e.popLast();return n.put({collectionId:t,parent:Oe(r)})}};return t.store("remoteDocuments").J({H:!0},(e,t)=>{const n=new te(e);return i(n.popLast())}).next(()=>t.store("documentMutations").J({H:!0},(e,t)=>{let[n,r,s]=e;const a=Ve(r);return i(a.popLast())}))}ai(e){const t=e.store("targets");return t.J((e,n)=>{const r=ds(n),i=fs(this.serializer,r);return t.put(i)})}ui(e,t){const n=t.store("remoteDocuments"),r=[];return n.J((e,n)=>{const i=t.store("remoteDocumentsV14"),s=function(e){return e.document?new ie(te.fromString(e.document.name).popFirst(5)):e.noDocument?ie.fromSegments(e.noDocument.path):e.unknownDocument?ie.fromSegments(e.unknownDocument.path):P()}(n).path.toArray(),a={prefixPath:s.slice(0,s.length-2),collectionGroup:s[s.length-2],documentId:s[s.length-1],readTime:n.readTime||[0,0],unknownDocument:n.unknownDocument,noDocument:n.noDocument,document:n.document,hasCommittedMutations:!!n.hasCommittedMutations};r.push(i.put(a))}).next(()=>be.waitFor(r))}ci(e,t){const n=t.store("mutations"),r=_a(this.serializer),i=new za(Ba.ei,this.serializer.ht);return n.U().next(e=>{const n=new Map;return e.forEach(e=>{var t;let r=null!==(t=n.get(e.userId))&&void 0!==t?t:vr();hs(this.serializer,e).keys().forEach(e=>r=r.add(e)),n.set(e.userId,r)}),be.forEach(n,(e,n)=>{const s=new _(n),a=xs.Pt(this.serializer,s),o=i.getIndexManager(s),l=ra.Pt(s,this.serializer,o,i.referenceDelegate);return new Da(r,l,a,o).recalculateAndSaveOverlaysForDocumentKeys(new ht(t,Ne.oe),e).next()})})}}function Ha(e){e.createObjectStore("targetDocuments",{keyPath:Qe}).createIndex("documentTargetsIndex",Ye,{unique:!0}),e.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",Ge,{unique:!0}),e.createObjectStore("targetGlobal")}const Ka="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ga{constructor(e,t,n,r,i,s,a,o,l,c){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:17;if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=n,this.li=i,this.window=s,this.document=a,this.hi=l,this.Pi=c,this.Ti=u,this.$r=null,this.Ur=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Ii=null,this.inForeground=!1,this.Ei=null,this.di=null,this.Ai=Number.NEGATIVE_INFINITY,this.Ri=e=>Promise.resolve(),!Ga.p())throw new O(j.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new va(this,r),this.Vi=t+"main",this.serializer=new as(o),this.mi=new xe(this.Vi,this.Ti,new qa(this.serializer)),this.Wr=new ks,this.Gr=new ca(this.referenceDelegate,this.serializer),this.remoteDocumentCache=_a(this.serializer),this.jr=new vs,this.window&&this.window.localStorage?this.fi=this.window.localStorage:(this.fi=null,!1===c&&C("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.gi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new O(j.FAILED_PRECONDITION,Ka);return this.pi(),this.yi(),this.wi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Gr.getHighestSequenceNumber(e))}).then(e=>{this.$r=new Ne(e,this.hi)}).then(()=>{this.Ur=!0}).catch(e=>(this.mi&&this.mi.close(),Promise.reject(e)))}Si(e){return this.Ri=async t=>{if(this.started)return e(t)},e(this.isPrimary)}setDatabaseDeletedListener(e){this.mi.L(async t=>{null===t.newVersion&&await e()})}setNetworkEnabled(e){this.networkEnabled!==e&&(this.networkEnabled=e,this.li.enqueueAndForget(async()=>{this.started&&await this.gi()}))}gi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Ya(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.bi(e).next(e=>{e||(this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)))})}).next(()=>this.Di(e)).next(t=>this.isPrimary&&!t?this.vi(e).next(()=>!1):!!t&&this.Ci(e).next(()=>!0))).catch(e=>{if(Ee(e))return I("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return I("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.li.enqueueRetryable(()=>this.Ri(e)),this.isPrimary=e})}bi(e){return Qa(e).get("owner").next(e=>be.resolve(this.Fi(e)))}Mi(e){return Ya(e).delete(this.clientId)}async xi(){if(this.isPrimary&&!this.Oi(this.Ai,18e5)){this.Ai=Date.now();const e=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{const t=dt(e,"clientMetadata");return t.U().next(e=>{const n=this.Ni(e,18e5),r=e.filter(e=>-1===n.indexOf(e));return be.forEach(r,e=>t.delete(e.clientId)).next(()=>r)})}).catch(()=>[]);if(this.fi)for(const t of e)this.fi.removeItem(this.Li(t.clientId))}}wi(){this.di=this.li.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.gi().then(()=>this.xi()).then(()=>this.wi()))}Fi(e){return!!e&&e.ownerId===this.clientId}Di(e){return this.Pi?be.resolve(!0):Qa(e).get("owner").next(t=>{if(null!==t&&this.Oi(t.leaseTimestampMs,5e3)&&!this.Bi(t.ownerId)){if(this.Fi(t)&&this.networkEnabled)return!0;if(!this.Fi(t)){if(!t.allowTabSynchronization)throw new O(j.FAILED_PRECONDITION,Ka);return!1}}return!(!this.networkEnabled||!this.inForeground)||Ya(e).U().next(e=>void 0===this.Ni(e,5e3).find(e=>{if(this.clientId!==e.clientId){const t=!this.networkEnabled&&e.networkEnabled,n=!this.inForeground&&e.inForeground,r=this.networkEnabled===e.networkEnabled;if(t||n&&r)return!0}return!1}))}).next(e=>(this.isPrimary!==e&&I("IndexedDbPersistence","Client ".concat(e?"is":"is not"," eligible for a primary lease.")),e))}async shutdown(){this.Ur=!1,this.ki(),this.di&&(this.di.cancel(),this.di=null),this.qi(),this.Qi(),await this.mi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],e=>{const t=new ht(e,Ne.oe);return this.vi(t).next(()=>this.Mi(t))}),this.mi.close(),this.Ki()}Ni(e,t){return e.filter(e=>this.Oi(e.updateTimeMs,t)&&!this.Bi(e.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>Ya(e).U().next(e=>this.Ni(e,18e5).map(e=>e.clientId)))}get started(){return this.Ur}getGlobalsCache(){return this.Wr}getMutationQueue(e,t){return ra.Pt(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new Gs(e,this.serializer.ht.databaseId)}getDocumentOverlayCache(e){return xs.Pt(this.serializer,e)}getBundleCache(){return this.jr}runTransaction(e,t,n){I("IndexedDbPersistence","Starting transaction:",e);const r="readonly"===t?"readonly":"readwrite",i=function(e){return 17===e?ut:16===e?ct:15===e?lt:14===e?ot:13===e?at:12===e?st:11===e?it:void P()}(this.Ti);let s;return this.mi.runTransaction(e,r,i,r=>(s=new ht(r,this.$r?this.$r.next():Ne.oe),"readwrite-primary"===t?this.bi(s).next(e=>!!e||this.Di(s)).next(t=>{if(!t)throw C("Failed to obtain primary lease for action '".concat(e,"'.")),this.isPrimary=!1,this.li.enqueueRetryable(()=>this.Ri(!1)),new O(j.FAILED_PRECONDITION,me);return n(s)}).next(e=>this.Ci(s).next(()=>e)):this.Ui(s).next(()=>n(s)))).then(e=>(s.raiseOnCommittedEvent(),e))}Ui(e){return Qa(e).get("owner").next(e=>{if(null!==e&&this.Oi(e.leaseTimestampMs,5e3)&&!this.Bi(e.ownerId)&&!this.Fi(e)&&!(this.Pi||this.allowTabSynchronization&&e.allowTabSynchronization))throw new O(j.FAILED_PRECONDITION,Ka)})}Ci(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Qa(e).put("owner",t)}static p(){return xe.p()}vi(e){const t=Qa(e);return t.get("owner").next(e=>this.Fi(e)?(I("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):be.resolve())}Oi(e,t){const n=Date.now();return!(e<n-t)&&(!(e>n)||(C("Detected an update time that is in the future: ".concat(e," > ").concat(n)),!1))}pi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.Ei=()=>{this.li.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.gi()))},this.document.addEventListener("visibilitychange",this.Ei),this.inForeground="visible"===this.document.visibilityState)}qi(){this.Ei&&(this.document.removeEventListener("visibilitychange",this.Ei),this.Ei=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.Ii=()=>{this.ki();const e=/(?:Version|Mobile)\/1[456]/;(0,l.nr)()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.li.enterRestrictedMode(!0),this.li.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.Ii))}Qi(){this.Ii&&(this.window.removeEventListener("pagehide",this.Ii),this.Ii=null)}Bi(e){var t;try{const n=null!==(null===(t=this.fi)||void 0===t?void 0:t.getItem(this.Li(e)));return I("IndexedDbPersistence","Client '".concat(e,"' ").concat(n?"is":"is not"," zombied in LocalStorage")),n}catch(e){return C("IndexedDbPersistence","Failed to get zombied client id.",e),!1}}ki(){if(this.fi)try{this.fi.setItem(this.Li(this.clientId),String(Date.now()))}catch(e){C("Failed to set zombie client id.",e)}}Ki(){if(this.fi)try{this.fi.removeItem(this.Li(this.clientId))}catch(e){}}Li(e){return"firestore_zombie_".concat(this.persistenceKey,"_").concat(e)}}function Qa(e){return dt(e,"owner")}function Ya(e){return dt(e,"clientMetadata")}function Za(e,t){let n=e.projectId;return e.isDefaultDatabase||(n+="."+e.database),"firestore/"+t+"/"+n+"/"}class $a{constructor(e,t,n,r){this.targetId=e,this.fromCache=t,this.Wi=n,this.Gi=r}static zi(e,t){let n=vr(),r=vr();for(const i of t.docChanges)switch(i.type){case 0:n=n.add(i.doc.key);break;case 1:r=r.add(i.doc.key)}return new $a(e,t.fromCache,n,r)}}class Ja{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}class Xa{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=(0,l.nr)()?8:_e((0,l.ZQ)())>0?6:4}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,n,r){const i={result:null};return this.Xi(e,t).next(e=>{i.result=e}).next(()=>{if(!i.result)return this.es(e,t,r,n).next(e=>{i.result=e})}).next(()=>{if(i.result)return;const n=new Ja;return this.ts(e,t,n).next(r=>{if(i.result=r,this.Hi)return this.ns(e,t,n,r.size)})}).next(()=>i.result)}ns(e,t,n,r){return n.documentReadCount<this.Ji?(E()<=o.$b.DEBUG&&I("QueryEngine","SDK will not create cache indexes for query:",nr(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),be.resolve()):(E()<=o.$b.DEBUG&&I("QueryEngine","Query:",nr(t),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.Yi*r?(E()<=o.$b.DEBUG&&I("QueryEngine","The SDK decides to create cache indexes for query:",nr(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Yn(t))):be.resolve())}Xi(e,t){if(Kn(t))return be.resolve(null);let n=Yn(t);return this.indexManager.getIndexType(e,n).next(r=>0===r?null:(null!==t.limit&&1===r&&(t=Xn(t,null,"F"),n=Yn(t)),this.indexManager.getDocumentsMatchingTarget(e,n).next(r=>{const i=vr(...r);return this.Zi.getDocuments(e,i).next(r=>this.indexManager.getMinOffset(e,n).next(n=>{const s=this.rs(t,r);return this.ss(t,s,i,n.readTime)?this.Xi(e,Xn(t,null,"F")):this.os(e,s,t,n)}))})))}es(e,t,n,r){return Kn(t)||r.isEqual(X.min())?be.resolve(null):this.Zi.getDocuments(e,n).next(i=>{const s=this.rs(t,i);return this.ss(t,s,n,r)?be.resolve(null):(E()<=o.$b.DEBUG&&I("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),nr(t)),this.os(e,s,t,de(r,-1)).next(e=>e))})}rs(e,t){let n=new wt(sr(e));return t.forEach((t,r)=>{rr(e,r)&&(n=n.add(r))}),n}ss(e,t,n,r){if(null===e.limit)return!1;if(n.size!==t.size)return!0;const i="F"===e.limitType?t.last():t.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)}ts(e,t,n){return E()<=o.$b.DEBUG&&I("QueryEngine","Using full collection scan to execute query:",nr(t)),this.Zi.getDocumentsMatchingQuery(e,t,pe.min(),n)}os(e,t,n,r){return this.Zi.getDocumentsMatchingQuery(e,n,r).next(e=>(t.forEach(t=>{e=e.insert(t.key,t)}),e))}}class eo{constructor(e,t,n,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new yt(Y),this.cs=new or(e=>Ln(e),Fn),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(n)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Da(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function to(e,t,n,r){return new eo(e,t,n,r)}async function no(e,t){const n=R(e);return await n.persistence.runTransaction("Handle user change","readonly",e=>{let r;return n.mutationQueue.getAllMutationBatches(e).next(i=>(r=i,n.Ps(t),n.mutationQueue.getAllMutationBatches(e))).next(t=>{const i=[],s=[];let a=vr();for(const e of r){i.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}for(const e of t){s.push(e.batchId);for(const t of e.mutations)a=a.add(t.key)}return n.localDocuments.getDocuments(e,a).next(e=>({Ts:e,removedBatchIds:i,addedBatchIds:s}))})})}function ro(e){const t=R(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.Gr.getLastRemoteSnapshotVersion(e))}function io(e,t,n){let r=vr(),i=vr();return n.forEach(e=>r=r.add(e)),t.getEntries(e,r).next(e=>{let r=cr();return n.forEach((n,s)=>{const a=e.get(n);s.isFoundDocument()!==a.isFoundDocument()&&(i=i.add(n)),s.isNoDocument()&&s.version.isEqual(X.min())?(t.removeEntry(n,s.readTime),r=r.insert(n,s)):!a.isValidDocument()||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(t.addEntry(s),r=r.insert(n,s)):I("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),{Is:r,Es:i}})}function so(e,t){const n=R(e);return n.persistence.runTransaction("Get next mutation batch","readonly",e=>(void 0===t&&(t=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(e,t)))}function ao(e,t){const n=R(e);return n.persistence.runTransaction("Allocate target","readwrite",e=>{let r;return n.Gr.getTargetData(e,t).next(i=>i?(r=i,be.resolve(r)):n.Gr.allocateTargetId(e).next(i=>(r=new ss(t,i,"TargetPurposeListen",e.currentSequenceNumber),n.Gr.addTargetData(e,r).next(()=>r))))}).then(e=>{const r=n.us.get(e.targetId);return(null===r||e.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.us=n.us.insert(e.targetId,e),n.cs.set(t,e.targetId)),e})}async function oo(e,t,n){const r=R(e),i=r.us.get(t),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,e=>r.persistence.referenceDelegate.removeTarget(e,i))}catch(e){if(!Ee(e))throw e;I("LocalStore","Failed to update sequence numbers for target ".concat(t,": ").concat(e))}r.us=r.us.remove(t),r.cs.delete(i.target)}function lo(e,t,n){const r=R(e);let i=X.min(),s=vr();return r.persistence.runTransaction("Execute query","readwrite",e=>function(e,t,n){const r=R(e),i=r.cs.get(n);return void 0!==i?be.resolve(r.us.get(i)):r.Gr.getTargetData(t,n)}(r,e,Yn(t)).next(t=>{if(t)return i=t.lastLimboFreeSnapshotVersion,r.Gr.getMatchingKeysForTargetId(e,t.targetId).next(e=>{s=e})}).next(()=>r._s.getDocumentsMatchingQuery(e,t,n?i:X.min(),n?s:vr())).next(e=>(ho(r,ir(t),e),{documents:e,ds:s})))}function co(e,t){const n=R(e),r=R(n.Gr),i=n.us.get(t);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",e=>r.ut(e,t).next(e=>e?e.target:null))}function uo(e,t){const n=R(e),r=n.ls.get(t)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",e=>n.hs.getAllFromCollectionGroup(e,t,de(r,-1),Number.MAX_SAFE_INTEGER)).then(e=>(ho(n,t,e),e))}function ho(e,t,n){let r=e.ls.get(t)||X.min();n.forEach((e,t)=>{t.readTime.compareTo(r)>0&&(r=t.readTime)}),e.ls.set(t,r)}async function fo(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:vr();const r=await ao(e,Yn(ps(t.bundledQuery))),i=R(e);return i.persistence.runTransaction("Save named query","readwrite",e=>{const s=Ni(t.readTime);if(r.snapshotVersion.compareTo(s)>=0)return i.jr.saveNamedQuery(e,t);const a=r.withResumeToken(Tt.EMPTY_BYTE_STRING,s);return i.us=i.us.insert(a.targetId,a),i.Gr.updateTargetData(e,a).next(()=>i.Gr.removeMatchingKeysForTargetId(e,r.targetId)).next(()=>i.Gr.addMatchingKeys(e,n,r.targetId)).next(()=>i.jr.saveNamedQuery(e,t))})}function po(e,t){return"firestore_clients_".concat(e,"_").concat(t)}function go(e,t,n){let r="firestore_mutations_".concat(e,"_").concat(n);return t.isAuthenticated()&&(r+="_".concat(t.uid)),r}function mo(e,t){return"firestore_targets_".concat(e,"_").concat(t)}class yo{constructor(e,t,n,r){this.user=e,this.batchId=t,this.state=n,this.error=r}static fs(e,t,n){const r=JSON.parse(n);let i,s="object"==typeof r&&-1!==["pending","acknowledged","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new O(r.error.code,r.error.message))),s?new yo(e,t,r.state,i):(C("SharedClientState","Failed to parse mutation state for ID '".concat(t,"': ").concat(n)),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class vo{constructor(e,t,n){this.targetId=e,this.state=t,this.error=n}static fs(e,t){const n=JSON.parse(t);let r,i="object"==typeof n&&-1!==["not-current","current","rejected"].indexOf(n.state)&&(void 0===n.error||"object"==typeof n.error);return i&&n.error&&(i="string"==typeof n.error.message&&"string"==typeof n.error.code,i&&(r=new O(n.error.code,n.error.message))),i?new vo(e,n.state,r):(C("SharedClientState","Failed to parse target state for ID '".concat(e,"': ").concat(t)),null)}gs(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class bo{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static fs(e,t){const n=JSON.parse(t);let r="object"==typeof n&&n.activeTargetIds instanceof Array,i=wr();for(let s=0;r&&s<n.activeTargetIds.length;++s)r=je(n.activeTargetIds[s]),i=i.add(n.activeTargetIds[s]);return r?new bo(e,i):(C("SharedClientState","Failed to parse client data for instance '".concat(e,"': ").concat(t)),null)}}class wo{constructor(e,t){this.clientId=e,this.onlineState=t}static fs(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new wo(t.clientId,t.onlineState):(C("SharedClientState","Failed to parse online state: ".concat(e)),null)}}class xo{constructor(){this.activeTargetIds=wr()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class _o{constructor(e,t,n,r,i){this.window=e,this.li=t,this.persistenceKey=n,this.ws=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ss=this.bs.bind(this),this.Ds=new yt(Y),this.started=!1,this.vs=[];const s=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Cs=po(this.persistenceKey,this.ws),this.Fs=function(e){return"firestore_sequence_number_".concat(e)}(this.persistenceKey),this.Ds=this.Ds.insert(this.ws,new xo),this.Ms=new RegExp("^firestore_clients_".concat(s,"_([^_]*)$")),this.xs=new RegExp("^firestore_mutations_".concat(s,"_(\\d+)(?:_(.*))?$")),this.Os=new RegExp("^firestore_targets_".concat(s,"_(\\d+)$")),this.Ns=function(e){return"firestore_online_state_".concat(e)}(this.persistenceKey),this.Ls=function(e){return"firestore_bundle_loaded_v2_".concat(e)}(this.persistenceKey),this.window.addEventListener("storage",this.Ss)}static p(e){return!(!e||!e.localStorage)}async start(){const e=await this.syncEngine.$i();for(const n of e){if(n===this.ws)continue;const e=this.getItem(po(this.persistenceKey,n));if(e){const t=bo.fs(n,e);t&&(this.Ds=this.Ds.insert(t.clientId,t))}}this.Bs();const t=this.storage.getItem(this.Ns);if(t){const e=this.ks(t);e&&this.qs(e)}for(const n of this.vs)this.bs(n);this.vs=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0}writeSequenceNumber(e){this.setItem(this.Fs,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Qs(this.Ds)}isActiveQueryTarget(e){let t=!1;return this.Ds.forEach((n,r)=>{r.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Ks(e,"pending")}updateMutationState(e,t,n){this.Ks(e,t,n),this.$s(e)}addLocalQueryTarget(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n="not-current";if(this.isActiveQueryTarget(e)){const t=this.storage.getItem(mo(this.persistenceKey,e));if(t){const r=vo.fs(e,t);r&&(n=r.state)}}return t&&this.Us.ps(e),this.Bs(),n}removeLocalQueryTarget(e){this.Us.ys(e),this.Bs()}isLocalQueryTarget(e){return this.Us.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(mo(this.persistenceKey,e))}updateQueryState(e,t,n){this.Ws(e,t,n)}handleUserChange(e,t,n){t.forEach(e=>{this.$s(e)}),this.currentUser=e,n.forEach(e=>{this.addPendingMutation(e)})}setOnlineState(e){this.Gs(e)}notifyBundleLoaded(e){this.zs(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.Ss),this.removeItem(this.Cs),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return I("SharedClientState","READ",e,t),t}setItem(e,t){I("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){I("SharedClientState","REMOVE",e),this.storage.removeItem(e)}bs(e){const t=e;if(t.storageArea===this.storage){if(I("SharedClientState","EVENT",t.key,t.newValue),t.key===this.Cs)return void C("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.li.enqueueRetryable(async()=>{if(this.started){if(null!==t.key)if(this.Ms.test(t.key)){if(null==t.newValue){const e=this.js(t.key);return this.Hs(e,null)}{const e=this.Js(t.key,t.newValue);if(e)return this.Hs(e.clientId,e)}}else if(this.xs.test(t.key)){if(null!==t.newValue){const e=this.Ys(t.key,t.newValue);if(e)return this.Zs(e)}}else if(this.Os.test(t.key)){if(null!==t.newValue){const e=this.Xs(t.key,t.newValue);if(e)return this.eo(e)}}else if(t.key===this.Ns){if(null!==t.newValue){const e=this.ks(t.newValue);if(e)return this.qs(e)}}else if(t.key===this.Fs){const e=function(e){let t=Ne.oe;if(null!=e)try{const n=JSON.parse(e);N("number"==typeof n),t=n}catch(e){C("SharedClientState","Failed to read sequence number from WebStorage",e)}return t}(t.newValue);e!==Ne.oe&&this.sequenceNumberHandler(e)}else if(t.key===this.Ls){const e=this.no(t.newValue);await Promise.all(e.map(e=>this.syncEngine.ro(e)))}}else this.vs.push(t)})}}get Us(){return this.Ds.get(this.ws)}Bs(){this.setItem(this.Cs,this.Us.gs())}Ks(e,t,n){const r=new yo(this.currentUser,e,t,n),i=go(this.persistenceKey,this.currentUser,e);this.setItem(i,r.gs())}$s(e){const t=go(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Gs(e){const t={clientId:this.ws,onlineState:e};this.storage.setItem(this.Ns,JSON.stringify(t))}Ws(e,t,n){const r=mo(this.persistenceKey,e),i=new vo(e,t,n);this.setItem(r,i.gs())}zs(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Ls,t)}js(e){const t=this.Ms.exec(e);return t?t[1]:null}Js(e,t){const n=this.js(e);return bo.fs(n,t)}Ys(e,t){const n=this.xs.exec(e),r=Number(n[1]),i=void 0!==n[2]?n[2]:null;return yo.fs(new _(i),r,t)}Xs(e,t){const n=this.Os.exec(e),r=Number(n[1]);return vo.fs(r,t)}ks(e){return wo.fs(e)}no(e){return JSON.parse(e)}async Zs(e){if(e.user.uid===this.currentUser.uid)return this.syncEngine.io(e.batchId,e.state,e.error);I("SharedClientState","Ignoring mutation for non-active user ".concat(e.user.uid))}eo(e){return this.syncEngine.so(e.targetId,e.state,e.error)}Hs(e,t){const n=t?this.Ds.insert(e,t):this.Ds.remove(e),r=this.Qs(this.Ds),i=this.Qs(n),s=[],a=[];return i.forEach(e=>{r.has(e)||s.push(e)}),r.forEach(e=>{i.has(e)||a.push(e)}),this.syncEngine.oo(s,a).then(()=>{this.Ds=n})}qs(e){this.Ds.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Qs(e){let t=wr();return e.forEach((e,n)=>{t=t.unionWith(n.activeTargetIds)}),t}}class ko{constructor(){this._o=new xo,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,n){}addLocalQueryTarget(e){return(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,n){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new xo,Promise.resolve()}handleUserChange(e,t,n){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class So{uo(e){}shutdown(){}}class Eo{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){I("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){I("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let To=null;function Io(){return null===To?To=268435456+Math.round(2147483648*Math.random()):To++,"0x"+To.toString(16)}const Co={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Ao{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}const Do="WebChannelConnection";class Po extends class{get Co(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",n=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.Fo=t+"://"+e.host,this.Mo="projects/".concat(n,"/databases/").concat(r),this.xo="(default)"===this.databaseId.database?"project_id=".concat(n):"project_id=".concat(n,"&database_id=").concat(r)}Oo(e,t,n,r,i){const s=Io(),a=this.No(e,t.toUriEncodedString());I("RestConnection","Sending RPC '".concat(e,"' ").concat(s,":"),a,n);const o={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(o,r,i),this.Bo(e,a,o,n).then(t=>(I("RestConnection","Received RPC '".concat(e,"' ").concat(s,": "),t),t),t=>{throw A("RestConnection","RPC '".concat(e,"' ").concat(s," failed with error: "),t,"url: ",a,"request:",n),t})}ko(e,t,n,r,i,s){return this.Oo(e,t,n,r,i)}Lo(e,t,n){e["X-Goog-Api-Client"]="gl-js/ fire/"+k,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((t,n)=>e[n]=t),n&&n.headers.forEach((t,n)=>e[n]=t)}No(e,t){const n=Co[e];return"".concat(this.Fo,"/v1/").concat(t,":").concat(n)}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,n,r){const i=Io();return new Promise((s,a)=>{const o=new h;o.setWithCredentials(!0),o.listenOnce(f.COMPLETE,()=>{try{switch(o.getLastErrorCode()){case p.NO_ERROR:const t=o.getResponseJson();I(Do,"XHR for RPC '".concat(e,"' ").concat(i," received:"),JSON.stringify(t)),s(t);break;case p.TIMEOUT:I(Do,"RPC '".concat(e,"' ").concat(i," timed out")),a(new O(j.DEADLINE_EXCEEDED,"Request time out"));break;case p.HTTP_ERROR:const n=o.getStatus();if(I(Do,"RPC '".concat(e,"' ").concat(i," failed with status:"),n,"response text:",o.getResponseText()),n>0){let e=o.getResponseJson();Array.isArray(e)&&(e=e[0]);const t=null==e?void 0:e.error;if(t&&t.status&&t.message){const e=function(e){const t=e.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(t)>=0?t:j.UNKNOWN}(t.status);a(new O(e,t.message))}else a(new O(j.UNKNOWN,"Server responded with status "+o.getStatus()))}else a(new O(j.UNAVAILABLE,"Connection failed."));break;default:P()}}finally{I(Do,"RPC '".concat(e,"' ").concat(i," completed."))}});const l=JSON.stringify(r);I(Do,"RPC '".concat(e,"' ").concat(i," sending request:"),r),o.send(t,"POST",l,n,15)})}qo(e,t,n){const r=Io(),i=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=v(),a=y(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/".concat(this.databaseId.projectId,"/databases/").concat(this.databaseId.database)},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},l=this.longPollingOptions.timeoutSeconds;void 0!==l&&(o.longPollingTimeout=Math.round(1e3*l)),this.useFetchStreams&&(o.useFetchStreams=!0),this.Lo(o.initMessageHeaders,t,n),o.encodeInitMessageHeaders=!0;const c=i.join("");I(Do,"Creating RPC '".concat(e,"' stream ").concat(r,": ").concat(c),o);const u=s.createWebChannel(c,o);let h=!1,f=!1;const p=new Ao({Eo:t=>{f?I(Do,"Not sending because RPC '".concat(e,"' stream ").concat(r," is closed:"),t):(h||(I(Do,"Opening RPC '".concat(e,"' stream ").concat(r," transport.")),u.open(),h=!0),I(Do,"RPC '".concat(e,"' stream ").concat(r," sending:"),t),u.send(t))},Ao:()=>u.close()}),b=(e,t,n)=>{e.listen(t,e=>{try{n(e)}catch(e){setTimeout(()=>{throw e},0)}})};return b(u,d.EventType.OPEN,()=>{f||(I(Do,"RPC '".concat(e,"' stream ").concat(r," transport opened.")),p.So())}),b(u,d.EventType.CLOSE,()=>{f||(f=!0,I(Do,"RPC '".concat(e,"' stream ").concat(r," transport closed")),p.Do())}),b(u,d.EventType.ERROR,t=>{f||(f=!0,A(Do,"RPC '".concat(e,"' stream ").concat(r," transport errored:"),t),p.Do(new O(j.UNAVAILABLE,"The operation could not be completed")))}),b(u,d.EventType.MESSAGE,t=>{var n;if(!f){const i=t.data[0];N(!!i);const s=i,a=(null==s?void 0:s.error)||(null===(n=s[0])||void 0===n?void 0:n.error);if(a){I(Do,"RPC '".concat(e,"' stream ").concat(r," received error:"),a);const t=a.status;let n=function(e){const t=ii[e];if(void 0!==t)return oi(t)}(t),i=a.message;void 0===n&&(n=j.INTERNAL,i="Unknown error status: "+t+" with message "+a.message),f=!0,p.Do(new O(n,i)),u.close()}else I(Do,"RPC '".concat(e,"' stream ").concat(r," received:"),i),p.vo(i)}}),b(a,m.STAT_EVENT,t=>{t.stat===g.PROXY?I(Do,"RPC '".concat(e,"' stream ").concat(r," detected buffering proxy")):t.stat===g.NOPROXY&&I(Do,"RPC '".concat(e,"' stream ").concat(r," detected no buffering proxy"))}),setTimeout(()=>{p.bo()},0),p}}function No(){return"undefined"!=typeof window?window:null}function Mo(){return"undefined"!=typeof document?document:null}function Ro(e){return new Ii(e,!0)}class jo{constructor(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1e3,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1.5,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:6e4;this.li=e,this.timerId=t,this.Qo=n,this.Ko=r,this.$o=i,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),n=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-n);r>0&&I("ExponentialBackoff","Backing off for ".concat(r," ms (base delay: ").concat(this.Uo," ms, delay with jitter: ").concat(t," ms, last attempt: ").concat(n," ms ago)")),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){null!==this.Wo&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){null!==this.Wo&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}class Oo{constructor(e,t,n,r,i,s,a,o){this.li=e,this.Yo=n,this.Zo=r,this.connection=i,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=a,this.listener=o,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new jo(e,t)}i_(){return 1===this.state||5===this.state||this.s_()}s_(){return 2===this.state||3===this.state}start(){this.n_=0,4!==this.state?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&null===this.e_&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,4!==e?this.r_.reset():t&&t.code===j.RESOURCE_EXHAUSTED?(C(t.toString()),C("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===j.UNAUTHENTICATED&&3!==this.state&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),null!==this.stream&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(e=>{let[n,r]=e;this.Xo===t&&this.I_(n,r)},t=>{e(()=>{const e=new O(j.UNKNOWN,"Fetching auth token failed: "+t.message);return this.E_(e)})})}I_(e,t){const n=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{n(()=>this.listener.Ro())}),this.stream.mo(()=>{n(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(e=>{n(()=>this.E_(e))}),this.stream.onMessage(e=>{n(()=>1==++this.n_?this.A_(e):this.onNext(e))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return I("PersistentStream","close with error: ".concat(e)),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(I("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lo extends Oo{constructor(e,t,n,r,i,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=function(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(e){return"NO_CHANGE"===e?0:"ADD"===e?1:"REMOVE"===e?2:"CURRENT"===e?3:"RESET"===e?4:P()}(t.targetChange.targetChangeType||"NO_CHANGE"),i=t.targetChange.targetIds||[],s=function(e,t){return e.useProto3Json?(N(void 0===t||"string"==typeof t),Tt.fromBase64String(t||"")):(N(void 0===t||t instanceof Buffer||t instanceof Uint8Array),Tt.fromUint8Array(t||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,o=a&&function(e){const t=void 0===e.code?j.UNKNOWN:oi(e.code);return new O(t,e.message||"")}(a);n=new bi(r,i,s,o||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const i=Li(e,r.document.name),s=Ni(r.document.updateTime),a=r.document.createTime?Ni(r.document.createTime):X.min(),o=new ln({mapValue:{fields:r.document.fields}}),l=un.newFoundDocument(i,s,a,o),c=r.targetIds||[],u=r.removedTargetIds||[];n=new yi(c,u,l.key,l)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const i=Li(e,r.document),s=r.readTime?Ni(r.readTime):X.min(),a=un.newNoDocument(i,s),o=r.removedTargetIds||[];n=new yi([],o,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const i=Li(e,r.document),s=r.removedTargetIds||[];n=new yi([],s,i,null)}else{if(!("filter"in t))return P();{t.filter;const e=t.filter;e.targetId;const{count:r=0,unchangedNames:i}=e,s=new ri(r,i),a=e.targetId;n=new vi(a,s)}}return n}(this.serializer,e),n=function(e){if(!("targetChange"in e))return X.min();const t=e.targetChange;return t.targetIds&&t.targetIds.length?X.min():t.readTime?Ni(t.readTime):X.min()}(e);return this.listener.R_(t,n)}V_(e){const t={};t.database=zi(this.serializer),t.addTarget=function(e,t){let n;const r=t.target;if(n=Vn(r)?{documents:Ki(e,r)}:{query:Gi(e,r).ct},n.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){n.resumeToken=Di(e,t.resumeToken);const r=Ci(e,t.expectedCount);null!==r&&(n.expectedCount=r)}else if(t.snapshotVersion.compareTo(X.min())>0){n.readTime=Ai(e,t.snapshotVersion.toTimestamp());const r=Ci(e,t.expectedCount);null!==r&&(n.expectedCount=r)}return n}(this.serializer,e);const n=function(e,t){const n=function(e){switch(e){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return P()}}(t.purpose);return null==n?null:{"goog-listen-tags":n}}(this.serializer,e);n&&(t.labels=n),this.c_(t)}m_(e){const t={};t.database=zi(this.serializer),t.removeTarget=e,this.c_(t)}}class Fo extends Oo{constructor(e,t,n,r,i,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,n,r,s),this.serializer=i}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return N(!!e.streamToken),this.lastStreamToken=e.streamToken,N(!e.writeResults||0===e.writeResults.length),this.listener.p_()}onNext(e){N(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=function(e,t){return e&&e.length>0?(N(void 0!==t),e.map(e=>function(e,t){let n=e.updateTime?Ni(e.updateTime):Ni(t);return n.isEqual(X.min())&&(n=Ni(t)),new Lr(n,e.transformResults||[])}(e,t))):[]}(e.writeResults,e.commitTime),n=Ni(e.commitTime);return this.listener.y_(n,t)}w_(){const e={};e.database=zi(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(e=>qi(this.serializer,e))};this.c_(t)}}class Vo extends class{}{constructor(e,t,n,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=n,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new O(j.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,n,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(i=>{let[s,a]=i;return this.connection.Oo(e,Ri(t,n),r,s,a)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(j.UNKNOWN,e.toString())})}ko(e,t,n,r,i){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(s=>{let[a,o]=s;return this.connection.ko(e,Ri(t,n),r,a,o,i)}).catch(e=>{throw"FirebaseError"===e.name?(e.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),e):new O(j.UNKNOWN,e.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class zo{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){0===this.D_&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){"Online"===this.state?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_("Connection failed 1 times. Most recent error: ".concat(e.toString())),this.M_("Offline")))}set(e){this.N_(),this.D_=0,"Online"===e&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t="Could not reach Cloud Firestore backend. ".concat(e,"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.");this.C_?(C(t),this.C_=!1):I("OnlineStateTracker",t)}N_(){null!==this.v_&&(this.v_.cancel(),this.v_=null)}}class Uo{constructor(e,t,n,r,i){this.localStore=e,this.datastore=t,this.asyncQueue=n,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=i,this.Q_.uo(e=>{n.enqueueAndForget(async()=>{Zo(this)&&(I("RemoteStore","Restarting streams for network reachability change."),await async function(e){const t=R(e);t.k_.add(4),await Wo(t),t.K_.set("Unknown"),t.k_.delete(4),await Bo(t)}(this))})}),this.K_=new zo(n,r)}}async function Bo(e){if(Zo(e))for(const t of e.q_)await t(!0)}async function Wo(e){for(const t of e.q_)await t(!1)}function qo(e,t){const n=R(e);n.B_.has(t.targetId)||(n.B_.set(t.targetId,t),Yo(n)?Qo(n):gl(n).s_()&&Ko(n,t))}function Ho(e,t){const n=R(e),r=gl(n);n.B_.delete(t),r.s_()&&Go(n,t),0===n.B_.size&&(r.s_()?r.a_():Zo(n)&&n.K_.set("Unknown"))}function Ko(e,t){if(e.U_.xe(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(X.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}gl(e).V_(t)}function Go(e,t){e.U_.xe(t),gl(e).m_(t)}function Qo(e){e.U_=new xi({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),ut:t=>e.B_.get(t)||null,nt:()=>e.datastore.serializer.databaseId}),gl(e).start(),e.K_.F_()}function Yo(e){return Zo(e)&&!gl(e).i_()&&e.B_.size>0}function Zo(e){return 0===R(e).k_.size}function $o(e){e.U_=void 0}async function Jo(e){e.K_.set("Online")}async function Xo(e){e.B_.forEach((t,n)=>{Ko(e,t)})}async function el(e,t){$o(e),Yo(e)?(e.K_.O_(t),Qo(e)):e.K_.set("Unknown")}async function tl(e,t,n){if(e.K_.set("Online"),t instanceof bi&&2===t.state&&t.cause)try{await async function(e,t){const n=t.cause;for(const r of t.targetIds)e.B_.has(r)&&(await e.remoteSyncer.rejectListen(r,n),e.B_.delete(r),e.U_.removeTarget(r))}(e,t)}catch(n){I("RemoteStore","Failed to remove targets %s: %s ",t.targetIds.join(","),n),await nl(e,n)}else if(t instanceof yi?e.U_.$e(t):t instanceof vi?e.U_.Je(t):e.U_.Ge(t),!n.isEqual(X.min()))try{const t=await ro(e.localStore);n.compareTo(t)>=0&&await function(e,t){const n=e.U_.it(t);return n.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){const i=e.B_.get(r);i&&e.B_.set(r,i.withResumeToken(n.resumeToken,t))}}),n.targetMismatches.forEach((t,n)=>{const r=e.B_.get(t);if(!r)return;e.B_.set(t,r.withResumeToken(Tt.EMPTY_BYTE_STRING,r.snapshotVersion)),Go(e,t);const i=new ss(r.target,t,n,r.sequenceNumber);Ko(e,i)}),e.remoteSyncer.applyRemoteEvent(n)}(e,n)}catch(t){I("RemoteStore","Failed to raise snapshot:",t),await nl(e,t)}}async function nl(e,t,n){if(!Ee(t))throw t;e.k_.add(1),await Wo(e),e.K_.set("Offline"),n||(n=()=>ro(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{I("RemoteStore","Retrying IndexedDB access"),await n(),e.k_.delete(1),await Bo(e)})}function rl(e,t){return t().catch(n=>nl(e,n,t))}async function il(e){const t=R(e),n=ml(t);let r=t.L_.length>0?t.L_[t.L_.length-1].batchId:-1;for(;sl(t);)try{const e=await so(t.localStore,r);if(null===e){0===t.L_.length&&n.a_();break}r=e.batchId,al(t,e)}catch(e){await nl(t,e)}ol(t)&&ll(t)}function sl(e){return Zo(e)&&e.L_.length<10}function al(e,t){e.L_.push(t);const n=ml(e);n.s_()&&n.f_&&n.g_(t.mutations)}function ol(e){return Zo(e)&&!ml(e).i_()&&e.L_.length>0}function ll(e){ml(e).start()}async function cl(e){ml(e).w_()}async function ul(e){const t=ml(e);for(const n of e.L_)t.g_(n.mutations)}async function hl(e,t,n){const r=e.L_.shift(),i=ei.from(r,t,n);await rl(e,()=>e.remoteSyncer.applySuccessfulWrite(i)),await il(e)}async function dl(e,t){t&&ml(e).f_&&await async function(e,t){if(function(e){return ai(e)&&e!==j.ABORTED}(t.code)){const n=e.L_.shift();ml(e).__(),await rl(e,()=>e.remoteSyncer.rejectFailedWrite(n.batchId,t)),await il(e)}}(e,t),ol(e)&&ll(e)}async function fl(e,t){const n=R(e);n.asyncQueue.verifyOperationInProgress(),I("RemoteStore","RemoteStore received new credentials");const r=Zo(n);n.k_.add(3),await Wo(n),r&&n.K_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.k_.delete(3),await Bo(n)}async function pl(e,t){const n=R(e);t?(n.k_.delete(2),await Bo(n)):t||(n.k_.add(2),await Wo(n),n.K_.set("Unknown"))}function gl(e){return e.W_||(e.W_=function(e,t,n){const r=R(e);return r.b_(),new Lo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:Jo.bind(null,e),mo:Xo.bind(null,e),po:el.bind(null,e),R_:tl.bind(null,e)}),e.q_.push(async t=>{t?(e.W_.__(),Yo(e)?Qo(e):e.K_.set("Unknown")):(await e.W_.stop(),$o(e))})),e.W_}function ml(e){return e.G_||(e.G_=function(e,t,n){const r=R(e);return r.b_(),new Fo(t,r.connection,r.authCredentials,r.appCheckCredentials,r.serializer,n)}(e.datastore,e.asyncQueue,{Ro:()=>Promise.resolve(),mo:cl.bind(null,e),po:dl.bind(null,e),p_:ul.bind(null,e),y_:hl.bind(null,e)}),e.q_.push(async t=>{t?(e.G_.__(),await il(e)):(await e.G_.stop(),e.L_.length>0&&(I("RemoteStore","Stopping write stream with ".concat(e.L_.length," pending writes")),e.L_=[]))})),e.G_}class yl{constructor(e,t,n,r,i){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new L,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(e=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,n,r,i){const s=Date.now()+n,a=new yl(e,t,s,r,i);return a.start(n),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new O(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function vl(e,t){if(C("AsyncQueue","".concat(t,": ").concat(e)),Ee(e))return new O(j.UNAVAILABLE,"".concat(t,": ").concat(e));throw e}class bl{static emptySet(e){return new bl(e.comparator)}constructor(e){this.comparator=e?(t,n)=>e(t,n)||ie.comparator(t.key,n.key):(e,t)=>ie.comparator(e.key,t.key),this.keyedMap=hr(),this.sortedSet=new yt(this.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,n)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof bl))return!1;if(this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),n=e.sortedSet.getIterator();for(;t.hasNext();){const e=t.getNext().key,r=n.getNext().key;if(!e.isEqual(r))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const n=new bl;return n.comparator=this.comparator,n.keyedMap=e,n.sortedSet=t,n}}class wl{constructor(){this.z_=new yt(ie.comparator)}track(e){const t=e.doc.key,n=this.z_.get(t);n?0!==e.type&&3===n.type?this.z_=this.z_.insert(t,e):3===e.type&&1!==n.type?this.z_=this.z_.insert(t,{type:n.type,doc:e.doc}):2===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):2===e.type&&0===n.type?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):1===e.type&&0===n.type?this.z_=this.z_.remove(t):1===e.type&&2===n.type?this.z_=this.z_.insert(t,{type:1,doc:n.doc}):0===e.type&&1===n.type?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):P():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,n)=>{e.push(n)}),e}}class xl{constructor(e,t,n,r,i,s,a,o,l){this.query=e,this.docs=t,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=s,this.syncStateChanged=a,this.excludesMetadataChanges=o,this.hasCachedResults=l}static fromInitialDocuments(e,t,n,r,i){const s=[];return t.forEach(e=>{s.push({type:0,doc:e})}),new xl(e,t,bl.emptySet(t),s,n,r,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&er(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,n=e.docChanges;if(t.length!==n.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==n[r].type||!t[r].doc.isEqual(n[r].doc))return!1;return!0}}class _l{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class kl{constructor(){this.queries=Sl(),this.onlineState="Unknown",this.X_=new Set}terminate(){!function(e,t){const n=R(e),r=n.queries;n.queries=Sl(),r.forEach((e,n)=>{for(const r of n.J_)r.onError(t)})}(this,new O(j.ABORTED,"Firestore shutting down"))}}function Sl(){return new or(e=>tr(e),er)}async function El(e,t){const n=R(e);let r=3;const i=t.query;let s=n.queries.get(i);s?!s.Y_()&&t.Z_()&&(r=2):(s=new _l,r=t.Z_()?0:1);try{switch(r){case 0:s.H_=await n.onListen(i,!0);break;case 1:s.H_=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(e){const n=vl(e,"Initialization of query '".concat(nr(t.query),"' failed"));return void t.onError(n)}n.queries.set(i,s),s.J_.push(t),t.ea(n.onlineState),s.H_&&t.ta(s.H_)&&Al(n)}async function Tl(e,t){const n=R(e),r=t.query;let i=3;const s=n.queries.get(r);if(s){const e=s.J_.indexOf(t);e>=0&&(s.J_.splice(e,1),0===s.J_.length?i=t.Z_()?0:1:!s.Y_()&&t.Z_()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Il(e,t){const n=R(e);let r=!1;for(const i of t){const e=i.query,t=n.queries.get(e);if(t){for(const e of t.J_)e.ta(i)&&(r=!0);t.H_=i}}r&&Al(n)}function Cl(e,t,n){const r=R(e),i=r.queries.get(t);if(i)for(const s of i.J_)s.onError(n);r.queries.delete(t)}function Al(e){e.X_.forEach(e=>{e.next()})}var Dl,Pl;(Pl=Dl||(Dl={})).na="default",Pl.Cache="cache";class Nl{constructor(e,t,n){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=n||{}}ta(e){if(!this.options.includeMetadataChanges){const t=[];for(const n of e.docChanges)3!==n.type&&t.push(n);e=new xl(e.query,e.docs,e.oldDocs,t,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache)return!0;if(!this.Z_())return!0;const n="Offline"!==t;return(!this.options.ua||!n)&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&!0===this.options.includeMetadataChanges}aa(e){e=xl.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==Dl.Cache}}class Ml{constructor(e,t){this.ca=e,this.byteLength=t}la(){return"metadata"in this.ca}}class Rl{constructor(e){this.serializer=e}As(e){return Li(this.serializer,e)}Rs(e){return e.metadata.exists?Wi(this.serializer,e.document,!1):un.newNoDocument(this.As(e.metadata.name),this.Vs(e.metadata.readTime))}Vs(e){return Ni(e)}}class jl{constructor(e,t,n){this.ha=e,this.localStore=t,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Ol(e)}Pa(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.ca.namedQuery)this.queries.push(e.ca.namedQuery);else if(e.ca.documentMetadata){this.documents.push({metadata:e.ca.documentMetadata}),e.ca.documentMetadata.exists||++t;const n=te.fromString(e.ca.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else e.ca.document&&(this.documents[this.documents.length-1].document=e.ca.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Ta(e){const t=new Map,n=new Rl(this.serializer);for(const r of e)if(r.metadata.queries){const e=n.As(r.metadata.name);for(const n of r.metadata.queries){const r=(t.get(n)||vr()).add(e);t.set(n,r)}}return t}async complete(){const e=await async function(e,t,n,r){const i=R(e);let s=vr(),a=cr();for(const c of n){const e=t.As(c.metadata.name);c.document&&(s=s.add(e));const n=t.Rs(c);n.setReadTime(t.Vs(c.metadata.readTime)),a=a.insert(e,n)}const o=i.hs.newChangeBuffer({trackRemovals:!0}),l=await ao(i,function(e){return Yn(Hn(te.fromString("__bundle__/docs/".concat(e))))}(r));return i.persistence.runTransaction("Apply bundle documents","readwrite",e=>io(e,o,a).next(t=>(o.apply(e),t)).next(t=>i.Gr.removeMatchingKeysForTargetId(e,l.targetId).next(()=>i.Gr.addMatchingKeys(e,s,l.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(e,t.Is,t.Es)).next(()=>t.Is)))}(this.localStore,new Rl(this.serializer),this.documents,this.ha.id),t=this.Ta(this.documents);for(const n of this.queries)await fo(this.localStore,n,t.get(n.name));return this.progress.taskState="Success",{progress:this.progress,Ia:this.collectionGroups,Ea:e}}}function Ol(e){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}class Ll{constructor(e){this.key=e}}class Fl{constructor(e){this.key=e}}class Vl{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=vr(),this.mutatedKeys=vr(),this.Va=sr(e),this.ma=new bl(this.Va)}get fa(){return this.da}ga(e,t){const n=t?t.pa:new wl,r=t?t.ma:this.ma;let i=t?t.mutatedKeys:this.mutatedKeys,s=r,a=!1;const o="F"===this.query.limitType&&r.size===this.query.limit?r.last():null,l="L"===this.query.limitType&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((e,t)=>{const c=r.get(e),u=rr(this.query,t)?t:null,h=!!c&&this.mutatedKeys.has(c.key),d=!!u&&(u.hasLocalMutations||this.mutatedKeys.has(u.key)&&u.hasCommittedMutations);let f=!1;c&&u?c.data.isEqual(u.data)?h!==d&&(n.track({type:3,doc:u}),f=!0):this.ya(c,u)||(n.track({type:2,doc:u}),f=!0,(o&&this.Va(u,o)>0||l&&this.Va(u,l)<0)&&(a=!0)):!c&&u?(n.track({type:0,doc:u}),f=!0):c&&!u&&(n.track({type:1,doc:c}),f=!0,(o||l)&&(a=!0)),f&&(u?(s=s.add(u),i=d?i.add(e):i.delete(e)):(s=s.delete(e),i=i.delete(e)))}),null!==this.query.limit)for(;s.size>this.query.limit;){const e="F"===this.query.limitType?s.last():s.first();s=s.delete(e.key),i=i.delete(e.key),n.track({type:1,doc:e})}return{ma:s,pa:n,ss:a,mutatedKeys:i}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,n,r){const i=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const s=e.pa.j_();s.sort((e,t)=>function(e,t){const n=e=>{switch(e){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return P()}};return n(e)-n(t)}(e.type,t.type)||this.Va(e.doc,t.doc)),this.wa(n),r=null!=r&&r;const a=t&&!r?this.Sa():[],o=0===this.Ra.size&&this.current&&!r?1:0,l=o!==this.Aa;return this.Aa=o,0!==s.length||l?{snapshot:new xl(this.query,e.ma,i,s,e.mutatedKeys,0===o,l,!1,!!n&&n.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ma:this.ma,pa:new wl,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(e=>this.da=this.da.add(e)),e.modifiedDocuments.forEach(e=>{}),e.removedDocuments.forEach(e=>this.da=this.da.delete(e)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=vr(),this.ma.forEach(e=>{this.Da(e.key)&&(this.Ra=this.Ra.add(e.key))});const t=[];return e.forEach(e=>{this.Ra.has(e)||t.push(new Fl(e))}),this.Ra.forEach(n=>{e.has(n)||t.push(new Ll(n))}),t}va(e){this.da=e.ds,this.Ra=vr();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return xl.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,0===this.Aa,this.hasCachedResults)}}class zl{constructor(e,t,n){this.query=e,this.targetId=t,this.view=n}}class Ul{constructor(e){this.key=e,this.Fa=!1}}class Bl{constructor(e,t,n,r,i,s){this.localStore=e,this.remoteStore=t,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=s,this.Ma={},this.xa=new or(e=>tr(e),er),this.Oa=new Map,this.Na=new Set,this.La=new yt(ie.comparator),this.Ba=new Map,this.ka=new Ra,this.qa={},this.Qa=new Map,this.Ka=la.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return!0===this.$a}}async function Wl(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=vc(e);let i;const s=r.xa.get(t);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.Ca()):i=await Hl(r,t,n,!0),i}async function ql(e,t){const n=vc(e);await Hl(n,t,!0,!1)}async function Hl(e,t,n,r){const i=await ao(e.localStore,Yn(t)),s=i.targetId,a=e.sharedClientState.addLocalQueryTarget(s,n);let o;return r&&(o=await Kl(e,t,s,"current"===a,i.resumeToken)),e.isPrimaryClient&&n&&qo(e.remoteStore,i),o}async function Kl(e,t,n,r,i){e.Ua=(t,n,r)=>async function(e,t,n,r){let i=t.view.ga(n);i.ss&&(i=await lo(e.localStore,t.query,!1).then(e=>{let{documents:n}=e;return t.view.ga(n,i)}));const s=r&&r.targetChanges.get(t.targetId),a=r&&null!=r.targetMismatches.get(t.targetId),o=t.view.applyChanges(i,e.isPrimaryClient,s,a);return ic(e,t.targetId,o.ba),o.snapshot}(e,t,n,r);const s=await lo(e.localStore,t,!0),a=new Vl(t,s.ds),o=a.ga(s.documents),l=mi.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==e.onlineState,i),c=a.applyChanges(o,e.isPrimaryClient,l);ic(e,n,c.ba);const u=new zl(t,n,a);return e.xa.set(t,u),e.Oa.has(n)?e.Oa.get(n).push(t):e.Oa.set(n,[t]),c.snapshot}async function Gl(e,t,n){const r=R(e),i=r.xa.get(t),s=r.Oa.get(i.targetId);if(s.length>1)return r.Oa.set(i.targetId,s.filter(e=>!er(e,t))),void r.xa.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await oo(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&Ho(r.remoteStore,i.targetId),nc(r,i.targetId)}).catch(ve)):(nc(r,i.targetId),await oo(r.localStore,i.targetId,!0))}async function Ql(e,t){const n=R(e),r=n.xa.get(t),i=n.Oa.get(r.targetId);n.isPrimaryClient&&1===i.length&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),Ho(n.remoteStore,r.targetId))}async function Yl(e,t){const n=R(e);try{const e=await function(e,t){const n=R(e),r=t.snapshotVersion;let i=n.us;return n.persistence.runTransaction("Apply remote event","readwrite-primary",e=>{const s=n.hs.newChangeBuffer({trackRemovals:!0});i=n.us;const a=[];t.targetChanges.forEach((s,o)=>{const l=i.get(o);if(!l)return;a.push(n.Gr.removeMatchingKeys(e,s.removedDocuments,o).next(()=>n.Gr.addMatchingKeys(e,s.addedDocuments,o)));let c=l.withSequenceNumber(e.currentSequenceNumber);null!==t.targetMismatches.get(o)?c=c.withResumeToken(Tt.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):s.resumeToken.approximateByteSize()>0&&(c=c.withResumeToken(s.resumeToken,r)),i=i.insert(o,c),function(e,t,n){return 0===e.resumeToken.approximateByteSize()||t.snapshotVersion.toMicroseconds()-e.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(l,c,s)&&a.push(n.Gr.updateTargetData(e,c))});let o=cr(),l=vr();if(t.documentUpdates.forEach(r=>{t.resolvedLimboDocuments.has(r)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(e,r))}),a.push(io(e,s,t.documentUpdates).next(e=>{o=e.Is,l=e.Es})),!r.isEqual(X.min())){const t=n.Gr.getLastRemoteSnapshotVersion(e).next(t=>n.Gr.setTargetsMetadata(e,e.currentSequenceNumber,r));a.push(t)}return be.waitFor(a).next(()=>s.apply(e)).next(()=>n.localDocuments.getLocalViewOfDocuments(e,o,l)).next(()=>o)}).then(e=>(n.us=i,e))}(n.localStore,t);t.targetChanges.forEach((e,t)=>{const r=n.Ba.get(t);r&&(N(e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size<=1),e.addedDocuments.size>0?r.Fa=!0:e.modifiedDocuments.size>0?N(r.Fa):e.removedDocuments.size>0&&(N(r.Fa),r.Fa=!1))}),await oc(n,e,t)}catch(e){await ve(e)}}function Zl(e,t,n){const r=R(e);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){const e=[];r.xa.forEach((n,r)=>{const i=r.view.ea(t);i.snapshot&&e.push(i.snapshot)}),function(e,t){const n=R(e);n.onlineState=t;let r=!1;n.queries.forEach((e,n)=>{for(const i of n.J_)i.ea(t)&&(r=!0)}),r&&Al(n)}(r.eventManager,t),e.length&&r.Ma.R_(e),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function $l(e,t,n){const r=R(e);r.sharedClientState.updateQueryState(t,"rejected",n);const i=r.Ba.get(t),s=i&&i.key;if(s){let e=new yt(ie.comparator);e=e.insert(s,un.newNoDocument(s,X.min()));const n=vr().add(s),i=new gi(X.min(),new Map,new yt(Y),e,n);await Yl(r,i),r.La=r.La.remove(s),r.Ba.delete(t),ac(r)}else await oo(r.localStore,t,!1).then(()=>nc(r,t,n)).catch(ve)}async function Jl(e,t){const n=R(e),r=t.batch.batchId;try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",e=>{const r=t.batch.keys(),i=n.hs.newChangeBuffer({trackRemovals:!0});return function(e,t,n,r){const i=n.batch,s=i.keys();let a=be.resolve();return s.forEach(e=>{a=a.next(()=>r.getEntry(t,e)).next(t=>{const s=n.docVersions.get(e);N(null!==s),t.version.compareTo(s)<0&&(i.applyToRemoteDocument(t,n),t.isValidDocument()&&(t.setReadTime(n.commitVersion),r.addEntry(t)))})}),a.next(()=>e.mutationQueue.removeMutationBatch(t,i))}(n,e,t,i).next(()=>i.apply(e)).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,function(e){let t=vr();for(let n=0;n<e.mutationResults.length;++n)e.mutationResults[n].transformResults.length>0&&(t=t.add(e.batch.mutations[n].key));return t}(t))).next(()=>n.localDocuments.getDocuments(e,r))})}(n.localStore,t);tc(n,r,null),ec(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await oc(n,e)}catch(e){await ve(e)}}async function Xl(e,t,n){const r=R(e);try{const e=await function(e,t){const n=R(e);return n.persistence.runTransaction("Reject batch","readwrite-primary",e=>{let r;return n.mutationQueue.lookupMutationBatch(e,t).next(t=>(N(null!==t),r=t.keys(),n.mutationQueue.removeMutationBatch(e,t))).next(()=>n.mutationQueue.performConsistencyCheck(e)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(e,r,t)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(e,r)).next(()=>n.localDocuments.getDocuments(e,r))})}(r.localStore,t);tc(r,t,n),ec(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await oc(r,e)}catch(n){await ve(n)}}function ec(e,t){(e.Qa.get(t)||[]).forEach(e=>{e.resolve()}),e.Qa.delete(t)}function tc(e,t,n){const r=R(e);let i=r.qa[r.currentUser.toKey()];if(i){const e=i.get(t);e&&(n?e.reject(n):e.resolve(),i=i.remove(t)),r.qa[r.currentUser.toKey()]=i}}function nc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.Oa.get(t))e.xa.delete(r),n&&e.Ma.Wa(r,n);e.Oa.delete(t),e.isPrimaryClient&&e.ka.yr(t).forEach(t=>{e.ka.containsKey(t)||rc(e,t)})}function rc(e,t){e.Na.delete(t.path.canonicalString());const n=e.La.get(t);null!==n&&(Ho(e.remoteStore,n),e.La=e.La.remove(t),e.Ba.delete(n),ac(e))}function ic(e,t,n){for(const r of n)r instanceof Ll?(e.ka.addReference(r.key,t),sc(e,r)):r instanceof Fl?(I("SyncEngine","Document no longer in limbo: "+r.key),e.ka.removeReference(r.key,t),e.ka.containsKey(r.key)||rc(e,r.key)):P()}function sc(e,t){const n=t.key,r=n.path.canonicalString();e.La.get(n)||e.Na.has(r)||(I("SyncEngine","New document in limbo: "+n),e.Na.add(r),ac(e))}function ac(e){for(;e.Na.size>0&&e.La.size<e.maxConcurrentLimboResolutions;){const t=e.Na.values().next().value;e.Na.delete(t);const n=new ie(te.fromString(t)),r=e.Ka.next();e.Ba.set(r,new Ul(n)),e.La=e.La.insert(n,r),qo(e.remoteStore,new ss(Yn(Hn(n.path)),r,"TargetPurposeLimboResolution",Ne.oe))}}async function oc(e,t,n){const r=R(e),i=[],s=[],a=[];r.xa.isEmpty()||(r.xa.forEach((e,o)=>{a.push(r.Ua(o,t,n).then(e=>{var t;if((e||n)&&r.isPrimaryClient){const i=e?!e.fromCache:null===(t=null==n?void 0:n.targetChanges.get(o.targetId))||void 0===t?void 0:t.current;r.sharedClientState.updateQueryState(o.targetId,i?"current":"not-current")}if(e){i.push(e);const t=$a.zi(o.targetId,e);s.push(t)}}))}),await Promise.all(a),r.Ma.R_(i),await async function(e,t){const n=R(e);try{await n.persistence.runTransaction("notifyLocalViewChanges","readwrite",e=>be.forEach(t,t=>be.forEach(t.Wi,r=>n.persistence.referenceDelegate.addReference(e,t.targetId,r)).next(()=>be.forEach(t.Gi,r=>n.persistence.referenceDelegate.removeReference(e,t.targetId,r)))))}catch(e){if(!Ee(e))throw e;I("LocalStore","Failed to update sequence numbers: "+e)}for(const r of t){const e=r.targetId;if(!r.fromCache){const t=n.us.get(e),r=t.snapshotVersion,i=t.withLastLimboFreeSnapshotVersion(r);n.us=n.us.insert(e,i)}}}(r.localStore,s))}async function lc(e,t){const n=R(e);if(!n.currentUser.isEqual(t)){I("SyncEngine","User change. New user:",t.toKey());const e=await no(n.localStore,t);n.currentUser=t,function(e,t){e.Qa.forEach(e=>{e.forEach(e=>{e.reject(new O(j.CANCELLED,t))})}),e.Qa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,e.removedBatchIds,e.addedBatchIds),await oc(n,e.Ts)}}function cc(e,t){const n=R(e),r=n.Ba.get(t);if(r&&r.Fa)return vr().add(r.key);{let e=vr();const r=n.Oa.get(t);if(!r)return e;for(const t of r){const r=n.xa.get(t);e=e.unionWith(r.view.fa)}return e}}async function uc(e,t){const n=R(e),r=await lo(n.localStore,t.query,!0),i=t.view.va(r);return n.isPrimaryClient&&ic(n,t.targetId,i.ba),i}async function hc(e,t){const n=R(e);return uo(n.localStore,t).then(e=>oc(n,e))}async function dc(e,t,n,r){const i=R(e),s=await function(e,t){const n=R(e),r=R(n.mutationQueue);return n.persistence.runTransaction("Lookup mutation documents","readonly",e=>r.On(e,t).next(t=>t?n.localDocuments.getDocuments(e,t):be.resolve(null)))}(i.localStore,t);null!==s?("pending"===n?await il(i.remoteStore):"acknowledged"===n||"rejected"===n?(tc(i,t,r||null),ec(i,t),function(e,t){R(R(e).mutationQueue).Ln(t)}(i.localStore,t)):P(),await oc(i,s)):I("SyncEngine","Cannot apply mutation batch with id: "+t)}async function fc(e,t,n){const r=R(e),i=[],s=[];for(const a of t){let e;const t=r.Oa.get(a);if(t&&0!==t.length){e=await ao(r.localStore,Yn(t[0]));for(const e of t){const t=r.xa.get(e),n=await uc(r,t);n.snapshot&&s.push(n.snapshot)}}else{const t=await co(r.localStore,a);e=await ao(r.localStore,t),await Kl(r,pc(t),a,!1,e.resumeToken)}i.push(e)}return r.Ma.R_(s),i}function pc(e){return qn(e.path,e.collectionGroup,e.orderBy,e.filters,e.limit,"F",e.startAt,e.endAt)}function gc(e){return function(e){return R(R(e).persistence).$i()}(R(e).localStore)}async function mc(e,t,n,r){const i=R(e);if(i.$a)return void I("SyncEngine","Ignoring unexpected query state notification.");const s=i.Oa.get(t);if(s&&s.length>0)switch(n){case"current":case"not-current":{const e=await uo(i.localStore,ir(s[0])),r=gi.createSynthesizedRemoteEventForCurrentChange(t,"current"===n,Tt.EMPTY_BYTE_STRING);await oc(i,e,r);break}case"rejected":await oo(i.localStore,t,!0),nc(i,t,r);break;default:P()}}async function yc(e,t,n){const r=vc(e);if(r.$a){for(const e of t){if(r.Oa.has(e)&&r.sharedClientState.isActiveQueryTarget(e)){I("SyncEngine","Adding an already active target "+e);continue}const t=await co(r.localStore,e),n=await ao(r.localStore,t);await Kl(r,pc(t),n.targetId,!1,n.resumeToken),qo(r.remoteStore,n)}for(const e of n)r.Oa.has(e)&&await oo(r.localStore,e,!1).then(()=>{Ho(r.remoteStore,e),nc(r,e)}).catch(ve)}}function vc(e){const t=R(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=Yl.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=cc.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=$l.bind(null,t),t.Ma.R_=Il.bind(null,t.eventManager),t.Ma.Wa=Cl.bind(null,t.eventManager),t}function bc(e){const t=R(e);return t.remoteStore.remoteSyncer.applySuccessfulWrite=Jl.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=Xl.bind(null,t),t}class wc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ro(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return to(this.persistence,new Xa,e.initialUser,this.serializer)}ja(e){return new za(Ba.ei,this.serializer)}za(e){return new ko}async terminate(){var e,t;null===(e=this.gcScheduler)||void 0===e||e.stop(),null===(t=this.indexBackfillerScheduler)||void 0===t||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}wc.provider={build:()=>new wc};class xc extends wc{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){N(this.persistence.referenceDelegate instanceof Wa);const n=this.persistence.referenceDelegate.garbageCollector;return new ga(n,e.asyncQueue,t)}ja(e){const t=void 0!==this.cacheSizeBytes?ea.withCacheSize(this.cacheSizeBytes):ea.DEFAULT;return new za(e=>Wa.ei(e,t),this.serializer)}}class _c extends wc{constructor(e,t,n){super(),this.Za=e,this.cacheSizeBytes=t,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}async initialize(e){await super.initialize(e),await this.Za.initialize(this,e),await bc(this.Za.syncEngine),await il(this.Za.remoteStore),await this.persistence.Si(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))}Ha(e){return to(this.persistence,new Xa,e.initialUser,this.serializer)}Ja(e,t){const n=this.persistence.referenceDelegate.garbageCollector;return new ga(n,e.asyncQueue,t)}Ya(e,t){const n=new Pe(t,this.persistence);return new De(e.asyncQueue,n)}ja(e){const t=Za(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ea.withCacheSize(this.cacheSizeBytes):ea.DEFAULT;return new Ga(this.synchronizeTabs,t,e.clientId,n,e.asyncQueue,No(),Mo(),this.serializer,this.sharedClientState,!!this.forceOwnership)}za(e){return new ko}}class kc extends _c{constructor(e,t){super(e,t,!1),this.Za=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}async initialize(e){await super.initialize(e);const t=this.Za.syncEngine;this.sharedClientState instanceof _o&&(this.sharedClientState.syncEngine={io:dc.bind(null,t),so:mc.bind(null,t),oo:yc.bind(null,t),$i:gc.bind(null,t),ro:hc.bind(null,t)},await this.sharedClientState.start()),await this.persistence.Si(async e=>{await async function(e,t){const n=R(e);if(vc(n),bc(n),!0===t&&!0!==n.$a){const e=n.sharedClientState.getAllActiveQueryTargets(),t=await fc(n,e.toArray());n.$a=!0,await pl(n.remoteStore,!0);for(const r of t)qo(n.remoteStore,r)}else if(!1===t&&!1!==n.$a){const e=[];let t=Promise.resolve();n.Oa.forEach((r,i)=>{n.sharedClientState.isLocalQueryTarget(i)?e.push(i):t=t.then(()=>(nc(n,i),oo(n.localStore,i,!0))),Ho(n.remoteStore,i)}),await t,await fc(n,e),function(e){const t=R(e);t.Ba.forEach((e,n)=>{Ho(t.remoteStore,n)}),t.ka.wr(),t.Ba=new Map,t.La=new yt(ie.comparator)}(n),n.$a=!1,await pl(n.remoteStore,!1)}}(this.Za.syncEngine,e),this.gcScheduler&&(e&&!this.gcScheduler.started?this.gcScheduler.start():e||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(e&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():e||this.indexBackfillerScheduler.stop())})}za(e){const t=No();if(!_o.p(t))throw new O(j.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const n=Za(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new _o(t,e.asyncQueue,n,e.clientId,e.initialUser)}}class Sc{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=e=>Zl(this.syncEngine,e,1),this.remoteStore.remoteSyncer.handleCredentialChange=lc.bind(null,this.syncEngine),await pl(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return new kl}createDatastore(e){const t=Ro(e.databaseInfo.databaseId),n=function(e){return new Po(e)}(e.databaseInfo);return function(e,t,n,r){return new Vo(e,t,n,r)}(e.authCredentials,e.appCheckCredentials,n,t)}createRemoteStore(e){return function(e,t,n,r,i){return new Uo(e,t,n,r,i)}(this.localStore,this.datastore,e.asyncQueue,e=>Zl(this.syncEngine,e,0),Eo.p()?new Eo:new So)}createSyncEngine(e,t){return function(e,t,n,r,i,s,a){const o=new Bl(e,t,n,r,i,s);return a&&(o.$a=!0),o}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(e){const t=R(e);I("RemoteStore","RemoteStore shutting down."),t.k_.add(5),await Wo(t),t.Q_.shutdown(),t.K_.set("Unknown")}(this.remoteStore),null===(e=this.datastore)||void 0===e||e.terminate(),null===(t=this.eventManager)||void 0===t||t.terminate()}}function Ec(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10240,n=0;return{async read(){if(n<e.byteLength){const r={value:e.slice(n,n+t),done:!1};return n+=t,r}return{done:!0}},async cancel(){},releaseLock(){},closed:Promise.resolve()}}Sc.provider={build:()=>new Sc};class Tc{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):C("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}class Ic{constructor(e,t){this.tu=e,this.serializer=t,this.metadata=new L,this.buffer=new Uint8Array,this.nu=new TextDecoder("utf-8"),this.ru().then(e=>{e&&e.la()?this.metadata.resolve(e.ca.metadata):this.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             ".concat(JSON.stringify(null==e?void 0:e.ca))))},e=>this.metadata.reject(e))}close(){return this.tu.cancel()}async getMetadata(){return this.metadata.promise}async Ga(){return await this.getMetadata(),this.ru()}async ru(){const e=await this.iu();if(null===e)return null;const t=this.nu.decode(e),n=Number(t);isNaN(n)&&this.su("length string (".concat(t,") is not valid number"));const r=await this.ou(n);return new Ml(JSON.parse(r),e.length+n)}_u(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}async iu(){for(;this._u()<0&&!await this.au(););if(0===this.buffer.length)return null;const e=this._u();e<0&&this.su("Reached the end of bundle when a length string is expected.");const t=this.buffer.slice(0,e);return this.buffer=this.buffer.slice(e),t}async ou(e){for(;this.buffer.length<e;)await this.au()&&this.su("Reached the end of bundle when more is expected.");const t=this.nu.decode(this.buffer.slice(0,e));return this.buffer=this.buffer.slice(e),t}su(e){throw this.tu.cancel(),new Error("Invalid bundle format: ".concat(e))}async au(){const e=await this.tu.read();if(!e.done){const t=new Uint8Array(this.buffer.length+e.value.length);t.set(this.buffer),t.set(e.value,this.buffer.length),this.buffer=t}return e.done}}class Cc{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}async lookup(e){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new O(j.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;const t=await async function(e,t){const n=R(e),r={documents:t.map(e=>Oi(n.serializer,e))},i=await n.ko("BatchGetDocuments",n.serializer.databaseId,te.emptyPath(),r,t.length),s=new Map;i.forEach(e=>{const t=function(e,t){return"found"in t?function(e,t){N(!!t.found),t.found.name,t.found.updateTime;const n=Li(e,t.found.name),r=Ni(t.found.updateTime),i=t.found.createTime?Ni(t.found.createTime):X.min(),s=new ln({mapValue:{fields:t.found.fields}});return un.newFoundDocument(n,r,i,s)}(e,t):"missing"in t?function(e,t){N(!!t.missing),N(!!t.readTime);const n=Li(e,t.missing),r=Ni(t.readTime);return un.newNoDocument(n,r)}(e,t):P()}(n.serializer,e);s.set(t.key.toString(),t)});const a=[];return t.forEach(e=>{const t=s.get(e.toString());N(!!t),a.push(t)}),a}(this.datastore,e);return t.forEach(e=>this.recordVersion(e)),t}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(e){this.lastTransactionError=e}this.writtenDocs.add(e.toString())}delete(e){this.write(new $r(e,this.precondition(e))),this.writtenDocs.add(e.toString())}async commit(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;const e=this.readVersions;this.mutations.forEach(t=>{e.delete(t.key.toString())}),e.forEach((e,t)=>{const n=ie.fromPath(t);this.mutations.push(new Jr(n,this.precondition(n)))}),await async function(e,t){const n=R(e),r={writes:t.map(e=>qi(n.serializer,e))};await n.Oo("Commit",n.serializer.databaseId,te.emptyPath(),r)}(this.datastore,this.mutations),this.committed=!0}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw P();t=X.min()}const n=this.readVersions.get(e.key.toString());if(n){if(!t.isEqual(n))throw new O(j.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(X.min())?Fr.exists(!1):Fr.updateTime(t):Fr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(X.min()))throw new O(j.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Fr.updateTime(t)}return Fr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Ac{constructor(e,t,n,r,i){this.asyncQueue=e,this.datastore=t,this.options=n,this.updateFunction=r,this.deferred=i,this.uu=n.maxAttempts,this.r_=new jo(this.asyncQueue,"transaction_retry")}cu(){this.uu-=1,this.lu()}lu(){this.r_.jo(async()=>{const e=new Cc(this.datastore),t=this.hu(e);t&&t.then(t=>{this.asyncQueue.enqueueAndForget(()=>e.commit().then(()=>{this.deferred.resolve(t)}).catch(e=>{this.Pu(e)}))}).catch(e=>{this.Pu(e)})})}hu(e){try{const t=this.updateFunction(e);return!Me(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(e){return this.deferred.reject(e),null}}Pu(e){this.uu>0&&this.Tu(e)?(this.uu-=1,this.asyncQueue.enqueueAndForget(()=>(this.lu(),Promise.resolve()))):this.deferred.reject(e)}Tu(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!ai(t)}return!1}}class Dc{constructor(e,t,n,r,i){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=n,this.databaseInfo=r,this.user=_.UNAUTHENTICATED,this.clientId=Q.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(n,async e=>{I("FirestoreClient","Received user=",e.uid),await this.authCredentialListener(e),this.user=e}),this.appCheckCredentials.start(n,e=>(I("FirestoreClient","Received new app check token=",e),this.appCheckCredentialListener(e,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new L;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const n=vl(t,"Failed to shutdown persistence");e.reject(n)}}),e.promise}}async function Pc(e,t){e.asyncQueue.verifyOperationInProgress(),I("FirestoreClient","Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async e=>{r.isEqual(e)||(await no(t.localStore,e),r=e)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function Nc(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Mc(e);I("FirestoreClient","Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(e=>fl(t.remoteStore,e)),e.setAppCheckTokenChangeListener((e,n)=>fl(t.remoteStore,n)),e._onlineComponents=t}async function Mc(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){I("FirestoreClient","Using user provided OfflineComponentProvider");try{await Pc(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(e){return"FirebaseError"===e.name?e.code===j.FAILED_PRECONDITION||e.code===j.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&e instanceof DOMException)||22===e.code||20===e.code||11===e.code}(n))throw n;A("Error using user provided cache. Falling back to memory cache: "+n),await Pc(e,new wc)}}else I("FirestoreClient","Using default OfflineComponentProvider"),await Pc(e,new xc(void 0));return e._offlineComponents}async function Rc(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(I("FirestoreClient","Using user provided OnlineComponentProvider"),await Nc(e,e._uninitializedComponentsProvider._online)):(I("FirestoreClient","Using default OnlineComponentProvider"),await Nc(e,new Sc))),e._onlineComponents}function jc(e){return Mc(e).then(e=>e.persistence)}function Oc(e){return Mc(e).then(e=>e.localStore)}function Lc(e){return Rc(e).then(e=>e.remoteStore)}function Fc(e){return Rc(e).then(e=>e.syncEngine)}function Vc(e){return Rc(e).then(e=>e.datastore)}async function zc(e){const t=await Rc(e),n=t.eventManager;return n.onListen=Wl.bind(null,t.syncEngine),n.onUnlisten=Gl.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=ql.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=Ql.bind(null,t.syncEngine),n}function Uc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Tc({next:o=>{s.eu(),t.enqueueAndForget(()=>Tl(e,a));const l=o.docs.has(n);!l&&o.fromCache?i.reject(new O(j.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&o.fromCache&&r&&"server"===r.source?i.reject(new O(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:e=>i.reject(e)}),a=new Nl(Hn(n.path),s,{includeMetadataChanges:!0,ua:!0});return El(e,a)}(await zc(e),e.asyncQueue,t,n,r)),r.promise}function Bc(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=new L;return e.asyncQueue.enqueueAndForget(async()=>function(e,t,n,r,i){const s=new Tc({next:n=>{s.eu(),t.enqueueAndForget(()=>Tl(e,a)),n.fromCache&&"server"===r.source?i.reject(new O(j.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:e=>i.reject(e)}),a=new Nl(n,s,{includeMetadataChanges:!0,ua:!0});return El(e,a)}(await zc(e),e.asyncQueue,t,n,r)),r.promise}function Wc(e,t,n,r){const i=function(e,t){let n;return n="string"==typeof e?ci().encode(e):e,function(e,t){return new Ic(e,t)}(function(e,t){if(e instanceof Uint8Array)return Ec(e,t);if(e instanceof ArrayBuffer)return Ec(new Uint8Array(e),t);if(e instanceof ReadableStream)return e.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(n),t)}(n,Ro(t));e.asyncQueue.enqueueAndForget(async()=>{!function(e,t,n){const r=R(e);(async function(e,t,n){try{const r=await t.getMetadata();if(await function(e,t){const n=R(e),r=Ni(t.createTime);return n.persistence.runTransaction("hasNewerBundle","readonly",e=>n.jr.getBundleMetadata(e,t.id)).then(e=>!!e&&e.createTime.compareTo(r)>=0)}(e.localStore,r))return await t.close(),n._completeWith(function(e){return{taskState:"Success",documentsLoaded:e.totalDocuments,bytesLoaded:e.totalBytes,totalDocuments:e.totalDocuments,totalBytes:e.totalBytes}}(r)),Promise.resolve(new Set);n._updateProgress(Ol(r));const i=new jl(r,e.localStore,t.serializer);let s=await t.Ga();for(;s;){const e=await i.Pa(s);e&&n._updateProgress(e),s=await t.Ga()}const a=await i.complete();return await oc(e,a.Ea,void 0),await function(e,t){const n=R(e);return n.persistence.runTransaction("Save bundle","readwrite",e=>n.jr.saveBundleMetadata(e,t))}(e.localStore,r),n._completeWith(a.progress),Promise.resolve(a.Ia)}catch(e){return A("SyncEngine","Loading bundle failed with ".concat(e)),n._failWith(e),Promise.resolve(new Set)}})(r,t,n).then(e=>{r.sharedClientState.notifyBundleLoaded(e)})}(await Fc(e),i,r)})}function qc(e){const t={};return void 0!==e.timeoutSeconds&&(t.timeoutSeconds=e.timeoutSeconds),t}const Hc=new Map;function Kc(e,t,n){if(!n)throw new O(j.INVALID_ARGUMENT,"Function ".concat(e,"() cannot be called with an empty ").concat(t,"."))}function Gc(e,t,n,r){if(!0===t&&!0===r)throw new O(j.INVALID_ARGUMENT,"".concat(e," and ").concat(n," cannot be used together."))}function Qc(e){if(!ie.isDocumentKey(e))throw new O(j.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but ".concat(e," has ").concat(e.length,"."))}function Yc(e){if(ie.isDocumentKey(e))throw new O(j.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but ".concat(e," has ").concat(e.length,"."))}function Zc(e){if(void 0===e)return"undefined";if(null===e)return"null";if("string"==typeof e)return e.length>20&&(e="".concat(e.substring(0,20),"...")),JSON.stringify(e);if("number"==typeof e||"boolean"==typeof e)return""+e;if("object"==typeof e){if(e instanceof Array)return"an array";{const t=function(e){return e.constructor?e.constructor.name:null}(e);return t?"a custom ".concat(t," object"):"an object"}}return"function"==typeof e?"a function":P()}function $c(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new O(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Zc(e);throw new O(j.INVALID_ARGUMENT,"Expected type '".concat(t.name,"', but it was: ").concat(n))}}return e}function Jc(e,t){if(t<=0)throw new O(j.INVALID_ARGUMENT,"Function ".concat(e,"() requires a positive number, but it was: ").concat(t,"."))}class Xc{constructor(e){var t,n;if(void 0===e.host){if(void 0!==e.ssl)throw new O(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new O(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gc("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:void 0===e.experimentalAutoDetectLongPolling?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=qc(null!==(n=e.experimentalLongPollingOptions)&&void 0!==n?n:{}),function(e){if(void 0!==e.timeoutSeconds){if(isNaN(e.timeoutSeconds))throw new O(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (must not be NaN)"));if(e.timeoutSeconds<5)throw new O(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (minimum allowed value is 5)"));if(e.timeoutSeconds>30)throw new O(j.INVALID_ARGUMENT,"invalid long polling timeout: ".concat(e.timeoutSeconds," (maximum allowed value is 30)"))}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(e,t){return e.timeoutSeconds===t.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class eu{constructor(e,t,n,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Xc({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new O(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return"notTerminated"!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new O(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Xc(e),void 0!==e.credentials&&(this._authCredentials=function(e){if(!e)return new V;switch(e.type){case"firstParty":return new W(e.sessionIndex||"0",e.iamToken||null,e.authTokenFactory||null);case"provider":return e.client;default:throw new O(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return"notTerminated"===this._terminateTask&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){"notTerminated"===this._terminateTask?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=Hc.get(e);t&&(I("ComponentProvider","Removing Datastore"),Hc.delete(e),t.terminate())}(this),Promise.resolve()}}function tu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};var i;const s=(e=$c(e,eu))._getSettings(),a="".concat(t,":").concat(n);if("firestore.googleapis.com"!==s.host&&s.host!==a&&A("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),e._setSettings(Object.assign(Object.assign({},s),{host:a,ssl:!1})),r.mockUserToken){let t,n;if("string"==typeof r.mockUserToken)t=r.mockUserToken,n=_.MOCK_USER;else{t=(0,l.Fy)(r.mockUserToken,null===(i=e._app)||void 0===i?void 0:i.options.projectId);const s=r.mockUserToken.sub||r.mockUserToken.user_id;if(!s)throw new O(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");n=new _(s)}e._authCredentials=new z(new F(t,n))}}class nu{constructor(e,t,n){this.converter=t,this._query=n,this.type="query",this.firestore=e}withConverter(e){return new nu(this.firestore,e,this._query)}}class ru{constructor(e,t,n){this.converter=t,this._key=n,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new iu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new ru(this.firestore,e,this._key)}}class iu extends nu{constructor(e,t,n){super(e,t,Hn(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new ru(this.firestore,null,new ie(e))}withConverter(e){return new iu(this.firestore,e,this._path)}}function su(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),Kc("collection","path",t),e instanceof eu){const n=te.fromString(t,...r);return Yc(n),new iu(e,null,n)}{if(!(e instanceof ru||e instanceof iu))throw new O(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return Yc(n),new iu(e.firestore,null,n)}}function au(e,t){if(e=$c(e,eu),Kc("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new O(j.INVALID_ARGUMENT,"Invalid collection ID '".concat(t,"' passed to function collectionGroup(). Collection IDs must not contain '/'."));return new nu(e,null,function(e){return new Wn(te.emptyPath(),e)}(t))}function ou(e,t){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];if(e=(0,l.Ku)(e),1===arguments.length&&(t=Q.newId()),Kc("doc","path",t),e instanceof eu){const n=te.fromString(t,...r);return Qc(n),new ru(e,null,new ie(n))}{if(!(e instanceof ru||e instanceof iu))throw new O(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const n=e._path.child(te.fromString(t,...r));return Qc(n),new ru(e.firestore,e instanceof iu?e.converter:null,new ie(n))}}function lu(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),(e instanceof ru||e instanceof iu)&&(t instanceof ru||t instanceof iu)&&e.firestore===t.firestore&&e.path===t.path&&e.converter===t.converter}function cu(e,t){return e=(0,l.Ku)(e),t=(0,l.Ku)(t),e instanceof nu&&t instanceof nu&&e.firestore===t.firestore&&er(e._query,t._query)&&e.converter===t.converter}class uu{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Promise.resolve();this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new jo(this,"async_queue_retry"),this.fu=()=>{const e=Mo();e&&I("AsyncQueue","Visibility state changed to "+e.visibilityState),this.r_.Jo()},this.gu=e;const t=Mo();t&&"function"==typeof t.addEventListener&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=Mo();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new L;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(0!==this.Iu.length){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Ee(e))throw e;I("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(e=>{this.Au=e,this.Ru=!1;const t=function(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+"\n"+e.stack),t}(e);throw C("INTERNAL UNHANDLED ERROR: ",t),e}).then(e=>(this.Ru=!1,e))));return this.gu=t,t}enqueueAfterDelay(e,t,n){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=yl.createAndSchedule(this,e,t,n,e=>this.Su(e));return this.du.push(r),r}pu(){this.Au&&P()}verifyOperationInProgress(){}async bu(){let e;do{e=this.gu,await e}while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((e,t)=>e.targetTimeMs-t.targetTimeMs);for(const t of this.du)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function hu(e){return function(e,t){if("object"!=typeof e||null===e)return!1;const n=e;for(const r of t)if(r in n&&"function"==typeof n[r])return!0;return!1}(e,["next","error","complete"])}class du{constructor(){this._progressObserver={},this._taskCompletionResolver=new L,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,n){this._progressObserver={next:e,error:t,complete:n}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const fu=-1;class pu extends eu{constructor(e,t,n,r){super(e,t,n,r),this.type="firestore",this._queue=new uu,this._persistenceKey=(null==r?void 0:r.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new uu(e),this._firestoreClient=void 0,await e}}}function gu(e,t,n){n||(n="(default)");const r=(0,s.j6)(e,"firestore");if(r.isInitialized(n)){const e=r.getImmediate({identifier:n}),i=r.getOptions(n);if((0,l.bD)(i,t))return e;throw new O(j.FAILED_PRECONDITION,"initializeFirestore() has already been called with different options. To avoid this error, call initializeFirestore() with the same options as when it was originally called, or call getFirestore() to return the already initialized instance.")}if(void 0!==t.cacheSizeBytes&&void 0!==t.localCache)throw new O(j.INVALID_ARGUMENT,"cache and cacheSizeBytes cannot be specified at the same time as cacheSizeBytes willbe deprecated. Instead, specify the cache size in the cache object");if(void 0!==t.cacheSizeBytes&&-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new O(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");return r.initialize({options:t,instanceIdentifier:n})}function mu(e,t){const n="object"==typeof e?e:(0,s.Sx)(),r="string"==typeof e?e:t||"(default)",i=(0,s.j6)(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const e=(0,l.yU)("firestore");e&&tu(i,...e)}return i}function yu(e){if(e._terminated)throw new O(j.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||vu(e),e._firestoreClient}function vu(e){var t,n,r;const i=e._freezeSettings(),s=function(e,t,n,r){return new Rt(e,t,n,r.host,r.ssl,r.experimentalForceLongPolling,r.experimentalAutoDetectLongPolling,qc(r.experimentalLongPollingOptions),r.useFetchStreams)}(e._databaseId,(null===(t=e._app)||void 0===t?void 0:t.options.appId)||"",e._persistenceKey,i);e._componentsProvider||(null===(n=i.localCache)||void 0===n?void 0:n._offlineComponentProvider)&&(null===(r=i.localCache)||void 0===r?void 0:r._onlineComponentProvider)&&(e._componentsProvider={_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider}),e._firestoreClient=new Dc(e._authCredentials,e._appCheckCredentials,e._queue,s,e._componentsProvider&&function(e){const t=null==e?void 0:e._online.build();return{_offline:null==e?void 0:e._offline.build(t),_online:t}}(e._componentsProvider))}function bu(e,t){A("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=e._freezeSettings();return xu(e,Sc.provider,{build:e=>new _c(e,n.cacheSizeBytes,null==t?void 0:t.forceOwnership)}),Promise.resolve()}async function wu(e){A("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=e._freezeSettings();xu(e,Sc.provider,{build:e=>new kc(e,t.cacheSizeBytes)})}function xu(e,t,n){if((e=$c(e,pu))._firestoreClient||e._terminated)throw new O(j.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(e._componentsProvider||e._getSettings().localCache)throw new O(j.FAILED_PRECONDITION,"SDK cache is already specified.");e._componentsProvider={_online:t,_offline:n},vu(e)}function _u(e){if(e._initialized&&!e._terminated)throw new O(j.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const t=new L;return e._queue.enqueueAndForgetEvenWhileRestricted(async()=>{try{await async function(e){if(!xe.p())return Promise.resolve();const t=e+"main";await xe.delete(t)}(Za(e._databaseId,e._persistenceKey)),t.resolve()}catch(e){t.reject(e)}}),t.promise}function ku(e){return function(e){const t=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t){const n=R(e);Zo(n.remoteStore)||I("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const e=await function(e){const t=R(e);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}(n.localStore);if(-1===e)return void t.resolve();const r=n.Qa.get(e)||[];r.push(t),n.Qa.set(e,r)}catch(e){const n=vl(e,"Initialization of waitForPendingWrites() operation failed");t.reject(n)}}(await Fc(e),t)),t.promise}(yu(e=$c(e,pu)))}function Su(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await jc(e),n=await Lc(e);return t.setNetworkEnabled(!0),function(e){const t=R(e);return t.k_.delete(0),Bo(t)}(n)})}(yu(e=$c(e,pu)))}function Eu(e){return function(e){return e.asyncQueue.enqueue(async()=>{const t=await jc(e),n=await Lc(e);return t.setNetworkEnabled(!1),async function(e){const t=R(e);t.k_.add(0),await Wo(t),t.K_.set("Offline")}(n)})}(yu(e=$c(e,pu)))}function Tu(e){return(0,s.Us)(e.app,"firestore",e._databaseId.database),e._delete()}function Iu(e,t){const n=yu(e=$c(e,pu)),r=new du;return Wc(n,e._databaseId,t,r),r}function Cu(e,t){return function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){const n=R(e);return n.persistence.runTransaction("Get named query","readonly",e=>n.jr.getNamedQuery(e,t))}(await Oc(e),t))}(yu(e=$c(e,pu)),t).then(t=>t?new nu(e,null,t.query):null)}class Au{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"count",t=arguments.length>1?arguments[1]:void 0;this._internalFieldPath=t,this.type="AggregateField",this.aggregateType=e}}class Du{constructor(e,t,n){this._userDataWriter=t,this._data=n,this.type="AggregateQuerySnapshot",this.query=e}data(){return this._userDataWriter.convertObjectMap(this._data)}}class Pu{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pu(Tt.fromBase64String(e))}catch(e){throw new O(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(e){return new Pu(Tt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Nu{constructor(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];for(let r=0;r<t.length;++r)if(0===t[r].length)throw new O(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new re(t)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}function Mu(){return new Nu("__name__")}class Ru{constructor(e){this._methodName=e}}class ju{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new O(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new O(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Y(this._lat,e._lat)||Y(this._long,e._long)}}class Ou{constructor(e){this._values=(e||[]).map(e=>e)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}(this._values,e._values)}}const Lu=/^__.*__$/;class Fu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return null!==this.fieldMask?new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms):new Kr(e,this.data,t,this.fieldTransforms)}}class Vu{constructor(e,t,n){this.data=e,this.fieldMask=t,this.fieldTransforms=n}toMutation(e,t){return new Gr(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function zu(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw P()}}class Uu{constructor(e,t,n,r,i,s){this.settings=e,this.databaseId=t,this.serializer=n,this.ignoreUndefinedProperties=r,void 0===i&&this.Fu(),this.fieldTransforms=i||[],this.fieldMask=s||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new Uu(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Lu(e),r}Bu(e){var t;const n=null===(t=this.path)||void 0===t?void 0:t.child(e),r=this.xu({path:n,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return oh(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(0===e.length)throw this.qu("Document fields must not be empty");if(zu(this.Mu)&&Lu.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Bu{constructor(e,t,n){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=n||Ro(e)}$u(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return new Uu({Mu:e,methodName:t,Ku:n,path:re.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Wu(e){const t=e._freezeSettings(),n=Ro(e._databaseId);return new Bu(e._databaseId,!!t.ignoreUndefinedProperties,n)}function qu(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=e.$u(s.merge||s.mergeFields?2:0,t,n,i);rh("Data must be an object, but it was:",a,r);const o=th(r,a);let l,c;if(s.merge)l=new kt(a.fieldMask),c=a.fieldTransforms;else if(s.mergeFields){const e=[];for(const r of s.mergeFields){const i=ih(t,r,n);if(!a.contains(i))throw new O(j.INVALID_ARGUMENT,"Field '".concat(i,"' is specified in your field mask but missing from your input data."));lh(e,i)||e.push(i)}l=new kt(e),c=a.fieldTransforms.filter(e=>l.covers(e.field))}else l=null,c=a.fieldTransforms;return new Fu(new ln(o),l,c)}class Hu extends Ru{_toFieldTransform(e){if(2!==e.Mu)throw 1===e.Mu?e.qu("".concat(this._methodName,"() can only appear at the top level of your update data")):e.qu("".concat(this._methodName,"() cannot be used with set() unless you pass {merge:true}"));return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Hu}}function Ku(e,t,n){return new Uu({Mu:3,Ku:t.settings.Ku,methodName:e._methodName,Nu:n},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}class Gu extends Ru{_toFieldTransform(e){return new Or(e.path,new Cr)}isEqual(e){return e instanceof Gu}}class Qu extends Ru{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=Ku(this,e,!0),n=this.Uu.map(e=>eh(e,t)),r=new Ar(n);return new Or(e.path,r)}isEqual(e){return e instanceof Qu&&(0,l.bD)(this.Uu,e.Uu)}}class Yu extends Ru{constructor(e,t){super(e),this.Uu=t}_toFieldTransform(e){const t=Ku(this,e,!0),n=this.Uu.map(e=>eh(e,t)),r=new Pr(n);return new Or(e.path,r)}isEqual(e){return e instanceof Yu&&(0,l.bD)(this.Uu,e.Uu)}}class Zu extends Ru{constructor(e,t){super(e),this.Wu=t}_toFieldTransform(e){const t=new Mr(e.serializer,kr(e.serializer,this.Wu));return new Or(e.path,t)}isEqual(e){return e instanceof Zu&&this.Wu===e.Wu}}function $u(e,t,n,r){const i=e.$u(1,t,n);rh("Data must be an object, but it was:",i,r);const s=[],a=ln.empty();pt(r,(e,r)=>{const o=ah(t,e,n);r=(0,l.Ku)(r);const c=i.Bu(o);if(r instanceof Hu)s.push(o);else{const e=eh(r,c);null!=e&&(s.push(o),a.set(o,e))}});const o=new kt(s);return new Vu(a,o,i.fieldTransforms)}function Ju(e,t,n,r,i,s){const a=e.$u(1,t,n),o=[ih(t,r,n)],c=[i];if(s.length%2!=0)throw new O(j.INVALID_ARGUMENT,"Function ".concat(t,"() needs to be called with an even number of arguments that alternate between field names and values."));for(let l=0;l<s.length;l+=2)o.push(ih(t,s[l])),c.push(s[l+1]);const u=[],h=ln.empty();for(let f=o.length-1;f>=0;--f)if(!lh(u,o[f])){const e=o[f];let t=c[f];t=(0,l.Ku)(t);const n=a.Bu(e);if(t instanceof Hu)u.push(e);else{const r=eh(t,n);null!=r&&(u.push(e),h.set(e,r))}}const d=new kt(u);return new Vu(h,d,a.fieldTransforms)}function Xu(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];return eh(n,e.$u(r?4:3,t))}function eh(e,t){if(nh(e=(0,l.Ku)(e)))return rh("Unsupported field value:",t,e),th(e,t);if(e instanceof Ru)return function(e,t){if(!zu(t.Mu))throw t.qu("".concat(e._methodName,"() can only be used with update() and set()"));if(!t.path)throw t.qu("".concat(e._methodName,"() is not currently supported inside arrays"));const n=e._toFieldTransform(t);n&&t.fieldTransforms.push(n)}(e,t),null;if(void 0===e&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.Nu&&4!==t.Mu)throw t.qu("Nested arrays are not supported");return function(e,t){const n=[];let r=0;for(const i of e){let e=eh(i,t.ku(r));null==e&&(e={nullValue:"NULL_VALUE"}),n.push(e),r++}return{arrayValue:{values:n}}}(e,t)}return function(e,t){if(null===(e=(0,l.Ku)(e)))return{nullValue:"NULL_VALUE"};if("number"==typeof e)return kr(t.serializer,e);if("boolean"==typeof e)return{booleanValue:e};if("string"==typeof e)return{stringValue:e};if(e instanceof Date){const n=J.fromDate(e);return{timestampValue:Ai(t.serializer,n)}}if(e instanceof J){const n=new J(e.seconds,1e3*Math.floor(e.nanoseconds/1e3));return{timestampValue:Ai(t.serializer,n)}}if(e instanceof ju)return{geoPointValue:{latitude:e.latitude,longitude:e.longitude}};if(e instanceof Pu)return{bytesValue:Di(t.serializer,e._byteString)};if(e instanceof ru){const n=t.databaseId,r=e.firestore._databaseId;if(!r.isEqual(n))throw t.qu("Document reference is for database ".concat(r.projectId,"/").concat(r.database," but should be for database ").concat(n.projectId,"/").concat(n.database));return{referenceValue:Mi(e.firestore._databaseId||t.databaseId,e._key.path)}}if(e instanceof Ou)return function(e,t){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:e.toArray().map(e=>{if("number"!=typeof e)throw t.qu("VectorValues must only contain numeric values.");return xr(t.serializer,e)})}}}}}}(e,t);throw t.qu("Unsupported field value: ".concat(Zc(e)))}(e,t)}function th(e,t){const n={};return mt(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):pt(e,(e,r)=>{const i=eh(r,t.Ou(e));null!=i&&(n[e]=i)}),{mapValue:{fields:n}}}function nh(e){return!("object"!=typeof e||null===e||e instanceof Array||e instanceof Date||e instanceof J||e instanceof ju||e instanceof Pu||e instanceof ru||e instanceof Ru||e instanceof Ou)}function rh(e,t,n){if(!nh(n)||!function(e){return"object"==typeof e&&null!==e&&(Object.getPrototypeOf(e)===Object.prototype||null===Object.getPrototypeOf(e))}(n)){const r=Zc(n);throw"an object"===r?t.qu(e+" a custom object"):t.qu(e+" "+r)}}function ih(e,t,n){if((t=(0,l.Ku)(t))instanceof Nu)return t._internalPath;if("string"==typeof t)return ah(e,t);throw oh("Field path arguments must be of type string or ",e,!1,void 0,n)}const sh=new RegExp("[~\\*/\\[\\]]");function ah(e,t,n){if(t.search(sh)>=0)throw oh("Invalid field path (".concat(t,"). Paths must not contain '~', '*', '/', '[', or ']'"),e,!1,void 0,n);try{return new Nu(...t.split("."))._internalPath}catch(r){throw oh("Invalid field path (".concat(t,"). Paths must not be empty, begin with '.', end with '.', or contain '..'"),e,!1,void 0,n)}}function oh(e,t,n,r,i){const s=r&&!r.isEmpty(),a=void 0!==i;let o="Function ".concat(t,"() called with invalid data");n&&(o+=" (via `toFirestore()`)"),o+=". ";let l="";return(s||a)&&(l+=" (found",s&&(l+=" in field ".concat(r)),a&&(l+=" in document ".concat(i)),l+=")"),new O(j.INVALID_ARGUMENT,o+e+l)}function lh(e,t){return e.some(e=>e.isEqual(t))}class ch{constructor(e,t,n,r,i){this._firestore=e,this._userDataWriter=t,this._key=n,this._document=r,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new ru(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new uh(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(hh("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class uh extends ch{data(){return super.data()}}function hh(e,t){return"string"==typeof t?ah(e,t):t instanceof Nu?t._internalPath:t._delegate._internalPath}function dh(e){if("L"===e.limitType&&0===e.explicitOrderBy.length)throw new O(j.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class fh{}class ph extends fh{}function gh(e,t){let n=[];for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];t instanceof fh&&n.push(t),n=n.concat(i),function(e){const t=e.filter(e=>e instanceof vh).length,n=e.filter(e=>e instanceof mh).length;if(t>1||t>0&&n>0)throw new O(j.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(n);for(const a of n)e=a._apply(e);return e}class mh extends ph{constructor(e,t,n){super(),this._field=e,this._op=t,this._value=n,this.type="where"}static _create(e,t,n){return new mh(e,t,n)}_apply(e){const t=this._parse(e);return jh(e._query,t),new nu(e.firestore,e.converter,Jn(e._query,t))}_parse(e){const t=Wu(e.firestore),n=function(e,t,n,r,i,s,a){let o;if(i.isKeyField()){if("array-contains"===s||"array-contains-any"===s)throw new O(j.INVALID_ARGUMENT,"Invalid Query. You can't perform '".concat(s,"' queries on documentId()."));if("in"===s||"not-in"===s){Rh(a,s);const t=[];for(const n of a)t.push(Mh(r,e,n));o={arrayValue:{values:t}}}else o=Mh(r,e,a)}else"in"!==s&&"not-in"!==s&&"array-contains-any"!==s||Rh(a,s),o=Xu(n,t,a,"in"===s||"not-in"===s);return yn.create(i,s,o)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value);return n}}function yh(e,t,n){const r=t,i=hh("where",e);return mh._create(i,r,n)}class vh extends fh{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vh(e,t)}_parse(e){const t=this._queryConstraints.map(t=>t._parse(e)).filter(e=>e.getFilters().length>0);return 1===t.length?t[0]:vn.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(e,t){let n=e;const r=t.getFlattenedFilters();for(const i of r)jh(n,i),n=Jn(n,i)}(e._query,t),new nu(e.firestore,e.converter,Jn(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}function bh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>Oh("or",e)),vh._create("or",t)}function wh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.forEach(e=>Oh("and",e)),vh._create("and",t)}class xh extends ph{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new xh(e,t)}_apply(e){const t=function(e,t,n){if(null!==e.startAt)throw new O(j.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==e.endAt)throw new O(j.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pn(t,n)}(e._query,this._field,this._direction);return new nu(e.firestore,e.converter,function(e,t){const n=e.explicitOrderBy.concat([t]);return new Wn(e.path,e.collectionGroup,n,e.filters.slice(),e.limit,e.limitType,e.startAt,e.endAt)}(e._query,t))}}function _h(e){const t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"asc",n=hh("orderBy",e);return xh._create(n,t)}class kh extends ph{constructor(e,t,n){super(),this.type=e,this._limit=t,this._limitType=n}static _create(e,t,n){return new kh(e,t,n)}_apply(e){return new nu(e.firestore,e.converter,Xn(e._query,this._limit,this._limitType))}}function Sh(e){return Jc("limit",e),kh._create("limit",e,"F")}function Eh(e){return Jc("limitToLast",e),kh._create("limitToLast",e,"L")}class Th extends ph{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Th(e,t,n)}_apply(e){const t=Nh(e,this.type,this._docOrFields,this._inclusive);return new nu(e.firestore,e.converter,function(e,t){return new Wn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,t,e.endAt)}(e._query,t))}}function Ih(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Th._create("startAt",t,!0)}function Ch(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Th._create("startAfter",t,!1)}class Ah extends ph{constructor(e,t,n){super(),this.type=e,this._docOrFields=t,this._inclusive=n}static _create(e,t,n){return new Ah(e,t,n)}_apply(e){const t=Nh(e,this.type,this._docOrFields,this._inclusive);return new nu(e.firestore,e.converter,function(e,t){return new Wn(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),e.limit,e.limitType,e.startAt,t)}(e._query,t))}}function Dh(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ah._create("endBefore",t,!1)}function Ph(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return Ah._create("endAt",t,!0)}function Nh(e,t,n,r){if(n[0]=(0,l.Ku)(n[0]),n[0]instanceof ch)return function(e,t,n,r,i){if(!r)throw new O(j.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for ".concat(n,"()."));const s=[];for(const a of Qn(e))if(a.field.isKeyField())s.push(Gt(t,r.key));else{const e=r.data.field(a.field);if(Pt(e))throw new O(j.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+a.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===e){const e=a.field.canonicalString();throw new O(j.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '".concat(e,"' (used as the orderBy) does not exist."))}s.push(e)}return new hn(s,i)}(e._query,e.firestore._databaseId,t,n[0]._document,r);{const i=Wu(e.firestore);return function(e,t,n,r,i,s){const a=e.explicitOrderBy;if(i.length>a.length)throw new O(j.INVALID_ARGUMENT,"Too many arguments provided to ".concat(r,"(). The number of arguments must be less than or equal to the number of orderBy() clauses"));const o=[];for(let l=0;l<i.length;l++){const s=i[l];if(a[l].field.isKeyField()){if("string"!=typeof s)throw new O(j.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in ".concat(r,"(), but got a ").concat(typeof s));if(!Gn(e)&&-1!==s.indexOf("/"))throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by documentId(), the value passed to ".concat(r,"() must be a plain document ID, but '").concat(s,"' contains a slash."));const n=e.path.child(te.fromString(s));if(!ie.isDocumentKey(n))throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by documentId(), the value passed to ".concat(r,"() must result in a valid document path, but '").concat(n,"' is not because it contains an odd number of segments."));const i=new ie(n);o.push(Gt(t,i))}else{const e=Xu(n,r,s);o.push(e)}}return new hn(o,s)}(e._query,e.firestore._databaseId,i,t,n,r)}}function Mh(e,t,n){if("string"==typeof(n=(0,l.Ku)(n))){if(""===n)throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Gn(t)&&-1!==n.indexOf("/"))throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '".concat(n,"' contains a '/' character."));const r=t.path.child(te.fromString(n));if(!ie.isDocumentKey(r))throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '".concat(r,"' is not because it has an odd number of segments (").concat(r.length,")."));return Gt(e,new ie(r))}if(n instanceof ru)return Gt(e,n._key);throw new O(j.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ".concat(Zc(n),"."))}function Rh(e,t){if(!Array.isArray(e)||0===e.length)throw new O(j.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '".concat(t.toString(),"' filters."))}function jh(e,t){const n=function(e,t){for(const n of e)for(const e of n.getFlattenedFilters())if(t.indexOf(e.op)>=0)return e.op;return null}(e.filters,function(e){switch(e){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(null!==n)throw n===t.op?new O(j.INVALID_ARGUMENT,"Invalid query. You cannot use more than one '".concat(t.op.toString(),"' filter.")):new O(j.INVALID_ARGUMENT,"Invalid query. You cannot use '".concat(t.op.toString(),"' filters with '").concat(n.toString(),"' filters."))}function Oh(e,t){if(!(t instanceof mh||t instanceof vh))throw new O(j.INVALID_ARGUMENT,"Function ".concat(e,"() requires AppliableConstraints created with a call to 'where(...)', 'or(...)', or 'and(...)'."))}class Lh{convertValue(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";switch(Ft(e)){case 0:return null;case 1:return e.booleanValue;case 2:return At(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Dt(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw P()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"none";const n={};return pt(e,(e,r)=>{n[e]=this.convertValue(r,t)}),n}convertVectorValue(e){var t,n,r;const i=null===(r=null===(n=null===(t=e.fields)||void 0===t?void 0:t.value.arrayValue)||void 0===n?void 0:n.values)||void 0===r?void 0:r.map(e=>At(e.doubleValue));return new Ou(i)}convertGeoPoint(e){return new ju(At(e.latitude),At(e.longitude))}convertArray(e,t){return(e.values||[]).map(e=>this.convertValue(e,t))}convertServerTimestamp(e,t){switch(t){case"previous":const n=Nt(e);return null==n?null:this.convertValue(n,t);case"estimate":return this.convertTimestamp(Mt(e));default:return null}}convertTimestamp(e){const t=Ct(e);return new J(t.seconds,t.nanos)}convertDocumentKey(e,t){const n=te.fromString(e);N(is(n));const r=new jt(n.get(1),n.get(3)),i=new ie(n.popFirst(5));return r.isEqual(t)||C("Document ".concat(i," contains a document reference within a different database (").concat(r.projectId,"/").concat(r.database,") which is not supported. It will be treated as a reference in the current database (").concat(t.projectId,"/").concat(t.database,") instead.")),i}}function Fh(e,t,n){let r;return r=e?n&&(n.merge||n.mergeFields)?e.toFirestore(t,n):e.toFirestore(t):t,r}class Vh extends Lh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ru(this.firestore,null,t)}}function zh(e){return new Au("sum",ih("sum",e))}function Uh(e){return new Au("avg",ih("average",e))}function Bh(){return new Au("count")}function Wh(e,t){var n,r;return e instanceof Au&&t instanceof Au&&e.aggregateType===t.aggregateType&&(null===(n=e._internalFieldPath)||void 0===n?void 0:n.canonicalString())===(null===(r=t._internalFieldPath)||void 0===r?void 0:r.canonicalString())}function qh(e,t){return cu(e.query,t.query)&&(0,l.bD)(e.data(),t.data())}class Hh{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Kh extends ch{constructor(e,t,n,r,i,s){super(e,t,n,r,s),this._firestore=e,this._firestoreImpl=e,this.metadata=i}exists(){return super.exists()}data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(this._document){if(this._converter){const t=new Gh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this._document){const n=this._document.data.field(hh("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n,t.serverTimestamps)}}}class Gh extends Kh{data(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return super.data(e)}}class Qh{constructor(e,t,n,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Hh(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(n=>{e.call(t,new Gh(this._firestore,this._userDataWriter,n.key,n,new Hh(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(){const e=!!(arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}).includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new O(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(e,t){if(e._snapshot.oldDocs.isEmpty()){let t=0;return e._snapshot.docChanges.map(n=>{const r=new Gh(e._firestore,e._userDataWriter,n.doc.key,n.doc,new Hh(e._snapshot.mutatedKeys.has(n.doc.key),e._snapshot.fromCache),e.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:t++}})}{let n=e._snapshot.oldDocs;return e._snapshot.docChanges.filter(e=>t||3!==e.type).map(t=>{const r=new Gh(e._firestore,e._userDataWriter,t.doc.key,t.doc,new Hh(e._snapshot.mutatedKeys.has(t.doc.key),e._snapshot.fromCache),e.query.converter);let i=-1,s=-1;return 0!==t.type&&(i=n.indexOf(t.doc.key),n=n.delete(t.doc.key)),1!==t.type&&(n=n.add(t.doc),s=n.indexOf(t.doc.key)),{type:Yh(t.type),doc:r,oldIndex:i,newIndex:s}})}}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}}function Yh(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return P()}}function Zh(e,t){return e instanceof Kh&&t instanceof Kh?e._firestore===t._firestore&&e._key.isEqual(t._key)&&(null===e._document?null===t._document:e._document.isEqual(t._document))&&e._converter===t._converter:e instanceof Qh&&t instanceof Qh&&e._firestore===t._firestore&&cu(e.query,t.query)&&e.metadata.isEqual(t.metadata)&&e._snapshot.isEqual(t._snapshot)}function $h(e){e=$c(e,ru);const t=$c(e.firestore,pu);return Uc(yu(t),e._key).then(n=>hd(t,e,n))}class Jh extends Lh{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pu(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new ru(this.firestore,null,t)}}function Xh(e){e=$c(e,ru);const t=$c(e.firestore,pu),n=yu(t),r=new Jh(t);return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await function(e,t){const n=R(e);return n.persistence.runTransaction("read document","readonly",e=>n.localDocuments.getDocument(e,t))}(e,t);r.isFoundDocument()?n.resolve(r):r.isNoDocument()?n.resolve(null):n.reject(new O(j.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(e){const r=vl(e,"Failed to get document '".concat(t," from cache"));n.reject(r)}}(await Oc(e),t,n)),n.promise}(n,e._key).then(n=>new Kh(t,r,e._key,n,new Hh(null!==n&&n.hasLocalMutations,!0),e.converter))}function ed(e){e=$c(e,ru);const t=$c(e.firestore,pu);return Uc(yu(t),e._key,{source:"server"}).then(n=>hd(t,e,n))}function td(e){e=$c(e,nu);const t=$c(e.firestore,pu),n=yu(t),r=new Jh(t);return dh(e._query),Bc(n,e._query).then(n=>new Qh(t,r,e,n))}function nd(e){e=$c(e,nu);const t=$c(e.firestore,pu),n=yu(t),r=new Jh(t);return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){try{const r=await lo(e,t,!0),i=new Vl(t,r.ds),s=i.ga(r.documents),a=i.applyChanges(s,!1);n.resolve(a.snapshot)}catch(e){const r=vl(e,"Failed to execute query '".concat(t," against cache"));n.reject(r)}}(await Oc(e),t,n)),n.promise}(n,e._query).then(n=>new Qh(t,r,e,n))}function rd(e){e=$c(e,nu);const t=$c(e.firestore,pu),n=yu(t),r=new Jh(t);return Bc(n,e._query,{source:"server"}).then(n=>new Qh(t,r,e,n))}function id(e,t,n){e=$c(e,ru);const r=$c(e.firestore,pu),i=Fh(e.converter,t,n);return ud(r,[qu(Wu(r),"setDoc",e._key,i,null!==e.converter,n).toMutation(e._key,Fr.none())])}function sd(e,t,n){e=$c(e,ru);const r=$c(e.firestore,pu),i=Wu(r);let s;for(var a=arguments.length,o=new Array(a>3?a-3:0),c=3;c<a;c++)o[c-3]=arguments[c];return s="string"==typeof(t=(0,l.Ku)(t))||t instanceof Nu?Ju(i,"updateDoc",e._key,t,n,o):$u(i,"updateDoc",e._key,t),ud(r,[s.toMutation(e._key,Fr.exists(!0))])}function ad(e){return ud($c(e.firestore,pu),[new $r(e._key,Fr.none())])}function od(e,t){const n=$c(e.firestore,pu),r=ou(e),i=Fh(e.converter,t);return ud(n,[qu(Wu(e.firestore),"addDoc",r._key,i,null!==e.converter,{}).toMutation(r._key,Fr.exists(!1))]).then(()=>r)}function ld(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];var i,s,a;e=(0,l.Ku)(e);let o={includeMetadataChanges:!1,source:"default"},c=0;"object"!=typeof n[c]||hu(n[c])||(o=n[c],c++);const u={includeMetadataChanges:o.includeMetadataChanges,source:o.source};if(hu(n[c])){const e=n[c];n[c]=null===(i=e.next)||void 0===i?void 0:i.bind(e),n[c+1]=null===(s=e.error)||void 0===s?void 0:s.bind(e),n[c+2]=null===(a=e.complete)||void 0===a?void 0:a.bind(e)}let h,d,f;if(e instanceof ru)d=$c(e.firestore,pu),f=Hn(e._key.path),h={next:t=>{n[c]&&n[c](hd(d,e,t))},error:n[c+1],complete:n[c+2]};else{const t=$c(e,nu);d=$c(t.firestore,pu),f=t._query;const r=new Jh(d);h={next:e=>{n[c]&&n[c](new Qh(d,r,t,e))},error:n[c+1],complete:n[c+2]},dh(e._query)}return function(e,t,n,r){const i=new Tc(r),s=new Nl(t,i,n);return e.asyncQueue.enqueueAndForget(async()=>El(await zc(e),s)),()=>{i.eu(),e.asyncQueue.enqueueAndForget(async()=>Tl(await zc(e),s))}}(yu(d),f,u,h)}function cd(e,t){return function(e,t){const n=new Tc(t);return e.asyncQueue.enqueueAndForget(async()=>function(e,t){R(e).X_.add(t),t.next()}(await zc(e),n)),()=>{n.eu(),e.asyncQueue.enqueueAndForget(async()=>function(e,t){R(e).X_.delete(t)}(await zc(e),n))}}(yu(e=$c(e,pu)),hu(t)?t:{next:t})}function ud(e,t){return function(e,t){const n=new L;return e.asyncQueue.enqueueAndForget(async()=>async function(e,t,n){const r=bc(e);try{const e=await function(e,t){const n=R(e),r=J.now(),i=t.reduce((e,t)=>e.add(t.key),vr());let s,a;return n.persistence.runTransaction("Locally write mutations","readwrite",e=>{let o=cr(),l=vr();return n.hs.getEntries(e,i).next(e=>{o=e,o.forEach((e,t)=>{t.isValidDocument()||(l=l.add(e))})}).next(()=>n.localDocuments.getOverlayedDocuments(e,o)).next(i=>{s=i;const a=[];for(const e of t){const t=qr(e,s.get(e.key).overlayedDocument);null!=t&&a.push(new Gr(e.key,t,cn(t.value.mapValue),Fr.exists(!0)))}return n.mutationQueue.addMutationBatch(e,r,a,t)}).next(t=>{a=t;const r=t.applyToLocalDocumentSet(s,l);return n.documentOverlayCache.saveOverlays(e,t.batchId,r)})}).then(()=>({batchId:a.batchId,changes:dr(s)}))}(r.localStore,t);r.sharedClientState.addPendingMutation(e.batchId),function(e,t,n){let r=e.qa[e.currentUser.toKey()];r||(r=new yt(Y)),r=r.insert(t,n),e.qa[e.currentUser.toKey()]=r}(r,e.batchId,n),await oc(r,e.changes),await il(r.remoteStore)}catch(e){const t=vl(e,"Failed to persist write");n.reject(t)}}(await Fc(e),t,n)),n.promise}(yu(e),t)}function hd(e,t,n){const r=n.docs.get(t._key),i=new Jh(e);return new Kh(e,i,t._key,r,new Hh(n.hasPendingWrites,n.fromCache),t.converter)}function dd(e){return fd(e,{count:Bh()})}function fd(e,t){const n=$c(e.firestore,pu),r=yu(n),i=gt(t,(e,t)=>new ni(t,e.aggregateType,e._internalFieldPath));return function(e,t,n){const r=new L;return e.asyncQueue.enqueueAndForget(async()=>{try{const i=await Vc(e);r.resolve(async function(e,t,n){var r;const i=R(e),{request:s,lt:a,parent:o}=Qi(i.serializer,Zn(t),n);i.connection.Co||delete s.parent;const l=(await i.ko("RunAggregationQuery",i.serializer.databaseId,o,s,1)).filter(e=>!!e.result);N(1===l.length);const c=null===(r=l[0].result)||void 0===r?void 0:r.aggregateFields;return Object.keys(c).reduce((e,t)=>(e[a[t]]=c[t],e),{})}(i,t,n))}catch(e){r.reject(e)}}),r.promise}(r,e._query,i).then(t=>function(e,t,n){const r=new Jh(e);return new Du(t,r,n)}(n,e,t))}class pd{constructor(e){this.kind="memory",this._onlineComponentProvider=Sc.provider,(null==e?void 0:e.garbageCollector)?this._offlineComponentProvider=e.garbageCollector._offlineComponentProvider:this._offlineComponentProvider={build:()=>new xc(void 0)}}toJSON(){return{kind:this.kind}}}class gd{constructor(e){let t;this.kind="persistent",(null==e?void 0:e.tabManager)?(e.tabManager._initialize(e),t=e.tabManager):(t=Sd(void 0),t._initialize(e)),this._onlineComponentProvider=t._onlineComponentProvider,this._offlineComponentProvider=t._offlineComponentProvider}toJSON(){return{kind:this.kind}}}class md{constructor(){this.kind="memoryEager",this._offlineComponentProvider=wc.provider}toJSON(){return{kind:this.kind}}}class yd{constructor(e){this.kind="memoryLru",this._offlineComponentProvider={build:()=>new xc(e)}}toJSON(){return{kind:this.kind}}}function vd(){return new md}function bd(e){return new yd(null==e?void 0:e.cacheSizeBytes)}function wd(e){return new pd(e)}function xd(e){return new gd(e)}class _d{constructor(e){this.forceOwnership=e,this.kind="persistentSingleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sc.provider,this._offlineComponentProvider={build:t=>new _c(t,null==e?void 0:e.cacheSizeBytes,this.forceOwnership)}}}class kd{constructor(){this.kind="PersistentMultipleTab"}toJSON(){return{kind:this.kind}}_initialize(e){this._onlineComponentProvider=Sc.provider,this._offlineComponentProvider={build:t=>new kc(t,null==e?void 0:e.cacheSizeBytes)}}}function Sd(e){return new _d(null==e?void 0:e.forceOwnership)}function Ed(){return new kd}const Td={maxAttempts:5};class Id{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Wu(e)}set(e,t,n){this._verifyNotCommitted();const r=Cd(e,this._firestore),i=Fh(r.converter,t,n),s=qu(this._dataReader,"WriteBatch.set",r._key,i,null!==r.converter,n);return this._mutations.push(s.toMutation(r._key,Fr.none())),this}update(e,t,n){this._verifyNotCommitted();const r=Cd(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof Nu?Ju(this._dataReader,"WriteBatch.update",r._key,t,n,a):$u(this._dataReader,"WriteBatch.update",r._key,t),this._mutations.push(i.toMutation(r._key,Fr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=Cd(e,this._firestore);return this._mutations=this._mutations.concat(new $r(t._key,Fr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new O(j.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Cd(e,t){if((e=(0,l.Ku)(e)).firestore!==t)throw new O(j.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return e}class Ad extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Wu(e)}get(e){const t=Cd(e,this._firestore),n=new Vh(this._firestore);return this._transaction.lookup([t._key]).then(e=>{if(!e||1!==e.length)return P();const r=e[0];if(r.isFoundDocument())return new ch(this._firestore,n,r.key,r,t.converter);if(r.isNoDocument())return new ch(this._firestore,n,t._key,null,t.converter);throw P()})}set(e,t,n){const r=Cd(e,this._firestore),i=Fh(r.converter,t,n),s=qu(this._dataReader,"Transaction.set",r._key,i,null!==r.converter,n);return this._transaction.set(r._key,s),this}update(e,t,n){const r=Cd(e,this._firestore);let i;for(var s=arguments.length,a=new Array(s>3?s-3:0),o=3;o<s;o++)a[o-3]=arguments[o];return i="string"==typeof(t=(0,l.Ku)(t))||t instanceof Nu?Ju(this._dataReader,"Transaction.update",r._key,t,n,a):$u(this._dataReader,"Transaction.update",r._key,t),this._transaction.update(r._key,i),this}delete(e){const t=Cd(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=Cd(e,this._firestore),n=new Jh(this._firestore);return super.get(e).then(e=>new Kh(this._firestore,n,t._key,e._document,new Hh(!1,!1),t.converter))}}function Dd(e,t,n){e=$c(e,pu);const r=Object.assign(Object.assign({},Td),n);return function(e){if(e.maxAttempts<1)throw new O(j.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(e,t,n){const r=new L;return e.asyncQueue.enqueueAndForget(async()=>{const i=await Vc(e);new Ac(e.asyncQueue,i,n,t,r).cu()}),r.promise}(yu(e),n=>t(new Ad(e,n)),r)}function Pd(){return new Hu("deleteField")}function Nd(){return new Gu("serverTimestamp")}function Md(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Qu("arrayUnion",t)}function Rd(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return new Yu("arrayRemove",t)}function jd(e){return new Zu("increment",e)}function Od(e){return new Ou(e)}function Ld(e){return yu(e=$c(e,pu)),new Id(e,t=>ud(e,t))}function Fd(e,t){const n=yu(e=$c(e,pu));if(!n._uninitializedComponentsProvider||"memory"===n._uninitializedComponentsProvider._offline.kind)return A("Cannot enable indexes when persistence is disabled"),Promise.resolve();const r=function(e){const t="string"==typeof e?function(e){try{return JSON.parse(e)}catch(e){throw new O(j.INVALID_ARGUMENT,"Failed to parse JSON: "+(null==e?void 0:e.message))}}(e):e,n=[];if(Array.isArray(t.indexes))for(const r of t.indexes){const e=Vd(r,"collectionGroup"),t=[];if(Array.isArray(r.fields))for(const n of r.fields){const e=ah("setIndexConfiguration",Vd(n,"fieldPath"));"CONTAINS"===n.arrayConfig?t.push(new ce(e,2)):"ASCENDING"===n.order?t.push(new ce(e,0)):"DESCENDING"===n.order&&t.push(new ce(e,1))}n.push(new se(se.UNKNOWN_ID,e,t,he.empty()))}return n}(t);return function(e,t){return e.asyncQueue.enqueue(async()=>async function(e,t){const n=R(e),r=n.indexManager,i=[];return n.persistence.runTransaction("Configure indexes","readwrite",e=>r.getFieldIndexes(e).next(n=>function(e,t,n,r,i){e=[...e],t=[...t],e.sort(n),t.sort(n);const s=e.length,a=t.length;let o=0,l=0;for(;o<a&&l<s;){const s=n(e[l],t[o]);s<0?i(e[l++]):s>0?r(t[o++]):(o++,l++)}for(;o<a;)r(t[o++]);for(;l<s;)i(e[l++])}(n,t,le,t=>{i.push(r.addFieldIndex(e,t))},t=>{i.push(r.deleteFieldIndex(e,t))})).next(()=>be.waitFor(i)))}(await Oc(e),t))}(n,r)}function Vd(e,t){if("string"!=typeof e[t])throw new O(j.INVALID_ARGUMENT,"Missing string value for: "+t);return e[t]}class zd{constructor(e){this._firestore=e,this.type="PersistentCacheIndexManager"}}function Ud(e){var t;e=$c(e,pu);const n=Kd.get(e);if(n)return n;if("persistent"!==(null===(t=yu(e)._uninitializedComponentsProvider)||void 0===t?void 0:t._offline.kind))return null;const r=new zd(e);return Kd.set(e,r),r}function Bd(e){Hd(e,!0)}function Wd(e){Hd(e,!1)}function qd(e){(function(e){return e.asyncQueue.enqueue(async()=>function(e){const t=R(e),n=t.indexManager;return t.persistence.runTransaction("Delete All Indexes","readwrite",e=>n.deleteAllFieldIndexes(e))}(await Oc(e)))})(yu(e._firestore)).then(e=>I("deleting all persistent cache indexes succeeded")).catch(e=>A("deleting all persistent cache indexes failed",e))}function Hd(e,t){(function(e,t){return e.asyncQueue.enqueue(async()=>function(e,t){R(e)._s.Hi=t}(await Oc(e),t))})(yu(e._firestore),t).then(e=>I("setting persistent cache index auto creation isEnabled=".concat(t," succeeded"))).catch(e=>A("setting persistent cache index auto creation isEnabled=".concat(t," failed"),e))}const Kd=new WeakMap;function Gd(e){var t;const n=null===(t=yu($c(e.firestore,pu))._onlineComponents)||void 0===t?void 0:t.datastore.serializer;return void 0===n?null:Gi(n,Yn(e._query)).ct}function Qd(e,t){var n;const r=gt(t,(e,t)=>new ni(t,e.aggregateType,e._internalFieldPath)),i=null===(n=yu($c(e.firestore,pu))._onlineComponents)||void 0===n?void 0:n.datastore.serializer;return void 0===i?null:Qi(i,Zn(e._query),r,!0).request}class Yd{constructor(){throw new Error("instances of this class should not be created")}static onExistenceFilterMismatch(e){return Zd.instance.onExistenceFilterMismatch(e)}}class Zd{constructor(){this.Gu=new Map}static get instance(){return $d||($d=new Zd,function(e){if(li)throw new Error("a TestingHooksSpi instance is already set");li=e}($d)),$d}tt(e){this.Gu.forEach(t=>t(e))}onExistenceFilterMismatch(e){const t=Symbol(),n=this.Gu;return n.set(t,e),()=>n.delete(t)}}let $d=null;!function(e){let t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];!function(e){k=e}(s.MF),(0,s.om)(new a.uA("firestore",(e,n)=>{let{instanceIdentifier:r,options:i}=n;const s=e.getProvider("app").getImmediate(),a=new pu(new U(e.getProvider("auth-internal")),new H(e.getProvider("app-check-internal")),function(e,t){if(!Object.prototype.hasOwnProperty.apply(e.options,["projectId"]))throw new O(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new jt(e.options.projectId,t)}(s,r),s);return i=Object.assign({useFetchStreams:t},i),a._setSettings(i),a},"PUBLIC").setMultipleInstances(!0)),(0,s.KO)(x,"4.7.5",e),(0,s.KO)(x,"4.7.5","esm2017")}()},181:e=>{"use strict";var t=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach(function(e){r[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(i){return!1}}()?Object.assign:function(e,i){for(var s,a,o=function(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}(e),l=1;l<arguments.length;l++){for(var c in s=Object(arguments[l]))n.call(s,c)&&(o[c]=s[c]);if(t){a=t(s);for(var u=0;u<a.length;u++)r.call(s,a[u])&&(o[a[u]]=s[a[u]])}}return o}},304:(e,t,n)=>{"use strict";n.d(t,{KO:()=>X,MF:()=>Z,Sx:()=>J,Us:()=>H,Wp:()=>$,j6:()=>q,om:()=>W,xZ:()=>K});var r=n(376),i=n(311),s=n(788),a=n(985);class o{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(e=>{if(function(e){const t=e.getComponent();return"VERSION"===(null===t||void 0===t?void 0:t.type)}(e)){const t=e.getImmediate();return"".concat(t.library,"/").concat(t.version)}return null}).filter(e=>e).join(" ")}}const l="@firebase/app",c="0.10.17",u=new i.Vy("@firebase/app"),h="@firebase/app-compat",d="@firebase/analytics-compat",f="@firebase/analytics",p="@firebase/app-check-compat",g="@firebase/app-check",m="@firebase/auth",y="@firebase/auth-compat",v="@firebase/database",b="@firebase/data-connect",w="@firebase/database-compat",x="@firebase/functions",_="@firebase/functions-compat",k="@firebase/installations",S="@firebase/installations-compat",E="@firebase/messaging",T="@firebase/messaging-compat",I="@firebase/performance",C="@firebase/performance-compat",A="@firebase/remote-config",D="@firebase/remote-config-compat",P="@firebase/storage",N="@firebase/storage-compat",M="@firebase/firestore",R="@firebase/vertexai",j="@firebase/firestore-compat",O="firebase",L="[DEFAULT]",F={[l]:"fire-core",[h]:"fire-core-compat",[f]:"fire-analytics",[d]:"fire-analytics-compat",[g]:"fire-app-check",[p]:"fire-app-check-compat",[m]:"fire-auth",[y]:"fire-auth-compat",[v]:"fire-rtdb",[b]:"fire-data-connect",[w]:"fire-rtdb-compat",[x]:"fire-fn",[_]:"fire-fn-compat",[k]:"fire-iid",[S]:"fire-iid-compat",[E]:"fire-fcm",[T]:"fire-fcm-compat",[I]:"fire-perf",[C]:"fire-perf-compat",[A]:"fire-rc",[D]:"fire-rc-compat",[P]:"fire-gcs",[N]:"fire-gcs-compat",[M]:"fire-fst",[j]:"fire-fst-compat",[R]:"fire-vertex","fire-js":"fire-js",[O]:"fire-js-all"},V=new Map,z=new Map,U=new Map;function B(e,t){try{e.container.addComponent(t)}catch(n){u.debug("Component ".concat(t.name," failed to register with FirebaseApp ").concat(e.name),n)}}function W(e){const t=e.name;if(U.has(t))return u.debug("There were multiple attempts to register component ".concat(t,".")),!1;U.set(t,e);for(const n of V.values())B(n,e);for(const n of z.values())B(n,e);return!0}function q(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function H(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:L;q(e,t).clearInstance(n)}function K(e){return void 0!==e.settings}const G={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Q=new s.FA("app","Firebase",G);class Y{constructor(e,t,n){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=n,this.container.addComponent(new r.uA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Q.create("app-deleted",{appName:this._name})}}const Z="11.1.0";function $(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e;if("object"!==typeof t){t={name:t}}const i=Object.assign({name:L,automaticDataCollectionEnabled:!1},t),a=i.name;if("string"!==typeof a||!a)throw Q.create("bad-app-name",{appName:String(a)});if(n||(n=(0,s.T9)()),!n)throw Q.create("no-options");const o=V.get(a);if(o){if((0,s.bD)(n,o.options)&&(0,s.bD)(i,o.config))return o;throw Q.create("duplicate-app",{appName:a})}const l=new r.h1(a);for(const r of U.values())l.addComponent(r);const c=new Y(n,i,l);return V.set(a,c),c}function J(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L;const t=V.get(e);if(!t&&e===L&&(0,s.T9)())return $();if(!t)throw Q.create("no-app",{appName:e});return t}function X(e,t,n){var i;let s=null!==(i=F[e])&&void 0!==i?i:e;n&&(s+="-".concat(n));const a=s.match(/\s|\//),o=t.match(/\s|\//);if(a||o){const e=['Unable to register library "'.concat(s,'" with version "').concat(t,'":')];return a&&e.push('library name "'.concat(s,'" contains illegal characters (whitespace or "/")')),a&&o&&e.push("and"),o&&e.push('version name "'.concat(t,'" contains illegal characters (whitespace or "/")')),void u.warn(e.join(" "))}W(new r.uA("".concat(s,"-version"),()=>({library:s,version:t}),"VERSION"))}const ee="firebase-heartbeat-store";let te=null;function ne(){return te||(te=(0,a.P2)("firebase-heartbeat-database",1,{upgrade:(e,t)=>{if(0===t)try{e.createObjectStore(ee)}catch(n){console.warn(n)}}}).catch(e=>{throw Q.create("idb-open",{originalErrorMessage:e.message})})),te}async function re(e,t){try{const n=(await ne()).transaction(ee,"readwrite"),r=n.objectStore(ee);await r.put(t,ie(e)),await n.done}catch(n){if(n instanceof s.g)u.warn(n.message);else{const e=Q.create("idb-set",{originalErrorMessage:null===n||void 0===n?void 0:n.message});u.warn(e.message)}}}function ie(e){return"".concat(e.name,"!").concat(e.options.appId)}class se{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new oe(t),this._heartbeatsCachePromise=this._storage.read().then(e=>(this._heartbeatsCache=e,e))}async triggerHeartbeat(){var e,t;try{const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=ae();if(null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)&&(this._heartbeatsCache=await this._heartbeatsCachePromise,null==(null===(t=this._heartbeatsCache)||void 0===t?void 0:t.heartbeats)))return;if(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(e=>e.date===r))return;return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(e=>{const t=new Date(e.date).valueOf();return Date.now()-t<=2592e6}),this._storage.overwrite(this._heartbeatsCache)}catch(n){u.warn(n)}}async getHeartbeatsHeader(){var e;try{if(null===this._heartbeatsCache&&await this._heartbeatsCachePromise,null==(null===(e=this._heartbeatsCache)||void 0===e?void 0:e.heartbeats)||0===this._heartbeatsCache.heartbeats.length)return"";const t=ae(),{heartbeatsToSend:n,unsentEntries:r}=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1024;const n=[];let r=e.slice();for(const i of e){const e=n.find(e=>e.agent===i.agent);if(e){if(e.dates.push(i.date),le(n)>t){e.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),le(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}(this._heartbeatsCache.heartbeats),i=(0,s.Uj)(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(t){return u.warn(t),""}}}function ae(){return(new Date).toISOString().substring(0,10)}class oe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return!!(0,s.zW)()&&(0,s.eX)().then(()=>!0).catch(()=>!1)}async read(){if(await this._canUseIndexedDBPromise){const e=await async function(e){try{const t=(await ne()).transaction(ee),n=await t.objectStore(ee).get(ie(e));return await t.done,n}catch(t){if(t instanceof s.g)u.warn(t.message);else{const e=Q.create("idb-get",{originalErrorMessage:null===t||void 0===t?void 0:t.message});u.warn(e.message)}}}(this.app);return(null===e||void 0===e?void 0:e.heartbeats)?e:{heartbeats:[]}}return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:e.heartbeats})}}async add(e){var t;if(await this._canUseIndexedDBPromise){const n=await this.read();return re(this.app,{lastSentHeartbeatDate:null!==(t=e.lastSentHeartbeatDate)&&void 0!==t?t:n.lastSentHeartbeatDate,heartbeats:[...n.heartbeats,...e.heartbeats]})}}}function le(e){return(0,s.Uj)(JSON.stringify({version:2,heartbeats:e})).length}var ce;ce="",W(new r.uA("platform-logger",e=>new o(e),"PRIVATE")),W(new r.uA("heartbeat",e=>new se(e),"PRIVATE")),X(l,c,ce),X(l,c,"esm2017"),X("fire-js","")},311:(e,t,n)=>{"use strict";n.d(t,{$b:()=>i,Vy:()=>c});const r=[];var i;!function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"}(i||(i={}));const s={debug:i.DEBUG,verbose:i.VERBOSE,info:i.INFO,warn:i.WARN,error:i.ERROR,silent:i.SILENT},a=i.INFO,o={[i.DEBUG]:"log",[i.VERBOSE]:"log",[i.INFO]:"info",[i.WARN]:"warn",[i.ERROR]:"error"},l=function(e,t){if(t<e.logLevel)return;const n=(new Date).toISOString(),r=o[t];if(!r)throw new Error("Attempted to log a message with an invalid logType (value: ".concat(t,")"));for(var i=arguments.length,s=new Array(i>2?i-2:0),a=2;a<i;a++)s[a-2]=arguments[a];console[r]("[".concat(n,"]  ").concat(e.name,":"),...s)};class c{constructor(e){this.name=e,this._logLevel=a,this._logHandler=l,this._userLogHandler=null,r.push(this)}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in i))throw new TypeError('Invalid value "'.concat(e,'" assigned to `logLevel`'));this._logLevel=e}setLogLevel(e){this._logLevel="string"===typeof e?s[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if("function"!==typeof e)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.DEBUG,...t),this._logHandler(this,i.DEBUG,...t)}log(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.VERBOSE,...t),this._logHandler(this,i.VERBOSE,...t)}info(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.INFO,...t),this._logHandler(this,i.INFO,...t)}warn(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.WARN,...t),this._logHandler(this,i.WARN,...t)}error(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._userLogHandler&&this._userLogHandler(this,i.ERROR,...t),this._logHandler(this,i.ERROR,...t)}}},376:(e,t,n)=>{"use strict";n.d(t,{h1:()=>o,uA:()=>i});var r=n(788);class i{constructor(e,t,n){this.name=e,this.instanceFactory=t,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}const s="[DEFAULT]";class a{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const e=new r.cY;if(this.instancesDeferred.set(t,e),this.isInitialized(t)||this.shouldAutoInitialize())try{const n=this.getOrInitializeService({instanceIdentifier:t});n&&e.resolve(n)}catch(n){}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const n=this.normalizeInstanceIdentifier(null===e||void 0===e?void 0:e.identifier),r=null!==(t=null===e||void 0===e?void 0:e.optional)&&void 0!==t&&t;if(!this.isInitialized(n)&&!this.shouldAutoInitialize()){if(r)return null;throw Error("Service ".concat(this.name," is not available"))}try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error("Mismatching Component ".concat(e.name," for Provider ").concat(this.name,"."));if(this.component)throw Error("Component for ".concat(this.name," has already been provided"));if(this.component=e,this.shouldAutoInitialize()){if(function(e){return"EAGER"===e.instantiationMode}(e))try{this.getOrInitializeService({instanceIdentifier:s})}catch(t){}for(const[e,n]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(e);try{const e=this.getOrInitializeService({instanceIdentifier:r});n.resolve(e)}catch(t){}}}}clearInstance(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(e=>"INTERNAL"in e).map(e=>e.INTERNAL.delete()),...e.filter(e=>"_delete"in e).map(e=>e._delete())])}isComponentSet(){return null!=this.component}isInitialized(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instances.has(e)}getOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.instancesOptions.get(e)||{}}initialize(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const{options:t={}}=e,n=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(n))throw Error("".concat(this.name,"(").concat(n,") has already been initialized"));if(!this.isComponentSet())throw Error("Component ".concat(this.name," has not been registered yet"));const r=this.getOrInitializeService({instanceIdentifier:n,options:t});for(const[i,s]of this.instancesDeferred.entries()){n===this.normalizeInstanceIdentifier(i)&&s.resolve(r)}return r}onInit(e,t){var n;const r=this.normalizeInstanceIdentifier(t),i=null!==(n=this.onInitCallbacks.get(r))&&void 0!==n?n:new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,t){const n=this.onInitCallbacks.get(t);if(n)for(const i of n)try{i(e,t)}catch(r){}}getOrInitializeService(e){let{instanceIdentifier:t,options:n={}}=e,r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:(i=t,i===s?void 0:i),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch(a){}var i;return r||null}normalizeInstanceIdentifier(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s;return this.component?this.component.multipleInstances?e:s:e}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class o{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error("Component ".concat(e.name," has already been registered with ").concat(this.name));t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new a(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}},379:(e,t,n)=>{"use strict";n.d(t,{A:()=>s});var r=n(705);function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),n.push.apply(n,r)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach(function(t){(0,r.A)(e,t,n[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))})}return e}},387:(e,t,n)=>{"use strict";var r,i=n(565),s=(r=i)&&"object"===typeof r&&"default"in r?r.default:r;function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var o=!("undefined"===typeof window||!window.document||!window.document.createElement);e.exports=function(e,t,n){if("function"!==typeof e)throw new Error("Expected reducePropsToState to be a function.");if("function"!==typeof t)throw new Error("Expected handleStateChangeOnClient to be a function.");if("undefined"!==typeof n&&"function"!==typeof n)throw new Error("Expected mapStateOnServer to either be undefined or a function.");return function(r){if("function"!==typeof r)throw new Error("Expected WrappedComponent to be a React component.");var l,c=[];function u(){l=e(c.map(function(e){return e.props})),h.canUseDOM?t(l):n&&(l=n(l))}var h=function(e){var t,n;function i(){return e.apply(this,arguments)||this}n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i.peek=function(){return l},i.rewind=function(){if(i.canUseDOM)throw new Error("You may only call rewind() on the server. Call peek() to read the current state.");var e=l;return l=void 0,c=[],e};var a=i.prototype;return a.UNSAFE_componentWillMount=function(){c.push(this),u()},a.componentDidUpdate=function(){u()},a.componentWillUnmount=function(){var e=c.indexOf(this);c.splice(e,1),u()},a.render=function(){return s.createElement(r,this.props)},i}(i.PureComponent);return a(h,"displayName","SideEffect("+function(e){return e.displayName||e.name||"Component"}(r)+")"),a(h,"canUseDOM",o),h}}},396:(e,t,n)=>{"use strict";!function e(){if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__&&"function"===typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE)try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}(),e.exports=n(764)},501:(e,t,n)=>{"use strict";var r=n(396);t.createRoot=r.createRoot,t.hydrateRoot=r.hydrateRoot},508:(e,t)=>{"use strict";function n(e,t){var n=e.length;e.push(t);e:for(;0<n;){var r=n-1>>>1,i=e[r];if(!(0<s(i,t)))break e;e[r]=t,e[n]=i,n=r}}function r(e){return 0===e.length?null:e[0]}function i(e){if(0===e.length)return null;var t=e[0],n=e.pop();if(n!==t){e[0]=n;e:for(var r=0,i=e.length,a=i>>>1;r<a;){var o=2*(r+1)-1,l=e[o],c=o+1,u=e[c];if(0>s(l,n))c<i&&0>s(u,l)?(e[r]=u,e[c]=n,r=c):(e[r]=l,e[o]=n,r=o);else{if(!(c<i&&0>s(u,n)))break e;e[r]=u,e[c]=n,r=c}}}return t}function s(e,t){var n=e.sortIndex-t.sortIndex;return 0!==n?n:e.id-t.id}if("object"===typeof performance&&"function"===typeof performance.now){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],u=[],h=1,d=null,f=3,p=!1,g=!1,m=!1,y="function"===typeof setTimeout?setTimeout:null,v="function"===typeof clearTimeout?clearTimeout:null,b="undefined"!==typeof setImmediate?setImmediate:null;function w(e){for(var t=r(u);null!==t;){if(null===t.callback)i(u);else{if(!(t.startTime<=e))break;i(u),t.sortIndex=t.expirationTime,n(c,t)}t=r(u)}}function x(e){if(m=!1,w(e),!g)if(null!==r(c))g=!0,M(_);else{var t=r(u);null!==t&&R(x,t.startTime-e)}}function _(e,n){g=!1,m&&(m=!1,v(T),T=-1),p=!0;var s=f;try{for(w(n),d=r(c);null!==d&&(!(d.expirationTime>n)||e&&!A());){var a=d.callback;if("function"===typeof a){d.callback=null,f=d.priorityLevel;var o=a(d.expirationTime<=n);n=t.unstable_now(),"function"===typeof o?d.callback=o:d===r(c)&&i(c),w(n)}else i(c);d=r(c)}if(null!==d)var l=!0;else{var h=r(u);null!==h&&R(x,h.startTime-n),l=!1}return l}finally{d=null,f=s,p=!1}}"undefined"!==typeof navigator&&void 0!==navigator.scheduling&&void 0!==navigator.scheduling.isInputPending&&navigator.scheduling.isInputPending.bind(navigator.scheduling);var k,S=!1,E=null,T=-1,I=5,C=-1;function A(){return!(t.unstable_now()-C<I)}function D(){if(null!==E){var e=t.unstable_now();C=e;var n=!0;try{n=E(!0,e)}finally{n?k():(S=!1,E=null)}}else S=!1}if("function"===typeof b)k=function(){b(D)};else if("undefined"!==typeof MessageChannel){var P=new MessageChannel,N=P.port2;P.port1.onmessage=D,k=function(){N.postMessage(null)}}else k=function(){y(D,0)};function M(e){E=e,S||(S=!0,k())}function R(e,n){T=y(function(){e(t.unstable_now())},n)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(e){e.callback=null},t.unstable_continueExecution=function(){g||p||(g=!0,M(_))},t.unstable_forceFrameRate=function(e){0>e||125<e?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<e?Math.floor(1e3/e):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return r(c)},t.unstable_next=function(e){switch(f){case 1:case 2:case 3:var t=3;break;default:t=f}var n=f;f=t;try{return e()}finally{f=n}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(e,t){switch(e){case 1:case 2:case 3:case 4:case 5:break;default:e=3}var n=f;f=e;try{return t()}finally{f=n}},t.unstable_scheduleCallback=function(e,i,s){var a=t.unstable_now();switch("object"===typeof s&&null!==s?s="number"===typeof(s=s.delay)&&0<s?a+s:a:s=a,e){case 1:var o=-1;break;case 2:o=250;break;case 5:o=1073741823;break;case 4:o=1e4;break;default:o=5e3}return e={id:h++,callback:i,priorityLevel:e,startTime:s,expirationTime:o=s+o,sortIndex:-1},s>a?(e.sortIndex=s,n(u,e),null===r(c)&&e===r(u)&&(m?(v(T),T=-1):m=!0,R(x,s-a))):(e.sortIndex=o,n(c,e),g||p||(g=!0,M(_))),e},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(e){var t=f;return function(){var n=f;f=t;try{return e.apply(this,arguments)}finally{f=n}}}},540:(e,t)=>{"use strict";var n=Symbol.for("react.element"),r=Symbol.for("react.portal"),i=Symbol.for("react.fragment"),s=Symbol.for("react.strict_mode"),a=Symbol.for("react.profiler"),o=Symbol.for("react.provider"),l=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),h=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),f=Symbol.iterator;var p={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},g=Object.assign,m={};function y(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}function v(){}function b(e,t,n){this.props=e,this.context=t,this.refs=m,this.updater=n||p}y.prototype.isReactComponent={},y.prototype.setState=function(e,t){if("object"!==typeof e&&"function"!==typeof e&&null!=e)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")},y.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},v.prototype=y.prototype;var w=b.prototype=new v;w.constructor=b,g(w,y.prototype),w.isPureReactComponent=!0;var x=Array.isArray,_=Object.prototype.hasOwnProperty,k={current:null},S={key:!0,ref:!0,__self:!0,__source:!0};function E(e,t,r){var i,s={},a=null,o=null;if(null!=t)for(i in void 0!==t.ref&&(o=t.ref),void 0!==t.key&&(a=""+t.key),t)_.call(t,i)&&!S.hasOwnProperty(i)&&(s[i]=t[i]);var l=arguments.length-2;if(1===l)s.children=r;else if(1<l){for(var c=Array(l),u=0;u<l;u++)c[u]=arguments[u+2];s.children=c}if(e&&e.defaultProps)for(i in l=e.defaultProps)void 0===s[i]&&(s[i]=l[i]);return{$$typeof:n,type:e,key:a,ref:o,props:s,_owner:k.current}}function T(e){return"object"===typeof e&&null!==e&&e.$$typeof===n}var I=/\/+/g;function C(e,t){return"object"===typeof e&&null!==e&&null!=e.key?function(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(e){return t[e]})}(""+e.key):t.toString(36)}function A(e,t,i,s,a){var o=typeof e;"undefined"!==o&&"boolean"!==o||(e=null);var l=!1;if(null===e)l=!0;else switch(o){case"string":case"number":l=!0;break;case"object":switch(e.$$typeof){case n:case r:l=!0}}if(l)return a=a(l=e),e=""===s?"."+C(l,0):s,x(a)?(i="",null!=e&&(i=e.replace(I,"$&/")+"/"),A(a,t,i,"",function(e){return e})):null!=a&&(T(a)&&(a=function(e,t){return{$$typeof:n,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}(a,i+(!a.key||l&&l.key===a.key?"":(""+a.key).replace(I,"$&/")+"/")+e)),t.push(a)),1;if(l=0,s=""===s?".":s+":",x(e))for(var c=0;c<e.length;c++){var u=s+C(o=e[c],c);l+=A(o,t,i,u,a)}else if(u=function(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=f&&e[f]||e["@@iterator"])?e:null}(e),"function"===typeof u)for(e=u.call(e),c=0;!(o=e.next()).done;)l+=A(o=o.value,t,i,u=s+C(o,c++),a);else if("object"===o)throw t=String(e),Error("Objects are not valid as a React child (found: "+("[object Object]"===t?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return l}function D(e,t,n){if(null==e)return e;var r=[],i=0;return A(e,r,"","",function(e){return t.call(n,e,i++)}),r}function P(e){if(-1===e._status){var t=e._result;(t=t()).then(function(t){0!==e._status&&-1!==e._status||(e._status=1,e._result=t)},function(t){0!==e._status&&-1!==e._status||(e._status=2,e._result=t)}),-1===e._status&&(e._status=0,e._result=t)}if(1===e._status)return e._result.default;throw e._result}var N={current:null},M={transition:null},R={ReactCurrentDispatcher:N,ReactCurrentBatchConfig:M,ReactCurrentOwner:k};function j(){throw Error("act(...) is not supported in production builds of React.")}t.Children={map:D,forEach:function(e,t,n){D(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return D(e,function(){t++}),t},toArray:function(e){return D(e,function(e){return e})||[]},only:function(e){if(!T(e))throw Error("React.Children.only expected to receive a single React element child.");return e}},t.Component=y,t.Fragment=i,t.Profiler=a,t.PureComponent=b,t.StrictMode=s,t.Suspense=u,t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=R,t.act=j,t.cloneElement=function(e,t,r){if(null===e||void 0===e)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var i=g({},e.props),s=e.key,a=e.ref,o=e._owner;if(null!=t){if(void 0!==t.ref&&(a=t.ref,o=k.current),void 0!==t.key&&(s=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)_.call(t,c)&&!S.hasOwnProperty(c)&&(i[c]=void 0===t[c]&&void 0!==l?l[c]:t[c])}var c=arguments.length-2;if(1===c)i.children=r;else if(1<c){l=Array(c);for(var u=0;u<c;u++)l[u]=arguments[u+2];i.children=l}return{$$typeof:n,type:e.type,key:s,ref:a,props:i,_owner:o}},t.createContext=function(e){return(e={$$typeof:l,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null}).Provider={$$typeof:o,_context:e},e.Consumer=e},t.createElement=E,t.createFactory=function(e){var t=E.bind(null,e);return t.type=e,t},t.createRef=function(){return{current:null}},t.forwardRef=function(e){return{$$typeof:c,render:e}},t.isValidElement=T,t.lazy=function(e){return{$$typeof:d,_payload:{_status:-1,_result:e},_init:P}},t.memo=function(e,t){return{$$typeof:h,type:e,compare:void 0===t?null:t}},t.startTransition=function(e){var t=M.transition;M.transition={};try{e()}finally{M.transition=t}},t.unstable_act=j,t.useCallback=function(e,t){return N.current.useCallback(e,t)},t.useContext=function(e){return N.current.useContext(e)},t.useDebugValue=function(){},t.useDeferredValue=function(e){return N.current.useDeferredValue(e)},t.useEffect=function(e,t){return N.current.useEffect(e,t)},t.useId=function(){return N.current.useId()},t.useImperativeHandle=function(e,t,n){return N.current.useImperativeHandle(e,t,n)},t.useInsertionEffect=function(e,t){return N.current.useInsertionEffect(e,t)},t.useLayoutEffect=function(e,t){return N.current.useLayoutEffect(e,t)},t.useMemo=function(e,t){return N.current.useMemo(e,t)},t.useReducer=function(e,t,n){return N.current.useReducer(e,t,n)},t.useRef=function(e){return N.current.useRef(e)},t.useState=function(e){return N.current.useState(e)},t.useSyncExternalStore=function(e,t,n){return N.current.useSyncExternalStore(e,t,n)},t.useTransition=function(){return N.current.useTransition()},t.version="18.3.1"},565:(e,t,n)=>{"use strict";e.exports=n(540)},611:(e,t,n)=>{"use strict";e.exports=n(508)},643:(e,t,n)=>{"use strict";var r=n(565),i=Symbol.for("react.element"),s=Symbol.for("react.fragment"),a=Object.prototype.hasOwnProperty,o=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function c(e,t,n){var r,s={},c=null,u=null;for(r in void 0!==n&&(c=""+n),void 0!==t.key&&(c=""+t.key),void 0!==t.ref&&(u=t.ref),t)a.call(t,r)&&!l.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps)void 0===s[r]&&(s[r]=t[r]);return{$$typeof:i,type:e,key:c,ref:u,props:s,_owner:o.current}}t.Fragment=s,t.jsx=c,t.jsxs=c},705:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e){var t=function(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=i(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:()=>s})},720:e=>{var t="undefined"!==typeof Element,n="function"===typeof Map,r="function"===typeof Set,i="function"===typeof ArrayBuffer&&!!ArrayBuffer.isView;function s(e,a){if(e===a)return!0;if(e&&a&&"object"==typeof e&&"object"==typeof a){if(e.constructor!==a.constructor)return!1;var o,l,c,u;if(Array.isArray(e)){if((o=e.length)!=a.length)return!1;for(l=o;0!==l--;)if(!s(e[l],a[l]))return!1;return!0}if(n&&e instanceof Map&&a instanceof Map){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;for(u=e.entries();!(l=u.next()).done;)if(!s(l.value[1],a.get(l.value[0])))return!1;return!0}if(r&&e instanceof Set&&a instanceof Set){if(e.size!==a.size)return!1;for(u=e.entries();!(l=u.next()).done;)if(!a.has(l.value[0]))return!1;return!0}if(i&&ArrayBuffer.isView(e)&&ArrayBuffer.isView(a)){if((o=e.length)!=a.length)return!1;for(l=o;0!==l--;)if(e[l]!==a[l])return!1;return!0}if(e.constructor===RegExp)return e.source===a.source&&e.flags===a.flags;if(e.valueOf!==Object.prototype.valueOf&&"function"===typeof e.valueOf&&"function"===typeof a.valueOf)return e.valueOf()===a.valueOf();if(e.toString!==Object.prototype.toString&&"function"===typeof e.toString&&"function"===typeof a.toString)return e.toString()===a.toString();if((o=(c=Object.keys(e)).length)!==Object.keys(a).length)return!1;for(l=o;0!==l--;)if(!Object.prototype.hasOwnProperty.call(a,c[l]))return!1;if(t&&e instanceof Element)return!1;for(l=o;0!==l--;)if(("_owner"!==c[l]&&"__v"!==c[l]&&"__o"!==c[l]||!e.$$typeof)&&!s(e[c[l]],a[c[l]]))return!1;return!0}return e!==e&&a!==a}e.exports=function(e,t){try{return s(e,t)}catch(n){if((n.message||"").match(/stack|recursion/i))return console.warn("react-fast-compare cannot handle circular refs"),!1;throw n}}},764:(e,t,n)=>{"use strict";var r=n(565),i=n(611);function s(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=new Set,o={};function l(e,t){c(e,t),c(e+"Capture",t)}function c(e,t){for(o[e]=t,e=0;e<t.length;e++)a.add(t[e])}var u=!("undefined"===typeof window||"undefined"===typeof window.document||"undefined"===typeof window.document.createElement),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,f={},p={};function g(e,t,n,r,i,s,a){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=a}var m={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){m[e]=new g(e,0,!1,e,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];m[t]=new g(t,1,!1,e[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){m[e]=new g(e,2,!1,e.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){m[e]=new g(e,2,!1,e,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){m[e]=new g(e,3,!1,e.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(e){m[e]=new g(e,3,!0,e,null,!1,!1)}),["capture","download"].forEach(function(e){m[e]=new g(e,4,!1,e,null,!1,!1)}),["cols","rows","size","span"].forEach(function(e){m[e]=new g(e,6,!1,e,null,!1,!1)}),["rowSpan","start"].forEach(function(e){m[e]=new g(e,5,!1,e.toLowerCase(),null,!1,!1)});var y=/[\-:]([a-z])/g;function v(e){return e[1].toUpperCase()}function b(e,t,n,r){var i=m.hasOwnProperty(t)?m[t]:null;(null!==i?0!==i.type:r||!(2<t.length)||"o"!==t[0]&&"O"!==t[0]||"n"!==t[1]&&"N"!==t[1])&&(function(e,t,n,r){if(null===t||"undefined"===typeof t||function(e,t,n,r){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!r&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,r))return!0;if(r)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(t,n,i,r)&&(n=null),r||null===i?function(e){return!!h.call(p,e)||!h.call(f,e)&&(d.test(e)?p[e]=!0:(f[e]=!0,!1))}(t)&&(null===n?e.removeAttribute(t):e.setAttribute(t,""+n)):i.mustUseProperty?e[i.propertyName]=null===n?3!==i.type&&"":n:(t=i.attributeName,r=i.attributeNamespace,null===n?e.removeAttribute(t):(n=3===(i=i.type)||4===i&&!0===n?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(y,v);m[t]=new g(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!1,!1)}),m.xlinkHref=new g("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(e){m[e]=new g(e,1,!1,e.toLowerCase(),null,!0,!0)});var w=r.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,x=Symbol.for("react.element"),_=Symbol.for("react.portal"),k=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),E=Symbol.for("react.profiler"),T=Symbol.for("react.provider"),I=Symbol.for("react.context"),C=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),D=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy");Symbol.for("react.scope"),Symbol.for("react.debug_trace_mode");var M=Symbol.for("react.offscreen");Symbol.for("react.legacy_hidden"),Symbol.for("react.cache"),Symbol.for("react.tracing_marker");var R=Symbol.iterator;function j(e){return null===e||"object"!==typeof e?null:"function"===typeof(e=R&&e[R]||e["@@iterator"])?e:null}var O,L=Object.assign;function F(e){if(void 0===O)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);O=t&&t[1]||""}return"\n"+O+e}var V=!1;function z(e,t){if(!e||V)return"";V=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),"object"===typeof Reflect&&Reflect.construct){try{Reflect.construct(t,[])}catch(c){var r=c}Reflect.construct(e,[],t)}else{try{t.call()}catch(c){r=c}e.call(t.prototype)}else{try{throw Error()}catch(c){r=c}e()}}catch(c){if(c&&r&&"string"===typeof c.stack){for(var i=c.stack.split("\n"),s=r.stack.split("\n"),a=i.length-1,o=s.length-1;1<=a&&0<=o&&i[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(i[a]!==s[o]){if(1!==a||1!==o)do{if(a--,0>--o||i[a]!==s[o]){var l="\n"+i[a].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}}while(1<=a&&0<=o);break}}}finally{V=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?F(e):""}function U(e){switch(e.tag){case 5:return F(e.type);case 16:return F("Lazy");case 13:return F("Suspense");case 19:return F("SuspenseList");case 0:case 2:case 15:return e=z(e.type,!1);case 11:return e=z(e.type.render,!1);case 1:return e=z(e.type,!0);default:return""}}function B(e){if(null==e)return null;if("function"===typeof e)return e.displayName||e.name||null;if("string"===typeof e)return e;switch(e){case k:return"Fragment";case _:return"Portal";case E:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case D:return"SuspenseList"}if("object"===typeof e)switch(e.$$typeof){case I:return(e.displayName||"Context")+".Consumer";case T:return(e._context.displayName||"Context")+".Provider";case C:var t=e.render;return(e=e.displayName)||(e=""!==(e=t.displayName||t.name||"")?"ForwardRef("+e+")":"ForwardRef"),e;case P:return null!==(t=e.displayName||null)?t:B(e.type)||"Memo";case N:t=e._payload,e=e._init;try{return B(e(t))}catch(n){}}return null}function W(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=(e=t.render).displayName||e.name||"",t.displayName||(""!==e?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return B(t);case 8:return t===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if("function"===typeof t)return t.displayName||t.name||null;if("string"===typeof t)return t}return null}function q(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":case"object":return e;default:return""}}function H(e){var t=e.type;return(e=e.nodeName)&&"input"===e.toLowerCase()&&("checkbox"===t||"radio"===t)}function K(e){e._valueTracker||(e._valueTracker=function(e){var t=H(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&"undefined"!==typeof n&&"function"===typeof n.get&&"function"===typeof n.set){var i=n.get,s=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return i.call(this)},set:function(e){r=""+e,s.call(this,e)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(e){r=""+e},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}(e))}function G(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=H(e)?e.checked?"true":"false":e.value),(e=r)!==n&&(t.setValue(e),!0)}function Q(e){if("undefined"===typeof(e=e||("undefined"!==typeof document?document:void 0)))return null;try{return e.activeElement||e.body}catch(t){return e.body}}function Y(e,t){var n=t.checked;return L({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:null!=n?n:e._wrapperState.initialChecked})}function Z(e,t){var n=null==t.defaultValue?"":t.defaultValue,r=null!=t.checked?t.checked:t.defaultChecked;n=q(null!=t.value?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:"checkbox"===t.type||"radio"===t.type?null!=t.checked:null!=t.value}}function $(e,t){null!=(t=t.checked)&&b(e,"checked",t,!1)}function J(e,t){$(e,t);var n=q(t.value),r=t.type;if(null!=n)"number"===r?(0===n&&""===e.value||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if("submit"===r||"reset"===r)return void e.removeAttribute("value");t.hasOwnProperty("value")?ee(e,t.type,n):t.hasOwnProperty("defaultValue")&&ee(e,t.type,q(t.defaultValue)),null==t.checked&&null!=t.defaultChecked&&(e.defaultChecked=!!t.defaultChecked)}function X(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!("submit"!==r&&"reset"!==r||void 0!==t.value&&null!==t.value))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}""!==(n=e.name)&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,""!==n&&(e.name=n)}function ee(e,t,n){"number"===t&&Q(e.ownerDocument)===e||(null==n?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var te=Array.isArray;function ne(e,t,n,r){if(e=e.options,t){t={};for(var i=0;i<n.length;i++)t["$"+n[i]]=!0;for(n=0;n<e.length;n++)i=t.hasOwnProperty("$"+e[n].value),e[n].selected!==i&&(e[n].selected=i),i&&r&&(e[n].defaultSelected=!0)}else{for(n=""+q(n),t=null,i=0;i<e.length;i++){if(e[i].value===n)return e[i].selected=!0,void(r&&(e[i].defaultSelected=!0));null!==t||e[i].disabled||(t=e[i])}null!==t&&(t.selected=!0)}}function re(e,t){if(null!=t.dangerouslySetInnerHTML)throw Error(s(91));return L({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function ie(e,t){var n=t.value;if(null==n){if(n=t.children,t=t.defaultValue,null!=n){if(null!=t)throw Error(s(92));if(te(n)){if(1<n.length)throw Error(s(93));n=n[0]}t=n}null==t&&(t=""),n=t}e._wrapperState={initialValue:q(n)}}function se(e,t){var n=q(t.value),r=q(t.defaultValue);null!=n&&((n=""+n)!==e.value&&(e.value=n),null==t.defaultValue&&e.defaultValue!==n&&(e.defaultValue=n)),null!=r&&(e.defaultValue=""+r)}function ae(e){var t=e.textContent;t===e._wrapperState.initialValue&&""!==t&&null!==t&&(e.value=t)}function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(e,t){return null==e||"http://www.w3.org/1999/xhtml"===e?oe(t):"http://www.w3.org/2000/svg"===e&&"foreignObject"===t?"http://www.w3.org/1999/xhtml":e}var ce,ue,he=(ue=function(e,t){if("http://www.w3.org/2000/svg"!==e.namespaceURI||"innerHTML"in e)e.innerHTML=t;else{for((ce=ce||document.createElement("div")).innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=ce.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}},"undefined"!==typeof MSApp&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return ue(e,t)})}:ue);function de(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&3===n.nodeType)return void(n.nodeValue=t)}e.textContent=t}var fe={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pe=["Webkit","ms","Moz","O"];function ge(e,t,n){return null==t||"boolean"===typeof t||""===t?"":n||"number"!==typeof t||0===t||fe.hasOwnProperty(e)&&fe[e]?(""+t).trim():t+"px"}function me(e,t){for(var n in e=e.style,t)if(t.hasOwnProperty(n)){var r=0===n.indexOf("--"),i=ge(n,t[n],r);"float"===n&&(n="cssFloat"),r?e.setProperty(n,i):e[n]=i}}Object.keys(fe).forEach(function(e){pe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),fe[t]=fe[e]})});var ye=L({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ve(e,t){if(t){if(ye[e]&&(null!=t.children||null!=t.dangerouslySetInnerHTML))throw Error(s(137,e));if(null!=t.dangerouslySetInnerHTML){if(null!=t.children)throw Error(s(60));if("object"!==typeof t.dangerouslySetInnerHTML||!("__html"in t.dangerouslySetInnerHTML))throw Error(s(61))}if(null!=t.style&&"object"!==typeof t.style)throw Error(s(62))}}function be(e,t){if(-1===e.indexOf("-"))return"string"===typeof t.is;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var we=null;function xe(e){return(e=e.target||e.srcElement||window).correspondingUseElement&&(e=e.correspondingUseElement),3===e.nodeType?e.parentNode:e}var _e=null,ke=null,Se=null;function Ee(e){if(e=bi(e)){if("function"!==typeof _e)throw Error(s(280));var t=e.stateNode;t&&(t=xi(t),_e(e.stateNode,e.type,t))}}function Te(e){ke?Se?Se.push(e):Se=[e]:ke=e}function Ie(){if(ke){var e=ke,t=Se;if(Se=ke=null,Ee(e),t)for(e=0;e<t.length;e++)Ee(t[e])}}function Ce(e,t){return e(t)}function Ae(){}var De=!1;function Pe(e,t,n){if(De)return e(t,n);De=!0;try{return Ce(e,t,n)}finally{De=!1,(null!==ke||null!==Se)&&(Ae(),Ie())}}function Ne(e,t){var n=e.stateNode;if(null===n)return null;var r=xi(n);if(null===r)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(r=!("button"===(e=e.type)||"input"===e||"select"===e||"textarea"===e)),e=!r;break e;default:e=!1}if(e)return null;if(n&&"function"!==typeof n)throw Error(s(231,t,typeof n));return n}var Me=!1;if(u)try{var Re={};Object.defineProperty(Re,"passive",{get:function(){Me=!0}}),window.addEventListener("test",Re,Re),window.removeEventListener("test",Re,Re)}catch(ue){Me=!1}function je(e,t,n,r,i,s,a,o,l){var c=Array.prototype.slice.call(arguments,3);try{t.apply(n,c)}catch(u){this.onError(u)}}var Oe=!1,Le=null,Fe=!1,Ve=null,ze={onError:function(e){Oe=!0,Le=e}};function Ue(e,t,n,r,i,s,a,o,l){Oe=!1,Le=null,je.apply(ze,arguments)}function Be(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do{0!==(4098&(t=e).flags)&&(n=t.return),e=t.return}while(e)}return 3===t.tag?n:null}function We(e){if(13===e.tag){var t=e.memoizedState;if(null===t&&(null!==(e=e.alternate)&&(t=e.memoizedState)),null!==t)return t.dehydrated}return null}function qe(e){if(Be(e)!==e)throw Error(s(188))}function He(e){return null!==(e=function(e){var t=e.alternate;if(!t){if(null===(t=Be(e)))throw Error(s(188));return t!==e?null:e}for(var n=e,r=t;;){var i=n.return;if(null===i)break;var a=i.alternate;if(null===a){if(null!==(r=i.return)){n=r;continue}break}if(i.child===a.child){for(a=i.child;a;){if(a===n)return qe(i),e;if(a===r)return qe(i),t;a=a.sibling}throw Error(s(188))}if(n.return!==r.return)n=i,r=a;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=a;break}if(l===r){o=!0,r=i,n=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===n){o=!0,n=a,r=i;break}if(l===r){o=!0,r=a,n=i;break}l=l.sibling}if(!o)throw Error(s(189))}}if(n.alternate!==r)throw Error(s(190))}if(3!==n.tag)throw Error(s(188));return n.stateNode.current===n?e:t}(e))?Ke(e):null}function Ke(e){if(5===e.tag||6===e.tag)return e;for(e=e.child;null!==e;){var t=Ke(e);if(null!==t)return t;e=e.sibling}return null}var Ge=i.unstable_scheduleCallback,Qe=i.unstable_cancelCallback,Ye=i.unstable_shouldYield,Ze=i.unstable_requestPaint,$e=i.unstable_now,Je=i.unstable_getCurrentPriorityLevel,Xe=i.unstable_ImmediatePriority,et=i.unstable_UserBlockingPriority,tt=i.unstable_NormalPriority,nt=i.unstable_LowPriority,rt=i.unstable_IdlePriority,it=null,st=null;var at=Math.clz32?Math.clz32:function(e){return e>>>=0,0===e?32:31-(ot(e)/lt|0)|0},ot=Math.log,lt=Math.LN2;var ct=64,ut=4194304;function ht(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return 4194240&e;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return 130023424&e;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function dt(e,t){var n=e.pendingLanes;if(0===n)return 0;var r=0,i=e.suspendedLanes,s=e.pingedLanes,a=268435455&n;if(0!==a){var o=a&~i;0!==o?r=ht(o):0!==(s&=a)&&(r=ht(s))}else 0!==(a=n&~i)?r=ht(a):0!==s&&(r=ht(s));if(0===r)return 0;if(0!==t&&t!==r&&0===(t&i)&&((i=r&-r)>=(s=t&-t)||16===i&&0!==(4194240&s)))return t;if(0!==(4&r)&&(r|=16&n),0!==(t=e.entangledLanes))for(e=e.entanglements,t&=r;0<t;)i=1<<(n=31-at(t)),r|=e[n],t&=~i;return r}function ft(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;default:return-1}}function pt(e){return 0!==(e=-1073741825&e.pendingLanes)?e:1073741824&e?1073741824:0}function gt(){var e=ct;return 0===(4194240&(ct<<=1))&&(ct=64),e}function mt(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function yt(e,t,n){e.pendingLanes|=t,536870912!==t&&(e.suspendedLanes=0,e.pingedLanes=0),(e=e.eventTimes)[t=31-at(t)]=n}function vt(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-at(n),i=1<<r;i&t|e[r]&t&&(e[r]|=t),n&=~i}}var bt=0;function wt(e){return 1<(e&=-e)?4<e?0!==(268435455&e)?16:536870912:4:1}var xt,_t,kt,St,Et,Tt=!1,It=[],Ct=null,At=null,Dt=null,Pt=new Map,Nt=new Map,Mt=[],Rt="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function jt(e,t){switch(e){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":At=null;break;case"mouseover":case"mouseout":Dt=null;break;case"pointerover":case"pointerout":Pt.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nt.delete(t.pointerId)}}function Ot(e,t,n,r,i,s){return null===e||e.nativeEvent!==s?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},null!==t&&(null!==(t=bi(t))&&_t(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,null!==i&&-1===t.indexOf(i)&&t.push(i),e)}function Lt(e){var t=vi(e.target);if(null!==t){var n=Be(t);if(null!==n)if(13===(t=n.tag)){if(null!==(t=We(n)))return e.blockedOn=t,void Et(e.priority,function(){kt(n)})}else if(3===t&&n.stateNode.current.memoizedState.isDehydrated)return void(e.blockedOn=3===n.tag?n.stateNode.containerInfo:null)}e.blockedOn=null}function Ft(e){if(null!==e.blockedOn)return!1;for(var t=e.targetContainers;0<t.length;){var n=Yt(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(null!==n)return null!==(t=bi(n))&&_t(t),e.blockedOn=n,!1;var r=new(n=e.nativeEvent).constructor(n.type,n);we=r,n.target.dispatchEvent(r),we=null,t.shift()}return!0}function Vt(e,t,n){Ft(e)&&n.delete(t)}function zt(){Tt=!1,null!==Ct&&Ft(Ct)&&(Ct=null),null!==At&&Ft(At)&&(At=null),null!==Dt&&Ft(Dt)&&(Dt=null),Pt.forEach(Vt),Nt.forEach(Vt)}function Ut(e,t){e.blockedOn===t&&(e.blockedOn=null,Tt||(Tt=!0,i.unstable_scheduleCallback(i.unstable_NormalPriority,zt)))}function Bt(e){function t(t){return Ut(t,e)}if(0<It.length){Ut(It[0],e);for(var n=1;n<It.length;n++){var r=It[n];r.blockedOn===e&&(r.blockedOn=null)}}for(null!==Ct&&Ut(Ct,e),null!==At&&Ut(At,e),null!==Dt&&Ut(Dt,e),Pt.forEach(t),Nt.forEach(t),n=0;n<Mt.length;n++)(r=Mt[n]).blockedOn===e&&(r.blockedOn=null);for(;0<Mt.length&&null===(n=Mt[0]).blockedOn;)Lt(n),null===n.blockedOn&&Mt.shift()}var Wt=w.ReactCurrentBatchConfig,qt=!0;function Ht(e,t,n,r){var i=bt,s=Wt.transition;Wt.transition=null;try{bt=1,Gt(e,t,n,r)}finally{bt=i,Wt.transition=s}}function Kt(e,t,n,r){var i=bt,s=Wt.transition;Wt.transition=null;try{bt=4,Gt(e,t,n,r)}finally{bt=i,Wt.transition=s}}function Gt(e,t,n,r){if(qt){var i=Yt(e,t,n,r);if(null===i)qr(e,t,r,Qt,n),jt(e,r);else if(function(e,t,n,r,i){switch(t){case"focusin":return Ct=Ot(Ct,e,t,n,r,i),!0;case"dragenter":return At=Ot(At,e,t,n,r,i),!0;case"mouseover":return Dt=Ot(Dt,e,t,n,r,i),!0;case"pointerover":var s=i.pointerId;return Pt.set(s,Ot(Pt.get(s)||null,e,t,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Nt.set(s,Ot(Nt.get(s)||null,e,t,n,r,i)),!0}return!1}(i,e,t,n,r))r.stopPropagation();else if(jt(e,r),4&t&&-1<Rt.indexOf(e)){for(;null!==i;){var s=bi(i);if(null!==s&&xt(s),null===(s=Yt(e,t,n,r))&&qr(e,t,r,Qt,n),s===i)break;i=s}null!==i&&r.stopPropagation()}else qr(e,t,r,null,n)}}var Qt=null;function Yt(e,t,n,r){if(Qt=null,null!==(e=vi(e=xe(r))))if(null===(t=Be(e)))e=null;else if(13===(n=t.tag)){if(null!==(e=We(t)))return e;e=null}else if(3===n){if(t.stateNode.current.memoizedState.isDehydrated)return 3===t.tag?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Qt=e,null}function Zt(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Je()){case Xe:return 1;case et:return 4;case tt:case nt:return 16;case rt:return 536870912;default:return 16}default:return 16}}var $t=null,Jt=null,Xt=null;function en(){if(Xt)return Xt;var e,t,n=Jt,r=n.length,i="value"in $t?$t.value:$t.textContent,s=i.length;for(e=0;e<r&&n[e]===i[e];e++);var a=r-e;for(t=1;t<=a&&n[r-t]===i[s-t];t++);return Xt=i.slice(e,1<t?1-t:void 0)}function tn(e){var t=e.keyCode;return"charCode"in e?0===(e=e.charCode)&&13===t&&(e=13):e=t,10===e&&(e=13),32<=e||13===e?e:0}function nn(){return!0}function rn(){return!1}function sn(e){function t(t,n,r,i,s){for(var a in this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=s,this.currentTarget=null,e)e.hasOwnProperty(a)&&(t=e[a],this[a]=t?t(i):i[a]);return this.isDefaultPrevented=(null!=i.defaultPrevented?i.defaultPrevented:!1===i.returnValue)?nn:rn,this.isPropagationStopped=rn,this}return L(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var e=this.nativeEvent;e&&(e.preventDefault?e.preventDefault():"unknown"!==typeof e.returnValue&&(e.returnValue=!1),this.isDefaultPrevented=nn)},stopPropagation:function(){var e=this.nativeEvent;e&&(e.stopPropagation?e.stopPropagation():"unknown"!==typeof e.cancelBubble&&(e.cancelBubble=!0),this.isPropagationStopped=nn)},persist:function(){},isPersistent:nn}),t}var an,on,ln,cn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},un=sn(cn),hn=L({},cn,{view:0,detail:0}),dn=sn(hn),fn=L({},hn,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:En,button:0,buttons:0,relatedTarget:function(e){return void 0===e.relatedTarget?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ln&&(ln&&"mousemove"===e.type?(an=e.screenX-ln.screenX,on=e.screenY-ln.screenY):on=an=0,ln=e),an)},movementY:function(e){return"movementY"in e?e.movementY:on}}),pn=sn(fn),gn=sn(L({},fn,{dataTransfer:0})),mn=sn(L({},hn,{relatedTarget:0})),yn=sn(L({},cn,{animationName:0,elapsedTime:0,pseudoElement:0})),vn=L({},cn,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),bn=sn(vn),wn=sn(L({},cn,{data:0})),xn={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_n={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kn={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Sn(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):!!(e=kn[e])&&!!t[e]}function En(){return Sn}var Tn=L({},hn,{key:function(e){if(e.key){var t=xn[e.key]||e.key;if("Unidentified"!==t)return t}return"keypress"===e.type?13===(e=tn(e))?"Enter":String.fromCharCode(e):"keydown"===e.type||"keyup"===e.type?_n[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:En,charCode:function(e){return"keypress"===e.type?tn(e):0},keyCode:function(e){return"keydown"===e.type||"keyup"===e.type?e.keyCode:0},which:function(e){return"keypress"===e.type?tn(e):"keydown"===e.type||"keyup"===e.type?e.keyCode:0}}),In=sn(Tn),Cn=sn(L({},fn,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0})),An=sn(L({},hn,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:En})),Dn=sn(L({},cn,{propertyName:0,elapsedTime:0,pseudoElement:0})),Pn=L({},fn,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),Nn=sn(Pn),Mn=[9,13,27,32],Rn=u&&"CompositionEvent"in window,jn=null;u&&"documentMode"in document&&(jn=document.documentMode);var On=u&&"TextEvent"in window&&!jn,Ln=u&&(!Rn||jn&&8<jn&&11>=jn),Fn=String.fromCharCode(32),Vn=!1;function zn(e,t){switch(e){case"keyup":return-1!==Mn.indexOf(t.keyCode);case"keydown":return 229!==t.keyCode;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Un(e){return"object"===typeof(e=e.detail)&&"data"in e?e.data:null}var Bn=!1;var Wn={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function qn(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return"input"===t?!!Wn[e.type]:"textarea"===t}function Hn(e,t,n,r){Te(r),0<(t=Kr(t,"onChange")).length&&(n=new un("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var Kn=null,Gn=null;function Qn(e){Fr(e,0)}function Yn(e){if(G(wi(e)))return e}function Zn(e,t){if("change"===e)return t}var $n=!1;if(u){var Jn;if(u){var Xn="oninput"in document;if(!Xn){var er=document.createElement("div");er.setAttribute("oninput","return;"),Xn="function"===typeof er.oninput}Jn=Xn}else Jn=!1;$n=Jn&&(!document.documentMode||9<document.documentMode)}function tr(){Kn&&(Kn.detachEvent("onpropertychange",nr),Gn=Kn=null)}function nr(e){if("value"===e.propertyName&&Yn(Gn)){var t=[];Hn(t,Gn,e,xe(e)),Pe(Qn,t)}}function rr(e,t,n){"focusin"===e?(tr(),Gn=n,(Kn=t).attachEvent("onpropertychange",nr)):"focusout"===e&&tr()}function ir(e){if("selectionchange"===e||"keyup"===e||"keydown"===e)return Yn(Gn)}function sr(e,t){if("click"===e)return Yn(t)}function ar(e,t){if("input"===e||"change"===e)return Yn(t)}var or="function"===typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e===1/t)||e!==e&&t!==t};function lr(e,t){if(or(e,t))return!0;if("object"!==typeof e||null===e||"object"!==typeof t||null===t)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!h.call(t,i)||!or(e[i],t[i]))return!1}return!0}function cr(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function ur(e,t){var n,r=cr(e);for(e=0;r;){if(3===r.nodeType){if(n=e+r.textContent.length,e<=t&&n>=t)return{node:r,offset:t-e};e=n}e:{for(;r;){if(r.nextSibling){r=r.nextSibling;break e}r=r.parentNode}r=void 0}r=cr(r)}}function hr(e,t){return!(!e||!t)&&(e===t||(!e||3!==e.nodeType)&&(t&&3===t.nodeType?hr(e,t.parentNode):"contains"in e?e.contains(t):!!e.compareDocumentPosition&&!!(16&e.compareDocumentPosition(t))))}function dr(){for(var e=window,t=Q();t instanceof e.HTMLIFrameElement;){try{var n="string"===typeof t.contentWindow.location.href}catch(r){n=!1}if(!n)break;t=Q((e=t.contentWindow).document)}return t}function fr(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&("input"===t&&("text"===e.type||"search"===e.type||"tel"===e.type||"url"===e.type||"password"===e.type)||"textarea"===t||"true"===e.contentEditable)}function pr(e){var t=dr(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&hr(n.ownerDocument.documentElement,n)){if(null!==r&&fr(n))if(t=r.start,void 0===(e=r.end)&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if((e=(t=n.ownerDocument||document)&&t.defaultView||window).getSelection){e=e.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=void 0===r.end?s:Math.min(r.end,i),!e.extend&&s>r&&(i=r,r=s,s=i),i=ur(n,s);var a=ur(n,r);i&&a&&(1!==e.rangeCount||e.anchorNode!==i.node||e.anchorOffset!==i.offset||e.focusNode!==a.node||e.focusOffset!==a.offset)&&((t=t.createRange()).setStart(i.node,i.offset),e.removeAllRanges(),s>r?(e.addRange(t),e.extend(a.node,a.offset)):(t.setEnd(a.node,a.offset),e.addRange(t)))}for(t=[],e=n;e=e.parentNode;)1===e.nodeType&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for("function"===typeof n.focus&&n.focus(),n=0;n<t.length;n++)(e=t[n]).element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gr=u&&"documentMode"in document&&11>=document.documentMode,mr=null,yr=null,vr=null,br=!1;function wr(e,t,n){var r=n.window===n?n.document:9===n.nodeType?n:n.ownerDocument;br||null==mr||mr!==Q(r)||("selectionStart"in(r=mr)&&fr(r)?r={start:r.selectionStart,end:r.selectionEnd}:r={anchorNode:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection()).anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset},vr&&lr(vr,r)||(vr=r,0<(r=Kr(yr,"onSelect")).length&&(t=new un("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=mr)))}function xr(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var _r={animationend:xr("Animation","AnimationEnd"),animationiteration:xr("Animation","AnimationIteration"),animationstart:xr("Animation","AnimationStart"),transitionend:xr("Transition","TransitionEnd")},kr={},Sr={};function Er(e){if(kr[e])return kr[e];if(!_r[e])return e;var t,n=_r[e];for(t in n)if(n.hasOwnProperty(t)&&t in Sr)return kr[e]=n[t];return e}u&&(Sr=document.createElement("div").style,"AnimationEvent"in window||(delete _r.animationend.animation,delete _r.animationiteration.animation,delete _r.animationstart.animation),"TransitionEvent"in window||delete _r.transitionend.transition);var Tr=Er("animationend"),Ir=Er("animationiteration"),Cr=Er("animationstart"),Ar=Er("transitionend"),Dr=new Map,Pr="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nr(e,t){Dr.set(e,t),l(t,[e])}for(var Mr=0;Mr<Pr.length;Mr++){var Rr=Pr[Mr];Nr(Rr.toLowerCase(),"on"+(Rr[0].toUpperCase()+Rr.slice(1)))}Nr(Tr,"onAnimationEnd"),Nr(Ir,"onAnimationIteration"),Nr(Cr,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(Ar,"onTransitionEnd"),c("onMouseEnter",["mouseout","mouseover"]),c("onMouseLeave",["mouseout","mouseover"]),c("onPointerEnter",["pointerout","pointerover"]),c("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var jr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Or=new Set("cancel close invalid load scroll toggle".split(" ").concat(jr));function Lr(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,function(e,t,n,r,i,a,o,l,c){if(Ue.apply(this,arguments),Oe){if(!Oe)throw Error(s(198));var u=Le;Oe=!1,Le=null,Fe||(Fe=!0,Ve=u)}}(r,t,void 0,e),e.currentTarget=null}function Fr(e,t){t=0!==(4&t);for(var n=0;n<e.length;n++){var r=e[n],i=r.event;r=r.listeners;e:{var s=void 0;if(t)for(var a=r.length-1;0<=a;a--){var o=r[a],l=o.instance,c=o.currentTarget;if(o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}else for(a=0;a<r.length;a++){if(l=(o=r[a]).instance,c=o.currentTarget,o=o.listener,l!==s&&i.isPropagationStopped())break e;Lr(i,o,c),s=l}}}if(Fe)throw e=Ve,Fe=!1,Ve=null,e}function Vr(e,t){var n=t[gi];void 0===n&&(n=t[gi]=new Set);var r=e+"__bubble";n.has(r)||(Wr(t,e,2,!1),n.add(r))}function zr(e,t,n){var r=0;t&&(r|=4),Wr(n,e,r,t)}var Ur="_reactListening"+Math.random().toString(36).slice(2);function Br(e){if(!e[Ur]){e[Ur]=!0,a.forEach(function(t){"selectionchange"!==t&&(Or.has(t)||zr(t,!1,e),zr(t,!0,e))});var t=9===e.nodeType?e:e.ownerDocument;null===t||t[Ur]||(t[Ur]=!0,zr("selectionchange",!1,t))}}function Wr(e,t,n,r){switch(Zt(t)){case 1:var i=Ht;break;case 4:i=Kt;break;default:i=Gt}n=i.bind(null,t,n,e),i=void 0,!Me||"touchstart"!==t&&"touchmove"!==t&&"wheel"!==t||(i=!0),r?void 0!==i?e.addEventListener(t,n,{capture:!0,passive:i}):e.addEventListener(t,n,!0):void 0!==i?e.addEventListener(t,n,{passive:i}):e.addEventListener(t,n,!1)}function qr(e,t,n,r,i){var s=r;if(0===(1&t)&&0===(2&t)&&null!==r)e:for(;;){if(null===r)return;var a=r.tag;if(3===a||4===a){var o=r.stateNode.containerInfo;if(o===i||8===o.nodeType&&o.parentNode===i)break;if(4===a)for(a=r.return;null!==a;){var l=a.tag;if((3===l||4===l)&&((l=a.stateNode.containerInfo)===i||8===l.nodeType&&l.parentNode===i))return;a=a.return}for(;null!==o;){if(null===(a=vi(o)))return;if(5===(l=a.tag)||6===l){r=s=a;continue e}o=o.parentNode}}r=r.return}Pe(function(){var r=s,i=xe(n),a=[];e:{var o=Dr.get(e);if(void 0!==o){var l=un,c=e;switch(e){case"keypress":if(0===tn(n))break e;case"keydown":case"keyup":l=In;break;case"focusin":c="focus",l=mn;break;case"focusout":c="blur",l=mn;break;case"beforeblur":case"afterblur":l=mn;break;case"click":if(2===n.button)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":l=pn;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":l=gn;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":l=An;break;case Tr:case Ir:case Cr:l=yn;break;case Ar:l=Dn;break;case"scroll":l=dn;break;case"wheel":l=Nn;break;case"copy":case"cut":case"paste":l=bn;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":l=Cn}var u=0!==(4&t),h=!u&&"scroll"===e,d=u?null!==o?o+"Capture":null:o;u=[];for(var f,p=r;null!==p;){var g=(f=p).stateNode;if(5===f.tag&&null!==g&&(f=g,null!==d&&(null!=(g=Ne(p,d))&&u.push(Hr(p,g,f)))),h)break;p=p.return}0<u.length&&(o=new l(o,c,null,n,i),a.push({event:o,listeners:u}))}}if(0===(7&t)){if(l="mouseout"===e||"pointerout"===e,(!(o="mouseover"===e||"pointerover"===e)||n===we||!(c=n.relatedTarget||n.fromElement)||!vi(c)&&!c[pi])&&(l||o)&&(o=i.window===i?i:(o=i.ownerDocument)?o.defaultView||o.parentWindow:window,l?(l=r,null!==(c=(c=n.relatedTarget||n.toElement)?vi(c):null)&&(c!==(h=Be(c))||5!==c.tag&&6!==c.tag)&&(c=null)):(l=null,c=r),l!==c)){if(u=pn,g="onMouseLeave",d="onMouseEnter",p="mouse","pointerout"!==e&&"pointerover"!==e||(u=Cn,g="onPointerLeave",d="onPointerEnter",p="pointer"),h=null==l?o:wi(l),f=null==c?o:wi(c),(o=new u(g,p+"leave",l,n,i)).target=h,o.relatedTarget=f,g=null,vi(i)===r&&((u=new u(d,p+"enter",c,n,i)).target=f,u.relatedTarget=h,g=u),h=g,l&&c)e:{for(d=c,p=0,f=u=l;f;f=Gr(f))p++;for(f=0,g=d;g;g=Gr(g))f++;for(;0<p-f;)u=Gr(u),p--;for(;0<f-p;)d=Gr(d),f--;for(;p--;){if(u===d||null!==d&&u===d.alternate)break e;u=Gr(u),d=Gr(d)}u=null}else u=null;null!==l&&Qr(a,o,l,u,!1),null!==c&&null!==h&&Qr(a,h,c,u,!0)}if("select"===(l=(o=r?wi(r):window).nodeName&&o.nodeName.toLowerCase())||"input"===l&&"file"===o.type)var m=Zn;else if(qn(o))if($n)m=ar;else{m=ir;var y=rr}else(l=o.nodeName)&&"input"===l.toLowerCase()&&("checkbox"===o.type||"radio"===o.type)&&(m=sr);switch(m&&(m=m(e,r))?Hn(a,m,n,i):(y&&y(e,o,r),"focusout"===e&&(y=o._wrapperState)&&y.controlled&&"number"===o.type&&ee(o,"number",o.value)),y=r?wi(r):window,e){case"focusin":(qn(y)||"true"===y.contentEditable)&&(mr=y,yr=r,vr=null);break;case"focusout":vr=yr=mr=null;break;case"mousedown":br=!0;break;case"contextmenu":case"mouseup":case"dragend":br=!1,wr(a,n,i);break;case"selectionchange":if(gr)break;case"keydown":case"keyup":wr(a,n,i)}var v;if(Rn)e:{switch(e){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Bn?zn(e,n)&&(b="onCompositionEnd"):"keydown"===e&&229===n.keyCode&&(b="onCompositionStart");b&&(Ln&&"ko"!==n.locale&&(Bn||"onCompositionStart"!==b?"onCompositionEnd"===b&&Bn&&(v=en()):(Jt="value"in($t=i)?$t.value:$t.textContent,Bn=!0)),0<(y=Kr(r,b)).length&&(b=new wn(b,e,null,n,i),a.push({event:b,listeners:y}),v?b.data=v:null!==(v=Un(n))&&(b.data=v))),(v=On?function(e,t){switch(e){case"compositionend":return Un(t);case"keypress":return 32!==t.which?null:(Vn=!0,Fn);case"textInput":return(e=t.data)===Fn&&Vn?null:e;default:return null}}(e,n):function(e,t){if(Bn)return"compositionend"===e||!Rn&&zn(e,t)?(e=en(),Xt=Jt=$t=null,Bn=!1,e):null;switch(e){case"paste":default:return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Ln&&"ko"!==t.locale?null:t.data}}(e,n))&&(0<(r=Kr(r,"onBeforeInput")).length&&(i=new wn("onBeforeInput","beforeinput",null,n,i),a.push({event:i,listeners:r}),i.data=v))}Fr(a,t)})}function Hr(e,t,n){return{instance:e,listener:t,currentTarget:n}}function Kr(e,t){for(var n=t+"Capture",r=[];null!==e;){var i=e,s=i.stateNode;5===i.tag&&null!==s&&(i=s,null!=(s=Ne(e,n))&&r.unshift(Hr(e,s,i)),null!=(s=Ne(e,t))&&r.push(Hr(e,s,i))),e=e.return}return r}function Gr(e){if(null===e)return null;do{e=e.return}while(e&&5!==e.tag);return e||null}function Qr(e,t,n,r,i){for(var s=t._reactName,a=[];null!==n&&n!==r;){var o=n,l=o.alternate,c=o.stateNode;if(null!==l&&l===r)break;5===o.tag&&null!==c&&(o=c,i?null!=(l=Ne(n,s))&&a.unshift(Hr(n,l,o)):i||null!=(l=Ne(n,s))&&a.push(Hr(n,l,o))),n=n.return}0!==a.length&&e.push({event:t,listeners:a})}var Yr=/\r\n?/g,Zr=/\u0000|\uFFFD/g;function $r(e){return("string"===typeof e?e:""+e).replace(Yr,"\n").replace(Zr,"")}function Jr(e,t,n){if(t=$r(t),$r(e)!==t&&n)throw Error(s(425))}function Xr(){}var ei=null,ti=null;function ni(e,t){return"textarea"===e||"noscript"===e||"string"===typeof t.children||"number"===typeof t.children||"object"===typeof t.dangerouslySetInnerHTML&&null!==t.dangerouslySetInnerHTML&&null!=t.dangerouslySetInnerHTML.__html}var ri="function"===typeof setTimeout?setTimeout:void 0,ii="function"===typeof clearTimeout?clearTimeout:void 0,si="function"===typeof Promise?Promise:void 0,ai="function"===typeof queueMicrotask?queueMicrotask:"undefined"!==typeof si?function(e){return si.resolve(null).then(e).catch(oi)}:ri;function oi(e){setTimeout(function(){throw e})}function li(e,t){var n=t,r=0;do{var i=n.nextSibling;if(e.removeChild(n),i&&8===i.nodeType)if("/$"===(n=i.data)){if(0===r)return e.removeChild(i),void Bt(t);r--}else"$"!==n&&"$?"!==n&&"$!"!==n||r++;n=i}while(n);Bt(t)}function ci(e){for(;null!=e;e=e.nextSibling){var t=e.nodeType;if(1===t||3===t)break;if(8===t){if("$"===(t=e.data)||"$!"===t||"$?"===t)break;if("/$"===t)return null}}return e}function ui(e){e=e.previousSibling;for(var t=0;e;){if(8===e.nodeType){var n=e.data;if("$"===n||"$!"===n||"$?"===n){if(0===t)return e;t--}else"/$"===n&&t++}e=e.previousSibling}return null}var hi=Math.random().toString(36).slice(2),di="__reactFiber$"+hi,fi="__reactProps$"+hi,pi="__reactContainer$"+hi,gi="__reactEvents$"+hi,mi="__reactListeners$"+hi,yi="__reactHandles$"+hi;function vi(e){var t=e[di];if(t)return t;for(var n=e.parentNode;n;){if(t=n[pi]||n[di]){if(n=t.alternate,null!==t.child||null!==n&&null!==n.child)for(e=ui(e);null!==e;){if(n=e[di])return n;e=ui(e)}return t}n=(e=n).parentNode}return null}function bi(e){return!(e=e[di]||e[pi])||5!==e.tag&&6!==e.tag&&13!==e.tag&&3!==e.tag?null:e}function wi(e){if(5===e.tag||6===e.tag)return e.stateNode;throw Error(s(33))}function xi(e){return e[fi]||null}var _i=[],ki=-1;function Si(e){return{current:e}}function Ei(e){0>ki||(e.current=_i[ki],_i[ki]=null,ki--)}function Ti(e,t){ki++,_i[ki]=e.current,e.current=t}var Ii={},Ci=Si(Ii),Ai=Si(!1),Di=Ii;function Pi(e,t){var n=e.type.contextTypes;if(!n)return Ii;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var i,s={};for(i in n)s[i]=t[i];return r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Ni(e){return null!==(e=e.childContextTypes)&&void 0!==e}function Mi(){Ei(Ai),Ei(Ci)}function Ri(e,t,n){if(Ci.current!==Ii)throw Error(s(168));Ti(Ci,t),Ti(Ai,n)}function ji(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,"function"!==typeof r.getChildContext)return n;for(var i in r=r.getChildContext())if(!(i in t))throw Error(s(108,W(e)||"Unknown",i));return L({},n,r)}function Oi(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Ii,Di=Ci.current,Ti(Ci,e),Ti(Ai,Ai.current),!0}function Li(e,t,n){var r=e.stateNode;if(!r)throw Error(s(169));n?(e=ji(e,t,Di),r.__reactInternalMemoizedMergedChildContext=e,Ei(Ai),Ei(Ci),Ti(Ci,e)):Ei(Ai),Ti(Ai,n)}var Fi=null,Vi=!1,zi=!1;function Ui(e){null===Fi?Fi=[e]:Fi.push(e)}function Bi(){if(!zi&&null!==Fi){zi=!0;var e=0,t=bt;try{var n=Fi;for(bt=1;e<n.length;e++){var r=n[e];do{r=r(!0)}while(null!==r)}Fi=null,Vi=!1}catch(i){throw null!==Fi&&(Fi=Fi.slice(e+1)),Ge(Xe,Bi),i}finally{bt=t,zi=!1}}return null}var Wi=[],qi=0,Hi=null,Ki=0,Gi=[],Qi=0,Yi=null,Zi=1,$i="";function Ji(e,t){Wi[qi++]=Ki,Wi[qi++]=Hi,Hi=e,Ki=t}function Xi(e,t,n){Gi[Qi++]=Zi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Yi=e;var r=Zi;e=$i;var i=32-at(r)-1;r&=~(1<<i),n+=1;var s=32-at(t)+i;if(30<s){var a=i-i%5;s=(r&(1<<a)-1).toString(32),r>>=a,i-=a,Zi=1<<32-at(t)+i|n<<i|r,$i=s+e}else Zi=1<<s|n<<i|r,$i=e}function es(e){null!==e.return&&(Ji(e,1),Xi(e,1,0))}function ts(e){for(;e===Hi;)Hi=Wi[--qi],Wi[qi]=null,Ki=Wi[--qi],Wi[qi]=null;for(;e===Yi;)Yi=Gi[--Qi],Gi[Qi]=null,$i=Gi[--Qi],Gi[Qi]=null,Zi=Gi[--Qi],Gi[Qi]=null}var ns=null,rs=null,is=!1,ss=null;function as(e,t){var n=Pc(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,null===(t=e.deletions)?(e.deletions=[n],e.flags|=16):t.push(n)}function os(e,t){switch(e.tag){case 5:var n=e.type;return null!==(t=1!==t.nodeType||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t)&&(e.stateNode=t,ns=e,rs=ci(t.firstChild),!0);case 6:return null!==(t=""===e.pendingProps||3!==t.nodeType?null:t)&&(e.stateNode=t,ns=e,rs=null,!0);case 13:return null!==(t=8!==t.nodeType?null:t)&&(n=null!==Yi?{id:Zi,overflow:$i}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},(n=Pc(18,null,null,0)).stateNode=t,n.return=e,e.child=n,ns=e,rs=null,!0);default:return!1}}function ls(e){return 0!==(1&e.mode)&&0===(128&e.flags)}function cs(e){if(is){var t=rs;if(t){var n=t;if(!os(e,t)){if(ls(e))throw Error(s(418));t=ci(n.nextSibling);var r=ns;t&&os(e,t)?as(r,n):(e.flags=-4097&e.flags|2,is=!1,ns=e)}}else{if(ls(e))throw Error(s(418));e.flags=-4097&e.flags|2,is=!1,ns=e}}}function us(e){for(e=e.return;null!==e&&5!==e.tag&&3!==e.tag&&13!==e.tag;)e=e.return;ns=e}function hs(e){if(e!==ns)return!1;if(!is)return us(e),is=!0,!1;var t;if((t=3!==e.tag)&&!(t=5!==e.tag)&&(t="head"!==(t=e.type)&&"body"!==t&&!ni(e.type,e.memoizedProps)),t&&(t=rs)){if(ls(e))throw ds(),Error(s(418));for(;t;)as(e,t),t=ci(t.nextSibling)}if(us(e),13===e.tag){if(!(e=null!==(e=e.memoizedState)?e.dehydrated:null))throw Error(s(317));e:{for(e=e.nextSibling,t=0;e;){if(8===e.nodeType){var n=e.data;if("/$"===n){if(0===t){rs=ci(e.nextSibling);break e}t--}else"$"!==n&&"$!"!==n&&"$?"!==n||t++}e=e.nextSibling}rs=null}}else rs=ns?ci(e.stateNode.nextSibling):null;return!0}function ds(){for(var e=rs;e;)e=ci(e.nextSibling)}function fs(){rs=ns=null,is=!1}function ps(e){null===ss?ss=[e]:ss.push(e)}var gs=w.ReactCurrentBatchConfig;function ms(e,t,n){if(null!==(e=n.ref)&&"function"!==typeof e&&"object"!==typeof e){if(n._owner){if(n=n._owner){if(1!==n.tag)throw Error(s(309));var r=n.stateNode}if(!r)throw Error(s(147,e));var i=r,a=""+e;return null!==t&&null!==t.ref&&"function"===typeof t.ref&&t.ref._stringRef===a?t.ref:(t=function(e){var t=i.refs;null===e?delete t[a]:t[a]=e},t._stringRef=a,t)}if("string"!==typeof e)throw Error(s(284));if(!n._owner)throw Error(s(290,e))}return e}function ys(e,t){throw e=Object.prototype.toString.call(t),Error(s(31,"[object Object]"===e?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function vs(e){return(0,e._init)(e._payload)}function bs(e){function t(t,n){if(e){var r=t.deletions;null===r?(t.deletions=[n],t.flags|=16):r.push(n)}}function n(n,r){if(!e)return null;for(;null!==r;)t(n,r),r=r.sibling;return null}function r(e,t){for(e=new Map;null!==t;)null!==t.key?e.set(t.key,t):e.set(t.index,t),t=t.sibling;return e}function i(e,t){return(e=Mc(e,t)).index=0,e.sibling=null,e}function a(t,n,r){return t.index=r,e?null!==(r=t.alternate)?(r=r.index)<n?(t.flags|=2,n):r:(t.flags|=2,n):(t.flags|=1048576,n)}function o(t){return e&&null===t.alternate&&(t.flags|=2),t}function l(e,t,n,r){return null===t||6!==t.tag?((t=Lc(n,e.mode,r)).return=e,t):((t=i(t,n)).return=e,t)}function c(e,t,n,r){var s=n.type;return s===k?h(e,t,n.props.children,r,n.key):null!==t&&(t.elementType===s||"object"===typeof s&&null!==s&&s.$$typeof===N&&vs(s)===t.type)?((r=i(t,n.props)).ref=ms(e,t,n),r.return=e,r):((r=Rc(n.type,n.key,n.props,null,e.mode,r)).ref=ms(e,t,n),r.return=e,r)}function u(e,t,n,r){return null===t||4!==t.tag||t.stateNode.containerInfo!==n.containerInfo||t.stateNode.implementation!==n.implementation?((t=Fc(n,e.mode,r)).return=e,t):((t=i(t,n.children||[])).return=e,t)}function h(e,t,n,r,s){return null===t||7!==t.tag?((t=jc(n,e.mode,r,s)).return=e,t):((t=i(t,n)).return=e,t)}function d(e,t,n){if("string"===typeof t&&""!==t||"number"===typeof t)return(t=Lc(""+t,e.mode,n)).return=e,t;if("object"===typeof t&&null!==t){switch(t.$$typeof){case x:return(n=Rc(t.type,t.key,t.props,null,e.mode,n)).ref=ms(e,null,t),n.return=e,n;case _:return(t=Fc(t,e.mode,n)).return=e,t;case N:return d(e,(0,t._init)(t._payload),n)}if(te(t)||j(t))return(t=jc(t,e.mode,n,null)).return=e,t;ys(e,t)}return null}function f(e,t,n,r){var i=null!==t?t.key:null;if("string"===typeof n&&""!==n||"number"===typeof n)return null!==i?null:l(e,t,""+n,r);if("object"===typeof n&&null!==n){switch(n.$$typeof){case x:return n.key===i?c(e,t,n,r):null;case _:return n.key===i?u(e,t,n,r):null;case N:return f(e,t,(i=n._init)(n._payload),r)}if(te(n)||j(n))return null!==i?null:h(e,t,n,r,null);ys(e,n)}return null}function p(e,t,n,r,i){if("string"===typeof r&&""!==r||"number"===typeof r)return l(t,e=e.get(n)||null,""+r,i);if("object"===typeof r&&null!==r){switch(r.$$typeof){case x:return c(t,e=e.get(null===r.key?n:r.key)||null,r,i);case _:return u(t,e=e.get(null===r.key?n:r.key)||null,r,i);case N:return p(e,t,n,(0,r._init)(r._payload),i)}if(te(r)||j(r))return h(t,e=e.get(n)||null,r,i,null);ys(t,r)}return null}function g(i,s,o,l){for(var c=null,u=null,h=s,g=s=0,m=null;null!==h&&g<o.length;g++){h.index>g?(m=h,h=null):m=h.sibling;var y=f(i,h,o[g],l);if(null===y){null===h&&(h=m);break}e&&h&&null===y.alternate&&t(i,h),s=a(y,s,g),null===u?c=y:u.sibling=y,u=y,h=m}if(g===o.length)return n(i,h),is&&Ji(i,g),c;if(null===h){for(;g<o.length;g++)null!==(h=d(i,o[g],l))&&(s=a(h,s,g),null===u?c=h:u.sibling=h,u=h);return is&&Ji(i,g),c}for(h=r(i,h);g<o.length;g++)null!==(m=p(h,i,g,o[g],l))&&(e&&null!==m.alternate&&h.delete(null===m.key?g:m.key),s=a(m,s,g),null===u?c=m:u.sibling=m,u=m);return e&&h.forEach(function(e){return t(i,e)}),is&&Ji(i,g),c}function m(i,o,l,c){var u=j(l);if("function"!==typeof u)throw Error(s(150));if(null==(l=u.call(l)))throw Error(s(151));for(var h=u=null,g=o,m=o=0,y=null,v=l.next();null!==g&&!v.done;m++,v=l.next()){g.index>m?(y=g,g=null):y=g.sibling;var b=f(i,g,v.value,c);if(null===b){null===g&&(g=y);break}e&&g&&null===b.alternate&&t(i,g),o=a(b,o,m),null===h?u=b:h.sibling=b,h=b,g=y}if(v.done)return n(i,g),is&&Ji(i,m),u;if(null===g){for(;!v.done;m++,v=l.next())null!==(v=d(i,v.value,c))&&(o=a(v,o,m),null===h?u=v:h.sibling=v,h=v);return is&&Ji(i,m),u}for(g=r(i,g);!v.done;m++,v=l.next())null!==(v=p(g,i,m,v.value,c))&&(e&&null!==v.alternate&&g.delete(null===v.key?m:v.key),o=a(v,o,m),null===h?u=v:h.sibling=v,h=v);return e&&g.forEach(function(e){return t(i,e)}),is&&Ji(i,m),u}return function e(r,s,a,l){if("object"===typeof a&&null!==a&&a.type===k&&null===a.key&&(a=a.props.children),"object"===typeof a&&null!==a){switch(a.$$typeof){case x:e:{for(var c=a.key,u=s;null!==u;){if(u.key===c){if((c=a.type)===k){if(7===u.tag){n(r,u.sibling),(s=i(u,a.props.children)).return=r,r=s;break e}}else if(u.elementType===c||"object"===typeof c&&null!==c&&c.$$typeof===N&&vs(c)===u.type){n(r,u.sibling),(s=i(u,a.props)).ref=ms(r,u,a),s.return=r,r=s;break e}n(r,u);break}t(r,u),u=u.sibling}a.type===k?((s=jc(a.props.children,r.mode,l,a.key)).return=r,r=s):((l=Rc(a.type,a.key,a.props,null,r.mode,l)).ref=ms(r,s,a),l.return=r,r=l)}return o(r);case _:e:{for(u=a.key;null!==s;){if(s.key===u){if(4===s.tag&&s.stateNode.containerInfo===a.containerInfo&&s.stateNode.implementation===a.implementation){n(r,s.sibling),(s=i(s,a.children||[])).return=r,r=s;break e}n(r,s);break}t(r,s),s=s.sibling}(s=Fc(a,r.mode,l)).return=r,r=s}return o(r);case N:return e(r,s,(u=a._init)(a._payload),l)}if(te(a))return g(r,s,a,l);if(j(a))return m(r,s,a,l);ys(r,a)}return"string"===typeof a&&""!==a||"number"===typeof a?(a=""+a,null!==s&&6===s.tag?(n(r,s.sibling),(s=i(s,a)).return=r,r=s):(n(r,s),(s=Lc(a,r.mode,l)).return=r,r=s),o(r)):n(r,s)}}var ws=bs(!0),xs=bs(!1),_s=Si(null),ks=null,Ss=null,Es=null;function Ts(){Es=Ss=ks=null}function Is(e){var t=_s.current;Ei(_s),e._currentValue=t}function Cs(e,t,n){for(;null!==e;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,null!==r&&(r.childLanes|=t)):null!==r&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function As(e,t){ks=e,Es=Ss=null,null!==(e=e.dependencies)&&null!==e.firstContext&&(0!==(e.lanes&t)&&(bo=!0),e.firstContext=null)}function Ds(e){var t=e._currentValue;if(Es!==e)if(e={context:e,memoizedValue:t,next:null},null===Ss){if(null===ks)throw Error(s(308));Ss=e,ks.dependencies={lanes:0,firstContext:e}}else Ss=Ss.next=e;return t}var Ps=null;function Ns(e){null===Ps?Ps=[e]:Ps.push(e)}function Ms(e,t,n,r){var i=t.interleaved;return null===i?(n.next=n,Ns(t)):(n.next=i.next,i.next=n),t.interleaved=n,Rs(e,r)}function Rs(e,t){e.lanes|=t;var n=e.alternate;for(null!==n&&(n.lanes|=t),n=e,e=e.return;null!==e;)e.childLanes|=t,null!==(n=e.alternate)&&(n.childLanes|=t),n=e,e=e.return;return 3===n.tag?n.stateNode:null}var js=!1;function Os(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ls(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Fs(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Vs(e,t,n){var r=e.updateQueue;if(null===r)return null;if(r=r.shared,0!==(2&Cl)){var i=r.pending;return null===i?t.next=t:(t.next=i.next,i.next=t),r.pending=t,Rs(e,n)}return null===(i=r.interleaved)?(t.next=t,Ns(r)):(t.next=i.next,i.next=t),r.interleaved=t,Rs(e,n)}function zs(e,t,n){if(null!==(t=t.updateQueue)&&(t=t.shared,0!==(4194240&n))){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}function Us(e,t){var n=e.updateQueue,r=e.alternate;if(null!==r&&n===(r=r.updateQueue)){var i=null,s=null;if(null!==(n=n.firstBaseUpdate)){do{var a={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};null===s?i=s=a:s=s.next=a,n=n.next}while(null!==n);null===s?i=s=t:s=s.next=t}else i=s=t;return n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},void(e.updateQueue=n)}null===(e=n.lastBaseUpdate)?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function Bs(e,t,n,r){var i=e.updateQueue;js=!1;var s=i.firstBaseUpdate,a=i.lastBaseUpdate,o=i.shared.pending;if(null!==o){i.shared.pending=null;var l=o,c=l.next;l.next=null,null===a?s=c:a.next=c,a=l;var u=e.alternate;null!==u&&((o=(u=u.updateQueue).lastBaseUpdate)!==a&&(null===o?u.firstBaseUpdate=c:o.next=c,u.lastBaseUpdate=l))}if(null!==s){var h=i.baseState;for(a=0,u=c=l=null,o=s;;){var d=o.lane,f=o.eventTime;if((r&d)===d){null!==u&&(u=u.next={eventTime:f,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var p=e,g=o;switch(d=t,f=n,g.tag){case 1:if("function"===typeof(p=g.payload)){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=-65537&p.flags|128;case 0:if(null===(d="function"===typeof(p=g.payload)?p.call(f,h,d):p)||void 0===d)break e;h=L({},h,d);break e;case 2:js=!0}}null!==o.callback&&0!==o.lane&&(e.flags|=64,null===(d=i.effects)?i.effects=[o]:d.push(o))}else f={eventTime:f,lane:d,tag:o.tag,payload:o.payload,callback:o.callback,next:null},null===u?(c=u=f,l=h):u=u.next=f,a|=d;if(null===(o=o.next)){if(null===(o=i.shared.pending))break;o=(d=o).next,d.next=null,i.lastBaseUpdate=d,i.shared.pending=null}}if(null===u&&(l=h),i.baseState=l,i.firstBaseUpdate=c,i.lastBaseUpdate=u,null!==(t=i.shared.interleaved)){i=t;do{a|=i.lane,i=i.next}while(i!==t)}else null===s&&(i.shared.lanes=0);Ol|=a,e.lanes=a,e.memoizedState=h}}function Ws(e,t,n){if(e=t.effects,t.effects=null,null!==e)for(t=0;t<e.length;t++){var r=e[t],i=r.callback;if(null!==i){if(r.callback=null,r=n,"function"!==typeof i)throw Error(s(191,i));i.call(r)}}}var qs={},Hs=Si(qs),Ks=Si(qs),Gs=Si(qs);function Qs(e){if(e===qs)throw Error(s(174));return e}function Ys(e,t){switch(Ti(Gs,t),Ti(Ks,e),Ti(Hs,qs),e=t.nodeType){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:le(null,"");break;default:t=le(t=(e=8===e?t.parentNode:t).namespaceURI||null,e=e.tagName)}Ei(Hs),Ti(Hs,t)}function Zs(){Ei(Hs),Ei(Ks),Ei(Gs)}function $s(e){Qs(Gs.current);var t=Qs(Hs.current),n=le(t,e.type);t!==n&&(Ti(Ks,e),Ti(Hs,n))}function Js(e){Ks.current===e&&(Ei(Hs),Ei(Ks))}var Xs=Si(0);function ea(e){for(var t=e;null!==t;){if(13===t.tag){var n=t.memoizedState;if(null!==n&&(null===(n=n.dehydrated)||"$?"===n.data||"$!"===n.data))return t}else if(19===t.tag&&void 0!==t.memoizedProps.revealOrder){if(0!==(128&t.flags))return t}else if(null!==t.child){t.child.return=t,t=t.child;continue}if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var ta=[];function na(){for(var e=0;e<ta.length;e++)ta[e]._workInProgressVersionPrimary=null;ta.length=0}var ra=w.ReactCurrentDispatcher,ia=w.ReactCurrentBatchConfig,sa=0,aa=null,oa=null,la=null,ca=!1,ua=!1,ha=0,da=0;function fa(){throw Error(s(321))}function pa(e,t){if(null===t)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!or(e[n],t[n]))return!1;return!0}function ga(e,t,n,r,i,a){if(sa=a,aa=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,ra.current=null===e||null===e.memoizedState?Ja:Xa,e=n(r,i),ua){a=0;do{if(ua=!1,ha=0,25<=a)throw Error(s(301));a+=1,la=oa=null,t.updateQueue=null,ra.current=eo,e=n(r,i)}while(ua)}if(ra.current=$a,t=null!==oa&&null!==oa.next,sa=0,la=oa=aa=null,ca=!1,t)throw Error(s(300));return e}function ma(){var e=0!==ha;return ha=0,e}function ya(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return null===la?aa.memoizedState=la=e:la=la.next=e,la}function va(){if(null===oa){var e=aa.alternate;e=null!==e?e.memoizedState:null}else e=oa.next;var t=null===la?aa.memoizedState:la.next;if(null!==t)la=t,oa=e;else{if(null===e)throw Error(s(310));e={memoizedState:(oa=e).memoizedState,baseState:oa.baseState,baseQueue:oa.baseQueue,queue:oa.queue,next:null},null===la?aa.memoizedState=la=e:la=la.next=e}return la}function ba(e,t){return"function"===typeof t?t(e):t}function wa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=oa,i=r.baseQueue,a=n.pending;if(null!==a){if(null!==i){var o=i.next;i.next=a.next,a.next=o}r.baseQueue=i=a,n.pending=null}if(null!==i){a=i.next,r=r.baseState;var l=o=null,c=null,u=a;do{var h=u.lane;if((sa&h)===h)null!==c&&(c=c.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:e(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};null===c?(l=c=d,o=r):c=c.next=d,aa.lanes|=h,Ol|=h}u=u.next}while(null!==u&&u!==a);null===c?o=r:c.next=l,or(r,t.memoizedState)||(bo=!0),t.memoizedState=r,t.baseState=o,t.baseQueue=c,n.lastRenderedState=r}if(null!==(e=n.interleaved)){i=e;do{a=i.lane,aa.lanes|=a,Ol|=a,i=i.next}while(i!==e)}else null===i&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function xa(e){var t=va(),n=t.queue;if(null===n)throw Error(s(311));n.lastRenderedReducer=e;var r=n.dispatch,i=n.pending,a=t.memoizedState;if(null!==i){n.pending=null;var o=i=i.next;do{a=e(a,o.action),o=o.next}while(o!==i);or(a,t.memoizedState)||(bo=!0),t.memoizedState=a,null===t.baseQueue&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function _a(){}function ka(e,t){var n=aa,r=va(),i=t(),a=!or(r.memoizedState,i);if(a&&(r.memoizedState=i,bo=!0),r=r.queue,ja(Ta.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||null!==la&&1&la.memoizedState.tag){if(n.flags|=2048,Da(9,Ea.bind(null,n,r,i,t),void 0,null),null===Al)throw Error(s(349));0!==(30&sa)||Sa(n,t,i)}return i}function Sa(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.stores=[e]):null===(n=t.stores)?t.stores=[e]:n.push(e)}function Ea(e,t,n,r){t.value=n,t.getSnapshot=r,Ia(t)&&Ca(e)}function Ta(e,t,n){return n(function(){Ia(t)&&Ca(e)})}function Ia(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!or(e,n)}catch(r){return!0}}function Ca(e){var t=Rs(e,1);null!==t&&nc(t,e,1,-1)}function Aa(e){var t=ya();return"function"===typeof e&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ba,lastRenderedState:e},t.queue=e,e=e.dispatch=Ga.bind(null,aa,e),[t.memoizedState,e]}function Da(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},null===(t=aa.updateQueue)?(t={lastEffect:null,stores:null},aa.updateQueue=t,t.lastEffect=e.next=e):null===(n=t.lastEffect)?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e),e}function Pa(){return va().memoizedState}function Na(e,t,n,r){var i=ya();aa.flags|=e,i.memoizedState=Da(1|t,n,void 0,void 0===r?null:r)}function Ma(e,t,n,r){var i=va();r=void 0===r?null:r;var s=void 0;if(null!==oa){var a=oa.memoizedState;if(s=a.destroy,null!==r&&pa(r,a.deps))return void(i.memoizedState=Da(t,n,s,r))}aa.flags|=e,i.memoizedState=Da(1|t,n,s,r)}function Ra(e,t){return Na(8390656,8,e,t)}function ja(e,t){return Ma(2048,8,e,t)}function Oa(e,t){return Ma(4,2,e,t)}function La(e,t){return Ma(4,4,e,t)}function Fa(e,t){return"function"===typeof t?(e=e(),t(e),function(){t(null)}):null!==t&&void 0!==t?(e=e(),t.current=e,function(){t.current=null}):void 0}function Va(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Ma(4,4,Fa.bind(null,t,e),n)}function za(){}function Ua(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function Ba(e,t){var n=va();t=void 0===t?null:t;var r=n.memoizedState;return null!==r&&null!==t&&pa(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Wa(e,t,n){return 0===(21&sa)?(e.baseState&&(e.baseState=!1,bo=!0),e.memoizedState=n):(or(n,t)||(n=gt(),aa.lanes|=n,Ol|=n,e.baseState=!0),t)}function qa(e,t){var n=bt;bt=0!==n&&4>n?n:4,e(!0);var r=ia.transition;ia.transition={};try{e(!1),t()}finally{bt=n,ia.transition=r}}function Ha(){return va().memoizedState}function Ka(e,t,n){var r=tc(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Qa(e))Ya(t,n);else if(null!==(n=Ms(e,t,n,r))){nc(n,e,r,ec()),Za(n,t,r)}}function Ga(e,t,n){var r=tc(e),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Qa(e))Ya(t,i);else{var s=e.alternate;if(0===e.lanes&&(null===s||0===s.lanes)&&null!==(s=t.lastRenderedReducer))try{var a=t.lastRenderedState,o=s(a,n);if(i.hasEagerState=!0,i.eagerState=o,or(o,a)){var l=t.interleaved;return null===l?(i.next=i,Ns(t)):(i.next=l.next,l.next=i),void(t.interleaved=i)}}catch(c){}null!==(n=Ms(e,t,i,r))&&(nc(n,e,r,i=ec()),Za(n,t,r))}}function Qa(e){var t=e.alternate;return e===aa||null!==t&&t===aa}function Ya(e,t){ua=ca=!0;var n=e.pending;null===n?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function Za(e,t,n){if(0!==(4194240&n)){var r=t.lanes;n|=r&=e.pendingLanes,t.lanes=n,vt(e,n)}}var $a={readContext:Ds,useCallback:fa,useContext:fa,useEffect:fa,useImperativeHandle:fa,useInsertionEffect:fa,useLayoutEffect:fa,useMemo:fa,useReducer:fa,useRef:fa,useState:fa,useDebugValue:fa,useDeferredValue:fa,useTransition:fa,useMutableSource:fa,useSyncExternalStore:fa,useId:fa,unstable_isNewReconciler:!1},Ja={readContext:Ds,useCallback:function(e,t){return ya().memoizedState=[e,void 0===t?null:t],e},useContext:Ds,useEffect:Ra,useImperativeHandle:function(e,t,n){return n=null!==n&&void 0!==n?n.concat([e]):null,Na(4194308,4,Fa.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Na(4194308,4,e,t)},useInsertionEffect:function(e,t){return Na(4,2,e,t)},useMemo:function(e,t){var n=ya();return t=void 0===t?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=ya();return t=void 0!==n?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=Ka.bind(null,aa,e),[r.memoizedState,e]},useRef:function(e){return e={current:e},ya().memoizedState=e},useState:Aa,useDebugValue:za,useDeferredValue:function(e){return ya().memoizedState=e},useTransition:function(){var e=Aa(!1),t=e[0];return e=qa.bind(null,e[1]),ya().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=aa,i=ya();if(is){if(void 0===n)throw Error(s(407));n=n()}else{if(n=t(),null===Al)throw Error(s(349));0!==(30&sa)||Sa(r,t,n)}i.memoizedState=n;var a={value:n,getSnapshot:t};return i.queue=a,Ra(Ta.bind(null,r,a,e),[e]),r.flags|=2048,Da(9,Ea.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=ya(),t=Al.identifierPrefix;if(is){var n=$i;t=":"+t+"R"+(n=(Zi&~(1<<32-at(Zi)-1)).toString(32)+n),0<(n=ha++)&&(t+="H"+n.toString(32)),t+=":"}else t=":"+t+"r"+(n=da++).toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Xa={readContext:Ds,useCallback:Ua,useContext:Ds,useEffect:ja,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:wa,useRef:Pa,useState:function(){return wa(ba)},useDebugValue:za,useDeferredValue:function(e){return Wa(va(),oa.memoizedState,e)},useTransition:function(){return[wa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1},eo={readContext:Ds,useCallback:Ua,useContext:Ds,useEffect:ja,useImperativeHandle:Va,useInsertionEffect:Oa,useLayoutEffect:La,useMemo:Ba,useReducer:xa,useRef:Pa,useState:function(){return xa(ba)},useDebugValue:za,useDeferredValue:function(e){var t=va();return null===oa?t.memoizedState=e:Wa(t,oa.memoizedState,e)},useTransition:function(){return[xa(ba)[0],va().memoizedState]},useMutableSource:_a,useSyncExternalStore:ka,useId:Ha,unstable_isNewReconciler:!1};function to(e,t){if(e&&e.defaultProps){for(var n in t=L({},t),e=e.defaultProps)void 0===t[n]&&(t[n]=e[n]);return t}return t}function no(e,t,n,r){n=null===(n=n(r,t=e.memoizedState))||void 0===n?t:L({},t,n),e.memoizedState=n,0===e.lanes&&(e.updateQueue.baseState=n)}var ro={isMounted:function(e){return!!(e=e._reactInternals)&&Be(e)===e},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=ec(),i=tc(e),s=Fs(r,i);s.tag=1,s.payload=t,void 0!==n&&null!==n&&(s.callback=n),null!==(t=Vs(e,s,i))&&(nc(t,e,i,r),zs(t,e,i))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=ec(),r=tc(e),i=Fs(n,r);i.tag=2,void 0!==t&&null!==t&&(i.callback=t),null!==(t=Vs(e,i,r))&&(nc(t,e,r,n),zs(t,e,r))}};function io(e,t,n,r,i,s,a){return"function"===typeof(e=e.stateNode).shouldComponentUpdate?e.shouldComponentUpdate(r,s,a):!t.prototype||!t.prototype.isPureReactComponent||(!lr(n,r)||!lr(i,s))}function so(e,t,n){var r=!1,i=Ii,s=t.contextType;return"object"===typeof s&&null!==s?s=Ds(s):(i=Ni(t)?Di:Ci.current,s=(r=null!==(r=t.contextTypes)&&void 0!==r)?Pi(e,i):Ii),t=new t(n,s),e.memoizedState=null!==t.state&&void 0!==t.state?t.state:null,t.updater=ro,e.stateNode=t,t._reactInternals=e,r&&((e=e.stateNode).__reactInternalMemoizedUnmaskedChildContext=i,e.__reactInternalMemoizedMaskedChildContext=s),t}function ao(e,t,n,r){e=t.state,"function"===typeof t.componentWillReceiveProps&&t.componentWillReceiveProps(n,r),"function"===typeof t.UNSAFE_componentWillReceiveProps&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&ro.enqueueReplaceState(t,t.state,null)}function oo(e,t,n,r){var i=e.stateNode;i.props=n,i.state=e.memoizedState,i.refs={},Os(e);var s=t.contextType;"object"===typeof s&&null!==s?i.context=Ds(s):(s=Ni(t)?Di:Ci.current,i.context=Pi(e,s)),i.state=e.memoizedState,"function"===typeof(s=t.getDerivedStateFromProps)&&(no(e,t,s,n),i.state=e.memoizedState),"function"===typeof t.getDerivedStateFromProps||"function"===typeof i.getSnapshotBeforeUpdate||"function"!==typeof i.UNSAFE_componentWillMount&&"function"!==typeof i.componentWillMount||(t=i.state,"function"===typeof i.componentWillMount&&i.componentWillMount(),"function"===typeof i.UNSAFE_componentWillMount&&i.UNSAFE_componentWillMount(),t!==i.state&&ro.enqueueReplaceState(i,i.state,null),Bs(e,n,i,r),i.state=e.memoizedState),"function"===typeof i.componentDidMount&&(e.flags|=4194308)}function lo(e,t){try{var n="",r=t;do{n+=U(r),r=r.return}while(r);var i=n}catch(s){i="\nError generating stack: "+s.message+"\n"+s.stack}return{value:e,source:t,stack:i,digest:null}}function co(e,t,n){return{value:e,source:null,stack:null!=n?n:null,digest:null!=t?t:null}}function uo(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var ho="function"===typeof WeakMap?WeakMap:Map;function fo(e,t,n){(n=Fs(-1,n)).tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){ql||(ql=!0,Hl=r),uo(0,t)},n}function po(e,t,n){(n=Fs(-1,n)).tag=3;var r=e.type.getDerivedStateFromError;if("function"===typeof r){var i=t.value;n.payload=function(){return r(i)},n.callback=function(){uo(0,t)}}var s=e.stateNode;return null!==s&&"function"===typeof s.componentDidCatch&&(n.callback=function(){uo(0,t),"function"!==typeof r&&(null===Kl?Kl=new Set([this]):Kl.add(this));var e=t.stack;this.componentDidCatch(t.value,{componentStack:null!==e?e:""})}),n}function go(e,t,n){var r=e.pingCache;if(null===r){r=e.pingCache=new ho;var i=new Set;r.set(t,i)}else void 0===(i=r.get(t))&&(i=new Set,r.set(t,i));i.has(n)||(i.add(n),e=Ec.bind(null,e,t,n),t.then(e,e))}function mo(e){do{var t;if((t=13===e.tag)&&(t=null===(t=e.memoizedState)||null!==t.dehydrated),t)return e;e=e.return}while(null!==e);return null}function yo(e,t,n,r,i){return 0===(1&e.mode)?(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,1===n.tag&&(null===n.alternate?n.tag=17:((t=Fs(-1,1)).tag=2,Vs(n,t,1))),n.lanes|=1),e):(e.flags|=65536,e.lanes=i,e)}var vo=w.ReactCurrentOwner,bo=!1;function wo(e,t,n,r){t.child=null===e?xs(t,null,n,r):ws(t,e.child,n,r)}function xo(e,t,n,r,i){n=n.render;var s=t.ref;return As(t,i),r=ga(e,t,n,r,s,i),n=ma(),null===e||bo?(is&&n&&es(t),t.flags|=1,wo(e,t,r,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function _o(e,t,n,r,i){if(null===e){var s=n.type;return"function"!==typeof s||Nc(s)||void 0!==s.defaultProps||null!==n.compare||void 0!==n.defaultProps?((e=Rc(n.type,null,r,t,t.mode,i)).ref=t.ref,e.return=t,t.child=e):(t.tag=15,t.type=s,ko(e,t,s,r,i))}if(s=e.child,0===(e.lanes&i)){var a=s.memoizedProps;if((n=null!==(n=n.compare)?n:lr)(a,r)&&e.ref===t.ref)return qo(e,t,i)}return t.flags|=1,(e=Mc(s,r)).ref=t.ref,e.return=t,t.child=e}function ko(e,t,n,r,i){if(null!==e){var s=e.memoizedProps;if(lr(s,r)&&e.ref===t.ref){if(bo=!1,t.pendingProps=r=s,0===(e.lanes&i))return t.lanes=e.lanes,qo(e,t,i);0!==(131072&e.flags)&&(bo=!0)}}return To(e,t,n,r,i)}function So(e,t,n){var r=t.pendingProps,i=r.children,s=null!==e?e.memoizedState:null;if("hidden"===r.mode)if(0===(1&t.mode))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ti(Ml,Nl),Nl|=n;else{if(0===(1073741824&n))return e=null!==s?s.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Ti(Ml,Nl),Nl|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=null!==s?s.baseLanes:n,Ti(Ml,Nl),Nl|=r}else null!==s?(r=s.baseLanes|n,t.memoizedState=null):r=n,Ti(Ml,Nl),Nl|=r;return wo(e,t,i,n),t.child}function Eo(e,t){var n=t.ref;(null===e&&null!==n||null!==e&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function To(e,t,n,r,i){var s=Ni(n)?Di:Ci.current;return s=Pi(t,s),As(t,i),n=ga(e,t,n,r,s,i),r=ma(),null===e||bo?(is&&r&&es(t),t.flags|=1,wo(e,t,n,i),t.child):(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~i,qo(e,t,i))}function Io(e,t,n,r,i){if(Ni(n)){var s=!0;Oi(t)}else s=!1;if(As(t,i),null===t.stateNode)Wo(e,t),so(t,n,r),oo(t,n,r,i),r=!0;else if(null===e){var a=t.stateNode,o=t.memoizedProps;a.props=o;var l=a.context,c=n.contextType;"object"===typeof c&&null!==c?c=Ds(c):c=Pi(t,c=Ni(n)?Di:Ci.current);var u=n.getDerivedStateFromProps,h="function"===typeof u||"function"===typeof a.getSnapshotBeforeUpdate;h||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==r||l!==c)&&ao(t,a,r,c),js=!1;var d=t.memoizedState;a.state=d,Bs(t,r,a,i),l=t.memoizedState,o!==r||d!==l||Ai.current||js?("function"===typeof u&&(no(t,n,u,r),l=t.memoizedState),(o=js||io(t,n,o,r,d,l,c))?(h||"function"!==typeof a.UNSAFE_componentWillMount&&"function"!==typeof a.componentWillMount||("function"===typeof a.componentWillMount&&a.componentWillMount(),"function"===typeof a.UNSAFE_componentWillMount&&a.UNSAFE_componentWillMount()),"function"===typeof a.componentDidMount&&(t.flags|=4194308)):("function"===typeof a.componentDidMount&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=l),a.props=r,a.state=l,a.context=c,r=o):("function"===typeof a.componentDidMount&&(t.flags|=4194308),r=!1)}else{a=t.stateNode,Ls(e,t),o=t.memoizedProps,c=t.type===t.elementType?o:to(t.type,o),a.props=c,h=t.pendingProps,d=a.context,"object"===typeof(l=n.contextType)&&null!==l?l=Ds(l):l=Pi(t,l=Ni(n)?Di:Ci.current);var f=n.getDerivedStateFromProps;(u="function"===typeof f||"function"===typeof a.getSnapshotBeforeUpdate)||"function"!==typeof a.UNSAFE_componentWillReceiveProps&&"function"!==typeof a.componentWillReceiveProps||(o!==h||d!==l)&&ao(t,a,r,l),js=!1,d=t.memoizedState,a.state=d,Bs(t,r,a,i);var p=t.memoizedState;o!==h||d!==p||Ai.current||js?("function"===typeof f&&(no(t,n,f,r),p=t.memoizedState),(c=js||io(t,n,c,r,d,p,l)||!1)?(u||"function"!==typeof a.UNSAFE_componentWillUpdate&&"function"!==typeof a.componentWillUpdate||("function"===typeof a.componentWillUpdate&&a.componentWillUpdate(r,p,l),"function"===typeof a.UNSAFE_componentWillUpdate&&a.UNSAFE_componentWillUpdate(r,p,l)),"function"===typeof a.componentDidUpdate&&(t.flags|=4),"function"===typeof a.getSnapshotBeforeUpdate&&(t.flags|=1024)):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=p),a.props=r,a.state=p,a.context=l,r=c):("function"!==typeof a.componentDidUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),"function"!==typeof a.getSnapshotBeforeUpdate||o===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),r=!1)}return Co(e,t,n,r,s,i)}function Co(e,t,n,r,i,s){Eo(e,t);var a=0!==(128&t.flags);if(!r&&!a)return i&&Li(t,n,!1),qo(e,t,s);r=t.stateNode,vo.current=t;var o=a&&"function"!==typeof n.getDerivedStateFromError?null:r.render();return t.flags|=1,null!==e&&a?(t.child=ws(t,e.child,null,s),t.child=ws(t,null,o,s)):wo(e,t,o,s),t.memoizedState=r.state,i&&Li(t,n,!0),t.child}function Ao(e){var t=e.stateNode;t.pendingContext?Ri(0,t.pendingContext,t.pendingContext!==t.context):t.context&&Ri(0,t.context,!1),Ys(e,t.containerInfo)}function Do(e,t,n,r,i){return fs(),ps(i),t.flags|=256,wo(e,t,n,r),t.child}var Po,No,Mo,Ro,jo={dehydrated:null,treeContext:null,retryLane:0};function Oo(e){return{baseLanes:e,cachePool:null,transitions:null}}function Lo(e,t,n){var r,i=t.pendingProps,a=Xs.current,o=!1,l=0!==(128&t.flags);if((r=l)||(r=(null===e||null!==e.memoizedState)&&0!==(2&a)),r?(o=!0,t.flags&=-129):null!==e&&null===e.memoizedState||(a|=1),Ti(Xs,1&a),null===e)return cs(t),null!==(e=t.memoizedState)&&null!==(e=e.dehydrated)?(0===(1&t.mode)?t.lanes=1:"$!"===e.data?t.lanes=8:t.lanes=1073741824,null):(l=i.children,e=i.fallback,o?(i=t.mode,o=t.child,l={mode:"hidden",children:l},0===(1&i)&&null!==o?(o.childLanes=0,o.pendingProps=l):o=Oc(l,i,0,null),e=jc(e,i,n,null),o.return=t,e.return=t,o.sibling=e,t.child=o,t.child.memoizedState=Oo(n),t.memoizedState=jo,e):Fo(t,l));if(null!==(a=e.memoizedState)&&null!==(r=a.dehydrated))return function(e,t,n,r,i,a,o){if(n)return 256&t.flags?(t.flags&=-257,Vo(e,t,o,r=co(Error(s(422))))):null!==t.memoizedState?(t.child=e.child,t.flags|=128,null):(a=r.fallback,i=t.mode,r=Oc({mode:"visible",children:r.children},i,0,null),(a=jc(a,i,o,null)).flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,0!==(1&t.mode)&&ws(t,e.child,null,o),t.child.memoizedState=Oo(o),t.memoizedState=jo,a);if(0===(1&t.mode))return Vo(e,t,o,null);if("$!"===i.data){if(r=i.nextSibling&&i.nextSibling.dataset)var l=r.dgst;return r=l,Vo(e,t,o,r=co(a=Error(s(419)),r,void 0))}if(l=0!==(o&e.childLanes),bo||l){if(null!==(r=Al)){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}0!==(i=0!==(i&(r.suspendedLanes|o))?0:i)&&i!==a.retryLane&&(a.retryLane=i,Rs(e,i),nc(r,e,i,-1))}return gc(),Vo(e,t,o,r=co(Error(s(421))))}return"$?"===i.data?(t.flags|=128,t.child=e.child,t=Ic.bind(null,e),i._reactRetry=t,null):(e=a.treeContext,rs=ci(i.nextSibling),ns=t,is=!0,ss=null,null!==e&&(Gi[Qi++]=Zi,Gi[Qi++]=$i,Gi[Qi++]=Yi,Zi=e.id,$i=e.overflow,Yi=t),t=Fo(t,r.children),t.flags|=4096,t)}(e,t,l,i,r,a,n);if(o){o=i.fallback,l=t.mode,r=(a=e.child).sibling;var c={mode:"hidden",children:i.children};return 0===(1&l)&&t.child!==a?((i=t.child).childLanes=0,i.pendingProps=c,t.deletions=null):(i=Mc(a,c)).subtreeFlags=14680064&a.subtreeFlags,null!==r?o=Mc(r,o):(o=jc(o,l,n,null)).flags|=2,o.return=t,i.return=t,i.sibling=o,t.child=i,i=o,o=t.child,l=null===(l=e.child.memoizedState)?Oo(n):{baseLanes:l.baseLanes|n,cachePool:null,transitions:l.transitions},o.memoizedState=l,o.childLanes=e.childLanes&~n,t.memoizedState=jo,i}return e=(o=e.child).sibling,i=Mc(o,{mode:"visible",children:i.children}),0===(1&t.mode)&&(i.lanes=n),i.return=t,i.sibling=null,null!==e&&(null===(n=t.deletions)?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=i,t.memoizedState=null,i}function Fo(e,t){return(t=Oc({mode:"visible",children:t},e.mode,0,null)).return=e,e.child=t}function Vo(e,t,n,r){return null!==r&&ps(r),ws(t,e.child,null,n),(e=Fo(t,t.pendingProps.children)).flags|=2,t.memoizedState=null,e}function zo(e,t,n){e.lanes|=t;var r=e.alternate;null!==r&&(r.lanes|=t),Cs(e.return,t,n)}function Uo(e,t,n,r,i){var s=e.memoizedState;null===s?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function Bo(e,t,n){var r=t.pendingProps,i=r.revealOrder,s=r.tail;if(wo(e,t,r.children,n),0!==(2&(r=Xs.current)))r=1&r|2,t.flags|=128;else{if(null!==e&&0!==(128&e.flags))e:for(e=t.child;null!==e;){if(13===e.tag)null!==e.memoizedState&&zo(e,n,t);else if(19===e.tag)zo(e,n,t);else if(null!==e.child){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;null===e.sibling;){if(null===e.return||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Ti(Xs,r),0===(1&t.mode))t.memoizedState=null;else switch(i){case"forwards":for(n=t.child,i=null;null!==n;)null!==(e=n.alternate)&&null===ea(e)&&(i=n),n=n.sibling;null===(n=i)?(i=t.child,t.child=null):(i=n.sibling,n.sibling=null),Uo(t,!1,i,n,s);break;case"backwards":for(n=null,i=t.child,t.child=null;null!==i;){if(null!==(e=i.alternate)&&null===ea(e)){t.child=i;break}e=i.sibling,i.sibling=n,n=i,i=e}Uo(t,!0,n,null,s);break;case"together":Uo(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Wo(e,t){0===(1&t.mode)&&null!==e&&(e.alternate=null,t.alternate=null,t.flags|=2)}function qo(e,t,n){if(null!==e&&(t.dependencies=e.dependencies),Ol|=t.lanes,0===(n&t.childLanes))return null;if(null!==e&&t.child!==e.child)throw Error(s(153));if(null!==t.child){for(n=Mc(e=t.child,e.pendingProps),t.child=n,n.return=t;null!==e.sibling;)e=e.sibling,(n=n.sibling=Mc(e,e.pendingProps)).return=t;n.sibling=null}return t.child}function Ho(e,t){if(!is)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;null!==t;)null!==t.alternate&&(n=t),t=t.sibling;null===n?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;null!==n;)null!==n.alternate&&(r=n),n=n.sibling;null===r?t||null===e.tail?e.tail=null:e.tail.sibling=null:r.sibling=null}}function Ko(e){var t=null!==e.alternate&&e.alternate.child===e.child,n=0,r=0;if(t)for(var i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=14680064&i.subtreeFlags,r|=14680064&i.flags,i.return=e,i=i.sibling;else for(i=e.child;null!==i;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=e,i=i.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Go(e,t,n){var r=t.pendingProps;switch(ts(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ko(t),null;case 1:case 17:return Ni(t.type)&&Mi(),Ko(t),null;case 3:return r=t.stateNode,Zs(),Ei(Ai),Ei(Ci),na(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),null!==e&&null!==e.child||(hs(t)?t.flags|=4:null===e||e.memoizedState.isDehydrated&&0===(256&t.flags)||(t.flags|=1024,null!==ss&&(ac(ss),ss=null))),No(e,t),Ko(t),null;case 5:Js(t);var i=Qs(Gs.current);if(n=t.type,null!==e&&null!=t.stateNode)Mo(e,t,n,r,i),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(null===t.stateNode)throw Error(s(166));return Ko(t),null}if(e=Qs(Hs.current),hs(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[di]=t,r[fi]=a,e=0!==(1&t.mode),n){case"dialog":Vr("cancel",r),Vr("close",r);break;case"iframe":case"object":case"embed":Vr("load",r);break;case"video":case"audio":for(i=0;i<jr.length;i++)Vr(jr[i],r);break;case"source":Vr("error",r);break;case"img":case"image":case"link":Vr("error",r),Vr("load",r);break;case"details":Vr("toggle",r);break;case"input":Z(r,a),Vr("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},Vr("invalid",r);break;case"textarea":ie(r,a),Vr("invalid",r)}for(var l in ve(n,a),i=null,a)if(a.hasOwnProperty(l)){var c=a[l];"children"===l?"string"===typeof c?r.textContent!==c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",c]):"number"===typeof c&&r.textContent!==""+c&&(!0!==a.suppressHydrationWarning&&Jr(r.textContent,c,e),i=["children",""+c]):o.hasOwnProperty(l)&&null!=c&&"onScroll"===l&&Vr("scroll",r)}switch(n){case"input":K(r),X(r,a,!0);break;case"textarea":K(r),ae(r);break;case"select":case"option":break;default:"function"===typeof a.onClick&&(r.onclick=Xr)}r=i,t.updateQueue=r,null!==r&&(t.flags|=4)}else{l=9===i.nodeType?i:i.ownerDocument,"http://www.w3.org/1999/xhtml"===e&&(e=oe(n)),"http://www.w3.org/1999/xhtml"===e?"script"===n?((e=l.createElement("div")).innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):"string"===typeof r.is?e=l.createElement(n,{is:r.is}):(e=l.createElement(n),"select"===n&&(l=e,r.multiple?l.multiple=!0:r.size&&(l.size=r.size))):e=l.createElementNS(e,n),e[di]=t,e[fi]=r,Po(e,t,!1,!1),t.stateNode=e;e:{switch(l=be(n,r),n){case"dialog":Vr("cancel",e),Vr("close",e),i=r;break;case"iframe":case"object":case"embed":Vr("load",e),i=r;break;case"video":case"audio":for(i=0;i<jr.length;i++)Vr(jr[i],e);i=r;break;case"source":Vr("error",e),i=r;break;case"img":case"image":case"link":Vr("error",e),Vr("load",e),i=r;break;case"details":Vr("toggle",e),i=r;break;case"input":Z(e,r),i=Y(e,r),Vr("invalid",e);break;case"option":default:i=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},i=L({},r,{value:void 0}),Vr("invalid",e);break;case"textarea":ie(e,r),i=re(e,r),Vr("invalid",e)}for(a in ve(n,i),c=i)if(c.hasOwnProperty(a)){var u=c[a];"style"===a?me(e,u):"dangerouslySetInnerHTML"===a?null!=(u=u?u.__html:void 0)&&he(e,u):"children"===a?"string"===typeof u?("textarea"!==n||""!==u)&&de(e,u):"number"===typeof u&&de(e,""+u):"suppressContentEditableWarning"!==a&&"suppressHydrationWarning"!==a&&"autoFocus"!==a&&(o.hasOwnProperty(a)?null!=u&&"onScroll"===a&&Vr("scroll",e):null!=u&&b(e,a,u,l))}switch(n){case"input":K(e),X(e,r,!1);break;case"textarea":K(e),ae(e);break;case"option":null!=r.value&&e.setAttribute("value",""+q(r.value));break;case"select":e.multiple=!!r.multiple,null!=(a=r.value)?ne(e,!!r.multiple,a,!1):null!=r.defaultValue&&ne(e,!!r.multiple,r.defaultValue,!0);break;default:"function"===typeof i.onClick&&(e.onclick=Xr)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}null!==t.ref&&(t.flags|=512,t.flags|=2097152)}return Ko(t),null;case 6:if(e&&null!=t.stateNode)Ro(e,t,e.memoizedProps,r);else{if("string"!==typeof r&&null===t.stateNode)throw Error(s(166));if(n=Qs(Gs.current),Qs(Hs.current),hs(t)){if(r=t.stateNode,n=t.memoizedProps,r[di]=t,(a=r.nodeValue!==n)&&null!==(e=ns))switch(e.tag){case 3:Jr(r.nodeValue,n,0!==(1&e.mode));break;case 5:!0!==e.memoizedProps.suppressHydrationWarning&&Jr(r.nodeValue,n,0!==(1&e.mode))}a&&(t.flags|=4)}else(r=(9===n.nodeType?n:n.ownerDocument).createTextNode(r))[di]=t,t.stateNode=r}return Ko(t),null;case 13:if(Ei(Xs),r=t.memoizedState,null===e||null!==e.memoizedState&&null!==e.memoizedState.dehydrated){if(is&&null!==rs&&0!==(1&t.mode)&&0===(128&t.flags))ds(),fs(),t.flags|=98560,a=!1;else if(a=hs(t),null!==r&&null!==r.dehydrated){if(null===e){if(!a)throw Error(s(318));if(!(a=null!==(a=t.memoizedState)?a.dehydrated:null))throw Error(s(317));a[di]=t}else fs(),0===(128&t.flags)&&(t.memoizedState=null),t.flags|=4;Ko(t),a=!1}else null!==ss&&(ac(ss),ss=null),a=!0;if(!a)return 65536&t.flags?t:null}return 0!==(128&t.flags)?(t.lanes=n,t):((r=null!==r)!==(null!==e&&null!==e.memoizedState)&&r&&(t.child.flags|=8192,0!==(1&t.mode)&&(null===e||0!==(1&Xs.current)?0===Rl&&(Rl=3):gc())),null!==t.updateQueue&&(t.flags|=4),Ko(t),null);case 4:return Zs(),No(e,t),null===e&&Br(t.stateNode.containerInfo),Ko(t),null;case 10:return Is(t.type._context),Ko(t),null;case 19:if(Ei(Xs),null===(a=t.memoizedState))return Ko(t),null;if(r=0!==(128&t.flags),null===(l=a.rendering))if(r)Ho(a,!1);else{if(0!==Rl||null!==e&&0!==(128&e.flags))for(e=t.child;null!==e;){if(null!==(l=ea(e))){for(t.flags|=128,Ho(a,!1),null!==(r=l.updateQueue)&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;null!==n;)e=r,(a=n).flags&=14680066,null===(l=a.alternate)?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=l.childLanes,a.lanes=l.lanes,a.child=l.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=l.memoizedProps,a.memoizedState=l.memoizedState,a.updateQueue=l.updateQueue,a.type=l.type,e=l.dependencies,a.dependencies=null===e?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Ti(Xs,1&Xs.current|2),t.child}e=e.sibling}null!==a.tail&&$e()>Bl&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304)}else{if(!r)if(null!==(e=ea(l))){if(t.flags|=128,r=!0,null!==(n=e.updateQueue)&&(t.updateQueue=n,t.flags|=4),Ho(a,!0),null===a.tail&&"hidden"===a.tailMode&&!l.alternate&&!is)return Ko(t),null}else 2*$e()-a.renderingStartTime>Bl&&1073741824!==n&&(t.flags|=128,r=!0,Ho(a,!1),t.lanes=4194304);a.isBackwards?(l.sibling=t.child,t.child=l):(null!==(n=a.last)?n.sibling=l:t.child=l,a.last=l)}return null!==a.tail?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=$e(),t.sibling=null,n=Xs.current,Ti(Xs,r?1&n|2:1&n),t):(Ko(t),null);case 22:case 23:return hc(),r=null!==t.memoizedState,null!==e&&null!==e.memoizedState!==r&&(t.flags|=8192),r&&0!==(1&t.mode)?0!==(1073741824&Nl)&&(Ko(t),6&t.subtreeFlags&&(t.flags|=8192)):Ko(t),null;case 24:case 25:return null}throw Error(s(156,t.tag))}function Qo(e,t){switch(ts(t),t.tag){case 1:return Ni(t.type)&&Mi(),65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 3:return Zs(),Ei(Ai),Ei(Ci),na(),0!==(65536&(e=t.flags))&&0===(128&e)?(t.flags=-65537&e|128,t):null;case 5:return Js(t),null;case 13:if(Ei(Xs),null!==(e=t.memoizedState)&&null!==e.dehydrated){if(null===t.alternate)throw Error(s(340));fs()}return 65536&(e=t.flags)?(t.flags=-65537&e|128,t):null;case 19:return Ei(Xs),null;case 4:return Zs(),null;case 10:return Is(t.type._context),null;case 22:case 23:return hc(),null;default:return null}}Po=function(e,t){for(var n=t.child;null!==n;){if(5===n.tag||6===n.tag)e.appendChild(n.stateNode);else if(4!==n.tag&&null!==n.child){n.child.return=n,n=n.child;continue}if(n===t)break;for(;null===n.sibling;){if(null===n.return||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}},No=function(){},Mo=function(e,t,n,r){var i=e.memoizedProps;if(i!==r){e=t.stateNode,Qs(Hs.current);var s,a=null;switch(n){case"input":i=Y(e,i),r=Y(e,r),a=[];break;case"select":i=L({},i,{value:void 0}),r=L({},r,{value:void 0}),a=[];break;case"textarea":i=re(e,i),r=re(e,r),a=[];break;default:"function"!==typeof i.onClick&&"function"===typeof r.onClick&&(e.onclick=Xr)}for(u in ve(n,r),n=null,i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&null!=i[u])if("style"===u){var l=i[u];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else"dangerouslySetInnerHTML"!==u&&"children"!==u&&"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&"autoFocus"!==u&&(o.hasOwnProperty(u)?a||(a=[]):(a=a||[]).push(u,null));for(u in r){var c=r[u];if(l=null!=i?i[u]:void 0,r.hasOwnProperty(u)&&c!==l&&(null!=c||null!=l))if("style"===u)if(l){for(s in l)!l.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&l[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(a||(a=[]),a.push(u,n)),n=c;else"dangerouslySetInnerHTML"===u?(c=c?c.__html:void 0,l=l?l.__html:void 0,null!=c&&l!==c&&(a=a||[]).push(u,c)):"children"===u?"string"!==typeof c&&"number"!==typeof c||(a=a||[]).push(u,""+c):"suppressContentEditableWarning"!==u&&"suppressHydrationWarning"!==u&&(o.hasOwnProperty(u)?(null!=c&&"onScroll"===u&&Vr("scroll",e),a||l===c||(a=[])):(a=a||[]).push(u,c))}n&&(a=a||[]).push("style",n);var u=a;(t.updateQueue=u)&&(t.flags|=4)}},Ro=function(e,t,n,r){n!==r&&(t.flags|=4)};var Yo=!1,Zo=!1,$o="function"===typeof WeakSet?WeakSet:Set,Jo=null;function Xo(e,t){var n=e.ref;if(null!==n)if("function"===typeof n)try{n(null)}catch(r){Sc(e,t,r)}else n.current=null}function el(e,t,n){try{n()}catch(r){Sc(e,t,r)}}var tl=!1;function nl(e,t,n){var r=t.updateQueue;if(null!==(r=null!==r?r.lastEffect:null)){var i=r=r.next;do{if((i.tag&e)===e){var s=i.destroy;i.destroy=void 0,void 0!==s&&el(t,n,s)}i=i.next}while(i!==r)}}function rl(e,t){if(null!==(t=null!==(t=t.updateQueue)?t.lastEffect:null)){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function il(e){var t=e.ref;if(null!==t){var n=e.stateNode;e.tag,e=n,"function"===typeof t?t(e):t.current=e}}function sl(e){var t=e.alternate;null!==t&&(e.alternate=null,sl(t)),e.child=null,e.deletions=null,e.sibling=null,5===e.tag&&(null!==(t=e.stateNode)&&(delete t[di],delete t[fi],delete t[gi],delete t[mi],delete t[yi])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function al(e){return 5===e.tag||3===e.tag||4===e.tag}function ol(e){e:for(;;){for(;null===e.sibling;){if(null===e.return||al(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;5!==e.tag&&6!==e.tag&&18!==e.tag;){if(2&e.flags)continue e;if(null===e.child||4===e.tag)continue e;e.child.return=e,e=e.child}if(!(2&e.flags))return e.stateNode}}function ll(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?8===n.nodeType?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(8===n.nodeType?(t=n.parentNode).insertBefore(e,n):(t=n).appendChild(e),null!==(n=n._reactRootContainer)&&void 0!==n||null!==t.onclick||(t.onclick=Xr));else if(4!==r&&null!==(e=e.child))for(ll(e,t,n),e=e.sibling;null!==e;)ll(e,t,n),e=e.sibling}function cl(e,t,n){var r=e.tag;if(5===r||6===r)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(4!==r&&null!==(e=e.child))for(cl(e,t,n),e=e.sibling;null!==e;)cl(e,t,n),e=e.sibling}var ul=null,hl=!1;function dl(e,t,n){for(n=n.child;null!==n;)fl(e,t,n),n=n.sibling}function fl(e,t,n){if(st&&"function"===typeof st.onCommitFiberUnmount)try{st.onCommitFiberUnmount(it,n)}catch(o){}switch(n.tag){case 5:Zo||Xo(n,t);case 6:var r=ul,i=hl;ul=null,dl(e,t,n),hl=i,null!==(ul=r)&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?e.parentNode.removeChild(n):e.removeChild(n)):ul.removeChild(n.stateNode));break;case 18:null!==ul&&(hl?(e=ul,n=n.stateNode,8===e.nodeType?li(e.parentNode,n):1===e.nodeType&&li(e,n),Bt(e)):li(ul,n.stateNode));break;case 4:r=ul,i=hl,ul=n.stateNode.containerInfo,hl=!0,dl(e,t,n),ul=r,hl=i;break;case 0:case 11:case 14:case 15:if(!Zo&&(null!==(r=n.updateQueue)&&null!==(r=r.lastEffect))){i=r=r.next;do{var s=i,a=s.destroy;s=s.tag,void 0!==a&&(0!==(2&s)||0!==(4&s))&&el(n,t,a),i=i.next}while(i!==r)}dl(e,t,n);break;case 1:if(!Zo&&(Xo(n,t),"function"===typeof(r=n.stateNode).componentWillUnmount))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(o){Sc(n,t,o)}dl(e,t,n);break;case 21:dl(e,t,n);break;case 22:1&n.mode?(Zo=(r=Zo)||null!==n.memoizedState,dl(e,t,n),Zo=r):dl(e,t,n);break;default:dl(e,t,n)}}function pl(e){var t=e.updateQueue;if(null!==t){e.updateQueue=null;var n=e.stateNode;null===n&&(n=e.stateNode=new $o),t.forEach(function(t){var r=Cc.bind(null,e,t);n.has(t)||(n.add(t),t.then(r,r))})}}function gl(e,t){var n=t.deletions;if(null!==n)for(var r=0;r<n.length;r++){var i=n[r];try{var a=e,o=t,l=o;e:for(;null!==l;){switch(l.tag){case 5:ul=l.stateNode,hl=!1;break e;case 3:case 4:ul=l.stateNode.containerInfo,hl=!0;break e}l=l.return}if(null===ul)throw Error(s(160));fl(a,o,i),ul=null,hl=!1;var c=i.alternate;null!==c&&(c.return=null),i.return=null}catch(u){Sc(i,t,u)}}if(12854&t.subtreeFlags)for(t=t.child;null!==t;)ml(t,e),t=t.sibling}function ml(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(gl(t,e),yl(e),4&r){try{nl(3,e,e.return),rl(3,e)}catch(m){Sc(e,e.return,m)}try{nl(5,e,e.return)}catch(m){Sc(e,e.return,m)}}break;case 1:gl(t,e),yl(e),512&r&&null!==n&&Xo(n,n.return);break;case 5:if(gl(t,e),yl(e),512&r&&null!==n&&Xo(n,n.return),32&e.flags){var i=e.stateNode;try{de(i,"")}catch(m){Sc(e,e.return,m)}}if(4&r&&null!=(i=e.stateNode)){var a=e.memoizedProps,o=null!==n?n.memoizedProps:a,l=e.type,c=e.updateQueue;if(e.updateQueue=null,null!==c)try{"input"===l&&"radio"===a.type&&null!=a.name&&$(i,a),be(l,o);var u=be(l,a);for(o=0;o<c.length;o+=2){var h=c[o],d=c[o+1];"style"===h?me(i,d):"dangerouslySetInnerHTML"===h?he(i,d):"children"===h?de(i,d):b(i,h,d,u)}switch(l){case"input":J(i,a);break;case"textarea":se(i,a);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!a.multiple;var p=a.value;null!=p?ne(i,!!a.multiple,p,!1):f!==!!a.multiple&&(null!=a.defaultValue?ne(i,!!a.multiple,a.defaultValue,!0):ne(i,!!a.multiple,a.multiple?[]:"",!1))}i[fi]=a}catch(m){Sc(e,e.return,m)}}break;case 6:if(gl(t,e),yl(e),4&r){if(null===e.stateNode)throw Error(s(162));i=e.stateNode,a=e.memoizedProps;try{i.nodeValue=a}catch(m){Sc(e,e.return,m)}}break;case 3:if(gl(t,e),yl(e),4&r&&null!==n&&n.memoizedState.isDehydrated)try{Bt(t.containerInfo)}catch(m){Sc(e,e.return,m)}break;case 4:default:gl(t,e),yl(e);break;case 13:gl(t,e),yl(e),8192&(i=e.child).flags&&(a=null!==i.memoizedState,i.stateNode.isHidden=a,!a||null!==i.alternate&&null!==i.alternate.memoizedState||(Ul=$e())),4&r&&pl(e);break;case 22:if(h=null!==n&&null!==n.memoizedState,1&e.mode?(Zo=(u=Zo)||h,gl(t,e),Zo=u):gl(t,e),yl(e),8192&r){if(u=null!==e.memoizedState,(e.stateNode.isHidden=u)&&!h&&0!==(1&e.mode))for(Jo=e,h=e.child;null!==h;){for(d=Jo=h;null!==Jo;){switch(p=(f=Jo).child,f.tag){case 0:case 11:case 14:case 15:nl(4,f,f.return);break;case 1:Xo(f,f.return);var g=f.stateNode;if("function"===typeof g.componentWillUnmount){r=f,n=f.return;try{t=r,g.props=t.memoizedProps,g.state=t.memoizedState,g.componentWillUnmount()}catch(m){Sc(r,n,m)}}break;case 5:Xo(f,f.return);break;case 22:if(null!==f.memoizedState){xl(d);continue}}null!==p?(p.return=f,Jo=p):xl(d)}h=h.sibling}e:for(h=null,d=e;;){if(5===d.tag){if(null===h){h=d;try{i=d.stateNode,u?"function"===typeof(a=i.style).setProperty?a.setProperty("display","none","important"):a.display="none":(l=d.stateNode,o=void 0!==(c=d.memoizedProps.style)&&null!==c&&c.hasOwnProperty("display")?c.display:null,l.style.display=ge("display",o))}catch(m){Sc(e,e.return,m)}}}else if(6===d.tag){if(null===h)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(m){Sc(e,e.return,m)}}else if((22!==d.tag&&23!==d.tag||null===d.memoizedState||d===e)&&null!==d.child){d.child.return=d,d=d.child;continue}if(d===e)break e;for(;null===d.sibling;){if(null===d.return||d.return===e)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:gl(t,e),yl(e),4&r&&pl(e);case 21:}}function yl(e){var t=e.flags;if(2&t){try{e:{for(var n=e.return;null!==n;){if(al(n)){var r=n;break e}n=n.return}throw Error(s(160))}switch(r.tag){case 5:var i=r.stateNode;32&r.flags&&(de(i,""),r.flags&=-33),cl(e,ol(e),i);break;case 3:case 4:var a=r.stateNode.containerInfo;ll(e,ol(e),a);break;default:throw Error(s(161))}}catch(o){Sc(e,e.return,o)}e.flags&=-3}4096&t&&(e.flags&=-4097)}function vl(e,t,n){Jo=e,bl(e,t,n)}function bl(e,t,n){for(var r=0!==(1&e.mode);null!==Jo;){var i=Jo,s=i.child;if(22===i.tag&&r){var a=null!==i.memoizedState||Yo;if(!a){var o=i.alternate,l=null!==o&&null!==o.memoizedState||Zo;o=Yo;var c=Zo;if(Yo=a,(Zo=l)&&!c)for(Jo=i;null!==Jo;)l=(a=Jo).child,22===a.tag&&null!==a.memoizedState?_l(i):null!==l?(l.return=a,Jo=l):_l(i);for(;null!==s;)Jo=s,bl(s,t,n),s=s.sibling;Jo=i,Yo=o,Zo=c}wl(e)}else 0!==(8772&i.subtreeFlags)&&null!==s?(s.return=i,Jo=s):wl(e)}}function wl(e){for(;null!==Jo;){var t=Jo;if(0!==(8772&t.flags)){var n=t.alternate;try{if(0!==(8772&t.flags))switch(t.tag){case 0:case 11:case 15:Zo||rl(5,t);break;case 1:var r=t.stateNode;if(4&t.flags&&!Zo)if(null===n)r.componentDidMount();else{var i=t.elementType===t.type?n.memoizedProps:to(t.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;null!==a&&Ws(t,a,r);break;case 3:var o=t.updateQueue;if(null!==o){if(n=null,null!==t.child)switch(t.child.tag){case 5:case 1:n=t.child.stateNode}Ws(t,o,n)}break;case 5:var l=t.stateNode;if(null===n&&4&t.flags){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:case 4:case 12:case 19:case 17:case 21:case 22:case 23:case 25:break;case 13:if(null===t.memoizedState){var u=t.alternate;if(null!==u){var h=u.memoizedState;if(null!==h){var d=h.dehydrated;null!==d&&Bt(d)}}}break;default:throw Error(s(163))}Zo||512&t.flags&&il(t)}catch(f){Sc(t,t.return,f)}}if(t===e){Jo=null;break}if(null!==(n=t.sibling)){n.return=t.return,Jo=n;break}Jo=t.return}}function xl(e){for(;null!==Jo;){var t=Jo;if(t===e){Jo=null;break}var n=t.sibling;if(null!==n){n.return=t.return,Jo=n;break}Jo=t.return}}function _l(e){for(;null!==Jo;){var t=Jo;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{rl(4,t)}catch(l){Sc(t,n,l)}break;case 1:var r=t.stateNode;if("function"===typeof r.componentDidMount){var i=t.return;try{r.componentDidMount()}catch(l){Sc(t,i,l)}}var s=t.return;try{il(t)}catch(l){Sc(t,s,l)}break;case 5:var a=t.return;try{il(t)}catch(l){Sc(t,a,l)}}}catch(l){Sc(t,t.return,l)}if(t===e){Jo=null;break}var o=t.sibling;if(null!==o){o.return=t.return,Jo=o;break}Jo=t.return}}var kl,Sl=Math.ceil,El=w.ReactCurrentDispatcher,Tl=w.ReactCurrentOwner,Il=w.ReactCurrentBatchConfig,Cl=0,Al=null,Dl=null,Pl=0,Nl=0,Ml=Si(0),Rl=0,jl=null,Ol=0,Ll=0,Fl=0,Vl=null,zl=null,Ul=0,Bl=1/0,Wl=null,ql=!1,Hl=null,Kl=null,Gl=!1,Ql=null,Yl=0,Zl=0,$l=null,Jl=-1,Xl=0;function ec(){return 0!==(6&Cl)?$e():-1!==Jl?Jl:Jl=$e()}function tc(e){return 0===(1&e.mode)?1:0!==(2&Cl)&&0!==Pl?Pl&-Pl:null!==gs.transition?(0===Xl&&(Xl=gt()),Xl):0!==(e=bt)?e:e=void 0===(e=window.event)?16:Zt(e.type)}function nc(e,t,n,r){if(50<Zl)throw Zl=0,$l=null,Error(s(185));yt(e,n,r),0!==(2&Cl)&&e===Al||(e===Al&&(0===(2&Cl)&&(Ll|=n),4===Rl&&oc(e,Pl)),rc(e,r),1===n&&0===Cl&&0===(1&t.mode)&&(Bl=$e()+500,Vi&&Bi()))}function rc(e,t){var n=e.callbackNode;!function(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,i=e.expirationTimes,s=e.pendingLanes;0<s;){var a=31-at(s),o=1<<a,l=i[a];-1===l?0!==(o&n)&&0===(o&r)||(i[a]=ft(o,t)):l<=t&&(e.expiredLanes|=o),s&=~o}}(e,t);var r=dt(e,e===Al?Pl:0);if(0===r)null!==n&&Qe(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(null!=n&&Qe(n),1===t)0===e.tag?function(e){Vi=!0,Ui(e)}(lc.bind(null,e)):Ui(lc.bind(null,e)),ai(function(){0===(6&Cl)&&Bi()}),n=null;else{switch(wt(r)){case 1:n=Xe;break;case 4:n=et;break;case 16:default:n=tt;break;case 536870912:n=rt}n=Ac(n,ic.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function ic(e,t){if(Jl=-1,Xl=0,0!==(6&Cl))throw Error(s(327));var n=e.callbackNode;if(_c()&&e.callbackNode!==n)return null;var r=dt(e,e===Al?Pl:0);if(0===r)return null;if(0!==(30&r)||0!==(r&e.expiredLanes)||t)t=mc(e,r);else{t=r;var i=Cl;Cl|=2;var a=pc();for(Al===e&&Pl===t||(Wl=null,Bl=$e()+500,dc(e,t));;)try{vc();break}catch(l){fc(e,l)}Ts(),El.current=a,Cl=i,null!==Dl?t=0:(Al=null,Pl=0,t=Rl)}if(0!==t){if(2===t&&(0!==(i=pt(e))&&(r=i,t=sc(e,i))),1===t)throw n=jl,dc(e,0),oc(e,r),rc(e,$e()),n;if(6===t)oc(e,r);else{if(i=e.current.alternate,0===(30&r)&&!function(e){for(var t=e;;){if(16384&t.flags){var n=t.updateQueue;if(null!==n&&null!==(n=n.stores))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!or(s(),i))return!1}catch(o){return!1}}}if(n=t.child,16384&t.subtreeFlags&&null!==n)n.return=t,t=n;else{if(t===e)break;for(;null===t.sibling;){if(null===t.return||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}(i)&&(2===(t=mc(e,r))&&(0!==(a=pt(e))&&(r=a,t=sc(e,a))),1===t))throw n=jl,dc(e,0),oc(e,r),rc(e,$e()),n;switch(e.finishedWork=i,e.finishedLanes=r,t){case 0:case 1:throw Error(s(345));case 2:case 5:xc(e,zl,Wl);break;case 3:if(oc(e,r),(130023424&r)===r&&10<(t=Ul+500-$e())){if(0!==dt(e,0))break;if(((i=e.suspendedLanes)&r)!==r){ec(),e.pingedLanes|=e.suspendedLanes&i;break}e.timeoutHandle=ri(xc.bind(null,e,zl,Wl),t);break}xc(e,zl,Wl);break;case 4:if(oc(e,r),(4194240&r)===r)break;for(t=e.eventTimes,i=-1;0<r;){var o=31-at(r);a=1<<o,(o=t[o])>i&&(i=o),r&=~a}if(r=i,10<(r=(120>(r=$e()-r)?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Sl(r/1960))-r)){e.timeoutHandle=ri(xc.bind(null,e,zl,Wl),r);break}xc(e,zl,Wl);break;default:throw Error(s(329))}}}return rc(e,$e()),e.callbackNode===n?ic.bind(null,e):null}function sc(e,t){var n=Vl;return e.current.memoizedState.isDehydrated&&(dc(e,t).flags|=256),2!==(e=mc(e,t))&&(t=zl,zl=n,null!==t&&ac(t)),e}function ac(e){null===zl?zl=e:zl.push.apply(zl,e)}function oc(e,t){for(t&=~Fl,t&=~Ll,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-at(t),r=1<<n;e[n]=-1,t&=~r}}function lc(e){if(0!==(6&Cl))throw Error(s(327));_c();var t=dt(e,0);if(0===(1&t))return rc(e,$e()),null;var n=mc(e,t);if(0!==e.tag&&2===n){var r=pt(e);0!==r&&(t=r,n=sc(e,r))}if(1===n)throw n=jl,dc(e,0),oc(e,t),rc(e,$e()),n;if(6===n)throw Error(s(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,xc(e,zl,Wl),rc(e,$e()),null}function cc(e,t){var n=Cl;Cl|=1;try{return e(t)}finally{0===(Cl=n)&&(Bl=$e()+500,Vi&&Bi())}}function uc(e){null!==Ql&&0===Ql.tag&&0===(6&Cl)&&_c();var t=Cl;Cl|=1;var n=Il.transition,r=bt;try{if(Il.transition=null,bt=1,e)return e()}finally{bt=r,Il.transition=n,0===(6&(Cl=t))&&Bi()}}function hc(){Nl=Ml.current,Ei(Ml)}function dc(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(-1!==n&&(e.timeoutHandle=-1,ii(n)),null!==Dl)for(n=Dl.return;null!==n;){var r=n;switch(ts(r),r.tag){case 1:null!==(r=r.type.childContextTypes)&&void 0!==r&&Mi();break;case 3:Zs(),Ei(Ai),Ei(Ci),na();break;case 5:Js(r);break;case 4:Zs();break;case 13:case 19:Ei(Xs);break;case 10:Is(r.type._context);break;case 22:case 23:hc()}n=n.return}if(Al=e,Dl=e=Mc(e.current,null),Pl=Nl=t,Rl=0,jl=null,Fl=Ll=Ol=0,zl=Vl=null,null!==Ps){for(t=0;t<Ps.length;t++)if(null!==(r=(n=Ps[t]).interleaved)){n.interleaved=null;var i=r.next,s=n.pending;if(null!==s){var a=s.next;s.next=i,r.next=a}n.pending=r}Ps=null}return e}function fc(e,t){for(;;){var n=Dl;try{if(Ts(),ra.current=$a,ca){for(var r=aa.memoizedState;null!==r;){var i=r.queue;null!==i&&(i.pending=null),r=r.next}ca=!1}if(sa=0,la=oa=aa=null,ua=!1,ha=0,Tl.current=null,null===n||null===n.return){Rl=1,jl=t,Dl=null;break}e:{var a=e,o=n.return,l=n,c=t;if(t=Pl,l.flags|=32768,null!==c&&"object"===typeof c&&"function"===typeof c.then){var u=c,h=l,d=h.tag;if(0===(1&h.mode)&&(0===d||11===d||15===d)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var p=mo(o);if(null!==p){p.flags&=-257,yo(p,o,l,0,t),1&p.mode&&go(a,u,t),c=u;var g=(t=p).updateQueue;if(null===g){var m=new Set;m.add(c),t.updateQueue=m}else g.add(c);break e}if(0===(1&t)){go(a,u,t),gc();break e}c=Error(s(426))}else if(is&&1&l.mode){var y=mo(o);if(null!==y){0===(65536&y.flags)&&(y.flags|=256),yo(y,o,l,0,t),ps(lo(c,l));break e}}a=c=lo(c,l),4!==Rl&&(Rl=2),null===Vl?Vl=[a]:Vl.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t,Us(a,fo(0,c,t));break e;case 1:l=c;var v=a.type,b=a.stateNode;if(0===(128&a.flags)&&("function"===typeof v.getDerivedStateFromError||null!==b&&"function"===typeof b.componentDidCatch&&(null===Kl||!Kl.has(b)))){a.flags|=65536,t&=-t,a.lanes|=t,Us(a,po(a,l,t));break e}}a=a.return}while(null!==a)}wc(n)}catch(w){t=w,Dl===n&&null!==n&&(Dl=n=n.return);continue}break}}function pc(){var e=El.current;return El.current=$a,null===e?$a:e}function gc(){0!==Rl&&3!==Rl&&2!==Rl||(Rl=4),null===Al||0===(268435455&Ol)&&0===(268435455&Ll)||oc(Al,Pl)}function mc(e,t){var n=Cl;Cl|=2;var r=pc();for(Al===e&&Pl===t||(Wl=null,dc(e,t));;)try{yc();break}catch(i){fc(e,i)}if(Ts(),Cl=n,El.current=r,null!==Dl)throw Error(s(261));return Al=null,Pl=0,Rl}function yc(){for(;null!==Dl;)bc(Dl)}function vc(){for(;null!==Dl&&!Ye();)bc(Dl)}function bc(e){var t=kl(e.alternate,e,Nl);e.memoizedProps=e.pendingProps,null===t?wc(e):Dl=t,Tl.current=null}function wc(e){var t=e;do{var n=t.alternate;if(e=t.return,0===(32768&t.flags)){if(null!==(n=Go(n,t,Nl)))return void(Dl=n)}else{if(null!==(n=Qo(n,t)))return n.flags&=32767,void(Dl=n);if(null===e)return Rl=6,void(Dl=null);e.flags|=32768,e.subtreeFlags=0,e.deletions=null}if(null!==(t=t.sibling))return void(Dl=t);Dl=t=e}while(null!==t);0===Rl&&(Rl=5)}function xc(e,t,n){var r=bt,i=Il.transition;try{Il.transition=null,bt=1,function(e,t,n,r){do{_c()}while(null!==Ql);if(0!==(6&Cl))throw Error(s(327));n=e.finishedWork;var i=e.finishedLanes;if(null===n)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(s(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(function(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var i=31-at(n),s=1<<i;t[i]=0,r[i]=-1,e[i]=-1,n&=~s}}(e,a),e===Al&&(Dl=Al=null,Pl=0),0===(2064&n.subtreeFlags)&&0===(2064&n.flags)||Gl||(Gl=!0,Ac(tt,function(){return _c(),null})),a=0!==(15990&n.flags),0!==(15990&n.subtreeFlags)||a){a=Il.transition,Il.transition=null;var o=bt;bt=1;var l=Cl;Cl|=4,Tl.current=null,function(e,t){if(ei=qt,fr(e=dr())){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{var r=(n=(n=e.ownerDocument)&&n.defaultView||window).getSelection&&n.getSelection();if(r&&0!==r.rangeCount){n=r.anchorNode;var i=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch(x){n=null;break e}var o=0,l=-1,c=-1,u=0,h=0,d=e,f=null;t:for(;;){for(var p;d!==n||0!==i&&3!==d.nodeType||(l=o+i),d!==a||0!==r&&3!==d.nodeType||(c=o+r),3===d.nodeType&&(o+=d.nodeValue.length),null!==(p=d.firstChild);)f=d,d=p;for(;;){if(d===e)break t;if(f===n&&++u===i&&(l=o),f===a&&++h===r&&(c=o),null!==(p=d.nextSibling))break;f=(d=f).parentNode}d=p}n=-1===l||-1===c?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(ti={focusedElem:e,selectionRange:n},qt=!1,Jo=t;null!==Jo;)if(e=(t=Jo).child,0!==(1028&t.subtreeFlags)&&null!==e)e.return=t,Jo=e;else for(;null!==Jo;){t=Jo;try{var g=t.alternate;if(0!==(1024&t.flags))switch(t.tag){case 0:case 11:case 15:case 5:case 6:case 4:case 17:break;case 1:if(null!==g){var m=g.memoizedProps,y=g.memoizedState,v=t.stateNode,b=v.getSnapshotBeforeUpdate(t.elementType===t.type?m:to(t.type,m),y);v.__reactInternalSnapshotBeforeUpdate=b}break;case 3:var w=t.stateNode.containerInfo;1===w.nodeType?w.textContent="":9===w.nodeType&&w.documentElement&&w.removeChild(w.documentElement);break;default:throw Error(s(163))}}catch(x){Sc(t,t.return,x)}if(null!==(e=t.sibling)){e.return=t.return,Jo=e;break}Jo=t.return}g=tl,tl=!1}(e,n),ml(n,e),pr(ti),qt=!!ei,ti=ei=null,e.current=n,vl(n,e,i),Ze(),Cl=l,bt=o,Il.transition=a}else e.current=n;if(Gl&&(Gl=!1,Ql=e,Yl=i),a=e.pendingLanes,0===a&&(Kl=null),function(e){if(st&&"function"===typeof st.onCommitFiberRoot)try{st.onCommitFiberRoot(it,e,void 0,128===(128&e.current.flags))}catch(t){}}(n.stateNode),rc(e,$e()),null!==t)for(r=e.onRecoverableError,n=0;n<t.length;n++)i=t[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ql)throw ql=!1,e=Hl,Hl=null,e;0!==(1&Yl)&&0!==e.tag&&_c(),a=e.pendingLanes,0!==(1&a)?e===$l?Zl++:(Zl=0,$l=e):Zl=0,Bi()}(e,t,n,r)}finally{Il.transition=i,bt=r}return null}function _c(){if(null!==Ql){var e=wt(Yl),t=Il.transition,n=bt;try{if(Il.transition=null,bt=16>e?16:e,null===Ql)var r=!1;else{if(e=Ql,Ql=null,Yl=0,0!==(6&Cl))throw Error(s(331));var i=Cl;for(Cl|=4,Jo=e.current;null!==Jo;){var a=Jo,o=a.child;if(0!==(16&Jo.flags)){var l=a.deletions;if(null!==l){for(var c=0;c<l.length;c++){var u=l[c];for(Jo=u;null!==Jo;){var h=Jo;switch(h.tag){case 0:case 11:case 15:nl(8,h,a)}var d=h.child;if(null!==d)d.return=h,Jo=d;else for(;null!==Jo;){var f=(h=Jo).sibling,p=h.return;if(sl(h),h===u){Jo=null;break}if(null!==f){f.return=p,Jo=f;break}Jo=p}}}var g=a.alternate;if(null!==g){var m=g.child;if(null!==m){g.child=null;do{var y=m.sibling;m.sibling=null,m=y}while(null!==m)}}Jo=a}}if(0!==(2064&a.subtreeFlags)&&null!==o)o.return=a,Jo=o;else e:for(;null!==Jo;){if(0!==(2048&(a=Jo).flags))switch(a.tag){case 0:case 11:case 15:nl(9,a,a.return)}var v=a.sibling;if(null!==v){v.return=a.return,Jo=v;break e}Jo=a.return}}var b=e.current;for(Jo=b;null!==Jo;){var w=(o=Jo).child;if(0!==(2064&o.subtreeFlags)&&null!==w)w.return=o,Jo=w;else e:for(o=b;null!==Jo;){if(0!==(2048&(l=Jo).flags))try{switch(l.tag){case 0:case 11:case 15:rl(9,l)}}catch(_){Sc(l,l.return,_)}if(l===o){Jo=null;break e}var x=l.sibling;if(null!==x){x.return=l.return,Jo=x;break e}Jo=l.return}}if(Cl=i,Bi(),st&&"function"===typeof st.onPostCommitFiberRoot)try{st.onPostCommitFiberRoot(it,e)}catch(_){}r=!0}return r}finally{bt=n,Il.transition=t}}return!1}function kc(e,t,n){e=Vs(e,t=fo(0,t=lo(n,t),1),1),t=ec(),null!==e&&(yt(e,1,t),rc(e,t))}function Sc(e,t,n){if(3===e.tag)kc(e,e,n);else for(;null!==t;){if(3===t.tag){kc(t,e,n);break}if(1===t.tag){var r=t.stateNode;if("function"===typeof t.type.getDerivedStateFromError||"function"===typeof r.componentDidCatch&&(null===Kl||!Kl.has(r))){t=Vs(t,e=po(t,e=lo(n,e),1),1),e=ec(),null!==t&&(yt(t,1,e),rc(t,e));break}}t=t.return}}function Ec(e,t,n){var r=e.pingCache;null!==r&&r.delete(t),t=ec(),e.pingedLanes|=e.suspendedLanes&n,Al===e&&(Pl&n)===n&&(4===Rl||3===Rl&&(130023424&Pl)===Pl&&500>$e()-Ul?dc(e,0):Fl|=n),rc(e,t)}function Tc(e,t){0===t&&(0===(1&e.mode)?t=1:(t=ut,0===(130023424&(ut<<=1))&&(ut=4194304)));var n=ec();null!==(e=Rs(e,t))&&(yt(e,t,n),rc(e,n))}function Ic(e){var t=e.memoizedState,n=0;null!==t&&(n=t.retryLane),Tc(e,n)}function Cc(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,i=e.memoizedState;null!==i&&(n=i.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(s(314))}null!==r&&r.delete(t),Tc(e,n)}function Ac(e,t){return Ge(e,t)}function Dc(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pc(e,t,n,r){return new Dc(e,t,n,r)}function Nc(e){return!(!(e=e.prototype)||!e.isReactComponent)}function Mc(e,t){var n=e.alternate;return null===n?((n=Pc(e.tag,t,e.key,e.mode)).elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=14680064&e.flags,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=null===t?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rc(e,t,n,r,i,a){var o=2;if(r=e,"function"===typeof e)Nc(e)&&(o=1);else if("string"===typeof e)o=5;else e:switch(e){case k:return jc(n.children,i,a,t);case S:o=8,i|=8;break;case E:return(e=Pc(12,n,t,2|i)).elementType=E,e.lanes=a,e;case A:return(e=Pc(13,n,t,i)).elementType=A,e.lanes=a,e;case D:return(e=Pc(19,n,t,i)).elementType=D,e.lanes=a,e;case M:return Oc(n,i,a,t);default:if("object"===typeof e&&null!==e)switch(e.$$typeof){case T:o=10;break e;case I:o=9;break e;case C:o=11;break e;case P:o=14;break e;case N:o=16,r=null;break e}throw Error(s(130,null==e?e:typeof e,""))}return(t=Pc(o,n,t,i)).elementType=e,t.type=r,t.lanes=a,t}function jc(e,t,n,r){return(e=Pc(7,e,r,t)).lanes=n,e}function Oc(e,t,n,r){return(e=Pc(22,e,r,t)).elementType=M,e.lanes=n,e.stateNode={isHidden:!1},e}function Lc(e,t,n){return(e=Pc(6,e,null,t)).lanes=n,e}function Fc(e,t,n){return(t=Pc(4,null!==e.children?e.children:[],e.key,t)).lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function Vc(e,t,n,r,i){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mt(0),this.expirationTimes=mt(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mt(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zc(e,t,n,r,i,s,a,o,l){return e=new Vc(e,t,n,o,l),1===t?(t=1,!0===s&&(t|=8)):t=0,s=Pc(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Os(s),e}function Uc(e){if(!e)return Ii;e:{if(Be(e=e._reactInternals)!==e||1!==e.tag)throw Error(s(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Ni(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(null!==t);throw Error(s(171))}if(1===e.tag){var n=e.type;if(Ni(n))return ji(e,n,t)}return t}function Bc(e,t,n,r,i,s,a,o,l){return(e=zc(n,r,!0,e,0,s,0,o,l)).context=Uc(null),n=e.current,(s=Fs(r=ec(),i=tc(n))).callback=void 0!==t&&null!==t?t:null,Vs(n,s,i),e.current.lanes=i,yt(e,i,r),rc(e,r),e}function Wc(e,t,n,r){var i=t.current,s=ec(),a=tc(i);return n=Uc(n),null===t.context?t.context=n:t.pendingContext=n,(t=Fs(s,a)).payload={element:e},null!==(r=void 0===r?null:r)&&(t.callback=r),null!==(e=Vs(i,t,a))&&(nc(e,i,a,s),zs(e,i,a)),a}function qc(e){return(e=e.current).child?(e.child.tag,e.child.stateNode):null}function Hc(e,t){if(null!==(e=e.memoizedState)&&null!==e.dehydrated){var n=e.retryLane;e.retryLane=0!==n&&n<t?n:t}}function Kc(e,t){Hc(e,t),(e=e.alternate)&&Hc(e,t)}kl=function(e,t,n){if(null!==e)if(e.memoizedProps!==t.pendingProps||Ai.current)bo=!0;else{if(0===(e.lanes&n)&&0===(128&t.flags))return bo=!1,function(e,t,n){switch(t.tag){case 3:Ao(t),fs();break;case 5:$s(t);break;case 1:Ni(t.type)&&Oi(t);break;case 4:Ys(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,i=t.memoizedProps.value;Ti(_s,r._currentValue),r._currentValue=i;break;case 13:if(null!==(r=t.memoizedState))return null!==r.dehydrated?(Ti(Xs,1&Xs.current),t.flags|=128,null):0!==(n&t.child.childLanes)?Lo(e,t,n):(Ti(Xs,1&Xs.current),null!==(e=qo(e,t,n))?e.sibling:null);Ti(Xs,1&Xs.current);break;case 19:if(r=0!==(n&t.childLanes),0!==(128&e.flags)){if(r)return Bo(e,t,n);t.flags|=128}if(null!==(i=t.memoizedState)&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ti(Xs,Xs.current),r)break;return null;case 22:case 23:return t.lanes=0,So(e,t,n)}return qo(e,t,n)}(e,t,n);bo=0!==(131072&e.flags)}else bo=!1,is&&0!==(1048576&t.flags)&&Xi(t,Ki,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;Wo(e,t),e=t.pendingProps;var i=Pi(t,Ci.current);As(t,n),i=ga(null,t,r,e,i,n);var a=ma();return t.flags|=1,"object"===typeof i&&null!==i&&"function"===typeof i.render&&void 0===i.$$typeof?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Ni(r)?(a=!0,Oi(t)):a=!1,t.memoizedState=null!==i.state&&void 0!==i.state?i.state:null,Os(t),i.updater=ro,t.stateNode=i,i._reactInternals=t,oo(t,r,e,n),t=Co(null,t,r,!0,a,n)):(t.tag=0,is&&a&&es(t),wo(null,t,i,n),t=t.child),t;case 16:r=t.elementType;e:{switch(Wo(e,t),e=t.pendingProps,r=(i=r._init)(r._payload),t.type=r,i=t.tag=function(e){if("function"===typeof e)return Nc(e)?1:0;if(void 0!==e&&null!==e){if((e=e.$$typeof)===C)return 11;if(e===P)return 14}return 2}(r),e=to(r,e),i){case 0:t=To(null,t,r,e,n);break e;case 1:t=Io(null,t,r,e,n);break e;case 11:t=xo(null,t,r,e,n);break e;case 14:t=_o(null,t,r,to(r.type,e),n);break e}throw Error(s(306,r,""))}return t;case 0:return r=t.type,i=t.pendingProps,To(e,t,r,i=t.elementType===r?i:to(r,i),n);case 1:return r=t.type,i=t.pendingProps,Io(e,t,r,i=t.elementType===r?i:to(r,i),n);case 3:e:{if(Ao(t),null===e)throw Error(s(387));r=t.pendingProps,i=(a=t.memoizedState).element,Ls(e,t),Bs(t,r,null,n);var o=t.memoizedState;if(r=o.element,a.isDehydrated){if(a={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=a,t.memoizedState=a,256&t.flags){t=Do(e,t,r,n,i=lo(Error(s(423)),t));break e}if(r!==i){t=Do(e,t,r,n,i=lo(Error(s(424)),t));break e}for(rs=ci(t.stateNode.containerInfo.firstChild),ns=t,is=!0,ss=null,n=xs(t,null,r,n),t.child=n;n;)n.flags=-3&n.flags|4096,n=n.sibling}else{if(fs(),r===i){t=qo(e,t,n);break e}wo(e,t,r,n)}t=t.child}return t;case 5:return $s(t),null===e&&cs(t),r=t.type,i=t.pendingProps,a=null!==e?e.memoizedProps:null,o=i.children,ni(r,i)?o=null:null!==a&&ni(r,a)&&(t.flags|=32),Eo(e,t),wo(e,t,o,n),t.child;case 6:return null===e&&cs(t),null;case 13:return Lo(e,t,n);case 4:return Ys(t,t.stateNode.containerInfo),r=t.pendingProps,null===e?t.child=ws(t,null,r,n):wo(e,t,r,n),t.child;case 11:return r=t.type,i=t.pendingProps,xo(e,t,r,i=t.elementType===r?i:to(r,i),n);case 7:return wo(e,t,t.pendingProps,n),t.child;case 8:case 12:return wo(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,i=t.pendingProps,a=t.memoizedProps,o=i.value,Ti(_s,r._currentValue),r._currentValue=o,null!==a)if(or(a.value,o)){if(a.children===i.children&&!Ai.current){t=qo(e,t,n);break e}}else for(null!==(a=t.child)&&(a.return=t);null!==a;){var l=a.dependencies;if(null!==l){o=a.child;for(var c=l.firstContext;null!==c;){if(c.context===r){if(1===a.tag){(c=Fs(-1,n&-n)).tag=2;var u=a.updateQueue;if(null!==u){var h=(u=u.shared).pending;null===h?c.next=c:(c.next=h.next,h.next=c),u.pending=c}}a.lanes|=n,null!==(c=a.alternate)&&(c.lanes|=n),Cs(a.return,n,t),l.lanes|=n;break}c=c.next}}else if(10===a.tag)o=a.type===t.type?null:a.child;else if(18===a.tag){if(null===(o=a.return))throw Error(s(341));o.lanes|=n,null!==(l=o.alternate)&&(l.lanes|=n),Cs(o,n,t),o=a.sibling}else o=a.child;if(null!==o)o.return=a;else for(o=a;null!==o;){if(o===t){o=null;break}if(null!==(a=o.sibling)){a.return=o.return,o=a;break}o=o.return}a=o}wo(e,t,i.children,n),t=t.child}return t;case 9:return i=t.type,r=t.pendingProps.children,As(t,n),r=r(i=Ds(i)),t.flags|=1,wo(e,t,r,n),t.child;case 14:return i=to(r=t.type,t.pendingProps),_o(e,t,r,i=to(r.type,i),n);case 15:return ko(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,i=t.pendingProps,i=t.elementType===r?i:to(r,i),Wo(e,t),t.tag=1,Ni(r)?(e=!0,Oi(t)):e=!1,As(t,n),so(t,r,i),oo(t,r,i,n),Co(null,t,r,!0,e,n);case 19:return Bo(e,t,n);case 22:return So(e,t,n)}throw Error(s(156,t.tag))};var Gc="function"===typeof reportError?reportError:function(e){console.error(e)};function Qc(e){this._internalRoot=e}function Yc(e){this._internalRoot=e}function Zc(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType)}function $c(e){return!(!e||1!==e.nodeType&&9!==e.nodeType&&11!==e.nodeType&&(8!==e.nodeType||" react-mount-point-unstable "!==e.nodeValue))}function Jc(){}function Xc(e,t,n,r,i){var s=n._reactRootContainer;if(s){var a=s;if("function"===typeof i){var o=i;i=function(){var e=qc(a);o.call(e)}}Wc(t,a,e,i)}else a=function(e,t,n,r,i){if(i){if("function"===typeof r){var s=r;r=function(){var e=qc(a);s.call(e)}}var a=Bc(t,r,e,0,null,!1,0,"",Jc);return e._reactRootContainer=a,e[pi]=a.current,Br(8===e.nodeType?e.parentNode:e),uc(),a}for(;i=e.lastChild;)e.removeChild(i);if("function"===typeof r){var o=r;r=function(){var e=qc(l);o.call(e)}}var l=zc(e,0,!1,null,0,!1,0,"",Jc);return e._reactRootContainer=l,e[pi]=l.current,Br(8===e.nodeType?e.parentNode:e),uc(function(){Wc(t,l,n,r)}),l}(n,t,e,i,r);return qc(a)}Yc.prototype.render=Qc.prototype.render=function(e){var t=this._internalRoot;if(null===t)throw Error(s(409));Wc(e,t,null,null)},Yc.prototype.unmount=Qc.prototype.unmount=function(){var e=this._internalRoot;if(null!==e){this._internalRoot=null;var t=e.containerInfo;uc(function(){Wc(null,e,null,null)}),t[pi]=null}},Yc.prototype.unstable_scheduleHydration=function(e){if(e){var t=St();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Mt.length&&0!==t&&t<Mt[n].priority;n++);Mt.splice(n,0,e),0===n&&Lt(e)}},xt=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=ht(t.pendingLanes);0!==n&&(vt(t,1|n),rc(t,$e()),0===(6&Cl)&&(Bl=$e()+500,Bi()))}break;case 13:uc(function(){var t=Rs(e,1);if(null!==t){var n=ec();nc(t,e,1,n)}}),Kc(e,1)}},_t=function(e){if(13===e.tag){var t=Rs(e,134217728);if(null!==t)nc(t,e,134217728,ec());Kc(e,134217728)}},kt=function(e){if(13===e.tag){var t=tc(e),n=Rs(e,t);if(null!==n)nc(n,e,t,ec());Kc(e,t)}},St=function(){return bt},Et=function(e,t){var n=bt;try{return bt=e,t()}finally{bt=n}},_e=function(e,t,n){switch(t){case"input":if(J(e,n),t=n.name,"radio"===n.type&&null!=t){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var i=xi(r);if(!i)throw Error(s(90));G(r),J(r,i)}}}break;case"textarea":se(e,n);break;case"select":null!=(t=n.value)&&ne(e,!!n.multiple,t,!1)}},Ce=cc,Ae=uc;var eu={usingClientEntryPoint:!1,Events:[bi,wi,xi,Te,Ie,cc]},tu={findFiberByHostInstance:vi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},nu={bundleType:tu.bundleType,version:tu.version,rendererPackageName:tu.rendererPackageName,rendererConfig:tu.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:w.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return null===(e=He(e))?null:e.stateNode},findFiberByHostInstance:tu.findFiberByHostInstance||function(){return null},findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if("undefined"!==typeof __REACT_DEVTOOLS_GLOBAL_HOOK__){var ru=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ru.isDisabled&&ru.supportsFiber)try{it=ru.inject(nu),st=ru}catch(ue){}}t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=eu,t.createPortal=function(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;if(!Zc(t))throw Error(s(200));return function(e,t,n){var r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:null;return{$$typeof:_,key:null==r?null:""+r,children:e,containerInfo:t,implementation:n}}(e,t,null,n)},t.createRoot=function(e,t){if(!Zc(e))throw Error(s(299));var n=!1,r="",i=Gc;return null!==t&&void 0!==t&&(!0===t.unstable_strictMode&&(n=!0),void 0!==t.identifierPrefix&&(r=t.identifierPrefix),void 0!==t.onRecoverableError&&(i=t.onRecoverableError)),t=zc(e,1,!1,null,0,n,0,r,i),e[pi]=t.current,Br(8===e.nodeType?e.parentNode:e),new Qc(t)},t.findDOMNode=function(e){if(null==e)return null;if(1===e.nodeType)return e;var t=e._reactInternals;if(void 0===t){if("function"===typeof e.render)throw Error(s(188));throw e=Object.keys(e).join(","),Error(s(268,e))}return e=null===(e=He(t))?null:e.stateNode},t.flushSync=function(e){return uc(e)},t.hydrate=function(e,t,n){if(!$c(t))throw Error(s(200));return Xc(null,e,t,!0,n)},t.hydrateRoot=function(e,t,n){if(!Zc(e))throw Error(s(405));var r=null!=n&&n.hydratedSources||null,i=!1,a="",o=Gc;if(null!==n&&void 0!==n&&(!0===n.unstable_strictMode&&(i=!0),void 0!==n.identifierPrefix&&(a=n.identifierPrefix),void 0!==n.onRecoverableError&&(o=n.onRecoverableError)),t=Bc(t,null,e,1,null!=n?n:null,i,0,a,o),e[pi]=t.current,Br(e),r)for(e=0;e<r.length;e++)i=(i=(n=r[e])._getVersion)(n._source),null==t.mutableSourceEagerHydrationData?t.mutableSourceEagerHydrationData=[n,i]:t.mutableSourceEagerHydrationData.push(n,i);return new Yc(t)},t.render=function(e,t,n){if(!$c(t))throw Error(s(200));return Xc(null,e,t,!1,n)},t.unmountComponentAtNode=function(e){if(!$c(e))throw Error(s(40));return!!e._reactRootContainer&&(uc(function(){Xc(null,null,e,!1,function(){e._reactRootContainer=null,e[pi]=null})}),!0)},t.unstable_batchedUpdates=cc,t.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!$c(n))throw Error(s(200));if(null==e||void 0===e._reactInternals)throw Error(s(38));return Xc(e,t,n,!1,r)},t.version="18.3.1-next-f1338f8080-20240426"},788:(e,t,n)=>{"use strict";n.d(t,{Am:()=>N,FA:()=>I,Fy:()=>g,I9:()=>M,Im:()=>A,Ku:()=>W,T9:()=>d,Tj:()=>u,Uj:()=>a,XA:()=>f,ZQ:()=>m,bD:()=>D,c1:()=>v,cY:()=>p,dM:()=>E,eX:()=>S,g:()=>T,hp:()=>R,jZ:()=>y,lT:()=>x,lV:()=>w,nr:()=>_,p9:()=>B,sr:()=>b,tD:()=>j,u:()=>o,yU:()=>h,zW:()=>k});const r=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let i=e.charCodeAt(r);i<128?t[n++]=i:i<2048?(t[n++]=i>>6|192,t[n++]=63&i|128):55296===(64512&i)&&r+1<e.length&&56320===(64512&e.charCodeAt(r+1))?(i=65536+((1023&i)<<10)+(1023&e.charCodeAt(++r)),t[n++]=i>>18|240,t[n++]=i>>12&63|128,t[n++]=i>>6&63|128,t[n++]=63&i|128):(t[n++]=i>>12|224,t[n++]=i>>6&63|128,t[n++]=63&i|128)}return t},i={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"===typeof atob,encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<e.length;i+=3){const t=e[i],s=i+1<e.length,a=s?e[i+1]:0,o=i+2<e.length,l=o?e[i+2]:0,c=t>>2,u=(3&t)<<4|a>>4;let h=(15&a)<<2|l>>6,d=63&l;o||(d=64,s||(h=64)),r.push(n[c],n[u],n[h],n[d])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(r(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):function(e){const t=[];let n=0,r=0;for(;n<e.length;){const i=e[n++];if(i<128)t[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=e[n++];t[r++]=String.fromCharCode((31&i)<<6|63&s)}else if(i>239&&i<365){const s=((7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++])-65536;t[r++]=String.fromCharCode(55296+(s>>10)),t[r++]=String.fromCharCode(56320+(1023&s))}else{const s=e[n++],a=e[n++];t[r++]=String.fromCharCode((15&i)<<12|(63&s)<<6|63&a)}}return t.join("")}(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<e.length;){const t=n[e.charAt(i++)],a=i<e.length?n[e.charAt(i)]:0;++i;const o=i<e.length?n[e.charAt(i)]:64;++i;const l=i<e.length?n[e.charAt(i)]:64;if(++i,null==t||null==a||null==o||null==l)throw new s;const c=t<<2|a>>4;if(r.push(c),64!==o){const e=a<<4&240|o>>2;if(r.push(e),64!==l){const e=o<<6&192|l;r.push(e)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class s extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const a=function(e){return function(e){const t=r(e);return i.encodeByteArray(t,!0)}(e).replace(/\./g,"")},o=function(e){try{return i.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};const l=()=>function(){if("undefined"!==typeof self)return self;if("undefined"!==typeof window)return window;if("undefined"!==typeof n.g)return n.g;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__,c=()=>{try{return l()||(()=>{if("undefined"===typeof process)return;const e={NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0}.__FIREBASE_DEFAULTS__;return e?JSON.parse(e):void 0})()||(()=>{if("undefined"===typeof document)return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch(n){return}const t=e&&o(e[1]);return t&&JSON.parse(t)})()}catch(e){return void console.info("Unable to get __FIREBASE_DEFAULTS__ due to: ".concat(e))}},u=e=>{var t,n;return null===(n=null===(t=c())||void 0===t?void 0:t.emulatorHosts)||void 0===n?void 0:n[e]},h=e=>{const t=u(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error("Invalid host ".concat(t," with no separate hostname and port!"));const r=parseInt(t.substring(n+1),10);return"["===t[0]?[t.substring(1,n-1),r]:[t.substring(0,n),r]},d=()=>{var e;return null===(e=c())||void 0===e?void 0:e.config},f=e=>{var t;return null===(t=c())||void 0===t?void 0:t["_".concat(e)]};class p{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,n)=>{t?this.reject(t):this.resolve(n),"function"===typeof e&&(this.promise.catch(()=>{}),1===e.length?e(t):e(t,n))}}}function g(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n=t||"demo-project",r=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:"https://securetoken.google.com/".concat(n),aud:n,iat:r,exp:r+3600,auth_time:r,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[a(JSON.stringify({alg:"none",type:"JWT"})),a(JSON.stringify(s)),""].join(".")}function m(){return"undefined"!==typeof navigator&&"string"===typeof navigator.userAgent?navigator.userAgent:""}function y(){return"undefined"!==typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(m())}function v(){return"undefined"!==typeof navigator&&"Cloudflare-Workers"===navigator.userAgent}function b(){const e="object"===typeof chrome?chrome.runtime:"object"===typeof browser?browser.runtime:void 0;return"object"===typeof e&&void 0!==e.id}function w(){return"object"===typeof navigator&&"ReactNative"===navigator.product}function x(){const e=m();return e.indexOf("MSIE ")>=0||e.indexOf("Trident/")>=0}function _(){return!function(){var e;const t=null===(e=c())||void 0===e?void 0:e.forceEnvironment;if("node"===t)return!0;if("browser"===t)return!1;try{return"[object process]"===Object.prototype.toString.call(n.g.process)}catch(r){return!1}}()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function k(){try{return"object"===typeof indexedDB}catch(e){return!1}}function S(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var e;t((null===(e=i.error)||void 0===e?void 0:e.message)||"")}}catch(n){t(n)}})}function E(){return!("undefined"===typeof navigator||!navigator.cookieEnabled)}class T extends Error{constructor(e,t,n){super(t),this.code=e,this.customData=n,this.name="FirebaseError",Object.setPrototypeOf(this,T.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,I.prototype.create)}}class I{constructor(e,t,n){this.service=e,this.serviceName=t,this.errors=n}create(e){const t=(arguments.length<=1?void 0:arguments[1])||{},n="".concat(this.service,"/").concat(e),r=this.errors[e],i=r?function(e,t){return e.replace(C,(e,n)=>{const r=t[n];return null!=r?String(r):"<".concat(n,"?>")})}(r,t):"Error",s="".concat(this.serviceName,": ").concat(i," (").concat(n,").");return new T(n,s,t)}}const C=/\{\$([^}]+)}/g;function A(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}function D(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const i of n){if(!r.includes(i))return!1;const n=e[i],s=t[i];if(P(n)&&P(s)){if(!D(n,s))return!1}else if(n!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function P(e){return null!==e&&"object"===typeof e}function N(e){const t=[];for(const[n,r]of Object.entries(e))Array.isArray(r)?r.forEach(e=>{t.push(encodeURIComponent(n)+"="+encodeURIComponent(e))}):t.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return t.length?"&"+t.join("&"):""}function M(e){const t={};return e.replace(/^\?/,"").split("&").forEach(e=>{if(e){const[n,r]=e.split("=");t[decodeURIComponent(n)]=decodeURIComponent(r)}}),t}function R(e){const t=e.indexOf("?");if(!t)return"";const n=e.indexOf("#",t);return e.substring(t,n>0?n:void 0)}function j(e,t){const n=new O(e,t);return n.subscribe.bind(n)}class O{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(e=>{this.error(e)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,n){let r;if(void 0===e&&void 0===t&&void 0===n)throw new Error("Missing Observer.");r=function(e,t){if("object"!==typeof e||null===e)return!1;for(const n of t)if(n in e&&"function"===typeof e[n])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:n},void 0===r.next&&(r.next=L),void 0===r.error&&(r.error=L),void 0===r.complete&&(r.complete=L);const i=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch(e){}}),this.observers.push(r),i}unsubscribeOne(e){void 0!==this.observers&&void 0!==this.observers[e]&&(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(n){"undefined"!==typeof console&&console.error&&console.error(n)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function L(){}const F=1e3,V=2,z=144e5,U=.5;function B(e){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:V;const n=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:F)*Math.pow(t,e),r=Math.round(U*n*(Math.random()-.5)*2);return Math.min(z,n+r)}function W(e){return e&&e._delegate?e._delegate:e}},876:e=>{"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},929:(e,t,n)=>{"use strict";e.exports=n(643)},967:(e,t,n)=>{e.exports=n(147)()},985:(e,t,n)=>{"use strict";n.d(t,{P2:()=>y});var r=n(379);const i=(e,t)=>t.some(t=>e instanceof t);let s,a;const o=new WeakMap,l=new WeakMap,c=new WeakMap,u=new WeakMap,h=new WeakMap;let d={get(e,t,n){if(e instanceof IDBTransaction){if("done"===t)return l.get(e);if("objectStoreNames"===t)return e.objectStoreNames||c.get(e);if("store"===t)return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return g(e[t])},set:(e,t,n)=>(e[t]=n,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function f(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(a||(a=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return e.apply(m(this),n),g(o.get(this))}:function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return g(e.apply(m(this),n))}:function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];const s=e.call(m(this),t,...r);return c.set(s,t.sort?t.sort():[t]),g(s)}}function p(e){return"function"===typeof e?f(e):(e instanceof IDBTransaction&&function(e){if(l.has(e))return;const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",s),e.removeEventListener("abort",s)},i=()=>{t(),r()},s=()=>{n(e.error||new DOMException("AbortError","AbortError")),r()};e.addEventListener("complete",i),e.addEventListener("error",s),e.addEventListener("abort",s)});l.set(e,t)}(e),i(e,s||(s=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction]))?new Proxy(e,d):e)}function g(e){if(e instanceof IDBRequest)return function(e){const t=new Promise((t,n)=>{const r=()=>{e.removeEventListener("success",i),e.removeEventListener("error",s)},i=()=>{t(g(e.result)),r()},s=()=>{n(e.error),r()};e.addEventListener("success",i),e.addEventListener("error",s)});return t.then(t=>{t instanceof IDBCursor&&o.set(t,e)}).catch(()=>{}),h.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=p(e);return t!==e&&(u.set(e,t),h.set(t,e)),t}const m=e=>h.get(e);function y(e,t){let{blocked:n,upgrade:r,blocking:i,terminated:s}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const a=indexedDB.open(e,t),o=g(a);return r&&a.addEventListener("upgradeneeded",e=>{r(g(a.result),e.oldVersion,e.newVersion,g(a.transaction),e)}),n&&a.addEventListener("blocked",e=>n(e.oldVersion,e.newVersion,e)),o.then(e=>{s&&e.addEventListener("close",()=>s()),i&&e.addEventListener("versionchange",e=>i(e.oldVersion,e.newVersion,e))}).catch(()=>{}),o}const v=["get","getKey","getAll","getAllKeys","count"],b=["put","add","delete","clear"],w=new Map;function x(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!==typeof t)return;if(w.get(t))return w.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,i=b.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!i&&!v.includes(n))return;const s=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let s=t.store;for(var a=arguments.length,o=new Array(a>1?a-1:0),l=1;l<a;l++)o[l-1]=arguments[l];return r&&(s=s.index(o.shift())),(await Promise.all([s[n](...o),i&&t.done]))[0]};return w.set(t,s),s}d=(e=>(0,r.A)((0,r.A)({},e),{},{get:(t,n,r)=>x(t,n)||e.get(t,n,r),has:(t,n)=>!!x(t,n)||e.has(t,n)}))(d)}},t={};function n(r){var i=t[r];if(void 0!==i)return i.exports;var s=t[r]={exports:{}};return e[r].call(s.exports,s,s.exports,n),s.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;n.t=function(r,i){if(1&i&&(r=this(r)),8&i)return r;if("object"===typeof r&&r){if(4&i&&r.__esModule)return r;if(16&i&&"function"===typeof r.then)return r}var s=Object.create(null);n.r(s);var a={};e=e||[null,t({}),t([]),t(t)];for(var o=2&i&&r;("object"==typeof o||"function"==typeof o)&&!~e.indexOf(o);o=t(o))Object.getOwnPropertyNames(o).forEach(e=>a[e]=()=>r[e]);return a.default=()=>r,n.d(s,a),s}})(),n.d=(e,t)=>{for(var r in t)n.o(t,r)&&!n.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},n.f={},n.e=e=>Promise.all(Object.keys(n.f).reduce((t,r)=>(n.f[r](e,t),t),[])),n.u=e=>"static/js/"+e+"."+{260:"6fcc7423",568:"23bb18fc",623:"c59e4993"}[e]+".chunk.js",n.miniCssF=e=>{},n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="my-app:";n.l=(r,i,s,a)=>{if(e[r])e[r].push(i);else{var o,l;if(void 0!==s)for(var c=document.getElementsByTagName("script"),u=0;u<c.length;u++){var h=c[u];if(h.getAttribute("src")==r||h.getAttribute("data-webpack")==t+s){o=h;break}}o||(l=!0,(o=document.createElement("script")).charset="utf-8",o.timeout=120,n.nc&&o.setAttribute("nonce",n.nc),o.setAttribute("data-webpack",t+s),o.src=r),e[r]=[i];var d=(t,n)=>{o.onerror=o.onload=null,clearTimeout(f);var i=e[r];if(delete e[r],o.parentNode&&o.parentNode.removeChild(o),i&&i.forEach(e=>e(n)),t)return t(n)},f=setTimeout(d.bind(null,void 0,{type:"timeout",target:o}),12e4);o.onerror=d.bind(null,o.onerror),o.onload=d.bind(null,o.onload),l&&document.head.appendChild(o)}}})(),n.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.p="/",(()=>{var e={792:0};n.f.j=(t,r)=>{var i=n.o(e,t)?e[t]:void 0;if(0!==i)if(i)r.push(i[2]);else{var s=new Promise((n,r)=>i=e[t]=[n,r]);r.push(i[2]=s);var a=n.p+n.u(t),o=new Error;n.l(a,r=>{if(n.o(e,t)&&(0!==(i=e[t])&&(e[t]=void 0),i)){var s=r&&("load"===r.type?"missing":r.type),a=r&&r.target&&r.target.src;o.message="Loading chunk "+t+" failed.\n("+s+": "+a+")",o.name="ChunkLoadError",o.type=s,o.request=a,i[1](o)}},"chunk-"+t,t)}};var t=(t,r)=>{var i,s,a=r[0],o=r[1],l=r[2],c=0;if(a.some(t=>0!==e[t])){for(i in o)n.o(o,i)&&(n.m[i]=o[i]);if(l)l(n)}for(t&&t(r);c<a.length;c++)s=a[c],n.o(e,s)&&e[s]&&e[s][0](),e[s]=0},r=self.webpackChunkmy_app=self.webpackChunkmy_app||[];r.forEach(t.bind(null,0)),r.push=t.bind(null,r.push.bind(r))})(),(()=>{"use strict";var e,t=n(565),r=n.t(t,2),i=n(501);function s(){return s=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},s.apply(this,arguments)}!function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"}(e||(e={}));const a="popstate";function o(e,t){if(!1===e||null===e||"undefined"===typeof e)throw new Error(t)}function l(e,t){if(!e){"undefined"!==typeof console&&console.warn(t);try{throw new Error(t)}catch(n){}}}function c(e,t){return{usr:e.state,key:e.key,idx:t}}function u(e,t,n,r){return void 0===n&&(n=null),s({pathname:"string"===typeof e?e:e.pathname,search:"",hash:""},"string"===typeof t?d(t):t,{state:n,key:t&&t.key||r||Math.random().toString(36).substr(2,8)})}function h(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&"?"!==n&&(t+="?"===n.charAt(0)?n:"?"+n),r&&"#"!==r&&(t+="#"===r.charAt(0)?r:"#"+r),t}function d(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function f(t,n,r,i){void 0===i&&(i={});let{window:l=document.defaultView,v5Compat:d=!1}=i,f=l.history,p=e.Pop,g=null,m=y();function y(){return(f.state||{idx:null}).idx}function v(){p=e.Pop;let t=y(),n=null==t?null:t-m;m=t,g&&g({action:p,location:w.location,delta:n})}function b(e){let t="null"!==l.location.origin?l.location.origin:l.location.href,n="string"===typeof e?e:h(e);return n=n.replace(/ $/,"%20"),o(t,"No window.location.(origin|href) available to create URL for href: "+n),new URL(n,t)}null==m&&(m=0,f.replaceState(s({},f.state,{idx:m}),""));let w={get action(){return p},get location(){return t(l,f)},listen(e){if(g)throw new Error("A history only accepts one active listener");return l.addEventListener(a,v),g=e,()=>{l.removeEventListener(a,v),g=null}},createHref:e=>n(l,e),createURL:b,encodeLocation(e){let t=b(e);return{pathname:t.pathname,search:t.search,hash:t.hash}},push:function(t,n){p=e.Push;let i=u(w.location,t,n);r&&r(i,t),m=y()+1;let s=c(i,m),a=w.createHref(i);try{f.pushState(s,"",a)}catch(o){if(o instanceof DOMException&&"DataCloneError"===o.name)throw o;l.location.assign(a)}d&&g&&g({action:p,location:w.location,delta:1})},replace:function(t,n){p=e.Replace;let i=u(w.location,t,n);r&&r(i,t),m=y();let s=c(i,m),a=w.createHref(i);f.replaceState(s,"",a),d&&g&&g({action:p,location:w.location,delta:0})},go:e=>f.go(e)};return w}var p;!function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"}(p||(p={}));new Set(["lazy","caseSensitive","path","id","index","children"]);function g(e,t,n){return void 0===n&&(n="/"),m(e,t,n,!1)}function m(e,t,n,r){let i=D(("string"===typeof t?d(t):t).pathname||"/",n);if(null==i)return null;let s=y(e);!function(e){e.sort((e,t)=>e.score!==t.score?t.score-e.score:function(e,t){let n=e.length===t.length&&e.slice(0,-1).every((e,n)=>e===t[n]);return n?e[e.length-1]-t[t.length-1]:0}(e.routesMeta.map(e=>e.childrenIndex),t.routesMeta.map(e=>e.childrenIndex)))}(s);let a=null;for(let o=0;null==a&&o<s.length;++o){let e=A(i);a=I(s[o],e,r)}return a}function y(e,t,n,r){void 0===t&&(t=[]),void 0===n&&(n=[]),void 0===r&&(r="");let i=(e,i,s)=>{let a={relativePath:void 0===s?e.path||"":s,caseSensitive:!0===e.caseSensitive,childrenIndex:i,route:e};a.relativePath.startsWith("/")&&(o(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path "'+r+'" is not valid. An absolute child route path must start with the combined path of all its parent routes.'),a.relativePath=a.relativePath.slice(r.length));let l=j([r,a.relativePath]),c=n.concat(a);e.children&&e.children.length>0&&(o(!0!==e.index,'Index routes must not have child routes. Please remove all child routes from route path "'+l+'".'),y(e.children,t,c,l)),(null!=e.path||e.index)&&t.push({path:l,score:T(l,e.index),routesMeta:c})};return e.forEach((e,t)=>{var n;if(""!==e.path&&null!=(n=e.path)&&n.includes("?"))for(let r of v(e.path))i(e,t,r);else i(e,t)}),t}function v(e){let t=e.split("/");if(0===t.length)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(0===r.length)return i?[s,""]:[s];let a=v(r.join("/")),o=[];return o.push(...a.map(e=>""===e?s:[s,e].join("/"))),i&&o.push(...a),o.map(t=>e.startsWith("/")&&""===t?"/":t)}const b=/^:[\w-]+$/,w=3,x=2,_=1,k=10,S=-2,E=e=>"*"===e;function T(e,t){let n=e.split("/"),r=n.length;return n.some(E)&&(r+=S),t&&(r+=x),n.filter(e=>!E(e)).reduce((e,t)=>e+(b.test(t)?w:""===t?_:k),r)}function I(e,t,n){void 0===n&&(n=!1);let{routesMeta:r}=e,i={},s="/",a=[];for(let o=0;o<r.length;++o){let e=r[o],l=o===r.length-1,c="/"===s?t:t.slice(s.length)||"/",u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:l},c),h=e.route;if(!u&&l&&n&&!r[r.length-1].route.index&&(u=C({path:e.relativePath,caseSensitive:e.caseSensitive,end:!1},c)),!u)return null;Object.assign(i,u.params),a.push({params:i,pathname:j([s,u.pathname]),pathnameBase:O(j([s,u.pathnameBase])),route:h}),"/"!==u.pathnameBase&&(s=j([s,u.pathnameBase]))}return a}function C(e,t){"string"===typeof e&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=function(e,t,n){void 0===t&&(t=!1);void 0===n&&(n=!0);l("*"===e||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were "'+e.replace(/\*$/,"/*")+'" because the `*` character must always follow a `/` in the pattern. To get rid of this warning, please change the route path to "'+e.replace(/\*$/,"/*")+'".');let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(e,t,n)=>(r.push({paramName:t,isOptional:null!=n}),n?"/?([^\\/]+)?":"/([^\\/]+)"));e.endsWith("*")?(r.push({paramName:"*"}),i+="*"===e||"/*"===e?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":""!==e&&"/"!==e&&(i+="(?:(?=\\/|$))");let s=new RegExp(i,t?void 0:"i");return[s,r]}(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],a=s.replace(/(.)\/+$/,"$1"),o=i.slice(1),c=r.reduce((e,t,n)=>{let{paramName:r,isOptional:i}=t;if("*"===r){let e=o[n]||"";a=s.slice(0,s.length-e.length).replace(/(.)\/+$/,"$1")}const l=o[n];return e[r]=i&&!l?void 0:(l||"").replace(/%2F/g,"/"),e},{});return{params:c,pathname:s,pathnameBase:a,pattern:e}}function A(e){try{return e.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(t){return l(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent encoding ('+t+")."),e}}function D(e,t){if("/"===t)return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&"/"!==r?null:e.slice(n)||"/"}function P(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified `to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the `to."+n+'` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.'}function N(e){return e.filter((e,t)=>0===t||e.route.path&&e.route.path.length>0)}function M(e,t){let n=N(e);return t?n.map((e,t)=>t===n.length-1?e.pathname:e.pathnameBase):n.map(e=>e.pathnameBase)}function R(e,t,n,r){let i;void 0===r&&(r=!1),"string"===typeof e?i=d(e):(i=s({},e),o(!i.pathname||!i.pathname.includes("?"),P("?","pathname","search",i)),o(!i.pathname||!i.pathname.includes("#"),P("#","pathname","hash",i)),o(!i.search||!i.search.includes("#"),P("#","search","hash",i)));let a,l=""===e||""===i.pathname,c=l?"/":i.pathname;if(null==c)a=n;else{let e=t.length-1;if(!r&&c.startsWith("..")){let t=c.split("/");for(;".."===t[0];)t.shift(),e-=1;i.pathname=t.join("/")}a=e>=0?t[e]:"/"}let u=function(e,t){void 0===t&&(t="/");let{pathname:n,search:r="",hash:i=""}="string"===typeof e?d(e):e,s=n?n.startsWith("/")?n:function(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(e=>{".."===e?n.length>1&&n.pop():"."!==e&&n.push(e)}),n.length>1?n.join("/"):"/"}(n,t):t;return{pathname:s,search:L(r),hash:F(i)}}(i,a),h=c&&"/"!==c&&c.endsWith("/"),f=(l||"."===c)&&n.endsWith("/");return u.pathname.endsWith("/")||!h&&!f||(u.pathname+="/"),u}const j=e=>e.join("/").replace(/\/\/+/g,"/"),O=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),L=e=>e&&"?"!==e?e.startsWith("?")?e:"?"+e:"",F=e=>e&&"#"!==e?e.startsWith("#")?e:"#"+e:"";Error;function V(e){return null!=e&&"number"===typeof e.status&&"string"===typeof e.statusText&&"boolean"===typeof e.internal&&"data"in e}const z=["post","put","patch","delete"],U=(new Set(z),["get",...z]);new Set(U),new Set([301,302,303,307,308]),new Set([307,308]);Symbol("deferred");function B(){return B=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},B.apply(this,arguments)}const W=t.createContext(null);const q=t.createContext(null);const H=t.createContext(null);const K=t.createContext(null);const G=t.createContext({outlet:null,matches:[],isDataRoute:!1});const Q=t.createContext(null);function Y(){return null!=t.useContext(K)}function Z(){return Y()||o(!1),t.useContext(K).location}function $(e){t.useContext(H).static||t.useLayoutEffect(e)}function J(){let{isDataRoute:e}=t.useContext(G);return e?function(){let{router:e}=le(ae.UseNavigateStable),n=ue(oe.UseNavigateStable),r=t.useRef(!1);$(()=>{r.current=!0});let i=t.useCallback(function(t,i){void 0===i&&(i={}),r.current&&("number"===typeof t?e.navigate(t):e.navigate(t,B({fromRouteId:n},i)))},[e,n]);return i}():function(){Y()||o(!1);let e=t.useContext(W),{basename:n,future:r,navigator:i}=t.useContext(H),{matches:s}=t.useContext(G),{pathname:a}=Z(),l=JSON.stringify(M(s,r.v7_relativeSplatPath)),c=t.useRef(!1);$(()=>{c.current=!0});let u=t.useCallback(function(t,r){if(void 0===r&&(r={}),!c.current)return;if("number"===typeof t)return void i.go(t);let s=R(t,JSON.parse(l),a,"path"===r.relative);null==e&&"/"!==n&&(s.pathname="/"===s.pathname?n:j([n,s.pathname])),(r.replace?i.replace:i.push)(s,r.state,r)},[n,i,l,a,e]);return u}()}function X(e,n){let{relative:r}=void 0===n?{}:n,{future:i}=t.useContext(H),{matches:s}=t.useContext(G),{pathname:a}=Z(),o=JSON.stringify(M(s,i.v7_relativeSplatPath));return t.useMemo(()=>R(e,JSON.parse(o),a,"path"===r),[e,o,a,r])}function ee(n,r,i,s){Y()||o(!1);let{navigator:a}=t.useContext(H),{matches:l}=t.useContext(G),c=l[l.length-1],u=c?c.params:{},h=(c&&c.pathname,c?c.pathnameBase:"/");c&&c.route;let f,p=Z();if(r){var m;let e="string"===typeof r?d(r):r;"/"===h||(null==(m=e.pathname)?void 0:m.startsWith(h))||o(!1),f=e}else f=p;let y=f.pathname||"/",v=y;if("/"!==h){let e=h.replace(/^\//,"").split("/");v="/"+y.replace(/^\//,"").split("/").slice(e.length).join("/")}let b=g(n,{pathname:v});let w=se(b&&b.map(e=>Object.assign({},e,{params:Object.assign({},u,e.params),pathname:j([h,a.encodeLocation?a.encodeLocation(e.pathname).pathname:e.pathname]),pathnameBase:"/"===e.pathnameBase?h:j([h,a.encodeLocation?a.encodeLocation(e.pathnameBase).pathname:e.pathnameBase])})),l,i,s);return r&&w?t.createElement(K.Provider,{value:{location:B({pathname:"/",search:"",hash:"",state:null,key:"default"},f),navigationType:e.Pop}},w):w}function te(){let e=function(){var e;let n=t.useContext(Q),r=ce(oe.UseRouteError),i=ue(oe.UseRouteError);if(void 0!==n)return n;return null==(e=r.errors)?void 0:e[i]}(),n=V(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),r=e instanceof Error?e.stack:null,i="rgba(200,200,200, 0.5)",s={padding:"0.5rem",backgroundColor:i};return t.createElement(t.Fragment,null,t.createElement("h2",null,"Unexpected Application Error!"),t.createElement("h3",{style:{fontStyle:"italic"}},n),r?t.createElement("pre",{style:s},r):null,null)}const ne=t.createElement(te,null);class re extends t.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||"idle"!==t.revalidation&&"idle"===e.revalidation?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:void 0!==e.error?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return void 0!==this.state.error?t.createElement(G.Provider,{value:this.props.routeContext},t.createElement(Q.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function ie(e){let{routeContext:n,match:r,children:i}=e,s=t.useContext(W);return s&&s.static&&s.staticContext&&(r.route.errorElement||r.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=r.route.id),t.createElement(G.Provider,{value:n},i)}function se(e,n,r,i){var s;if(void 0===n&&(n=[]),void 0===r&&(r=null),void 0===i&&(i=null),null==e){var a;if(!r)return null;if(r.errors)e=r.matches;else{if(!(null!=(a=i)&&a.v7_partialHydration&&0===n.length&&!r.initialized&&r.matches.length>0))return null;e=r.matches}}let l=e,c=null==(s=r)?void 0:s.errors;if(null!=c){let e=l.findIndex(e=>e.route.id&&void 0!==(null==c?void 0:c[e.route.id]));e>=0||o(!1),l=l.slice(0,Math.min(l.length,e+1))}let u=!1,h=-1;if(r&&i&&i.v7_partialHydration)for(let t=0;t<l.length;t++){let e=l[t];if((e.route.HydrateFallback||e.route.hydrateFallbackElement)&&(h=t),e.route.id){let{loaderData:t,errors:n}=r,i=e.route.loader&&void 0===t[e.route.id]&&(!n||void 0===n[e.route.id]);if(e.route.lazy||i){u=!0,l=h>=0?l.slice(0,h+1):[l[0]];break}}}return l.reduceRight((e,i,s)=>{let a,o=!1,d=null,f=null;var p;r&&(a=c&&i.route.id?c[i.route.id]:void 0,d=i.route.errorElement||ne,u&&(h<0&&0===s?(p="route-fallback",!1||he[p]||(he[p]=!0),o=!0,f=null):h===s&&(o=!0,f=i.route.hydrateFallbackElement||null)));let g=n.concat(l.slice(0,s+1)),m=()=>{let n;return n=a?d:o?f:i.route.Component?t.createElement(i.route.Component,null):i.route.element?i.route.element:e,t.createElement(ie,{match:i,routeContext:{outlet:e,matches:g,isDataRoute:null!=r},children:n})};return r&&(i.route.ErrorBoundary||i.route.errorElement||0===s)?t.createElement(re,{location:r.location,revalidation:r.revalidation,component:d,error:a,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var ae=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(ae||{}),oe=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(oe||{});function le(e){let n=t.useContext(W);return n||o(!1),n}function ce(e){let n=t.useContext(q);return n||o(!1),n}function ue(e){let n=function(){let e=t.useContext(G);return e||o(!1),e}(),r=n.matches[n.matches.length-1];return r.route.id||o(!1),r.route.id}const he={};function de(e,t){null==e||e.v7_startTransition,void 0===(null==e?void 0:e.v7_relativeSplatPath)&&(!t||t.v7_relativeSplatPath),t&&(t.v7_fetcherPersist,t.v7_normalizeFormMethod,t.v7_partialHydration,t.v7_skipActionErrorRevalidation)}r.startTransition;function fe(e){let{to:n,replace:r,state:i,relative:s}=e;Y()||o(!1);let{future:a,static:l}=t.useContext(H),{matches:c}=t.useContext(G),{pathname:u}=Z(),h=J(),d=R(n,M(c,a.v7_relativeSplatPath),u,"path"===s),f=JSON.stringify(d);return t.useEffect(()=>h(JSON.parse(f),{replace:r,state:i,relative:s}),[h,f,s,r,i]),null}function pe(e){o(!1)}function ge(n){let{basename:r="/",children:i=null,location:s,navigationType:a=e.Pop,navigator:l,static:c=!1,future:u}=n;Y()&&o(!1);let h=r.replace(/^\/*/,"/"),f=t.useMemo(()=>({basename:h,navigator:l,static:c,future:B({v7_relativeSplatPath:!1},u)}),[h,u,l,c]);"string"===typeof s&&(s=d(s));let{pathname:p="/",search:g="",hash:m="",state:y=null,key:v="default"}=s,b=t.useMemo(()=>{let e=D(p,h);return null==e?null:{location:{pathname:e,search:g,hash:m,state:y,key:v},navigationType:a}},[h,p,g,m,y,v,a]);return null==b?null:t.createElement(H.Provider,{value:f},t.createElement(K.Provider,{children:i,value:b}))}function me(e){let{children:t,location:n}=e;return ee(ye(t),n)}new Promise(()=>{});t.Component;function ye(e,n){void 0===n&&(n=[]);let r=[];return t.Children.forEach(e,(e,i)=>{if(!t.isValidElement(e))return;let s=[...n,i];if(e.type===t.Fragment)return void r.push.apply(r,ye(e.props.children,s));e.type!==pe&&o(!1),e.props.index&&e.props.children&&o(!1);let a={id:e.props.id||s.join("-"),caseSensitive:e.props.caseSensitive,element:e.props.element,Component:e.props.Component,index:e.props.index,path:e.props.path,loader:e.props.loader,action:e.props.action,errorElement:e.props.errorElement,ErrorBoundary:e.props.ErrorBoundary,hasErrorBoundary:null!=e.props.ErrorBoundary||null!=e.props.errorElement,shouldRevalidate:e.props.shouldRevalidate,handle:e.props.handle,lazy:e.props.lazy};e.props.children&&(a.children=ye(e.props.children,s)),r.push(a)}),r}var ve=n(396),be=n.t(ve,2);function we(){return we=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},we.apply(this,arguments)}function xe(e,t){if(null==e)return{};var n,r,i={},s=Object.keys(e);for(r=0;r<s.length;r++)n=s[r],t.indexOf(n)>=0||(i[n]=e[n]);return i}new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);const _e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],ke=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"];try{window.__reactRouterVersion="6"}catch(Dm){}const Se=t.createContext({isTransitioning:!1});new Map;const Ee=r.startTransition;be.flushSync,r.useId;function Te(e){let{basename:n,children:r,future:i,window:s}=e,a=t.useRef();var o;null==a.current&&(a.current=(void 0===(o={window:s,v5Compat:!0})&&(o={}),f(function(e,t){let{pathname:n,search:r,hash:i}=e.location;return u("",{pathname:n,search:r,hash:i},t.state&&t.state.usr||null,t.state&&t.state.key||"default")},function(e,t){return"string"===typeof t?t:h(t)},null,o)));let l=a.current,[c,d]=t.useState({action:l.action,location:l.location}),{v7_startTransition:p}=i||{},g=t.useCallback(e=>{p&&Ee?Ee(()=>d(e)):d(e)},[d,p]);return t.useLayoutEffect(()=>l.listen(g),[l,g]),t.useEffect(()=>de(i),[i]),t.createElement(ge,{basename:n,children:r,location:c.location,navigationType:c.action,navigator:l,future:i})}const Ie="undefined"!==typeof window&&"undefined"!==typeof window.document&&"undefined"!==typeof window.document.createElement,Ce=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ae=t.forwardRef(function(e,n){let r,{onClick:i,relative:s,reloadDocument:a,replace:l,state:c,target:u,to:d,preventScrollReset:f,viewTransition:p}=e,g=xe(e,_e),{basename:m}=t.useContext(H),y=!1;if("string"===typeof d&&Ce.test(d)&&(r=d,Ie))try{let e=new URL(window.location.href),t=d.startsWith("//")?new URL(e.protocol+d):new URL(d),n=D(t.pathname,m);t.origin===e.origin&&null!=n?d=n+t.search+t.hash:y=!0}catch(Dm){}let v=function(e,n){let{relative:r}=void 0===n?{}:n;Y()||o(!1);let{basename:i,navigator:s}=t.useContext(H),{hash:a,pathname:l,search:c}=X(e,{relative:r}),u=l;return"/"!==i&&(u="/"===l?i:j([i,l])),s.createHref({pathname:u,search:c,hash:a})}(d,{relative:s}),b=function(e,n){let{target:r,replace:i,state:s,preventScrollReset:a,relative:o,viewTransition:l}=void 0===n?{}:n,c=J(),u=Z(),d=X(e,{relative:o});return t.useCallback(t=>{if(function(e,t){return 0===e.button&&(!t||"_self"===t)&&!function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}(e)}(t,r)){t.preventDefault();let n=void 0!==i?i:h(u)===h(d);c(e,{replace:n,state:s,preventScrollReset:a,relative:o,viewTransition:l})}},[u,c,d,i,s,r,e,a,o,l])}(d,{replace:l,state:c,target:u,preventScrollReset:f,relative:s,viewTransition:p});return t.createElement("a",we({},g,{href:r||v,onClick:y||a?i:function(e){i&&i(e),e.defaultPrevented||b(e)},ref:n,target:u}))});const De=t.forwardRef(function(e,n){let{"aria-current":r="page",caseSensitive:i=!1,className:s="",end:a=!1,style:l,to:c,viewTransition:u,children:h}=e,d=xe(e,ke),f=X(c,{relative:d.relative}),p=Z(),g=t.useContext(q),{navigator:m,basename:y}=t.useContext(H),v=null!=g&&function(e,n){void 0===n&&(n={});let r=t.useContext(Se);null==r&&o(!1);let{basename:i}=Me(Pe.useViewTransitionState),s=X(e,{relative:n.relative});if(!r.isTransitioning)return!1;let a=D(r.currentLocation.pathname,i)||r.currentLocation.pathname,l=D(r.nextLocation.pathname,i)||r.nextLocation.pathname;return null!=C(s.pathname,l)||null!=C(s.pathname,a)}(f)&&!0===u,b=m.encodeLocation?m.encodeLocation(f).pathname:f.pathname,w=p.pathname,x=g&&g.navigation&&g.navigation.location?g.navigation.location.pathname:null;i||(w=w.toLowerCase(),x=x?x.toLowerCase():null,b=b.toLowerCase()),x&&y&&(x=D(x,y)||x);const _="/"!==b&&b.endsWith("/")?b.length-1:b.length;let k,S=w===b||!a&&w.startsWith(b)&&"/"===w.charAt(_),E=null!=x&&(x===b||!a&&x.startsWith(b)&&"/"===x.charAt(b.length)),T={isActive:S,isPending:E,isTransitioning:v},I=S?r:void 0;k="function"===typeof s?s(T):[s,S?"active":null,E?"pending":null,v?"transitioning":null].filter(Boolean).join(" ");let A="function"===typeof l?l(T):l;return t.createElement(Ae,we({},d,{"aria-current":I,className:k,ref:n,style:A,to:c,viewTransition:u}),"function"===typeof h?h(T):h)});var Pe,Ne;function Me(e){let n=t.useContext(W);return n||o(!1),n}(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(Pe||(Pe={})),function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"}(Ne||(Ne={}));var Re=n(304),je=n(788),Oe=n(311);function Le(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n}Object.create;Object.create;"function"===typeof SuppressedError&&SuppressedError;var Fe=n(376);function Ve(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const ze=Ve,Ue=new je.FA("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Be=new Oe.Vy("@firebase/auth");function We(e){if(Be.logLevel<=Oe.$b.ERROR){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Be.error("Auth (".concat(Re.MF,"): ").concat(e),...n)}}function qe(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];throw Ye(e,...n)}function He(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return Ye(e,...n)}function Ke(e,t,n){const r=Object.assign(Object.assign({},ze()),{[t]:n});return new je.FA("auth","Firebase",r).create(t,{appName:e.name})}function Ge(e){return Ke(e,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function Qe(e,t,n){if(!(t instanceof n))throw n.name!==t.constructor.name&&qe(e,"argument-error"),Ke(e,"argument-error","Type of ".concat(t.constructor.name," does not match expected instance.")+"Did you pass a reference from a different Auth SDK?")}function Ye(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if("string"!==typeof e){const t=n[0],r=[...n.slice(1)];return r[0]&&(r[0].appName=e.name),e._errorFactory.create(t,...r)}return Ue.create(e,...n)}function Ze(e,t){if(!e){for(var n=arguments.length,r=new Array(n>2?n-2:0),i=2;i<n;i++)r[i-2]=arguments[i];throw Ye(t,...r)}}function $e(e){const t="INTERNAL ASSERTION FAILED: "+e;throw We(t),new Error(t)}function Je(e,t){e||$e(t)}function Xe(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.href)||""}function et(){return"http:"===tt()||"https:"===tt()}function tt(){var e;return"undefined"!==typeof self&&(null===(e=self.location)||void 0===e?void 0:e.protocol)||null}class nt{constructor(e,t){this.shortDelay=e,this.longDelay=t,Je(t>e,"Short delay should be less than long delay!"),this.isMobile=(0,je.jZ)()||(0,je.lV)()}get(){return"undefined"!==typeof navigator&&navigator&&"onLine"in navigator&&"boolean"===typeof navigator.onLine&&(et()||(0,je.sr)()||"connection"in navigator)&&!navigator.onLine?Math.min(5e3,this.shortDelay):this.isMobile?this.longDelay:this.shortDelay}}function rt(e,t){Je(e.emulator,"Emulator should always be set here");const{url:n}=e.emulator;return t?"".concat(n).concat(t.startsWith("/")?t.slice(1):t):n}class it{static initialize(e,t,n){this.fetchImpl=e,t&&(this.headersImpl=t),n&&(this.responseImpl=n)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!==typeof self&&"fetch"in self?self.fetch:"undefined"!==typeof globalThis&&globalThis.fetch?globalThis.fetch:"undefined"!==typeof fetch?fetch:void $e("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!==typeof self&&"Headers"in self?self.Headers:"undefined"!==typeof globalThis&&globalThis.Headers?globalThis.Headers:"undefined"!==typeof Headers?Headers:void $e("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!==typeof self&&"Response"in self?self.Response:"undefined"!==typeof globalThis&&globalThis.Response?globalThis.Response:"undefined"!==typeof Response?Response:void $e("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const st={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},at=new nt(3e4,6e4);function ot(e,t){return e.tenantId&&!t.tenantId?Object.assign(Object.assign({},t),{tenantId:e.tenantId}):t}async function lt(e,t,n,r){return ct(e,arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},async()=>{let i={},s={};r&&("GET"===t?s=r:i={body:JSON.stringify(r)});const a=(0,je.Am)(Object.assign({key:e.config.apiKey},s)).slice(1),o=await e._getAdditionalHeaders();o["Content-Type"]="application/json",e.languageCode&&(o["X-Firebase-Locale"]=e.languageCode);const l=Object.assign({method:t,headers:o},i);return(0,je.c1)()||(l.referrerPolicy="no-referrer"),it.fetch()(ht(e,e.config.apiHost,n,a),l)})}async function ct(e,t,n){e._canInitEmulator=!1;const r=Object.assign(Object.assign({},st),t);try{const t=new ft(e),i=await Promise.race([n(),t.promise]);t.clearNetworkTimeout();const s=await i.json();if("needConfirmation"in s)throw pt(e,"account-exists-with-different-credential",s);if(i.ok&&!("errorMessage"in s))return s;{const t=i.ok?s.errorMessage:s.error.message,[n,a]=t.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===n)throw pt(e,"credential-already-in-use",s);if("EMAIL_EXISTS"===n)throw pt(e,"email-already-in-use",s);if("USER_DISABLED"===n)throw pt(e,"user-disabled",s);const o=r[n]||n.toLowerCase().replace(/[_\s]+/g,"-");if(a)throw Ke(e,o,a);qe(e,o)}}catch(Dm){if(Dm instanceof je.g)throw Dm;qe(e,"network-request-failed",{message:String(Dm)})}}async function ut(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};const s=await lt(e,t,n,r,i);return"mfaPendingCredential"in s&&qe(e,"multi-factor-auth-required",{_serverResponse:s}),s}function ht(e,t,n,r){const i="".concat(t).concat(n,"?").concat(r);return e.config.emulator?rt(e.config,i):"".concat(e.config.apiScheme,"://").concat(i)}function dt(e){switch(e){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class ft{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((e,t)=>{this.timer=setTimeout(()=>t(He(this.auth,"network-request-failed")),at.get())})}}function pt(e,t,n){const r={appName:e.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=He(e,t,r);return i.customData._tokenResponse=n,i}function gt(e){return void 0!==e&&void 0!==e.enterprise}class mt{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],void 0===e.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||0===this.recaptchaEnforcementState.length)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return dt(t.enforcementState);return null}isProviderEnabled(e){return"ENFORCE"===this.getProviderEnforcementState(e)||"AUDIT"===this.getProviderEnforcementState(e)}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function yt(e,t){return lt(e,"GET","/v2/recaptchaConfig",ot(e,t))}async function vt(e,t){return lt(e,"POST","/v1/accounts:lookup",t)}function bt(e){if(e)try{const t=new Date(Number(e));if(!isNaN(t.getTime()))return t.toUTCString()}catch(Dm){}}function wt(e){return 1e3*Number(e)}function xt(e){const[t,n,r]=e.split(".");if(void 0===t||void 0===n||void 0===r)return We("JWT malformed, contained fewer than 3 sections"),null;try{const e=(0,je.u)(n);return e?JSON.parse(e):(We("Failed to decode base64 JWT payload"),null)}catch(Dm){return We("Caught error parsing JWT payload as JSON",null===Dm||void 0===Dm?void 0:Dm.toString()),null}}function _t(e){const t=xt(e);return Ze(t,"internal-error"),Ze("undefined"!==typeof t.exp,"internal-error"),Ze("undefined"!==typeof t.iat,"internal-error"),Number(t.exp)-Number(t.iat)}async function kt(e,t){if(arguments.length>2&&void 0!==arguments[2]&&arguments[2])return t;try{return await t}catch(Dm){throw Dm instanceof je.g&&function(e){let{code:t}=e;return t==="auth/".concat("user-disabled")||t==="auth/".concat("user-token-expired")}(Dm)&&e.auth.currentUser===e&&await e.auth.signOut(),Dm}}class St{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const e=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),e}{this.errorBackoff=3e4;const e=(null!==(t=this.user.stsTokenManager.expirationTime)&&void 0!==t?t:0)-Date.now()-3e5;return Math.max(0,e)}}schedule(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(Dm){return void((null===Dm||void 0===Dm?void 0:Dm.code)==="auth/".concat("network-request-failed")&&this.schedule(!0))}this.schedule()}}class Et{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=bt(this.lastLoginAt),this.creationTime=bt(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}async function Tt(e){var t;const n=e.auth,r=await e.getIdToken(),i=await kt(e,vt(n,{idToken:r}));Ze(null===i||void 0===i?void 0:i.users.length,n,"internal-error");const s=i.users[0];e._notifyReloadListener(s);const a=(null===(t=s.providerUserInfo)||void 0===t?void 0:t.length)?It(s.providerUserInfo):[],o=(l=e.providerData,c=a,[...l.filter(e=>!c.some(t=>t.providerId===e.providerId)),...c]);var l,c;const u=e.isAnonymous,h=!(e.email&&s.passwordHash)&&!(null===o||void 0===o?void 0:o.length),d=!!u&&h,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:o,metadata:new Et(s.createdAt,s.lastLoginAt),isAnonymous:d};Object.assign(e,f)}function It(e){return e.map(e=>{var{providerId:t}=e,n=Le(e,["providerId"]);return{providerId:t,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}})}class Ct{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ze(e.idToken,"internal-error"),Ze("undefined"!==typeof e.idToken,"internal-error"),Ze("undefined"!==typeof e.refreshToken,"internal-error");const t="expiresIn"in e&&"undefined"!==typeof e.expiresIn?Number(e.expiresIn):_t(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ze(0!==e.length,"internal-error");const t=_t(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e){return arguments.length>1&&void 0!==arguments[1]&&arguments[1]||!this.accessToken||this.isExpired?(Ze(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null):this.accessToken}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:n,refreshToken:r,expiresIn:i}=await async function(e,t){const n=await ct(e,{},async()=>{const n=(0,je.Am)({grant_type:"refresh_token",refresh_token:t}).slice(1),{tokenApiHost:r,apiKey:i}=e.config,s=ht(e,r,"/v1/token","key=".concat(i)),a=await e._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",it.fetch()(s,{method:"POST",headers:a,body:n})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}(e,t);this.updateTokensAndExpiration(n,r,Number(i))}updateTokensAndExpiration(e,t,n){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+1e3*n}static fromJSON(e,t){const{refreshToken:n,accessToken:r,expirationTime:i}=t,s=new Ct;return n&&(Ze("string"===typeof n,"internal-error",{appName:e}),s.refreshToken=n),r&&(Ze("string"===typeof r,"internal-error",{appName:e}),s.accessToken=r),i&&(Ze("number"===typeof i,"internal-error",{appName:e}),s.expirationTime=i),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ct,this.toJSON())}_performRefresh(){return $e("not implemented")}}function At(e,t){Ze("string"===typeof e||"undefined"===typeof e,"internal-error",{appName:t})}class Dt{constructor(e){var{uid:t,auth:n,stsTokenManager:r}=e,i=Le(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new St(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Et(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const t=await kt(this,this.stsTokenManager.getToken(this.auth,e));return Ze(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return async function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=(0,je.Ku)(e),r=await n.getIdToken(t),i=xt(r);Ze(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s="object"===typeof i.firebase?i.firebase:void 0,a=null===s||void 0===s?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:bt(wt(i.auth_time)),issuedAtTime:bt(wt(i.iat)),expirationTime:bt(wt(i.exp)),signInProvider:a||null,signInSecondFactor:(null===s||void 0===s?void 0:s.sign_in_second_factor)||null}}(this,e)}reload(){return async function(e){const t=(0,je.Ku)(e);await Tt(t),await t.auth._persistUserIfCurrent(t),t.auth._notifyListenersIfCurrent(t)}(this)}_assign(e){this!==e&&(Ze(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(e=>Object.assign({},e)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Dt(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ze(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),n=!0),t&&await Tt(this),await this.auth._persistUserIfCurrent(this),n&&this.auth._notifyListenersIfCurrent(this)}async delete(){if((0,Re.xZ)(this.auth.app))return Promise.reject(Ge(this.auth));const e=await this.getIdToken();return await kt(this,async function(e,t){return lt(e,"POST","/v1/accounts:delete",t)}(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var n,r,i,s,a,o,l,c;const u=null!==(n=t.displayName)&&void 0!==n?n:void 0,h=null!==(r=t.email)&&void 0!==r?r:void 0,d=null!==(i=t.phoneNumber)&&void 0!==i?i:void 0,f=null!==(s=t.photoURL)&&void 0!==s?s:void 0,p=null!==(a=t.tenantId)&&void 0!==a?a:void 0,g=null!==(o=t._redirectEventId)&&void 0!==o?o:void 0,m=null!==(l=t.createdAt)&&void 0!==l?l:void 0,y=null!==(c=t.lastLoginAt)&&void 0!==c?c:void 0,{uid:v,emailVerified:b,isAnonymous:w,providerData:x,stsTokenManager:_}=t;Ze(v&&_,e,"internal-error");const k=Ct.fromJSON(this.name,_);Ze("string"===typeof v,e,"internal-error"),At(u,e.name),At(h,e.name),Ze("boolean"===typeof b,e,"internal-error"),Ze("boolean"===typeof w,e,"internal-error"),At(d,e.name),At(f,e.name),At(p,e.name),At(g,e.name),At(m,e.name),At(y,e.name);const S=new Dt({uid:v,auth:e,email:h,emailVerified:b,displayName:u,isAnonymous:w,photoURL:f,phoneNumber:d,tenantId:p,stsTokenManager:k,createdAt:m,lastLoginAt:y});return x&&Array.isArray(x)&&(S.providerData=x.map(e=>Object.assign({},e))),g&&(S._redirectEventId=g),S}static async _fromIdTokenResponse(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=new Ct;r.updateFromServerResponse(t);const i=new Dt({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:n});return await Tt(i),i}static async _fromGetAccountInfoResponse(e,t,n){const r=t.users[0];Ze(void 0!==r.localId,"internal-error");const i=void 0!==r.providerUserInfo?It(r.providerUserInfo):[],s=!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length),a=new Ct;a.updateFromIdToken(n);const o=new Dt({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:s}),l={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:i,metadata:new Et(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!(null===i||void 0===i?void 0:i.length)};return Object.assign(o,l),o}}const Pt=new Map;function Nt(e){Je(e instanceof Function,"Expected a class definition");let t=Pt.get(e);return t?(Je(t instanceof e,"Instance stored in cache mismatched with class"),t):(t=new e,Pt.set(e,t),t)}class Mt{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return void 0===t?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}Mt.type="NONE";const Rt=Mt;function jt(e,t,n){return"firebase".concat(":",e,":").concat(t,":").concat(n)}class Ot{constructor(e,t,n){this.persistence=e,this.auth=t,this.userKey=n;const{config:r,name:i}=this.auth;this.fullUserKey=jt(this.userKey,r.apiKey,i),this.fullPersistenceKey=jt("persistence",r.apiKey,i),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Dt._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();return await this.removeCurrentUser(),this.persistence=e,t?this.setCurrentUser(t):void 0}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"authUser";if(!t.length)return new Ot(Nt(Rt),e,n);const r=(await Promise.all(t.map(async e=>{if(await e._isAvailable())return e}))).filter(e=>e);let i=r[0]||Nt(Rt);const s=jt(n,e.config.apiKey,e.name);let a=null;for(const c of t)try{const t=await c._get(s);if(t){const n=Dt._fromJSON(e,t);c!==i&&(a=n),i=c;break}}catch(l){}const o=r.filter(e=>e._shouldAllowMigration);return i._shouldAllowMigration&&o.length?(i=o[0],a&&await i._set(s,a.toJSON()),await Promise.all(t.map(async e=>{if(e!==i)try{await e._remove(s)}catch(l){}})),new Ot(i,e,n)):new Ot(i,e,n)}}function Lt(e){const t=e.toLowerCase();if(t.includes("opera/")||t.includes("opr/")||t.includes("opios/"))return"Opera";if(Ut(t))return"IEMobile";if(t.includes("msie")||t.includes("trident/"))return"IE";if(t.includes("edge/"))return"Edge";if(Ft(t))return"Firefox";if(t.includes("silk/"))return"Silk";if(Wt(t))return"Blackberry";if(qt(t))return"Webos";if(Vt(t))return"Safari";if((t.includes("chrome/")||zt(t))&&!t.includes("edge/"))return"Chrome";if(Bt(t))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,n=e.match(t);if(2===(null===n||void 0===n?void 0:n.length))return n[1]}return"Other"}function Ft(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/firefox\//i.test(e)}function Vt(){const e=(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)()).toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function zt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/crios\//i.test(e)}function Ut(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/iemobile/i.test(e)}function Bt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/android/i.test(e)}function Wt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/blackberry/i.test(e)}function qt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/webos/i.test(e)}function Ht(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return/iphone|ipad|ipod/i.test(e)||/macintosh/i.test(e)&&/mobile/i.test(e)}function Kt(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)();return Ht(e)||Bt(e)||qt(e)||Wt(e)||/windows phone/i.test(e)||Ut(e)}function Gt(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];switch(e){case"Browser":t=Lt((0,je.ZQ)());break;case"Worker":t="".concat(Lt((0,je.ZQ)()),"-").concat(e);break;default:t=e}const r=n.length?n.join(","):"FirebaseCore-web";return"".concat(t,"/","JsCore","/").concat(Re.MF,"/").concat(r)}class Qt{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const n=t=>new Promise((n,r)=>{try{n(e(t))}catch(Dm){r(Dm)}});n.onAbort=t,this.queue.push(n);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const n of this.queue)await n(e),n.onAbort&&t.push(n.onAbort)}catch(Dm){t.reverse();for(const r of t)try{r()}catch(n){}throw this.auth._errorFactory.create("login-blocked",{originalMessage:null===Dm||void 0===Dm?void 0:Dm.message})}}}class Yt{constructor(e){var t,n,r,i;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=null!==(t=s.minPasswordLength)&&void 0!==t?t:6,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),void 0!==s.containsLowercaseCharacter&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),void 0!==s.containsUppercaseCharacter&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),void 0!==s.containsNumericCharacter&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),void 0!==s.containsNonAlphanumericCharacter&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,"ENFORCEMENT_STATE_UNSPECIFIED"===this.enforcementState&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=null!==(r=null===(n=e.allowedNonAlphanumericCharacters)||void 0===n?void 0:n.join(""))&&void 0!==r?r:"",this.forceUpgradeOnSignin=null!==(i=e.forceUpgradeOnSignin)&&void 0!==i&&i,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,n,r,i,s,a;const o={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,o),this.validatePasswordCharacterOptions(e,o),o.isValid&&(o.isValid=null===(t=o.meetsMinPasswordLength)||void 0===t||t),o.isValid&&(o.isValid=null===(n=o.meetsMaxPasswordLength)||void 0===n||n),o.isValid&&(o.isValid=null===(r=o.containsLowercaseLetter)||void 0===r||r),o.isValid&&(o.isValid=null===(i=o.containsUppercaseLetter)||void 0===i||i),o.isValid&&(o.isValid=null===(s=o.containsNumericCharacter)||void 0===s||s),o.isValid&&(o.isValid=null===(a=o.containsNonAlphanumericCharacter)||void 0===a||a),o}validatePasswordLengthOptions(e,t){const n=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;n&&(t.meetsMinPasswordLength=e.length>=n),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){let n;this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);for(let r=0;r<e.length;r++)n=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,n>="a"&&n<="z",n>="A"&&n<="Z",n>="0"&&n<="9",this.allowedNonAlphanumericCharacters.includes(n))}updatePasswordCharacterOptionsStatuses(e,t,n,r,i){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=n)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=i))}}class Zt{constructor(e,t,n,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=n,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Jt(this),this.idTokenSubscription=new Jt(this),this.beforeStateQueue=new Qt(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ue,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Nt(t)),this._initializationPromise=this.queue(async()=>{var n,r;if(!this._deleted&&(this.persistenceManager=await Ot.create(this,e),!this._deleted)){if(null===(n=this._popupRedirectResolver)||void 0===n?void 0:n._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch(Dm){}await this.initializeCurrentUser(t),this.lastNotifiedUid=(null===(r=this.currentUser)||void 0===r?void 0:r.uid)||null,this._deleted||(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();return this.currentUser||e?this.currentUser&&e&&this.currentUser.uid===e.uid?(this._currentUser._assign(e),void await this.currentUser.getIdToken()):void await this._updateCurrentUser(e,!0):void 0}async initializeCurrentUserFromIdToken(e){try{const t=await vt(this,{idToken:e}),n=await Dt._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(n)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if((0,Re.xZ)(this.app)){const e=this.app.settings.authIdToken;return e?new Promise(t=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(e).then(t,t))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const n=null===(t=this.redirectUser)||void 0===t?void 0:t._redirectEventId,s=null===r||void 0===r?void 0:r._redirectEventId,a=await this.tryRedirectSignIn(e);n&&n!==s||!(null===a||void 0===a?void 0:a.user)||(r=a.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(Dm){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(Dm))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ze(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch(Dm){await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await Tt(e)}catch(Dm){if((null===Dm||void 0===Dm?void 0:Dm.code)!=="auth/".concat("network-request-failed"))return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=function(){if("undefined"===typeof navigator)return null;const e=navigator;return e.languages&&e.languages[0]||e.language||null}()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if((0,Re.xZ)(this.app))return Promise.reject(Ge(this));const t=e?(0,je.Ku)(e):null;return t&&Ze(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this._deleted)return e&&Ze(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return(0,Re.xZ)(this.app)?Promise.reject(Ge(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return(0,Re.xZ)(this.app)?Promise.reject(Ge(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Nt(e))})}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return null===this.tenantId?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await async function(e){return lt(e,"GET","/v2/passwordPolicy",ot(e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}))}(this),t=new Yt(e);null===this.tenantId?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new je.FA("auth","Firebase",e())}onAuthStateChanged(e,t,n){return this.registerStateListener(this.authStateSubscription,e,t,n)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,n){return this.registerStateListener(this.idTokenSubscription,e,t,n)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const n=this.onAuthStateChanged(()=>{n(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:await this.currentUser.getIdToken()};null!=this.tenantId&&(t.tenantId=this.tenantId),await async function(e,t){return lt(e,"POST","/v2/accounts:revokeToken",ot(e,t))}(this,t)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(e=this._currentUser)||void 0===e?void 0:e.toJSON()}}async _setRedirectUser(e,t){const n=await this.getOrInitRedirectPersistenceManager(t);return null===e?n.removeCurrentUser():n.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Nt(e)||this._popupRedirectResolver;Ze(t,this,"argument-error"),this.redirectPersistenceManager=await Ot.create(this,[Nt(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,n;return this._isInitialized&&await this.queue(async()=>{}),(null===(t=this._currentUser)||void 0===t?void 0:t._redirectEventId)===e?this._currentUser:(null===(n=this.redirectUser)||void 0===n?void 0:n._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return"".concat(this.config.authDomain,":").concat(this.config.apiKey,":").concat(this.name)}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const n=null!==(t=null===(e=this.currentUser)||void 0===e?void 0:e.uid)&&void 0!==t?t:null;this.lastNotifiedUid!==n&&(this.lastNotifiedUid=n,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,n,r){if(this._deleted)return()=>{};const i="function"===typeof t?t:t.next.bind(t);let s=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ze(a,this,"internal-error"),a.then(()=>{s||i(this.currentUser)}),"function"===typeof t){const i=e.addObserver(t,n,r);return()=>{s=!0,i()}}{const n=e.addObserver(t);return()=>{s=!0,n()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ze(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){e&&!this.frameworks.includes(e)&&(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Gt(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const n=await(null===(e=this.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getHeartbeatsHeader());n&&(t["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await(null===(e=this.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===e?void 0:e.getToken());return(null===t||void 0===t?void 0:t.error)&&function(e){if(Be.logLevel<=Oe.$b.WARN){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];Be.warn("Auth (".concat(Re.MF,"): ").concat(e),...n)}}("Error while retrieving App Check token: ".concat(t.error)),null===t||void 0===t?void 0:t.token}}function $t(e){return(0,je.Ku)(e)}class Jt{constructor(e){this.auth=e,this.observer=null,this.addObserver=(0,je.tD)(e=>this.observer=e)}get next(){return Ze(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}let Xt={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function en(e){return Xt.loadJS(e)}function tn(e){return"__".concat(e).concat(Math.floor(1e6*Math.random()))}class nn{constructor(){this.enterprise=new rn}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class rn{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const sn="NO_RECAPTCHA";class an{constructor(e){this.type="recaptcha-enterprise",this.auth=$t(e)}async verify(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"verify",t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];function n(t,n,r){const i=window.grecaptcha;gt(i)?i.enterprise.ready(()=>{i.enterprise.execute(t,{action:e}).then(e=>{n(e)}).catch(()=>{n(sn)})}):r(Error("No reCAPTCHA enterprise script loaded."))}if(this.auth.settings.appVerificationDisabledForTesting){return(new nn).execute("siteKey",{action:"verify"})}return new Promise((e,r)=>{(async function(e){if(!t){if(null==e.tenantId&&null!=e._agentRecaptchaConfig)return e._agentRecaptchaConfig.siteKey;if(null!=e.tenantId&&void 0!==e._tenantRecaptchaConfigs[e.tenantId])return e._tenantRecaptchaConfigs[e.tenantId].siteKey}return new Promise(async(t,n)=>{yt(e,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(r=>{if(void 0!==r.recaptchaKey){const n=new mt(r);return null==e.tenantId?e._agentRecaptchaConfig=n:e._tenantRecaptchaConfigs[e.tenantId]=n,t(n.siteKey)}n(new Error("recaptcha Enterprise site key undefined"))}).catch(e=>{n(e)})})})(this.auth).then(i=>{if(!t&&gt(window.grecaptcha))n(i,e,r);else{if("undefined"===typeof window)return void r(new Error("RecaptchaVerifier is only supported in browser"));let t=Xt.recaptchaEnterpriseScript;0!==t.length&&(t+=i),en(t).then(()=>{n(i,e,r)}).catch(e=>{r(e)})}}).catch(e=>{r(e)})})}}async function on(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];const s=new an(e);let a;if(i)a=sn;else try{a=await s.verify(n)}catch(l){a=await s.verify(n,!0)}const o=Object.assign({},t);if("mfaSmsEnrollment"===n||"mfaSmsSignIn"===n){if("phoneEnrollmentInfo"in o){const e=o.phoneEnrollmentInfo.phoneNumber,t=o.phoneEnrollmentInfo.recaptchaToken;Object.assign(o,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:t,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in o){const e=o.phoneSignInInfo.recaptchaToken;Object.assign(o,{phoneSignInInfo:{recaptchaToken:e,captchaResponse:a,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return o}return r?Object.assign(o,{captchaResp:a}):Object.assign(o,{captchaResponse:a}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}async function ln(e,t,n,r,i){var s,a;if("EMAIL_PASSWORD_PROVIDER"===i){if(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const i=await on(e,t,n,"getOobCode"===n);return r(e,i)}return r(e,t).catch(async i=>{if(i.code==="auth/".concat("missing-recaptcha-token")){console.log("".concat(n," is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow."));const i=await on(e,t,n,"getOobCode"===n);return r(e,i)}return Promise.reject(i)})}if("PHONE_PROVIDER"===i){if(null===(a=e._getRecaptchaConfig())||void 0===a?void 0:a.isProviderEnabled("PHONE_PROVIDER")){const i=await on(e,t,n);return r(e,i).catch(async i=>{var s;if("AUDIT"===(null===(s=e._getRecaptchaConfig())||void 0===s?void 0:s.getProviderEnforcementState("PHONE_PROVIDER"))&&(i.code==="auth/".concat("missing-recaptcha-token")||i.code==="auth/".concat("invalid-app-credential"))){console.log("Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ".concat(n," flow."));const i=await on(e,t,n,!1,!0);return r(e,i)}return Promise.reject(i)})}{const i=await on(e,t,n,!1,!0);return r(e,i)}}return Promise.reject(i+" provider is not supported.")}async function cn(e){const t=$t(e),n=await yt(t,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),r=new mt(n);if(null==t.tenantId?t._agentRecaptchaConfig=r:t._tenantRecaptchaConfigs[t.tenantId]=r,r.isAnyProviderEnabled()){new an(t).verify()}}function un(e,t,n){const r=$t(e);Ze(r._canInitEmulator,r,"emulator-config-failed"),Ze(/^https?:\/\//.test(t),r,"invalid-emulator-scheme");const i=!!(null===n||void 0===n?void 0:n.disableWarnings),s=hn(t),{host:a,port:o}=function(e){const t=hn(e),n=/(\/\/)?([^?#/]+)/.exec(e.substr(t.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const e=i[1];return{host:e,port:dn(r.substr(e.length+1))}}{const[e,t]=r.split(":");return{host:e,port:dn(t)}}}(t),l=null===o?"":":".concat(o);r.config.emulator={url:"".concat(s,"//").concat(a).concat(l,"/")},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:a,port:o,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||function(){function e(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}"undefined"!==typeof console&&"function"===typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials.");"undefined"!==typeof window&&"undefined"!==typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",e):e())}()}function hn(e){const t=e.indexOf(":");return t<0?"":e.substr(0,t+1)}function dn(e){if(!e)return null;const t=Number(e);return isNaN(t)?null:t}class fn{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return $e("not implemented")}_getIdTokenResponse(e){return $e("not implemented")}_linkToIdToken(e,t){return $e("not implemented")}_getReauthenticationResolver(e){return $e("not implemented")}}async function pn(e,t){return lt(e,"POST","/v1/accounts:signUp",t)}async function gn(e,t){return ut(e,"POST","/v1/accounts:signInWithPassword",ot(e,t))}class mn extends fn{constructor(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;super("password",n),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new mn(e,t,"password")}static _fromEmailAndCode(e,t){return new mn(e,t,"emailLink",arguments.length>2&&void 0!==arguments[2]?arguments[2]:null)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e;if((null===t||void 0===t?void 0:t.email)&&(null===t||void 0===t?void 0:t.password)){if("password"===t.signInMethod)return this._fromEmailAndPassword(t.email,t.password);if("emailLink"===t.signInMethod)return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":return ln(e,{returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signInWithPassword",gn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithEmailLink",ot(e,t))}(e,{email:this._email,oobCode:this._password});default:qe(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":return ln(e,{idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pn,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithEmailLink",ot(e,t))}(e,{idToken:t,email:this._email,oobCode:this._password});default:qe(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}async function yn(e,t){return ut(e,"POST","/v1/accounts:signInWithIdp",ot(e,t))}class vn extends fn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new vn(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):qe("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t="string"===typeof e?JSON.parse(e):e,{providerId:n,signInMethod:r}=t,i=Le(t,["providerId","signInMethod"]);if(!n||!r)return null;const s=new vn(n,r);return s.idToken=i.idToken||void 0,s.accessToken=i.accessToken||void 0,s.secret=i.secret,s.nonce=i.nonce,s.pendingToken=i.pendingToken||null,s}_getIdTokenResponse(e){return yn(e,this.buildRequest())}_linkToIdToken(e,t){const n=this.buildRequest();return n.idToken=t,yn(e,n)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,yn(e,t)}buildRequest(){const e={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=(0,je.Am)(t)}return e}}async function bn(e,t){return lt(e,"POST","/v1/accounts:sendVerificationCode",ot(e,t))}const wn={USER_NOT_FOUND:"user-not-found"};class xn extends fn{constructor(e){super("phone","phone"),this.params=e}static _fromVerification(e,t){return new xn({verificationId:e,verificationCode:t})}static _fromTokenResponse(e,t){return new xn({phoneNumber:e,temporaryProof:t})}_getIdTokenResponse(e){return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithPhoneNumber",ot(e,t))}(e,this._makeVerificationRequest())}_linkToIdToken(e,t){return async function(e,t){const n=await ut(e,"POST","/v1/accounts:signInWithPhoneNumber",ot(e,t));if(n.temporaryProof)throw pt(e,"account-exists-with-different-credential",n);return n}(e,Object.assign({idToken:t},this._makeVerificationRequest()))}_getReauthenticationResolver(e){return async function(e,t){return ut(e,"POST","/v1/accounts:signInWithPhoneNumber",ot(e,Object.assign(Object.assign({},t),{operation:"REAUTH"})),wn)}(e,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:e,phoneNumber:t,verificationId:n,verificationCode:r}=this.params;return e&&t?{temporaryProof:e,phoneNumber:t}:{sessionInfo:n,code:r}}toJSON(){const e={providerId:this.providerId};return this.params.phoneNumber&&(e.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(e.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(e.verificationCode=this.params.verificationCode),this.params.verificationId&&(e.verificationId=this.params.verificationId),e}static fromJSON(e){"string"===typeof e&&(e=JSON.parse(e));const{verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}=e;return n||t||r||i?new xn({verificationId:t,verificationCode:n,phoneNumber:r,temporaryProof:i}):null}}class _n{constructor(e){var t,n,r,i,s,a;const o=(0,je.I9)((0,je.hp)(e)),l=null!==(t=o.apiKey)&&void 0!==t?t:null,c=null!==(n=o.oobCode)&&void 0!==n?n:null,u=function(e){switch(e){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(r=o.mode)&&void 0!==r?r:null);Ze(l&&c&&u,"argument-error"),this.apiKey=l,this.operation=u,this.code=c,this.continueUrl=null!==(i=o.continueUrl)&&void 0!==i?i:null,this.languageCode=null!==(s=o.languageCode)&&void 0!==s?s:null,this.tenantId=null!==(a=o.tenantId)&&void 0!==a?a:null}static parseLink(e){const t=function(e){const t=(0,je.I9)((0,je.hp)(e)).link,n=t?(0,je.I9)((0,je.hp)(t)).deep_link_id:null,r=(0,je.I9)((0,je.hp)(e)).deep_link_id;return(r?(0,je.I9)((0,je.hp)(r)).link:null)||r||n||t||e}(e);try{return new _n(t)}catch(n){return null}}}class kn{constructor(){this.providerId=kn.PROVIDER_ID}static credential(e,t){return mn._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const n=_n.parseLink(t);return Ze(n,"argument-error"),mn._fromEmailAndCode(e,n.code,n.tenantId)}}kn.PROVIDER_ID="password",kn.EMAIL_PASSWORD_SIGN_IN_METHOD="password",kn.EMAIL_LINK_SIGN_IN_METHOD="emailLink";class Sn{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}class En extends Sn{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}class Tn extends En{constructor(){super("facebook.com")}static credential(e){return vn._fromParams({providerId:Tn.PROVIDER_ID,signInMethod:Tn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Tn.credentialFromTaggedObject(e)}static credentialFromError(e){return Tn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Tn.credential(t.oauthAccessToken)}catch(n){return null}}}Tn.FACEBOOK_SIGN_IN_METHOD="facebook.com",Tn.PROVIDER_ID="facebook.com";class In extends En{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return vn._fromParams({providerId:In.PROVIDER_ID,signInMethod:In.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return In.credentialFromTaggedObject(e)}static credentialFromError(e){return In.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthIdToken:n,oauthAccessToken:r}=t;if(!n&&!r)return null;try{return In.credential(n,r)}catch(i){return null}}}In.GOOGLE_SIGN_IN_METHOD="google.com",In.PROVIDER_ID="google.com";class Cn extends En{constructor(){super("github.com")}static credential(e){return vn._fromParams({providerId:Cn.PROVIDER_ID,signInMethod:Cn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Cn.credentialFromTaggedObject(e)}static credentialFromError(e){return Cn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t||!("oauthAccessToken"in t))return null;if(!t.oauthAccessToken)return null;try{return Cn.credential(t.oauthAccessToken)}catch(n){return null}}}Cn.GITHUB_SIGN_IN_METHOD="github.com",Cn.PROVIDER_ID="github.com";class An extends En{constructor(){super("twitter.com")}static credential(e,t){return vn._fromParams({providerId:An.PROVIDER_ID,signInMethod:An.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return An.credentialFromTaggedObject(e)}static credentialFromError(e){return An.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=t;if(!n||!r)return null;try{return An.credential(n,r)}catch(i){return null}}}An.TWITTER_SIGN_IN_METHOD="twitter.com",An.PROVIDER_ID="twitter.com";class Dn{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];const i=await Dt._fromIdTokenResponse(e,n,r),s=Pn(n);return new Dn({user:i,providerId:s,_tokenResponse:n,operationType:t})}static async _forOperation(e,t,n){await e._updateTokensIfNecessary(n,!0);const r=Pn(n);return new Dn({user:e,providerId:r,_tokenResponse:n,operationType:t})}}function Pn(e){return e.providerId?e.providerId:"phoneNumber"in e?"phone":null}class Nn extends je.g{constructor(e,t,n,r){var i;super(t.code,t.message),this.operationType=n,this.user=r,Object.setPrototypeOf(this,Nn.prototype),this.customData={appName:e.name,tenantId:null!==(i=e.tenantId)&&void 0!==i?i:void 0,_serverResponse:t.customData._serverResponse,operationType:n}}static _fromErrorAndOperation(e,t,n,r){return new Nn(e,t,n,r)}}function Mn(e,t,n,r){return("reauthenticate"===t?n._getReauthenticationResolver(e):n._getIdTokenResponse(e)).catch(n=>{if(n.code==="auth/".concat("multi-factor-auth-required"))throw Nn._fromErrorAndOperation(e,n,t,r);throw n})}async function Rn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const r=await kt(e,t._linkToIdToken(e.auth,await e.getIdToken()),n);return Dn._forOperation(e,"link",r)}async function jn(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const{auth:r}=e;if((0,Re.xZ)(r.app))return Promise.reject(Ge(r));const i="reauthenticate";try{const s=await kt(e,Mn(r,i,t,e),n);Ze(s.idToken,r,"internal-error");const a=xt(s.idToken);Ze(a,r,"internal-error");const{sub:o}=a;return Ze(e.uid===o,r,"user-mismatch"),Dn._forOperation(e,i,s)}catch(Dm){throw(null===Dm||void 0===Dm?void 0:Dm.code)==="auth/".concat("user-not-found")&&qe(r,"user-mismatch"),Dm}}async function On(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Re.xZ)(e.app))return Promise.reject(Ge(e));const r="signIn",i=await Mn(e,r,t),s=await Dn._fromIdTokenResponse(e,r,i);return n||await e._updateCurrentUser(s.user),s}async function Ln(e,t){return On($t(e),t)}async function Fn(e){const t=$t(e);t._getPasswordPolicyInternal()&&await t._updatePasswordPolicy()}function Vn(e,t,n,r){return(0,je.Ku)(e).onAuthStateChanged(t,n,r)}function zn(e,t){return lt(e,"POST","/v2/accounts/mfaEnrollment:start",ot(e,t))}new WeakMap;const Un="__sak";class Bn{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(Un,"1"),this.storage.removeItem(Un),Promise.resolve(!0)):Promise.resolve(!1)}catch(e){return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}class Wn extends Bn{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Kt(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const n=this.storage.getItem(t),r=this.localCache[t];n!==r&&e(t,r,n)}}onStorageEvent(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!e.key)return void this.forAllChangedKeys((e,t,n)=>{this.notifyListeners(e,n)});const n=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const e=this.storage.getItem(n);(t||this.localCache[n]!==e)&&this.notifyListeners(n,e)},i=this.storage.getItem(n);(0,je.lT)()&&10===document.documentMode&&i!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,10):r()}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t?JSON.parse(t):t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,n)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:n}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Wn.type="LOCAL";const qn=Wn;class Hn extends Bn{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}Hn.type="SESSION";const Kn=Hn;class Gn{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(t=>t.isListeningto(e));if(t)return t;const n=new Gn(e);return this.receivers.push(n),n}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:n,eventType:r,data:i}=t.data,s=this.handlersMap[r];if(!(null===s||void 0===s?void 0:s.size))return;t.ports[0].postMessage({status:"ack",eventId:n,eventType:r});const a=Array.from(s).map(async e=>e(t.origin,i)),o=await function(e){return Promise.all(e.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}(a);t.ports[0].postMessage({status:"done",eventId:n,eventType:r,response:o})}_subscribe(e,t){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),t&&0!==this.handlersMap[e].size||delete this.handlersMap[e],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}function Qn(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n="";for(let r=0;r<t;r++)n+=Math.floor(10*Math.random());return e+n}Gn.receivers=[];class Yn{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:50;const r="undefined"!==typeof MessageChannel?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let i,s;return new Promise((a,o)=>{const l=Qn("",20);r.port1.start();const c=setTimeout(()=>{o(new Error("unsupported_event"))},n);s={messageChannel:r,onMessage(e){const t=e;if(t.data.eventId===l)switch(t.data.status){case"ack":clearTimeout(c),i=setTimeout(()=>{o(new Error("timeout"))},3e3);break;case"done":clearTimeout(i),a(t.data.response);break;default:clearTimeout(c),clearTimeout(i),o(new Error("invalid_response"))}}},this.handlers.add(s),r.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:l,data:t},[r.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}function Zn(){return window}function $n(){return"undefined"!==typeof Zn().WorkerGlobalScope&&"function"===typeof Zn().importScripts}const Jn="firebaseLocalStorageDb",Xn="firebaseLocalStorage",er="fbase_key";class tr{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function nr(e,t){return e.transaction([Xn],t?"readwrite":"readonly").objectStore(Xn)}function rr(){const e=indexedDB.open(Jn,1);return new Promise((t,n)=>{e.addEventListener("error",()=>{n(e.error)}),e.addEventListener("upgradeneeded",()=>{const t=e.result;try{t.createObjectStore(Xn,{keyPath:er})}catch(Dm){n(Dm)}}),e.addEventListener("success",async()=>{const n=e.result;n.objectStoreNames.contains(Xn)?t(n):(n.close(),await function(){const e=indexedDB.deleteDatabase(Jn);return new tr(e).toPromise()}(),t(await rr()))})})}async function ir(e,t,n){const r=nr(e,!0).put({[er]:t,value:n});return new tr(r).toPromise()}function sr(e,t){const n=nr(e,!0).delete(t);return new tr(n).toPromise()}class ar{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db||(this.db=await rr()),this.db}async _withRetries(e){let t=0;for(;;)try{const t=await this._openDb();return await e(t)}catch(Dm){if(t++>3)throw Dm;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return $n()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Gn._getInstance($n()?self:null),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await async function(){if(!(null===navigator||void 0===navigator?void 0:navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch(e){return null}}(),!this.activeServiceWorker)return;this.sender=new Yn(this.activeServiceWorker);const n=await this.sender._send("ping",{},800);n&&(null===(e=n[0])||void 0===e?void 0:e.fulfilled)&&(null===(t=n[0])||void 0===t?void 0:t.value.includes("keyChanged"))&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(this.sender&&this.activeServiceWorker&&function(){var e;return(null===(e=null===navigator||void 0===navigator?void 0:navigator.serviceWorker)||void 0===e?void 0:e.controller)||null}()===this.activeServiceWorker)try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch(t){}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await rr();return await ir(e,Un,"1"),await sr(e,Un),!0}catch(e){}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(n=>ir(n,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(t=>async function(e,t){const n=nr(e,!1).get(t),r=await new tr(n).toPromise();return void 0===r?null:r.value}(t,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>sr(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(e=>{const t=nr(e,!1).getAll();return new tr(t).toPromise()});if(!e)return[];if(0!==this.pendingWrites)return[];const t=[],n=new Set;if(0!==e.length)for(const{fbase_key:r,value:i}of e)n.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(i)&&(this.notifyListeners(r,i),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!n.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const n=this.listeners[e];if(n)for(const r of Array.from(n))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),0===this.listeners[e].size&&delete this.listeners[e]),0===Object.keys(this.listeners).length&&this.stopPolling()}}ar.type="LOCAL";const or=ar;function lr(e,t){return lt(e,"POST","/v2/accounts/mfaSignIn:start",ot(e,t))}tn("rcb"),new nt(3e4,6e4);const cr="recaptcha";async function ur(e,t,n){var r;if(!e._getRecaptchaConfig())try{await cn(e)}catch(i){console.log("Failed to initialize reCAPTCHA Enterprise config. Triggering the reCAPTCHA v2 verification.")}try{let i;if(i="string"===typeof t?{phoneNumber:t}:t,"session"in i){const t=i.session;if("phoneNumber"in i){Ze("enroll"===t.type,e,"internal-error");const r={idToken:t.credential,phoneEnrollmentInfo:{phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"}},s=ln(e,r,"mfaSmsEnrollment",async(e,t)=>{if(t.phoneEnrollmentInfo.captchaResponse===sn){Ze((null===n||void 0===n?void 0:n.type)===cr,e,"argument-error");return zn(e,await hr(e,t,n))}return zn(e,t)},"PHONE_PROVIDER");return(await s.catch(e=>Promise.reject(e))).phoneSessionInfo.sessionInfo}{Ze("signin"===t.type,e,"internal-error");const s=(null===(r=i.multiFactorHint)||void 0===r?void 0:r.uid)||i.multiFactorUid;Ze(s,e,"missing-multi-factor-info");const a={mfaPendingCredential:t.credential,mfaEnrollmentId:s,phoneSignInInfo:{clientType:"CLIENT_TYPE_WEB"}},o=ln(e,a,"mfaSmsSignIn",async(e,t)=>{if(t.phoneSignInInfo.captchaResponse===sn){Ze((null===n||void 0===n?void 0:n.type)===cr,e,"argument-error");return lr(e,await hr(e,t,n))}return lr(e,t)},"PHONE_PROVIDER");return(await o.catch(e=>Promise.reject(e))).phoneResponseInfo.sessionInfo}}{const t={phoneNumber:i.phoneNumber,clientType:"CLIENT_TYPE_WEB"},r=ln(e,t,"sendVerificationCode",async(e,t)=>{if(t.captchaResponse===sn){Ze((null===n||void 0===n?void 0:n.type)===cr,e,"argument-error");return bn(e,await hr(e,t,n))}return bn(e,t)},"PHONE_PROVIDER");return(await r.catch(e=>Promise.reject(e))).sessionInfo}}finally{null===n||void 0===n||n._reset()}}async function hr(e,t,n){Ze(n.type===cr,e,"argument-error");const r=await n.verify();Ze("string"===typeof r,e,"argument-error");const i=Object.assign({},t);if("phoneEnrollmentInfo"in i){const e=i.phoneEnrollmentInfo.phoneNumber,t=i.phoneEnrollmentInfo.captchaResponse,n=i.phoneEnrollmentInfo.clientType,s=i.phoneEnrollmentInfo.recaptchaVersion;return Object.assign(i,{phoneEnrollmentInfo:{phoneNumber:e,recaptchaToken:r,captchaResponse:t,clientType:n,recaptchaVersion:s}}),i}if("phoneSignInInfo"in i){const e=i.phoneSignInInfo.captchaResponse,t=i.phoneSignInInfo.clientType,n=i.phoneSignInInfo.recaptchaVersion;return Object.assign(i,{phoneSignInInfo:{recaptchaToken:r,captchaResponse:e,clientType:t,recaptchaVersion:n}}),i}return Object.assign(i,{recaptchaToken:r}),i}class dr{constructor(e){this.providerId=dr.PROVIDER_ID,this.auth=$t(e)}verifyPhoneNumber(e,t){return ur(this.auth,e,(0,je.Ku)(t))}static credential(e,t){return xn._fromVerification(e,t)}static credentialFromResult(e){const t=e;return dr.credentialFromTaggedObject(t)}static credentialFromError(e){return dr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject(e){let{_tokenResponse:t}=e;if(!t)return null;const{phoneNumber:n,temporaryProof:r}=t;return n&&r?xn._fromTokenResponse(n,r):null}}function fr(e,t){return t?Nt(t):(Ze(e._popupRedirectResolver,e,"argument-error"),e._popupRedirectResolver)}dr.PROVIDER_ID="phone",dr.PHONE_SIGN_IN_METHOD="phone";class pr extends fn{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return yn(e,this._buildIdpRequest())}_linkToIdToken(e,t){return yn(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return yn(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function gr(e){return On(e.auth,new pr(e),e.bypassAuthState)}function mr(e){const{auth:t,user:n}=e;return Ze(n,t,"internal-error"),jn(n,new pr(e),e.bypassAuthState)}async function yr(e){const{auth:t,user:n}=e;return Ze(n,t,"internal-error"),Rn(n,new pr(e),e.bypassAuthState)}class vr{constructor(e,t,n,r){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.auth=e,this.resolver=n,this.user=r,this.bypassAuthState=i,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(Dm){this.reject(Dm)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:n,postBody:r,tenantId:i,error:s,type:a}=e;if(s)return void this.reject(s);const o={auth:this.auth,requestUri:t,sessionId:n,tenantId:i||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(o))}catch(Dm){this.reject(Dm)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return gr;case"linkViaPopup":case"linkViaRedirect":return yr;case"reauthViaPopup":case"reauthViaRedirect":return mr;default:qe(this.auth,"internal-error")}}resolve(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Je(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const br=new nt(2e3,1e4);class wr extends vr{constructor(e,t,n,r,i){super(e,t,r,i),this.provider=n,this.authWindow=null,this.pollId=null,wr.currentPopupAction&&wr.currentPopupAction.cancel(),wr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ze(e,this.auth,"internal-error"),e}async onExecution(){Je(1===this.filter.length,"Popup operations only handle one event");const e=Qn();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(e=>{this.reject(e)}),this.resolver._isIframeWebStorageSupported(this.auth,e=>{e||this.reject(He(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return(null===(e=this.authWindow)||void 0===e?void 0:e.associatedEvent)||null}cancel(){this.reject(He(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,wr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,n;(null===(n=null===(t=this.authWindow)||void 0===t?void 0:t.window)||void 0===n?void 0:n.closed)?this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(He(this.auth,"popup-closed-by-user"))},8e3):this.pollId=window.setTimeout(e,br.get())};e()}}wr.currentPopupAction=null;const xr=new Map;class _r extends vr{constructor(e,t){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,arguments.length>2&&void 0!==arguments[2]&&arguments[2]),this.eventId=null}async execute(){let e=xr.get(this.auth._key());if(!e){try{const t=await async function(e,t){const n=Er(t),r=Sr(e);if(!await r._isAvailable())return!1;const i="true"===await r._get(n);return await r._remove(n),i}(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(t)}catch(Dm){e=()=>Promise.reject(Dm)}xr.set(this.auth._key(),e)}return this.bypassAuthState||xr.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if("signInViaRedirect"===e.type)return super.onAuthEvent(e);if("unknown"!==e.type){if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}else this.resolve(null)}async onExecution(){}cleanUp(){}}function kr(e,t){xr.set(e._key(),t)}function Sr(e){return Nt(e._redirectPersistence)}function Er(e){return jt("pendingRedirect",e.config.apiKey,e.name)}async function Tr(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if((0,Re.xZ)(e.app))return Promise.reject(Ge(e));const r=$t(e),i=fr(r,t),s=new _r(r,i,n),a=await s.execute();return a&&!n&&(delete a.user._redirectEventId,await r._persistUserIfCurrent(a.user),await r._setRedirectUser(null,t)),a}class Ir{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(n=>{this.isEventForConsumer(e,n)&&(t=!0,this.sendToConsumer(e,n),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!function(e){switch(e.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Ar(e);default:return!1}}(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var n;if(e.error&&!Ar(e)){const r=(null===(n=e.error.code)||void 0===n?void 0:n.split("auth/")[1])||"internal-error";t.onError(He(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const n=null===t.eventId||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&n}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Cr(e))}saveEventToCache(e){this.cachedEventUids.add(Cr(e)),this.lastProcessedEventTime=Date.now()}}function Cr(e){return[e.type,e.eventId,e.sessionId,e.tenantId].filter(e=>e).join("-")}function Ar(e){let{type:t,error:n}=e;return"unknown"===t&&(null===n||void 0===n?void 0:n.code)==="auth/".concat("no-auth-event")}const Dr=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Pr=/^https?/;async function Nr(e){if(e.config.emulator)return;const{authorizedDomains:t}=await async function(e){return lt(e,"GET","/v1/projects",arguments.length>1&&void 0!==arguments[1]?arguments[1]:{})}(e);for(const r of t)try{if(Mr(r))return}catch(n){}qe(e,"unauthorized-domain")}function Mr(e){const t=Xe(),{protocol:n,hostname:r}=new URL(t);if(e.startsWith("chrome-extension://")){const i=new URL(e);return""===i.hostname&&""===r?"chrome-extension:"===n&&e.replace("chrome-extension://","")===t.replace("chrome-extension://",""):"chrome-extension:"===n&&i.hostname===r}if(!Pr.test(n))return!1;if(Dr.test(e))return r===e;const i=e.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}const Rr=new nt(3e4,6e4);function jr(){const e=Zn().___jsl;if(null===e||void 0===e?void 0:e.H)for(const t of Object.keys(e.H))if(e.H[t].r=e.H[t].r||[],e.H[t].L=e.H[t].L||[],e.H[t].r=[...e.H[t].L],e.CP)for(let n=0;n<e.CP.length;n++)e.CP[n]=null}function Or(e){return new Promise((t,n)=>{var r,i,s;function a(){jr(),gapi.load("gapi.iframes",{callback:()=>{t(gapi.iframes.getContext())},ontimeout:()=>{jr(),n(He(e,"network-request-failed"))},timeout:Rr.get()})}if(null===(i=null===(r=Zn().gapi)||void 0===r?void 0:r.iframes)||void 0===i?void 0:i.Iframe)t(gapi.iframes.getContext());else{if(!(null===(s=Zn().gapi)||void 0===s?void 0:s.load)){const t=tn("iframefcb");return Zn()[t]=()=>{gapi.load?a():n(He(e,"network-request-failed"))},en("".concat(Xt.gapiScript,"?onload=").concat(t)).catch(e=>n(e))}a()}}).catch(e=>{throw Lr=null,e})}let Lr=null;const Fr=new nt(5e3,15e3),Vr={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},zr=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ur(e){const t=e.config;Ze(t.authDomain,e,"auth-domain-config-required");const n=t.emulator?rt(t,"emulator/auth/iframe"):"https://".concat(e.config.authDomain,"/").concat("__/auth/iframe"),r={apiKey:t.apiKey,appName:e.name,v:Re.MF},i=zr.get(e.config.apiHost);i&&(r.eid=i);const s=e._getFrameworks();return s.length&&(r.fw=s.join(",")),"".concat(n,"?").concat((0,je.Am)(r).slice(1))}async function Br(e){const t=await function(e){return Lr=Lr||Or(e),Lr}(e),n=Zn().gapi;return Ze(n,e,"internal-error"),t.open({where:document.body,url:Ur(e),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Vr,dontclear:!0},t=>new Promise(async(n,r)=>{await t.restyle({setHideOnLeave:!1});const i=He(e,"network-request-failed"),s=Zn().setTimeout(()=>{r(i)},Fr.get());function a(){Zn().clearTimeout(s),n(t)}t.ping(a).then(a,()=>{r(i)})}))}const Wr={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class qr{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(Dm){}}}function Hr(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:500,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:600;const s=Math.max((window.screen.availHeight-i)/2,0).toString(),a=Math.max((window.screen.availWidth-r)/2,0).toString();let o="";const l=Object.assign(Object.assign({},Wr),{width:r.toString(),height:i.toString(),top:s,left:a}),c=(0,je.ZQ)().toLowerCase();n&&(o=zt(c)?"_blank":n),Ft(c)&&(t=t||"http://localhost",l.scrollbars="yes");const u=Object.entries(l).reduce((e,t)=>{let[n,r]=t;return"".concat(e).concat(n,"=").concat(r,",")},"");if(function(){var e;return Ht(arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,je.ZQ)())&&!!(null===(e=window.navigator)||void 0===e?void 0:e.standalone)}(c)&&"_self"!==o)return function(e,t){const n=document.createElement("a");n.href=e,n.target=t;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}(t||"",o),new qr(null);const h=window.open(t||"",o,u);Ze(h,e,"popup-blocked");try{h.focus()}catch(Dm){}return new qr(h)}const Kr="__/auth/handler",Gr="emulator/auth/handler",Qr=encodeURIComponent("fac");async function Yr(e,t,n,r,i,s){Ze(e.config.authDomain,e,"auth-domain-config-required"),Ze(e.config.apiKey,e,"invalid-api-key");const a={apiKey:e.config.apiKey,appName:e.name,authType:n,redirectUrl:r,v:Re.MF,eventId:i};if(t instanceof Sn){t.setDefaultLanguage(e.languageCode),a.providerId=t.providerId||"",(0,je.Im)(t.getCustomParameters())||(a.customParameters=JSON.stringify(t.getCustomParameters()));for(const[e,t]of Object.entries(s||{}))a[e]=t}if(t instanceof En){const e=t.getScopes().filter(e=>""!==e);e.length>0&&(a.scopes=e.join(","))}e.tenantId&&(a.tid=e.tenantId);const o=a;for(const u of Object.keys(o))void 0===o[u]&&delete o[u];const l=await e._getAppCheckToken(),c=l?"#".concat(Qr,"=").concat(encodeURIComponent(l)):"";return"".concat(function(e){let{config:t}=e;if(!t.emulator)return"https://".concat(t.authDomain,"/").concat(Kr);return rt(t,Gr)}(e),"?").concat((0,je.Am)(o).slice(1)).concat(c)}const Zr="webStorageSupport";const $r=class{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Kn,this._completeRedirectFn=Tr,this._overrideRedirectResult=kr}async _openPopup(e,t,n,r){var i;Je(null===(i=this.eventManagers[e._key()])||void 0===i?void 0:i.manager,"_initialize() not called before _openPopup()");return Hr(e,await Yr(e,t,n,Xe(),r),Qn())}async _openRedirect(e,t,n,r){await this._originValidation(e);return function(e){Zn().location.href=e}(await Yr(e,t,n,Xe(),r)),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:e,promise:n}=this.eventManagers[t];return e?Promise.resolve(e):(Je(n,"If manager is not set, promise should be"),n)}const n=this.initAndGetManager(e);return this.eventManagers[t]={promise:n},n.catch(()=>{delete this.eventManagers[t]}),n}async initAndGetManager(e){const t=await Br(e),n=new Ir(e);return t.register("authEvent",t=>{Ze(null===t||void 0===t?void 0:t.authEvent,e,"invalid-auth-event");return{status:n.onEvent(t.authEvent)?"ACK":"ERROR"}},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:n},this.iframes[e._key()]=t,n}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(Zr,{type:Zr},n=>{var r;const i=null===(r=null===n||void 0===n?void 0:n[0])||void 0===r?void 0:r[Zr];void 0!==i&&t(!!i),qe(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Nr(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Kt()||Vt()||Ht()}};var Jr="@firebase/auth",Xr="1.8.1";class ei{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),(null===(e=this.auth.currentUser)||void 0===e?void 0:e.uid)||null}async getToken(e){if(this.assertAuthConfigured(),await this.auth._initializationPromise,!this.auth.currentUser)return null;return{accessToken:await this.auth.currentUser.getIdToken(e)}}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(t=>{e((null===t||void 0===t?void 0:t.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ze(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}const ti=(0,je.XA)("authIdTokenMaxAge")||300;let ni=null;function ri(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:(0,Re.Sx)();const t=(0,Re.j6)(e,"auth");if(t.isInitialized())return t.getImmediate();const n=function(e,t){const n=(0,Re.j6)(e,"auth");if(n.isInitialized()){const e=n.getImmediate(),r=n.getOptions();if((0,je.bD)(r,null!==t&&void 0!==t?t:{}))return e;qe(e,"already-initialized")}return n.initialize({options:t})}(e,{popupRedirectResolver:$r,persistence:[or,qn,Kn]}),r=(0,je.XA)("authTokenSyncURL");if(r&&"boolean"===typeof isSecureContext&&isSecureContext){const e=new URL(r,location.origin);if(location.origin===e.origin){const t=(i=e.toString(),async e=>{const t=e&&await e.getIdTokenResult(),n=t&&((new Date).getTime()-Date.parse(t.issuedAtTime))/1e3;if(n&&n>ti)return;const r=null===t||void 0===t?void 0:t.token;ni!==r&&(ni=r,await fetch(i,{method:r?"POST":"DELETE",headers:r?{Authorization:"Bearer ".concat(r)}:{}}))});!function(e,t,n){(0,je.Ku)(e).beforeAuthStateChanged(t,n)}(n,t,()=>t(n.currentUser)),function(e,t,n,r){(0,je.Ku)(e).onIdTokenChanged(t,n,r)}(n,e=>t(e))}}var i;const s=(0,je.Tj)("auth");return s&&un(n,"http://".concat(s)),n}var ii,si;ii={loadJS:e=>new Promise((t,n)=>{const r=document.createElement("script");r.setAttribute("src",e),r.onload=t,r.onerror=e=>{const t=He("internal-error");t.customData=e,n(t)},r.type="text/javascript",r.charset="UTF-8",function(){var e,t;return null!==(t=null===(e=document.getElementsByTagName("head"))||void 0===e?void 0:e[0])&&void 0!==t?t:document}().appendChild(r)}),gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="},Xt=ii,si="Browser",(0,Re.om)(new Fe.uA("auth",(e,t)=>{let{options:n}=t;const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:a,authDomain:o}=r.options;Ze(a&&!a.includes(":"),"invalid-api-key",{appName:r.name});const l={apiKey:a,authDomain:o,clientPlatform:si,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Gt(si)},c=new Zt(r,i,s,l);return function(e,t){const n=(null===t||void 0===t?void 0:t.persistence)||[],r=(Array.isArray(n)?n:[n]).map(Nt);(null===t||void 0===t?void 0:t.errorMap)&&e._updateErrorMap(t.errorMap),e._initializeWithPersistence(r,null===t||void 0===t?void 0:t.popupRedirectResolver)}(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,n)=>{e.getProvider("auth-internal").initialize()})),(0,Re.om)(new Fe.uA("auth-internal",e=>(e=>new ei(e))($t(e.getProvider("auth").getImmediate())),"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Re.KO)(Jr,Xr,function(e){switch(e){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}(si)),(0,Re.KO)(Jr,Xr,"esm2017");let ai=null,oi={db:null,sample:1,events:new Set(["page_view","cta_click","calculator_used","mini_calc_used","calculator_tab_selected","historical_search","historical_sort","historical_page","historical_custom_holdings","internal_nav","external_nav","analytics_opt_toggle"])};function li(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{ai&&n.e(260).then(n.bind(n,260)).then(n=>{let{logEvent:r}=n;r(ai,e,t)})}catch(r){}!function(e,t){try{if(!oi.db)return;if(!oi.events.has(e))return;if(Math.random()>oi.sample)return;const r=function(){try{const e="zyptopia_sid";let t=localStorage.getItem(e);return t||(t=crypto&&crypto.randomUUID?crypto.randomUUID():String(Math.random()).slice(2)+Date.now(),localStorage.setItem(e,t)),t}catch(e){return"unknown"}}(),i="undefined"!==typeof navigator&&navigator.userAgent?navigator.userAgent:"unknown";Promise.resolve().then(n.bind(n,167)).then(n=>{let{addDoc:s,collection:a,serverTimestamp:o}=n;s(a(oi.db,"events"),{name:e,params:t||{},ts:o(),sid:r,ua:i}).catch(()=>{})})}catch(r){}}(e,t)}const ci=n.p+"static/media/logo.77d523662b4f18cf6a20.png";var ui=n(929);function hi(e){let{to:t,children:n,onClick:r}=e;return(0,ui.jsx)(De,{to:t,className:e=>{let{isActive:t}=e;return"nav-link"+(t?" active":"")},onClick:e=>{li("nav_click",{to:t}),null===r||void 0===r||r(e)},style:{textDecoration:"none",padding:".42rem .6rem",borderRadius:8},children:n})}function di(e){let{label:t,items:n}=e;return(0,ui.jsxs)("details",{className:"dd",children:[(0,ui.jsxs)("summary",{className:"nav-link",style:{listStyle:"none",userSelect:"none"},children:[t,(0,ui.jsx)("svg",{"aria-hidden":"true",width:"12",height:"12",viewBox:"0 0 20 20",style:{marginLeft:6,opacity:.9},children:(0,ui.jsx)("path",{d:"M5 7l5 6 5-6H5z",fill:"currentColor"})})]}),(0,ui.jsx)("div",{className:"dd-menu",children:n.map(e=>(0,ui.jsx)(hi,{to:e.to,children:e.label},e.to))})]})}function fi(e){let{open:n,onClose:r,groups:i}=e;const s=(0,t.useRef)(null),a=Z();return(0,t.useEffect)(()=>{r()},[a.pathname]),(0,t.useEffect)(()=>{const e=document.body.style.overflow;n&&(document.body.style.overflow="hidden");const t=e=>"Escape"===e.key&&r();return document.addEventListener("keydown",t),()=>{document.body.style.overflow=e,document.removeEventListener("keydown",t)}},[n,r]),n?(0,ui.jsx)("div",{role:"dialog","aria-modal":"true",onClick:r,style:{position:"fixed",inset:0,background:"rgba(0,0,0,.55)",zIndex:2e3,display:"grid",placeItems:"start stretch"},children:(0,ui.jsxs)("div",{ref:s,onClick:e=>e.stopPropagation(),style:{background:"rgba(18,22,28,.98)",borderBottom:"1px solid rgba(255,255,255,.12)",padding:"0.9rem",width:"100%",boxShadow:"0 12px 28px rgba(0,0,0,.35)",animation:"sheetDown .16s ease-out"},children:[(0,ui.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:".25rem"},children:[(0,ui.jsx)("div",{style:{fontWeight:900},children:"Menu"}),(0,ui.jsx)("button",{onClick:r,"aria-label":"Close menu",style:{background:"transparent",color:"inherit",border:0,padding:".4rem .6rem",borderRadius:8,cursor:"pointer"},children:"\u2715"})]}),i.map(e=>(0,ui.jsxs)("div",{style:{marginTop:".4rem"},children:[(0,ui.jsx)("div",{style:{opacity:.85,fontSize:".92rem",margin:".25rem 0"},children:e.title}),(0,ui.jsx)("div",{style:{display:"grid",gap:".25rem"},children:e.items.map(e=>(0,ui.jsx)(hi,{to:e.to,onClick:r,children:e.label},e.to))})]},e.title)),(0,ui.jsx)("div",{style:{marginTop:".6rem",borderTop:"1px solid rgba(255,255,255,.08)",paddingTop:".5rem"},children:(0,ui.jsx)(hi,{to:"/about",onClick:r,children:"About"})})]})}):null}function pi(){const[e,n]=(0,t.useState)(!1),r=[{to:"/",label:"Daily Graph"},{to:"/calculator",label:"Calculator"},{to:"/stats",label:"Stats"},{to:"/historical",label:"Historical"}],i=[{to:"/get-started",label:"Get Started"},{to:"/about-zypto",label:"About Zypto"},{to:"/vault-key-card",label:"Vault Key Card"},{to:"/faq",label:"FAQ"}];return(0,t.useEffect)(()=>{const e=e=>{document.querySelectorAll(".dd[open]").forEach(t=>{t.contains(e.target)||t.removeAttribute("open")})},t=e=>{const t=e.target;t instanceof HTMLDetailsElement&&t.classList.contains("dd")&&t.open&&document.querySelectorAll(".dd[open]").forEach(e=>{e!==t&&e.removeAttribute("open")})};return document.addEventListener("click",e),document.addEventListener("toggle",t,!0),()=>{document.removeEventListener("click",e),document.removeEventListener("toggle",t,!0)}},[]),(0,ui.jsxs)("header",{className:"site-header",style:gi,children:[(0,ui.jsxs)("div",{className:"header-container",style:mi,children:[(0,ui.jsx)(Ae,{to:"/","aria-label":"Zyptopia.org \u2014 Home",onClick:()=>li("nav_click",{to:"home"}),style:{display:"inline-flex",alignItems:"center"},children:(0,ui.jsx)("img",{src:ci,alt:"Zyptopia.org",style:{height:"clamp(28px, 8vw, 60px)",width:"auto",display:"block",opacity:.95}})}),(0,ui.jsxs)("nav",{className:"nav nav-desktop",role:"navigation",style:yi,children:[(0,ui.jsx)(di,{label:"Tools",items:r}),(0,ui.jsx)(di,{label:"Learn",items:i}),(0,ui.jsx)(hi,{to:"/about",children:"About"})]}),(0,ui.jsx)("button",{className:"hamburger","aria-label":"Open menu","aria-controls":"mobile-menu","aria-expanded":e?"true":"false",onClick:()=>n(!0),style:vi,children:(0,ui.jsx)("svg",{width:"26",height:"26",viewBox:"0 0 24 24",fill:"none",children:(0,ui.jsx)("path",{d:"M3 6h18M3 12h18M3 18h18",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round"})})})]}),(0,ui.jsx)(fi,{open:e,onClose:()=>n(!1),groups:[{title:"Tools",items:r},{title:"Learn",items:i}]})]})}const gi={position:"sticky",top:0,zIndex:50,backdropFilter:"saturate(180%) blur(8px)",background:"rgba(22,27,34,.75)",borderBottom:"1px solid rgba(255,255,255,.08)"},mi={maxWidth:1180,margin:"0 auto",padding:".55rem .9rem",display:"flex",alignItems:"center",justifyContent:"space-between",gap:".6rem"},yi={display:"flex",alignItems:"center",gap:".25rem"},vi={display:"none",background:"transparent",color:"inherit",border:0,padding:".35rem .45rem",borderRadius:8,cursor:"pointer"};var bi=n(379);function wi(){const[e,n]=(0,t.useState)(null),r=J();(0,t.useEffect)(()=>{const e=Vn(ri(),n);return()=>e()},[]);return(0,ui.jsx)("footer",{style:_i,children:(0,ui.jsxs)("div",{style:ki,children:[(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)("div",{style:{fontWeight:800},children:"Zyptopia.org"}),(0,ui.jsx)("div",{style:{opacity:.8},children:"Independent, community-run. Not affiliated with Zypto. Not financial advice."})]}),(0,ui.jsxs)("div",{style:Si,children:[(0,ui.jsx)(xi,{to:"/",children:"Daily Graph"}),(0,ui.jsx)(xi,{to:"/historical",children:"Historical"}),(0,ui.jsx)(xi,{to:"/calculator",children:"Calculator"}),(0,ui.jsx)(xi,{to:"/get-started",children:"Getting Started"}),(0,ui.jsx)(xi,{to:"/vault-key-card",children:"VKC"}),(0,ui.jsx)(xi,{to:"/about-zypto",children:"About Zypto"}),(0,ui.jsx)(xi,{to:"/faq",children:"FAQ"}),e?(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(xi,{to:"/dashboard",children:"Admin"}),(0,ui.jsx)(xi,{to:"/data-input",children:"Data Input"}),(0,ui.jsx)(xi,{to:"/analytics",children:"Analytics"}),(0,ui.jsx)("button",{onClick:async()=>{try{await(e=ri(),(0,je.Ku)(e).signOut()),li("sign_out",{}),r("/")}catch(t){}var e},className:"link-quiet",style:{textDecoration:"underline",background:"transparent",border:0,padding:0,cursor:"pointer"},children:"Sign out"})]}):(0,ui.jsx)(xi,{to:"/login",children:"Login"})]}),(0,ui.jsxs)("div",{style:Ei,children:[(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:Ti,onClick:()=>li("footer_click",{to:"get_started"}),children:"Quick guide"}),(0,ui.jsx)("a",{className:"btn btn-primary",style:Ii,href:"https://ref.zypto.com/ZRxWOW84IOb",target:"_blank",rel:"noopener noreferrer",onClick:()=>li("footer_click",{to:"zypto_site"}),children:"Download app"})]})]})})}function xi(e){let{to:t,children:n}=e;return(0,ui.jsx)(Ae,{to:t,className:"link-quiet",onClick:()=>li("footer_nav",{to:t}),style:{textDecoration:"underline"},children:n})}const _i={marginTop:"1.2rem",borderTop:"1px solid rgba(255,255,255,.08)",background:"rgba(22,27,34,.7)"},ki={maxWidth:1180,margin:"0 auto",padding:".8rem .9rem",display:"grid",gap:".6rem"},Si={display:"flex",gap:".9rem",flexWrap:"wrap",alignItems:"center"},Ei={display:"flex",gap:".5rem",flexWrap:"wrap",justifyContent:"flex-end"},Ti={padding:".38rem .7rem",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:"rgba(255,255,255,.08)",fontWeight:700},Ii=(0,bi.A)((0,bi.A)({},Ti),{},{background:"linear-gradient(180deg, rgba(0,255,200,.28), rgba(0,255,200,.18))",border:"1px solid rgba(0,255,200,.35)"});function Ci(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=document.head.querySelector(e);return r||(r=document.createElement(t),document.head.appendChild(r)),Object.entries(n).forEach(e=>{let[t,n]=e;null==n?r.removeAttribute(t):r.setAttribute(t,n)}),r}function Ai(e){let{title:n,description:r,canonical:i,jsonLd:s,noindex:a=!1,openGraphImage:o}=e;return(0,t.useEffect)(()=>{const e=document.title;if(n&&(document.title=n),r&&Ci('meta[name="description"]',"meta",{name:"description",content:r}),Ci('meta[name="robots"]',"meta",{name:"robots",content:a?"noindex, nofollow":"index, follow"}),i){let e=document.head.querySelector('link[rel="canonical"]');e||(e=document.createElement("link"),e.setAttribute("rel","canonical"),document.head.appendChild(e)),e.setAttribute("href",i)}n&&(Ci('meta[property="og:title"]',"meta",{property:"og:title",content:n}),Ci('meta[name="twitter:title"]',"meta",{name:"twitter:title",content:n})),r&&(Ci('meta[property="og:description"]',"meta",{property:"og:description",content:r}),Ci('meta[name="twitter:description"]',"meta",{name:"twitter:description",content:r})),o&&(Ci('meta[property="og:image"]',"meta",{property:"og:image",content:o}),Ci('meta[name="twitter:image"]',"meta",{name:"twitter:image",content:o}),Ci('meta[name="twitter:card"]',"meta",{name:"twitter:card",content:"summary_large_image"}));const t=[];return Array.isArray(s)&&s.length&&s.forEach(e=>{const n=document.createElement("script");n.type="application/ld+json",n.textContent=JSON.stringify(e),document.head.appendChild(n),t.push(n)}),()=>{n&&(document.title=e),t.forEach(e=>e.remove())}},[n,r,i,a,o,s]),null}function Di(){const{pathname:e}=Z(),t=e.split("/").filter(Boolean),n=[["/","Home"]].concat(t.map((e,n)=>["/"+t.slice(0,n+1).join("/"),e.replace(/-/g," ").replace(/\b\w/g,e=>e.toUpperCase())]));return(0,ui.jsx)("nav",{"aria-label":"Breadcrumb",style:{margin:"0 0 0.75rem"},children:n.map((e,t)=>{let[r,i]=e;return(0,ui.jsxs)("span",{children:[t>0&&(0,ui.jsx)("span",{style:{opacity:.6},children:" / "}),t<n.length-1?(0,ui.jsx)(Ae,{to:r,children:i}):(0,ui.jsx)("span",{children:i})]},r)})})}function Pi(e,t){if(null==e)return{};var n,r,i=function(e,t){if(null==e)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(-1!==t.indexOf(r))continue;n[r]=e[r]}return n}(e,t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],-1===t.indexOf(n)&&{}.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}const Ni=["href","children","eventName","eventParams","className","style","newTab"];function Mi(e){let{href:t,children:n,eventName:r="outbound_click",eventParams:i={},className:s,style:a,newTab:o=!0}=e,l=Pi(e,Ni);return(0,ui.jsx)("a",(0,bi.A)((0,bi.A)({href:t,onClick:()=>{try{li(r,(0,bi.A)({url:t},i))}catch(e){}},className:s,style:a,target:o?"_blank":void 0,rel:o?"noopener noreferrer":void 0},l),{},{children:n}))}function Ri(e){let{targetId:r="shareable-graph",filename:i="zyptopia-graph.png",shareText:s="Daily Zypto rewards \u2014 explore more at https://www.zyptopia.org"}=e;const[a,o]=(0,t.useState)(!1),[l,c]=(0,t.useState)("");return(0,ui.jsxs)("div",{style:{display:"flex",gap:".5rem",alignItems:"center"},children:[(0,ui.jsx)("button",{className:"btn btn-primary",onClick:async function(){o(!0),c("");try{const e=document.getElementById(r);if(!e)throw new Error('Graph container not found (id="'.concat(r,'")'));const{default:t}=await n.e(623).then(n.t.bind(n,623,23)),a=await t(e,{backgroundColor:null,useCORS:!0,scale:window.devicePixelRatio<2?2:1.5}),l=document.createElement("canvas");l.width=a.width,l.height=a.height+80;const c=l.getContext("2d");c.fillStyle="rgba(18,22,28,1)",c.fillRect(0,0,l.width,l.height),c.drawImage(a,0,0),c.fillStyle="rgba(22,27,34,.95)",c.fillRect(0,a.height,l.width,80),c.font="600 28px system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial",c.fillStyle="rgba(255,255,255,.95)",c.fillText("zyptopia.org \u2014 community data & calculators",32,a.height+52);const u=await new Promise(e=>l.toBlob(e,"image/png",.92));if(u&&navigator.canShare){const e=new File([u],i,{type:"image/png"});if(navigator.canShare({files:[e],text:s}))return await navigator.share({files:[e],text:s}),li("share_graph",{method:"webshare"}),void o(!1)}const h=encodeURIComponent(s),d="https://twitter.com/intent/tweet?text=".concat(h);if(window.open(d,"_blank","noopener"),u){const e=URL.createObjectURL(u),t=document.createElement("a");t.href=e,t.download=i,document.body.appendChild(t),t.click(),t.remove(),URL.revokeObjectURL(e)}li("share_graph",{method:"twitter_fallback"})}catch(Dm){c(Dm.message||"Failed to share image.")}finally{o(!1)}},disabled:a,style:{padding:".5rem .85rem",borderRadius:12,border:"1px solid rgba(255,255,255,.18)",background:"linear-gradient(180deg, rgba(255,255,255,.18), rgba(255,255,255,.10))",fontWeight:800},title:"Create a share image and post",children:a?"Preparing\u2026":"Share graph"}),l?(0,ui.jsx)("span",{style:{color:"#f99",fontSize:".9rem"},children:l}):null]})}var ji=n(705);function Oi(e){return e+.5|0}const Li=(e,t,n)=>Math.max(Math.min(e,n),t);function Fi(e){return Li(Oi(2.55*e),0,255)}function Vi(e){return Li(Oi(255*e),0,255)}function zi(e){return Li(Oi(e/2.55)/100,0,1)}function Ui(e){return Li(Oi(100*e),0,100)}const Bi={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Wi=[..."0123456789ABCDEF"],qi=e=>Wi[15&e],Hi=e=>Wi[(240&e)>>4]+Wi[15&e],Ki=e=>(240&e)>>4===(15&e);function Gi(e){var t=(e=>Ki(e.r)&&Ki(e.g)&&Ki(e.b)&&Ki(e.a))(e)?qi:Hi;return e?"#"+t(e.r)+t(e.g)+t(e.b)+((e,t)=>e<255?t(e):"")(e.a,t):void 0}const Qi=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yi(e,t,n){const r=t*Math.min(n,1-n),i=function(t){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(t+e/30)%12;return n-r*Math.max(Math.min(i-3,9-i,1),-1)};return[i(0),i(8),i(4)]}function Zi(e,t,n){const r=function(r){let i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:(r+e/60)%6;return n-n*t*Math.max(Math.min(i,4-i,1),0)};return[r(5),r(3),r(1)]}function $i(e,t,n){const r=Yi(e,1,.5);let i;for(t+n>1&&(i=1/(t+n),t*=i,n*=i),i=0;i<3;i++)r[i]*=1-t-n,r[i]+=t;return r}function Ji(e){const t=e.r/255,n=e.g/255,r=e.b/255,i=Math.max(t,n,r),s=Math.min(t,n,r),a=(i+s)/2;let o,l,c;return i!==s&&(c=i-s,l=a>.5?c/(2-i-s):c/(i+s),o=function(e,t,n,r,i){return e===i?(t-n)/r+(t<n?6:0):t===i?(n-e)/r+2:(e-t)/r+4}(t,n,r,c,i),o=60*o+.5),[0|o,l||0,a]}function Xi(e,t,n,r){return(Array.isArray(t)?e(t[0],t[1],t[2]):e(t,n,r)).map(Vi)}function es(e,t,n){return Xi(Yi,e,t,n)}function ts(e){return(e%360+360)%360}function ns(e){const t=Qi.exec(e);let n,r=255;if(!t)return;t[5]!==n&&(r=t[6]?Fi(+t[5]):Vi(+t[5]));const i=ts(+t[2]),s=+t[3]/100,a=+t[4]/100;return n="hwb"===t[1]?function(e,t,n){return Xi($i,e,t,n)}(i,s,a):"hsv"===t[1]?function(e,t,n){return Xi(Zi,e,t,n)}(i,s,a):es(i,s,a),{r:n[0],g:n[1],b:n[2],a:r}}const rs={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},is={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let ss;function as(e){ss||(ss=function(){const e={},t=Object.keys(is),n=Object.keys(rs);let r,i,s,a,o;for(r=0;r<t.length;r++){for(a=o=t[r],i=0;i<n.length;i++)s=n[i],o=o.replace(s,rs[s]);s=parseInt(is[a],16),e[o]=[s>>16&255,s>>8&255,255&s]}return e}(),ss.transparent=[0,0,0,0]);const t=ss[e.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:4===t.length?t[3]:255}}const os=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;const ls=e=>e<=.0031308?12.92*e:1.055*Math.pow(e,1/2.4)-.055,cs=e=>e<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4);function us(e,t,n){if(e){let r=Ji(e);r[t]=Math.max(0,Math.min(r[t]+r[t]*n,0===t?360:1)),r=es(r),e.r=r[0],e.g=r[1],e.b=r[2]}}function hs(e,t){return e?Object.assign(t||{},e):e}function ds(e){var t={r:0,g:0,b:0,a:255};return Array.isArray(e)?e.length>=3&&(t={r:e[0],g:e[1],b:e[2],a:255},e.length>3&&(t.a=Vi(e[3]))):(t=hs(e,{r:0,g:0,b:0,a:1})).a=Vi(t.a),t}function fs(e){return"r"===e.charAt(0)?function(e){const t=os.exec(e);let n,r,i,s=255;if(t){if(t[7]!==n){const e=+t[7];s=t[8]?Fi(e):Li(255*e,0,255)}return n=+t[1],r=+t[3],i=+t[5],n=255&(t[2]?Fi(n):Li(n,0,255)),r=255&(t[4]?Fi(r):Li(r,0,255)),i=255&(t[6]?Fi(i):Li(i,0,255)),{r:n,g:r,b:i,a:s}}}(e):ns(e)}class ps{constructor(e){if(e instanceof ps)return e;const t=typeof e;let n;"object"===t?n=ds(e):"string"===t&&(n=function(e){var t,n=e.length;return"#"===e[0]&&(4===n||5===n?t={r:255&17*Bi[e[1]],g:255&17*Bi[e[2]],b:255&17*Bi[e[3]],a:5===n?17*Bi[e[4]]:255}:7!==n&&9!==n||(t={r:Bi[e[1]]<<4|Bi[e[2]],g:Bi[e[3]]<<4|Bi[e[4]],b:Bi[e[5]]<<4|Bi[e[6]],a:9===n?Bi[e[7]]<<4|Bi[e[8]]:255})),t}(e)||as(e)||fs(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=hs(this._rgb);return e&&(e.a=zi(e.a)),e}set rgb(e){this._rgb=ds(e)}rgbString(){return this._valid?(e=this._rgb)&&(e.a<255?"rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(zi(e.a),")"):"rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")")):void 0;var e}hexString(){return this._valid?Gi(this._rgb):void 0}hslString(){return this._valid?function(e){if(!e)return;const t=Ji(e),n=t[0],r=Ui(t[1]),i=Ui(t[2]);return e.a<255?"hsla(".concat(n,", ").concat(r,"%, ").concat(i,"%, ").concat(zi(e.a),")"):"hsl(".concat(n,", ").concat(r,"%, ").concat(i,"%)")}(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let i;const s=t===i?.5:t,a=2*s-1,o=n.a-r.a,l=((a*o===-1?a:(a+o)/(1+a*o))+1)/2;i=1-l,n.r=255&l*n.r+i*r.r+.5,n.g=255&l*n.g+i*r.g+.5,n.b=255&l*n.b+i*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=function(e,t,n){const r=cs(zi(e.r)),i=cs(zi(e.g)),s=cs(zi(e.b));return{r:Vi(ls(r+n*(cs(zi(t.r))-r))),g:Vi(ls(i+n*(cs(zi(t.g))-i))),b:Vi(ls(s+n*(cs(zi(t.b))-s))),a:e.a+n*(t.a-e.a)}}(this._rgb,e._rgb,t)),this}clone(){return new ps(this.rgb)}alpha(e){return this._rgb.a=Vi(e),this}clearer(e){return this._rgb.a*=1-e,this}greyscale(){const e=this._rgb,t=Oi(.3*e.r+.59*e.g+.11*e.b);return e.r=e.g=e.b=t,this}opaquer(e){return this._rgb.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return us(this._rgb,2,e),this}darken(e){return us(this._rgb,2,-e),this}saturate(e){return us(this._rgb,1,e),this}desaturate(e){return us(this._rgb,1,-e),this}rotate(e){return function(e,t){var n=Ji(e);n[0]=ts(n[0]+t),n=es(n),e.r=n[0],e.g=n[1],e.b=n[2]}(this._rgb,e),this}}function gs(){}const ms=(()=>{let e=0;return()=>e++})();function ys(e){return null===e||void 0===e}function vs(e){if(Array.isArray&&Array.isArray(e))return!0;const t=Object.prototype.toString.call(e);return"[object"===t.slice(0,7)&&"Array]"===t.slice(-6)}function bs(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)}function ws(e){return("number"===typeof e||e instanceof Number)&&isFinite(+e)}function xs(e,t){return ws(e)?e:t}function _s(e,t){return"undefined"===typeof e?t:e}const ks=(e,t)=>"string"===typeof e&&e.endsWith("%")?parseFloat(e)/100*t:+e;function Ss(e,t,n){if(e&&"function"===typeof e.call)return e.apply(n,t)}function Es(e,t,n,r){let i,s,a;if(vs(e))if(s=e.length,r)for(i=s-1;i>=0;i--)t.call(n,e[i],i);else for(i=0;i<s;i++)t.call(n,e[i],i);else if(bs(e))for(a=Object.keys(e),s=a.length,i=0;i<s;i++)t.call(n,e[a[i]],a[i])}function Ts(e,t){let n,r,i,s;if(!e||!t||e.length!==t.length)return!1;for(n=0,r=e.length;n<r;++n)if(i=e[n],s=t[n],i.datasetIndex!==s.datasetIndex||i.index!==s.index)return!1;return!0}function Is(e){if(vs(e))return e.map(Is);if(bs(e)){const t=Object.create(null),n=Object.keys(e),r=n.length;let i=0;for(;i<r;++i)t[n[i]]=Is(e[n[i]]);return t}return e}function Cs(e){return-1===["__proto__","prototype","constructor"].indexOf(e)}function As(e,t,n,r){if(!Cs(e))return;const i=t[e],s=n[e];bs(i)&&bs(s)?Ds(i,s,r):t[e]=Is(s)}function Ds(e,t,n){const r=vs(t)?t:[t],i=r.length;if(!bs(e))return e;const s=(n=n||{}).merger||As;let a;for(let o=0;o<i;++o){if(a=r[o],!bs(a))continue;const t=Object.keys(a);for(let r=0,i=t.length;r<i;++r)s(t[r],e,a,n)}return e}function Ps(e,t){return Ds(e,t,{merger:Ns})}function Ns(e,t,n){if(!Cs(e))return;const r=t[e],i=n[e];bs(r)&&bs(i)?Ps(r,i):Object.prototype.hasOwnProperty.call(t,e)||(t[e]=Is(i))}const Ms={"":e=>e,x:e=>e.x,y:e=>e.y};function Rs(e,t){const n=Ms[t]||(Ms[t]=function(e){const t=function(e){const t=e.split("."),n=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(n.push(r),r="");return n}(e);return e=>{for(const n of t){if(""===n)break;e=e&&e[n]}return e}}(t));return n(e)}function js(e){return e.charAt(0).toUpperCase()+e.slice(1)}const Os=e=>"undefined"!==typeof e,Ls=e=>"function"===typeof e,Fs=(e,t)=>{if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0};const Vs=Math.PI,zs=2*Vs,Us=zs+Vs,Bs=Number.POSITIVE_INFINITY,Ws=Vs/180,qs=Vs/2,Hs=Vs/4,Ks=2*Vs/3,Gs=Math.log10,Qs=Math.sign;function Ys(e,t,n){return Math.abs(e-t)<n}function Zs(e){const t=Math.round(e);e=Ys(e,t,e/1e3)?t:e;const n=Math.pow(10,Math.floor(Gs(e))),r=e/n;return(r<=1?1:r<=2?2:r<=5?5:10)*n}function $s(e){return!function(e){return"symbol"===typeof e||"object"===typeof e&&null!==e&&!(Symbol.toPrimitive in e||"toString"in e||"valueOf"in e)}(e)&&!isNaN(parseFloat(e))&&isFinite(e)}function Js(e,t,n){let r,i,s;for(r=0,i=e.length;r<i;r++)s=e[r][n],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function Xs(e){return e*(Vs/180)}function ea(e){return e*(180/Vs)}function ta(e){if(!ws(e))return;let t=1,n=0;for(;Math.round(e*t)/t!==e;)t*=10,n++;return n}function na(e,t){const n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r);let s=Math.atan2(r,n);return s<-.5*Vs&&(s+=zs),{angle:s,distance:i}}function ra(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))}function ia(e,t){return(e-t+Us)%zs-Vs}function sa(e){return(e%zs+zs)%zs}function aa(e,t,n,r){const i=sa(e),s=sa(t),a=sa(n),o=sa(s-i),l=sa(a-i),c=sa(i-s),u=sa(i-a);return i===s||i===a||r&&s===a||o>l&&c<u}function oa(e,t,n){return Math.max(t,Math.min(n,e))}function la(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1e-6;return e>=Math.min(t,n)-r&&e<=Math.max(t,n)+r}function ca(e,t,n){n=n||(n=>e[n]<t);let r,i=e.length-1,s=0;for(;i-s>1;)r=s+i>>1,n(r)?s=r:i=r;return{lo:s,hi:i}}const ua=(e,t,n,r)=>ca(e,n,r?r=>{const i=e[r][t];return i<n||i===n&&e[r+1][t]===n}:r=>e[r][t]<n),ha=(e,t,n)=>ca(e,n,r=>e[r][t]>=n);const da=["push","pop","shift","splice","unshift"];function fa(e,t){const n=e._chartjs;if(!n)return;const r=n.listeners,i=r.indexOf(t);-1!==i&&r.splice(i,1),r.length>0||(da.forEach(t=>{delete e[t]}),delete e._chartjs)}function pa(e){const t=new Set(e);return t.size===e.length?e:Array.from(t)}const ga="undefined"===typeof window?function(e){return e()}:window.requestAnimationFrame;function ma(e,t){let n=[],r=!1;return function(){for(var i=arguments.length,s=new Array(i),a=0;a<i;a++)s[a]=arguments[a];n=s,r||(r=!0,ga.call(window,()=>{r=!1,e.apply(t,n)}))}}const ya=e=>"start"===e?"left":"end"===e?"right":"center",va=(e,t,n)=>"start"===e?t:"end"===e?n:(t+n)/2;function ba(e,t,n){const r=t.length;let i=0,s=r;if(e._sorted){const{iScale:a,vScale:o,_parsed:l}=e,c=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null,u=a.axis,{min:h,max:d,minDefined:f,maxDefined:p}=a.getUserBounds();if(f){if(i=Math.min(ua(l,u,h).lo,n?r:ua(t,u,a.getPixelForValue(h)).lo),c){const e=l.slice(0,i+1).reverse().findIndex(e=>!ys(e[o.axis]));i-=Math.max(0,e)}i=oa(i,0,r-1)}if(p){let e=Math.max(ua(l,a.axis,d,!0).hi+1,n?0:ua(t,u,a.getPixelForValue(d),!0).hi+1);if(c){const t=l.slice(e-1).findIndex(e=>!ys(e[o.axis]));e+=Math.max(0,t)}s=oa(e,i,r)-i}else s=r-i}return{start:i,count:s}}function wa(e){const{xScale:t,yScale:n,_scaleRanges:r}=e,i={xmin:t.min,xmax:t.max,ymin:n.min,ymax:n.max};if(!r)return e._scaleRanges=i,!0;const s=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==n.min||r.ymax!==n.max;return Object.assign(r,i),s}const xa=e=>0===e||1===e,_a=(e,t,n)=>-Math.pow(2,10*(e-=1))*Math.sin((e-t)*zs/n),ka=(e,t,n)=>Math.pow(2,-10*e)*Math.sin((e-t)*zs/n)+1,Sa={linear:e=>e,easeInQuad:e=>e*e,easeOutQuad:e=>-e*(e-2),easeInOutQuad:e=>(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1),easeInCubic:e=>e*e*e,easeOutCubic:e=>(e-=1)*e*e+1,easeInOutCubic:e=>(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2),easeInQuart:e=>e*e*e*e,easeOutQuart:e=>-((e-=1)*e*e*e-1),easeInOutQuart:e=>(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2),easeInQuint:e=>e*e*e*e*e,easeOutQuint:e=>(e-=1)*e*e*e*e+1,easeInOutQuint:e=>(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2),easeInSine:e=>1-Math.cos(e*qs),easeOutSine:e=>Math.sin(e*qs),easeInOutSine:e=>-.5*(Math.cos(Vs*e)-1),easeInExpo:e=>0===e?0:Math.pow(2,10*(e-1)),easeOutExpo:e=>1===e?1:1-Math.pow(2,-10*e),easeInOutExpo:e=>xa(e)?e:e<.5?.5*Math.pow(2,10*(2*e-1)):.5*(2-Math.pow(2,-10*(2*e-1))),easeInCirc:e=>e>=1?e:-(Math.sqrt(1-e*e)-1),easeOutCirc:e=>Math.sqrt(1-(e-=1)*e),easeInOutCirc:e=>(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1),easeInElastic:e=>xa(e)?e:_a(e,.075,.3),easeOutElastic:e=>xa(e)?e:ka(e,.075,.3),easeInOutElastic(e){const t=.1125;return xa(e)?e:e<.5?.5*_a(2*e,t,.45):.5+.5*ka(2*e-1,t,.45)},easeInBack(e){const t=1.70158;return e*e*((t+1)*e-t)},easeOutBack(e){const t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack(e){let t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:e=>1-Sa.easeOutBounce(1-e),easeOutBounce(e){const t=7.5625,n=2.75;return e<1/n?t*e*e:e<2/n?t*(e-=1.5/n)*e+.75:e<2.5/n?t*(e-=2.25/n)*e+.9375:t*(e-=2.625/n)*e+.984375},easeInOutBounce:e=>e<.5?.5*Sa.easeInBounce(2*e):.5*Sa.easeOutBounce(2*e-1)+.5};function Ea(e){if(e&&"object"===typeof e){const t=e.toString();return"[object CanvasPattern]"===t||"[object CanvasGradient]"===t}return!1}function Ta(e){return Ea(e)?e:new ps(e)}function Ia(e){return Ea(e)?e:new ps(e).saturate(.5).darken(.1).hexString()}const Ca=["x","y","borderWidth","radius","tension"],Aa=["color","borderColor","backgroundColor"];const Da=new Map;function Pa(e,t,n){return function(e,t){t=t||{};const n=e+JSON.stringify(t);let r=Da.get(n);return r||(r=new Intl.NumberFormat(e,t),Da.set(n,r)),r}(t,n).format(e)}const Na={values:e=>vs(e)?e:""+e,numeric(e,t,n){if(0===e)return"0";const r=this.chart.options.locale;let i,s=e;if(n.length>1){const t=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(t<1e-4||t>1e15)&&(i="scientific"),s=function(e,t){let n=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;Math.abs(n)>=1&&e!==Math.floor(e)&&(n=e-Math.floor(e));return n}(e,n)}const a=Gs(Math.abs(s)),o=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Pa(e,r,l)},logarithmic(e,t,n){if(0===e)return"0";const r=n[t].significand||e/Math.pow(10,Math.floor(Gs(e)));return[1,2,3,5,10,15].includes(r)||t>.8*n.length?Na.numeric.call(this,e,t,n):""}};var Ma={formatters:Na};const Ra=Object.create(null),ja=Object.create(null);function Oa(e,t){if(!t)return e;const n=t.split(".");for(let r=0,i=n.length;r<i;++r){const t=n[r];e=e[t]||(e[t]=Object.create(null))}return e}function La(e,t,n){return"string"===typeof t?Ds(Oa(e,t),n):Ds(Oa(e,""),t)}class Fa{constructor(e,t){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=e=>e.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(e,t)=>Ia(t.backgroundColor),this.hoverBorderColor=(e,t)=>Ia(t.borderColor),this.hoverColor=(e,t)=>Ia(t.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(t)}set(e,t){return La(this,e,t)}get(e){return Oa(this,e)}describe(e,t){return La(ja,e,t)}override(e,t){return La(Ra,e,t)}route(e,t,n,r){const i=Oa(this,e),s=Oa(this,n),a="_"+t;Object.defineProperties(i,{[a]:{value:i[t],writable:!0},[t]:{enumerable:!0,get(){const e=this[a],t=s[r];return bs(e)?Object.assign({},t,e):_s(e,t)},set(e){this[a]=e}}})}apply(e){e.forEach(e=>e(this))}}var Va=new Fa({_scriptable:e=>!e.startsWith("on"),_indexable:e=>"events"!==e,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(e){e.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),e.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>"onProgress"!==e&&"onComplete"!==e&&"fn"!==e}),e.set("animations",{colors:{type:"color",properties:Aa},numbers:{type:"number",properties:Ca}}),e.describe("animations",{_fallback:"animation"}),e.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>0|e}}}})},function(e){e.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(e){e.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,t)=>t.lineWidth,tickColor:(e,t)=>t.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ma.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),e.route("scale.ticks","color","","color"),e.route("scale.grid","color","","borderColor"),e.route("scale.border","color","","borderColor"),e.route("scale.title","color","","color"),e.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&"callback"!==e&&"parser"!==e,_indexable:e=>"borderDash"!==e&&"tickBorderDash"!==e&&"dash"!==e}),e.describe("scales",{_fallback:"scale"}),e.describe("scale.ticks",{_scriptable:e=>"backdropPadding"!==e&&"callback"!==e,_indexable:e=>"backdropPadding"!==e})}]);function za(e,t,n,r,i){let s=t[i];return s||(s=t[i]=e.measureText(i).width,n.push(i)),s>r&&(r=s),r}function Ua(e,t,n,r){let i=(r=r||{}).data=r.data||{},s=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},s=r.garbageCollect=[],r.font=t),e.save(),e.font=t;let a=0;const o=n.length;let l,c,u,h,d;for(l=0;l<o;l++)if(h=n[l],void 0===h||null===h||vs(h)){if(vs(h))for(c=0,u=h.length;c<u;c++)d=h[c],void 0===d||null===d||vs(d)||(a=za(e,i,s,a,d))}else a=za(e,i,s,a,h);e.restore();const f=s.length/2;if(f>n.length){for(l=0;l<f;l++)delete i[s[l]];s.splice(0,f)}return a}function Ba(e,t,n){const r=e.currentDevicePixelRatio,i=0!==n?Math.max(n/2,.5):0;return Math.round((t-i)*r)/r+i}function Wa(e,t){(t||e)&&((t=t||e.getContext("2d")).save(),t.resetTransform(),t.clearRect(0,0,e.width,e.height),t.restore())}function qa(e,t,n,r){Ha(e,t,n,r,null)}function Ha(e,t,n,r,i){let s,a,o,l,c,u,h,d;const f=t.pointStyle,p=t.rotation,g=t.radius;let m=(p||0)*Ws;if(f&&"object"===typeof f&&(s=f.toString(),"[object HTMLImageElement]"===s||"[object HTMLCanvasElement]"===s))return e.save(),e.translate(n,r),e.rotate(m),e.drawImage(f,-f.width/2,-f.height/2,f.width,f.height),void e.restore();if(!(isNaN(g)||g<=0)){switch(e.beginPath(),f){default:i?e.ellipse(n,r,i/2,g,0,0,zs):e.arc(n,r,g,0,zs),e.closePath();break;case"triangle":u=i?i/2:g,e.moveTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Ks,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),m+=Ks,e.lineTo(n+Math.sin(m)*u,r-Math.cos(m)*g),e.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+Hs)*l,h=Math.cos(m+Hs)*(i?i/2-c:l),o=Math.sin(m+Hs)*l,d=Math.sin(m+Hs)*(i?i/2-c:l),e.arc(n-h,r-o,c,m-Vs,m-qs),e.arc(n+d,r-a,c,m-qs,m),e.arc(n+h,r+o,c,m,m+qs),e.arc(n-d,r+a,c,m+qs,m+Vs),e.closePath();break;case"rect":if(!p){l=Math.SQRT1_2*g,u=i?i/2:l,e.rect(n-u,r-l,2*u,2*l);break}m+=Hs;case"rectRot":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+d,r-a),e.lineTo(n+h,r+o),e.lineTo(n-d,r+a),e.closePath();break;case"crossRot":m+=Hs;case"cross":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"star":h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a),m+=Hs,h=Math.cos(m)*(i?i/2:g),a=Math.cos(m)*g,o=Math.sin(m)*g,d=Math.sin(m)*(i?i/2:g),e.moveTo(n-h,r-o),e.lineTo(n+h,r+o),e.moveTo(n+d,r-a),e.lineTo(n-d,r+a);break;case"line":a=i?i/2:Math.cos(m)*g,o=Math.sin(m)*g,e.moveTo(n-a,r-o),e.lineTo(n+a,r+o);break;case"dash":e.moveTo(n,r),e.lineTo(n+Math.cos(m)*(i?i/2:g),r+Math.sin(m)*g);break;case!1:e.closePath()}e.fill(),t.borderWidth>0&&e.stroke()}}function Ka(e,t,n){return n=n||.5,!t||e&&e.x>t.left-n&&e.x<t.right+n&&e.y>t.top-n&&e.y<t.bottom+n}function Ga(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()}function Qa(e){e.restore()}function Ya(e,t,n,r,i){if(!t)return e.lineTo(n.x,n.y);if("middle"===i){const r=(t.x+n.x)/2;e.lineTo(r,t.y),e.lineTo(r,n.y)}else"after"===i!==!!r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y);e.lineTo(n.x,n.y)}function Za(e,t,n,r){if(!t)return e.lineTo(n.x,n.y);e.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?n.cp2x:n.cp1x,r?n.cp2y:n.cp1y,n.x,n.y)}function $a(e,t,n,r,i){if(i.strikethrough||i.underline){const s=e.measureText(r),a=t-s.actualBoundingBoxLeft,o=t+s.actualBoundingBoxRight,l=n-s.actualBoundingBoxAscent,c=n+s.actualBoundingBoxDescent,u=i.strikethrough?(l+c)/2:c;e.strokeStyle=e.fillStyle,e.beginPath(),e.lineWidth=i.decorationWidth||2,e.moveTo(a,u),e.lineTo(o,u),e.stroke()}}function Ja(e,t){const n=e.fillStyle;e.fillStyle=t.color,e.fillRect(t.left,t.top,t.width,t.height),e.fillStyle=n}function Xa(e,t,n,r,i){let s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};const a=vs(t)?t:[t],o=s.strokeWidth>0&&""!==s.strokeColor;let l,c;for(e.save(),e.font=i.string,function(e,t){t.translation&&e.translate(t.translation[0],t.translation[1]),ys(t.rotation)||e.rotate(t.rotation),t.color&&(e.fillStyle=t.color),t.textAlign&&(e.textAlign=t.textAlign),t.textBaseline&&(e.textBaseline=t.textBaseline)}(e,s),l=0;l<a.length;++l)c=a[l],s.backdrop&&Ja(e,s.backdrop),o&&(s.strokeColor&&(e.strokeStyle=s.strokeColor),ys(s.strokeWidth)||(e.lineWidth=s.strokeWidth),e.strokeText(c,n,r,s.maxWidth)),e.fillText(c,n,r,s.maxWidth),$a(e,n,r,c,s),r+=Number(i.lineHeight);e.restore()}function eo(e,t){const{x:n,y:r,w:i,h:s,radius:a}=t;e.arc(n+a.topLeft,r+a.topLeft,a.topLeft,1.5*Vs,Vs,!0),e.lineTo(n,r+s-a.bottomLeft),e.arc(n+a.bottomLeft,r+s-a.bottomLeft,a.bottomLeft,Vs,qs,!0),e.lineTo(n+i-a.bottomRight,r+s),e.arc(n+i-a.bottomRight,r+s-a.bottomRight,a.bottomRight,qs,0,!0),e.lineTo(n+i,r+a.topRight),e.arc(n+i-a.topRight,r+a.topRight,a.topRight,0,-qs,!0),e.lineTo(n+a.topLeft,r)}const to=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,no=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function ro(e,t){const n=(""+e).match(to);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e}const io=e=>+e||0;function so(e,t){const n={},r=bs(t),i=r?Object.keys(t):t,s=bs(e)?r?n=>_s(e[n],e[t[n]]):t=>e[t]:()=>e;for(const a of i)n[a]=io(s(a));return n}function ao(e){return so(e,{top:"y",right:"x",bottom:"y",left:"x"})}function oo(e){return so(e,["topLeft","topRight","bottomLeft","bottomRight"])}function lo(e){const t=ao(e);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function co(e,t){e=e||{},t=t||Va.font;let n=_s(e.size,t.size);"string"===typeof n&&(n=parseInt(n,10));let r=_s(e.style,t.style);r&&!(""+r).match(no)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:_s(e.family,t.family),lineHeight:ro(_s(e.lineHeight,t.lineHeight),n),size:n,style:r,weight:_s(e.weight,t.weight),string:""};return i.string=function(e){return!e||ys(e.size)||ys(e.family)?null:(e.style?e.style+" ":"")+(e.weight?e.weight+" ":"")+e.size+"px "+e.family}(i),i}function uo(e,t,n,r){let i,s,a,o=!0;for(i=0,s=e.length;i<s;++i)if(a=e[i],void 0!==a&&(void 0!==t&&"function"===typeof a&&(a=a(t),o=!1),void 0!==n&&vs(a)&&(a=a[n%a.length],o=!1),void 0!==a))return r&&!o&&(r.cacheable=!1),a}function ho(e,t){return Object.assign(Object.create(e),t)}function fo(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[""],n=arguments.length>3?arguments[3]:void 0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:()=>e[0];const i=(arguments.length>2?arguments[2]:void 0)||e;"undefined"===typeof n&&(n=So("_fallback",e));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:e,_rootScopes:i,_fallback:n,_getTarget:r,override:r=>fo([r,...e],t,i,n)};return new Proxy(s,{deleteProperty:(t,n)=>(delete t[n],delete t._keys,delete e[0][n],!0),get:(n,r)=>vo(n,r,()=>function(e,t,n,r){let i;for(const s of t)if(i=So(mo(s,e),n),"undefined"!==typeof i)return yo(e,i)?_o(n,r,e,i):i}(r,t,e,n)),getOwnPropertyDescriptor:(e,t)=>Reflect.getOwnPropertyDescriptor(e._scopes[0],t),getPrototypeOf:()=>Reflect.getPrototypeOf(e[0]),has:(e,t)=>Eo(e).includes(t),ownKeys:e=>Eo(e),set(e,t,n){const i=e._storage||(e._storage=r());return e[t]=i[t]=n,delete e._keys,!0}})}function po(e,t,n,r){const i={_cacheable:!1,_proxy:e,_context:t,_subProxy:n,_stack:new Set,_descriptors:go(e,r),setContext:t=>po(e,t,n,r),override:i=>po(e.override(i),t,n,r)};return new Proxy(i,{deleteProperty:(t,n)=>(delete t[n],delete e[n],!0),get:(e,t,n)=>vo(e,t,()=>function(e,t,n){const{_proxy:r,_context:i,_subProxy:s,_descriptors:a}=e;let o=r[t];Ls(o)&&a.isScriptable(t)&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_stack:o}=n;if(o.has(e))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+e);o.add(e);let l=t(s,a||r);o.delete(e),yo(e,l)&&(l=_o(i._scopes,i,e,l));return l}(t,o,e,n));vs(o)&&o.length&&(o=function(e,t,n,r){const{_proxy:i,_context:s,_subProxy:a,_descriptors:o}=n;if("undefined"!==typeof s.index&&r(e))return t[s.index%t.length];if(bs(t[0])){const n=t,r=i._scopes.filter(e=>e!==n);t=[];for(const l of n){const n=_o(r,i,e,l);t.push(po(n,s,a&&a[e],o))}}return t}(t,o,e,a.isIndexable));yo(t,o)&&(o=po(o,i,s&&s[t],a));return o}(e,t,n)),getOwnPropertyDescriptor:(t,n)=>t._descriptors.allKeys?Reflect.has(e,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(e,n),getPrototypeOf:()=>Reflect.getPrototypeOf(e),has:(t,n)=>Reflect.has(e,n),ownKeys:()=>Reflect.ownKeys(e),set:(t,n,r)=>(e[n]=r,delete t[n],!0)})}function go(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{scriptable:!0,indexable:!0};const{_scriptable:n=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=e;return{allKeys:i,scriptable:n,indexable:r,isScriptable:Ls(n)?n:()=>n,isIndexable:Ls(r)?r:()=>r}}const mo=(e,t)=>e?e+js(t):t,yo=(e,t)=>bs(t)&&"adapters"!==e&&(null===Object.getPrototypeOf(t)||t.constructor===Object);function vo(e,t,n){if(Object.prototype.hasOwnProperty.call(e,t)||"constructor"===t)return e[t];const r=n();return e[t]=r,r}function bo(e,t,n){return Ls(e)?e(t,n):e}const wo=(e,t)=>!0===e?t:"string"===typeof e?Rs(t,e):void 0;function xo(e,t,n,r,i){for(const s of t){const t=wo(n,s);if(t){e.add(t);const s=bo(t._fallback,n,i);if("undefined"!==typeof s&&s!==n&&s!==r)return s}else if(!1===t&&"undefined"!==typeof r&&n!==r)return null}return!1}function _o(e,t,n,r){const i=t._rootScopes,s=bo(t._fallback,n,r),a=[...e,...i],o=new Set;o.add(r);let l=ko(o,a,n,s||n,r);return null!==l&&(("undefined"===typeof s||s===n||(l=ko(o,a,s,l,r),null!==l))&&fo(Array.from(o),[""],i,s,()=>function(e,t,n){const r=e._getTarget();t in r||(r[t]={});const i=r[t];if(vs(i)&&bs(n))return n;return i||{}}(t,n,r)))}function ko(e,t,n,r,i){for(;n;)n=xo(e,t,n,r,i);return n}function So(e,t){for(const n of t){if(!n)continue;const t=n[e];if("undefined"!==typeof t)return t}}function Eo(e){let t=e._keys;return t||(t=e._keys=function(e){const t=new Set;for(const n of e)for(const e of Object.keys(n).filter(e=>!e.startsWith("_")))t.add(e);return Array.from(t)}(e._scopes)),t}function To(e,t,n,r){const{iScale:i}=e,{key:s="r"}=this._parsing,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={r:i.parse(Rs(u,s),c)};return a}const Io=Number.EPSILON||1e-14,Co=(e,t)=>t<e.length&&!e[t].skip&&e[t],Ao=e=>"x"===e?"y":"x";function Do(e,t,n,r){const i=e.skip?t:e,s=t,a=n.skip?t:n,o=ra(s,i),l=ra(a,s);let c=o/(o+l),u=l/(o+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=r*c,d=r*u;return{previous:{x:s.x-h*(a.x-i.x),y:s.y-h*(a.y-i.y)},next:{x:s.x+d*(a.x-i.x),y:s.y+d*(a.y-i.y)}}}function Po(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x";const n=Ao(t),r=e.length,i=Array(r).fill(0),s=Array(r);let a,o,l,c=Co(e,0);for(a=0;a<r;++a)if(o=l,l=c,c=Co(e,a+1),l){if(c){const e=c[t]-l[t];i[a]=0!==e?(c[n]-l[n])/e:0}s[a]=o?c?Qs(i[a-1])!==Qs(i[a])?0:(i[a-1]+i[a])/2:i[a-1]:i[a]}!function(e,t,n){const r=e.length;let i,s,a,o,l,c=Co(e,0);for(let u=0;u<r-1;++u)l=c,c=Co(e,u+1),l&&c&&(Ys(t[u],0,Io)?n[u]=n[u+1]=0:(i=n[u]/t[u],s=n[u+1]/t[u],o=Math.pow(i,2)+Math.pow(s,2),o<=9||(a=3/Math.sqrt(o),n[u]=i*a*t[u],n[u+1]=s*a*t[u])))}(e,i,s),function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"x";const r=Ao(n),i=e.length;let s,a,o,l=Co(e,0);for(let c=0;c<i;++c){if(a=o,o=l,l=Co(e,c+1),!o)continue;const i=o[n],u=o[r];a&&(s=(i-a[n])/3,o["cp1".concat(n)]=i-s,o["cp1".concat(r)]=u-s*t[c]),l&&(s=(l[n]-i)/3,o["cp2".concat(n)]=i+s,o["cp2".concat(r)]=u+s*t[c])}}(e,s,t)}function No(e,t,n){return Math.max(Math.min(e,n),t)}function Mo(e,t,n,r,i){let s,a,o,l;if(t.spanGaps&&(e=e.filter(e=>!e.skip)),"monotone"===t.cubicInterpolationMode)Po(e,i);else{let n=r?e[e.length-1]:e[0];for(s=0,a=e.length;s<a;++s)o=e[s],l=Do(n,o,e[Math.min(s+1,a-(r?0:1))%a],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,n=o}t.capBezierPoints&&function(e,t){let n,r,i,s,a,o=Ka(e[0],t);for(n=0,r=e.length;n<r;++n)a=s,s=o,o=n<r-1&&Ka(e[n+1],t),s&&(i=e[n],a&&(i.cp1x=No(i.cp1x,t.left,t.right),i.cp1y=No(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=No(i.cp2x,t.left,t.right),i.cp2y=No(i.cp2y,t.top,t.bottom)))}(e,n)}function Ro(){return"undefined"!==typeof window&&"undefined"!==typeof document}function jo(e){let t=e.parentNode;return t&&"[object ShadowRoot]"===t.toString()&&(t=t.host),t}function Oo(e,t,n){let r;return"string"===typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}const Lo=e=>e.ownerDocument.defaultView.getComputedStyle(e,null);const Fo=["top","right","bottom","left"];function Vo(e,t,n){const r={};n=n?"-"+n:"";for(let i=0;i<4;i++){const s=Fo[i];r[s]=parseFloat(e[t+"-"+s+n])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}function zo(e,t){if("native"in e)return e;const{canvas:n,currentDevicePixelRatio:r}=t,i=Lo(n),s="border-box"===i.boxSizing,a=Vo(i,"padding"),o=Vo(i,"border","width"),{x:l,y:c,box:u}=function(e,t){const n=e.touches,r=n&&n.length?n[0]:e,{offsetX:i,offsetY:s}=r;let a,o,l=!1;if(((e,t,n)=>(e>0||t>0)&&(!n||!n.shadowRoot))(i,s,e.target))a=i,o=s;else{const e=t.getBoundingClientRect();a=r.clientX-e.left,o=r.clientY-e.top,l=!0}return{x:a,y:o,box:l}}(e,n),h=a.left+(u&&o.left),d=a.top+(u&&o.top);let{width:f,height:p}=t;return s&&(f-=a.width+o.width,p-=a.height+o.height),{x:Math.round((l-h)/f*n.width/r),y:Math.round((c-d)/p*n.height/r)}}const Uo=e=>Math.round(10*e)/10;function Bo(e,t,n,r){const i=Lo(e),s=Vo(i,"margin"),a=Oo(i.maxWidth,e,"clientWidth")||Bs,o=Oo(i.maxHeight,e,"clientHeight")||Bs,l=function(e,t,n){let r,i;if(void 0===t||void 0===n){const s=e&&jo(e);if(s){const e=s.getBoundingClientRect(),a=Lo(s),o=Vo(a,"border","width"),l=Vo(a,"padding");t=e.width-l.width-o.width,n=e.height-l.height-o.height,r=Oo(a.maxWidth,s,"clientWidth"),i=Oo(a.maxHeight,s,"clientHeight")}else t=e.clientWidth,n=e.clientHeight}return{width:t,height:n,maxWidth:r||Bs,maxHeight:i||Bs}}(e,t,n);let{width:c,height:u}=l;if("content-box"===i.boxSizing){const e=Vo(i,"border","width"),t=Vo(i,"padding");c-=t.width+e.width,u-=t.height+e.height}c=Math.max(0,c-s.width),u=Math.max(0,r?c/r:u-s.height),c=Uo(Math.min(c,a,l.maxWidth)),u=Uo(Math.min(u,o,l.maxHeight)),c&&!u&&(u=Uo(c/2));return(void 0!==t||void 0!==n)&&r&&l.height&&u>l.height&&(u=l.height,c=Uo(Math.floor(u*r))),{width:c,height:u}}function Wo(e,t,n){const r=t||1,i=Math.floor(e.height*r),s=Math.floor(e.width*r);e.height=Math.floor(e.height),e.width=Math.floor(e.width);const a=e.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height="".concat(e.height,"px"),a.style.width="".concat(e.width,"px")),(e.currentDevicePixelRatio!==r||a.height!==i||a.width!==s)&&(e.currentDevicePixelRatio=r,a.height=i,a.width=s,e.ctx.setTransform(r,0,0,r,0,0),!0)}const qo=function(){let e=!1;try{const t={get passive(){return e=!0,!1}};Ro()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch(Dm){}return e}();function Ho(e,t){const n=function(e,t){return Lo(e).getPropertyValue(t)}(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Ko(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:e.y+n*(t.y-e.y)}}function Go(e,t,n,r){return{x:e.x+n*(t.x-e.x),y:"middle"===r?n<.5?e.y:t.y:"after"===r?n<1?e.y:t.y:n>0?t.y:e.y}}function Qo(e,t,n,r){const i={x:e.cp2x,y:e.cp2y},s={x:t.cp1x,y:t.cp1y},a=Ko(e,i,n),o=Ko(i,s,n),l=Ko(s,t,n),c=Ko(a,o,n),u=Ko(o,l,n);return Ko(c,u,n)}function Yo(e,t,n){return e?function(e,t){return{x:n=>e+e+t-n,setWidth(e){t=e},textAlign:e=>"center"===e?e:"right"===e?"left":"right",xPlus:(e,t)=>e-t,leftForLtr:(e,t)=>e-t}}(t,n):{x:e=>e,setWidth(e){},textAlign:e=>e,xPlus:(e,t)=>e+t,leftForLtr:(e,t)=>e}}function Zo(e,t){let n,r;"ltr"!==t&&"rtl"!==t||(n=e.canvas.style,r=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",t,"important"),e.prevTextDirection=r)}function $o(e,t){void 0!==t&&(delete e.prevTextDirection,e.canvas.style.setProperty("direction",t[0],t[1]))}function Jo(e){return"angle"===e?{between:aa,compare:ia,normalize:sa}:{between:la,compare:(e,t)=>e-t,normalize:e=>e}}function Xo(e){let{start:t,end:n,count:r,loop:i,style:s}=e;return{start:t%r,end:n%r,loop:i&&(n-t+1)%r===0,style:s}}function el(e,t,n){if(!n)return[e];const{property:r,start:i,end:s}=n,a=t.length,{compare:o,between:l,normalize:c}=Jo(r),{start:u,end:h,loop:d,style:f}=function(e,t,n){const{property:r,start:i,end:s}=n,{between:a,normalize:o}=Jo(r),l=t.length;let c,u,{start:h,end:d,loop:f}=e;if(f){for(h+=l,d+=l,c=0,u=l;c<u&&a(o(t[h%l][r]),i,s);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:f,style:e.style}}(e,t,n),p=[];let g,m,y,v=!1,b=null;const w=()=>v||l(i,y,g)&&0!==o(i,y),x=()=>!v||0===o(s,g)||l(s,y,g);for(let _=u,k=u;_<=h;++_)m=t[_%a],m.skip||(g=c(m[r]),g!==y&&(v=l(g,i,s),null===b&&w()&&(b=0===o(g,i)?_:k),null!==b&&x()&&(p.push(Xo({start:b,end:_,loop:d,count:a,style:f})),b=null),k=_,y=g));return null!==b&&p.push(Xo({start:b,end:h,loop:d,count:a,style:f})),p}function tl(e,t){const n=[],r=e.segments;for(let i=0;i<r.length;i++){const s=el(r[i],e.points,t);s.length&&n.push(...s)}return n}function nl(e,t,n,r){return r&&r.setContext&&n?function(e,t,n,r){const i=e._chart.getContext(),s=rl(e.options),{_datasetIndex:a,options:{spanGaps:o}}=e,l=n.length,c=[];let u=s,h=t[0].start,d=h;function f(e,t,r,i){const s=o?-1:1;if(e!==t){for(e+=l;n[e%l].skip;)e-=s;for(;n[t%l].skip;)t+=s;e%l!==t%l&&(c.push({start:e%l,end:t%l,loop:r,style:i}),u=i,h=t%l)}}for(const p of t){h=o?h:p.start;let e,t=n[h%l];for(d=h+1;d<=p.end;d++){const s=n[d%l];e=rl(r.setContext(ho(i,{type:"segment",p0:t,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),il(e,u)&&f(h,d-1,p.loop,u),t=s,u=e}h<d-1&&f(h,d-1,p.loop,u)}return c}(e,t,n,r):t}function rl(e){return{backgroundColor:e.backgroundColor,borderCapStyle:e.borderCapStyle,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderJoinStyle:e.borderJoinStyle,borderWidth:e.borderWidth,borderColor:e.borderColor}}function il(e,t){if(!t)return!1;const n=[],r=function(e,t){return Ea(t)?(n.includes(t)||n.push(t),n.indexOf(t)):t};return JSON.stringify(e,r)!==JSON.stringify(t,r)}function sl(e,t,n){return e.options.clip?e[n]:t[n]}function al(e,t){const n=t._clip;if(n.disabled)return!1;const r=function(e,t){const{xScale:n,yScale:r}=e;return n&&r?{left:sl(n,t,"left"),right:sl(n,t,"right"),top:sl(r,t,"top"),bottom:sl(r,t,"bottom")}:t}(t,e.chartArea);return{left:!1===n.left?0:r.left-(!0===n.left?0:n.left),right:!1===n.right?e.width:r.right+(!0===n.right?0:n.right),top:!1===n.top?0:r.top-(!0===n.top?0:n.top),bottom:!1===n.bottom?e.height:r.bottom+(!0===n.bottom?0:n.bottom)}}class ol{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const i=t.listeners[r],s=t.duration;i.forEach(r=>r({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=ga.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Date.now(),t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let s,a=i.length-1,o=!1;for(;a>=0;--a)s=i[a],s._active?(s._total>n.duration&&(n.duration=s._total),s.tick(e),o=!0):(i[a]=i[i.length-1],i.pop());o&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=i.length}),this._lastDate=e,0===t&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){t&&t.length&&this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((e,t)=>Math.max(e,t._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!!(t&&t.running&&t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var ll=new ol;const cl="transparent",ul={boolean:(e,t,n)=>n>.5?t:e,color(e,t,n){const r=Ta(e||cl),i=r.valid&&Ta(t||cl);return i&&i.valid?i.mix(r,n).hexString():t},number:(e,t,n)=>e+(t-e)*n};class hl{constructor(e,t,n,r){const i=t[n];r=uo([e.to,r,i,e.from]);const s=uo([e.from,i,r]);this._active=!0,this._fn=e.fn||ul[e.type||typeof s],this._easing=Sa[e.easing]||Sa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,s=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=uo([e.to,t,r,e.from]),this._from=uo([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,i=this._from,s=this._loop,a=this._to;let o;if(this._active=i!==a&&(s||t<n),!this._active)return this._target[r]=a,void this._notify(!0);t<0?this._target[r]=i:(o=t/n%2,o=s&&o>1?2-o:o,o=this._easing(Math.min(1,Math.max(0,o))),this._target[r]=this._fn(i,a,o))}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}class dl{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!bs(e))return;const t=Object.keys(Va.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!bs(i))return;const s={};for(const e of t)s[e]=i[e];(vs(i.properties)&&i.properties||[r]).forEach(e=>{e!==r&&n.has(e)||n.set(e,s)})})}_animateOptions(e,t){const n=t.options,r=function(e,t){if(!t)return;let n=e.options;if(!n)return void(e.options=t);n.$shared&&(e.options=n=Object.assign({},n,{$shared:!1,$animations:{}}));return n}(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&function(e,t){const n=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const t=e[r[i]];t&&t.active()&&n.push(t.wait())}return Promise.all(n)}(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,t){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),s=Object.keys(t),a=Date.now();let o;for(o=s.length-1;o>=0;--o){const l=s[o];if("$"===l.charAt(0))continue;if("options"===l){r.push(...this._animateOptions(e,t));continue}const c=t[l];let u=i[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(i[l]=u=new hl(h,e,l,c),r.push(u)):e[l]=c}return r}update(e,t){if(0===this._properties.size)return void Object.assign(e,t);const n=this._createAnimations(e,t);return n.length?(ll.add(this._chart,n),!0):void 0}}function fl(e,t){const n=e&&e.options||{},r=n.reverse,i=void 0===n.min?t:0,s=void 0===n.max?t:0;return{start:r?s:i,end:r?i:s}}function pl(e,t){const n=[],r=e._getSortedDatasetMetas(t);let i,s;for(i=0,s=r.length;i<s;++i)n.push(r[i].index);return n}function gl(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i=e.keys,s="single"===r.mode;let a,o,l,c;if(null===t)return;let u=!1;for(a=0,o=i.length;a<o;++a){if(l=+i[a],l===n){if(u=!0,r.all)continue;break}c=e.values[l],ws(c)&&(s||0===t||Qs(t)===Qs(c))&&(t+=c)}return u||r.all?t:0}function ml(e,t){const n=e&&e.options.stacked;return n||void 0===n&&void 0!==t.stack}function yl(e,t,n){const r=e[t]||(e[t]={});return r[n]||(r[n]={})}function vl(e,t,n,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const t=e[i.index];if(n&&t>0||!n&&t<0)return i.index}return null}function bl(e,t){const{chart:n,_cachedMeta:r}=e,i=n._stacks||(n._stacks={}),{iScale:s,vScale:a,index:o}=r,l=s.axis,c=a.axis,u=function(e,t,n){return"".concat(e.id,".").concat(t.id,".").concat(n.stack||n.type)}(s,a,r),h=t.length;let d;for(let f=0;f<h;++f){const e=t[f],{[l]:n,[c]:s}=e;d=(e._stacks||(e._stacks={}))[c]=yl(i,u,n),d[o]=s,d._top=vl(d,a,!0,r.type),d._bottom=vl(d,a,!1,r.type);(d._visualValues||(d._visualValues={}))[o]=s}}function wl(e,t){const n=e.scales;return Object.keys(n).filter(e=>n[e].axis===t).shift()}function xl(e,t){const n=e.controller.index,r=e.vScale&&e.vScale.axis;if(r){t=t||e._parsed;for(const e of t){const t=e._stacks;if(!t||void 0===t[r]||void 0===t[r][n])return;delete t[r][n],void 0!==t[r]._visualValues&&void 0!==t[r]._visualValues[n]&&delete t[r]._visualValues[n]}}}const _l=e=>"reset"===e||"none"===e,kl=(e,t)=>t?e:Object.assign({},e);class Sl{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=ml(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&xl(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(e,t,n,r)=>"x"===e?t:"r"===e?r:n,i=t.xAxisID=_s(n.xAxisID,wl(e,"x")),s=t.yAxisID=_s(n.yAxisID,wl(e,"y")),a=t.rAxisID=_s(n.rAxisID,wl(e,"r")),o=t.indexAxis,l=t.iAxisID=r(o,i,s,a),c=t.vAxisID=r(o,s,i,a);t.xScale=this.getScaleForId(i),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(a),t.iScale=this.getScaleForId(l),t.vScale=this.getScaleForId(c)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&fa(this._data,this),e._stacked&&xl(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(bs(t)){const e=this._cachedMeta;this._data=function(e,t){const{iScale:n,vScale:r}=t,i="x"===n.axis?"x":"y",s="x"===r.axis?"x":"y",a=Object.keys(e),o=new Array(a.length);let l,c,u;for(l=0,c=a.length;l<c;++l)u=a[l],o[l]={[i]:u,[s]:e[u]};return o}(t,e)}else if(n!==t){if(n){fa(n,this);const e=this._cachedMeta;xl(e),e._parsed=[]}t&&Object.isExtensible(t)&&(i=this,(r=t)._chartjs?r._chartjs.listeners.push(i):(Object.defineProperty(r,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[i]}}),da.forEach(e=>{const t="_onData"+js(e),n=r[e];Object.defineProperty(r,e,{configurable:!0,enumerable:!1,value(){for(var e=arguments.length,i=new Array(e),s=0;s<e;s++)i[s]=arguments[s];const a=n.apply(this,i);return r._chartjs.listeners.forEach(e=>{"function"===typeof e[t]&&e[t](...i)}),a}})}))),this._syncList=[],this._data=t}var r,i}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=t._stacked;t._stacked=ml(t.vScale,t),t.stack!==n.stack&&(r=!0,xl(t),t.stack=n.stack),this._resyncElements(e),(r||i!==t._stacked)&&(bl(this,t._parsed),t._stacked=ml(t.vScale,t))}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:s}=n,a=i.axis;let o,l,c,u=0===e&&t===r.length||n._sorted,h=e>0&&n._parsed[e-1];if(!1===this._parsing)n._parsed=r,n._sorted=!0,c=r;else{c=vs(r[e])?this.parseArrayData(n,r,e,t):bs(r[e])?this.parseObjectData(n,r,e,t):this.parsePrimitiveData(n,r,e,t);const i=()=>null===l[a]||h&&l[a]<h[a];for(o=0;o<t;++o)n._parsed[o+e]=l=c[o],u&&(i()&&(u=!1),h=l);n._sorted=u}s&&bl(this,c)}parsePrimitiveData(e,t,n,r){const{iScale:i,vScale:s}=e,a=i.axis,o=s.axis,l=i.getLabels(),c=i===s,u=new Array(r);let h,d,f;for(h=0,d=r;h<d;++h)f=h+n,u[h]={[a]:c||i.parse(l[f],f),[o]:s.parse(t[f],f)};return u}parseArrayData(e,t,n,r){const{xScale:i,yScale:s}=e,a=new Array(r);let o,l,c,u;for(o=0,l=r;o<l;++o)c=o+n,u=t[c],a[o]={x:i.parse(u[0],c),y:s.parse(u[1],c)};return a}parseObjectData(e,t,n,r){const{xScale:i,yScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l=new Array(r);let c,u,h,d;for(c=0,u=r;c<u;++c)h=c+n,d=t[h],l[c]={x:i.parse(Rs(d,a),h),y:s.parse(Rs(d,o),h)};return l}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,i=this._cachedMeta,s=t[e.axis];return gl({keys:pl(r,!0),values:t._stacks[e.axis]._visualValues},s,i.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const i=n[t.axis];let s=null===i?NaN:i;const a=r&&n._stacks[t.axis];r&&a&&(r.values=a,s=gl(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,s=r.length,a=this._getOtherScale(e),o=((e,t,n)=>e&&!t.hidden&&t._stacked&&{keys:pl(n,!0),values:null})(t,n,this.chart),l={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:c,max:u}=function(e){const{min:t,max:n,minDefined:r,maxDefined:i}=e.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?n:Number.POSITIVE_INFINITY}}(a);let h,d;function f(){d=r[h];const t=d[a.axis];return!ws(d[e.axis])||c>t||u<t}for(h=0;h<s&&(f()||(this.updateRangeFromParsed(l,e,d,o),!i));++h);if(i)for(h=s-1;h>=0;--h)if(!f()){this.updateRangeFromParsed(l,e,d,o);break}return l}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,i,s;for(r=0,i=t.length;r<i;++r)s=t[r][e.axis],ws(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=function(e){let t,n,r,i;return bs(e)?(t=e.top,n=e.right,r=e.bottom,i=e.left):t=n=r=i=e,{top:t,right:n,bottom:r,left:i,disabled:!1===e}}(_s(this.options.clip,function(e,t,n){if(!1===n)return!1;const r=fl(e,n),i=fl(t,n);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],i=t.chartArea,s=[],a=this._drawStart||0,o=this._drawCount||r.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(e,i,a,o),c=a;c<a+o;++c){const t=r[c];t.hidden||(t.active&&l?s.push(t):t.draw(e,i))}for(c=0;c<s.length;++c)s[c].draw(e,i)}getStyle(e,t){const n=t?"active":"default";return void 0===e&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const t=this._cachedMeta.data[e];i=t.$context||(t.$context=function(e,t,n){return ho(e,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:n,index:t,mode:"default",type:"data"})}(this.getContext(),e,t)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=function(e,t){return ho(e,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!t,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default",n=arguments.length>2?arguments[2]:void 0;const r="active"===t,i=this._cachedDataOpts,s=e+"-"+t,a=i[s],o=this.enableOptionSharing&&Os(n);if(a)return kl(a,o);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,e),u=r?["".concat(e,"Hover"),"hover",e,""]:[e,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(Va.elements[e]),f=l.resolveNamedOptions(h,d,()=>this.getContext(n,r,t),u);return f.$shared&&(f.$shared=o,i[s]=Object.freeze(kl(f,o))),f}_resolveAnimations(e,t,n){const r=this.chart,i=this._cachedDataOpts,s="animation-".concat(t),a=i[s];if(a)return a;let o;if(!1!==r.options.animation){const r=this.chart.config,i=r.datasetAnimationScopeKeys(this._type,t),s=r.getOptionScopes(this.getDataset(),i);o=r.createResolver(s,this.getContext(e,n,t))}const l=new dl(r,o&&o.animations);return o&&o._cacheable&&(i[s]=Object.freeze(l)),l}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||_l(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,i=this.getSharedOptions(n),s=this.includeOptions(t,i)||i!==r;return this.updateSharedOptions(i,t,n),{sharedOptions:i,includeOptions:s}}updateElement(e,t,n,r){_l(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!_l(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const i=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[a,o,l]of this._syncList)this[a](o,l);this._syncList=[];const r=n.length,i=t.length,s=Math.min(i,r);s&&this.parse(0,s),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];const r=this._cachedMeta,i=r.data,s=e+t;let a;const o=e=>{for(e.length+=t,a=e.length-1;a>=s;a--)e[a]=e[a-t]};for(o(i),a=e;a<s;++a)i[a]=new this.dataElementType;this._parsing&&o(r._parsed),this.parse(e,t),n&&this.updateElements(i,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&xl(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function El(e){const t=e.iScale,n=function(e,t){if(!e._cache.$bar){const n=e.getMatchingVisibleMetas(t);let r=[];for(let t=0,i=n.length;t<i;t++)r=r.concat(n[t].controller.getAllParsedValues(e));e._cache.$bar=pa(r.sort((e,t)=>e-t))}return e._cache.$bar}(t,e.type);let r,i,s,a,o=t._length;const l=()=>{32767!==s&&-32768!==s&&(Os(a)&&(o=Math.min(o,Math.abs(s-a)||o)),a=s)};for(r=0,i=n.length;r<i;++r)s=t.getPixelForValue(n[r]),l();for(a=void 0,r=0,i=t.ticks.length;r<i;++r)s=t.getPixelForTick(r),l();return o}function Tl(e,t,n,r){return vs(e)?function(e,t,n,r){const i=n.parse(e[0],r),s=n.parse(e[1],r),a=Math.min(i,s),o=Math.max(i,s);let l=a,c=o;Math.abs(a)>Math.abs(o)&&(l=o,c=a),t[n.axis]=c,t._custom={barStart:l,barEnd:c,start:i,end:s,min:a,max:o}}(e,t,n,r):t[n.axis]=n.parse(e,r),t}function Il(e,t,n,r){const i=e.iScale,s=e.vScale,a=i.getLabels(),o=i===s,l=[];let c,u,h,d;for(c=n,u=n+r;c<u;++c)d=t[c],h={},h[i.axis]=o||i.parse(a[c],c),l.push(Tl(d,h,s,c));return l}function Cl(e){return e&&void 0!==e.barStart&&void 0!==e.barEnd}function Al(e,t,n,r){let i=t.borderSkipped;const s={};if(!i)return void(e.borderSkipped=s);if(!0===i)return void(e.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:o,reverse:l,top:c,bottom:u}=function(e){let t,n,r,i,s;return e.horizontal?(t=e.base>e.x,n="left",r="right"):(t=e.base<e.y,n="bottom",r="top"),t?(i="end",s="start"):(i="start",s="end"),{start:n,end:r,reverse:t,top:i,bottom:s}}(e);"middle"===i&&n&&(e.enableBorderRadius=!0,(n._top||0)===r?i=c:(n._bottom||0)===r?i=u:(s[Dl(u,a,o,l)]=!0,i=c)),s[Dl(i,a,o,l)]=!0,e.borderSkipped=s}function Dl(e,t,n,r){var i,s,a;return r?(a=n,e=Pl(e=(i=e)===(s=t)?a:i===a?s:i,n,t)):e=Pl(e,t,n),e}function Pl(e,t,n){return"start"===e?t:"end"===e?n:e}function Nl(e,t,n){let{inflateAmount:r}=t;e.inflateAmount="auto"===r?1===n?.33:0:r}(0,ji.A)(Sl,"defaults",{}),(0,ji.A)(Sl,"datasetElementType",null),(0,ji.A)(Sl,"dataElementType",null);class Ml extends Sl{parsePrimitiveData(e,t,n,r){return Il(e,t,n,r)}parseArrayData(e,t,n,r){return Il(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:i,vScale:s}=e,{xAxisKey:a="x",yAxisKey:o="y"}=this._parsing,l="x"===i.axis?a:o,c="x"===s.axis?a:o,u=[];let h,d,f,p;for(h=n,d=n+r;h<d;++h)p=t[h],f={},f[i.axis]=i.parse(Rs(p,l),h),u.push(Tl(Rs(p,c),f,s,h));return u}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const i=n._custom;i&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,i=this.getParsed(e),s=i._custom,a=Cl(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize();this._cachedMeta.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const i="reset"===r,{index:s,_cachedMeta:{vScale:a}}=this,o=a.getBasePixel(),l=a.isHorizontal(),c=this._getRuler(),{sharedOptions:u,includeOptions:h}=this._getSharedOptions(t,r);for(let d=t;d<t+n;d++){const t=this.getParsed(d),n=i||ys(t[a.axis])?{base:o,head:o}:this._calculateBarValuePixels(d),f=this._calculateBarIndexPixels(d,c),p=(t._stacks||{})[a.axis],g={horizontal:l,base:n.base,enableBorderRadius:!p||Cl(t._custom)||s===p._top||s===p._bottom,x:l?n.head:f.center,y:l?f.center:n.head,height:l?f.size:Math.abs(n.size),width:l?Math.abs(n.size):f.size};h&&(g.options=u||this.resolveDataElementOptions(d,e[d].active?"active":r));const m=g.options||e[d].options;Al(g,m,p,s),Nl(g,m,c.ratio),this.updateElement(e[d],d,g,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(e=>e.controller.options.grouped),i=n.options.stacked,s=[],a=this._cachedMeta.controller.getParsed(t),o=a&&a[n.axis],l=e=>{const t=e._parsed.find(e=>e[n.axis]===o),r=t&&t[e.vScale.axis];if(ys(r)||isNaN(r))return!0};for(const c of r)if((void 0===t||!l(c))&&((!1===i||-1===s.indexOf(c.stack)||void 0===i&&void 0===c.stack)&&s.push(c.stack),c.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,t=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===t).shift()}_getAxis(){const e={},t=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[_s("x"===this.chart.options.indexAxis?n.xAxisID:n.yAxisID,t)]=!0;return Object.keys(e)}_getStackIndex(e,t,n){const r=this._getStacks(e,n),i=void 0!==t?r.indexOf(t):-1;return-1===i?r.length-1:i}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let i,s;for(i=0,s=t.data.length;i<s;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const a=e.barThickness;return{min:a||El(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:a?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n,index:r},options:{base:i,minBarLength:s}}=this,a=i||0,o=this.getParsed(e),l=o._custom,c=Cl(l);let u,h,d=o[t.axis],f=0,p=n?this.applyStack(t,o,n):d;p!==d&&(f=p-d,p=d),c&&(d=l.barStart,p=l.barEnd-l.barStart,0!==d&&Qs(d)!==Qs(l.barEnd)&&(f=0),f+=d);const g=ys(i)||c?f:i;let m=t.getPixelForValue(g);if(u=this.chart.getDataVisibility(e)?t.getPixelForValue(f+p):m,h=u-m,Math.abs(h)<s){h=function(e,t,n){return 0!==e?Qs(e):(t.isHorizontal()?1:-1)*(t.min>=n?1:-1)}(h,t,a)*s,d===a&&(m-=h/2);const e=t.getPixelForDecimal(0),i=t.getPixelForDecimal(1),l=Math.min(e,i),f=Math.max(e,i);m=Math.max(Math.min(m,f),l),u=m+h,n&&!c&&(o._stacks[t.axis]._visualValues[r]=t.getValueForPixel(u)-t.getValueForPixel(m))}if(m===t.getPixelForValue(a)){const e=Qs(h)*t.getLineWidthForValue(a)/2;m+=e,h-=e}return{size:h,base:m,head:u,center:u+h/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,i=r.skipNull,s=_s(r.maxBarThickness,1/0);let a,o;const l=this._getAxisCount();if(t.grouped){const n=i?this._getStackCount(e):t.stackCount,c="flex"===r.barThickness?function(e,t,n,r){const i=t.pixels,s=i[e];let a=e>0?i[e-1]:null,o=e<i.length-1?i[e+1]:null;const l=n.categoryPercentage;null===a&&(a=s-(null===o?t.end-t.start:o-s)),null===o&&(o=s+s-a);const c=s-(s-Math.min(a,o))/2*l;return{chunk:Math.abs(o-a)/2*l/r,ratio:n.barPercentage,start:c}}(e,t,r,n*l):function(e,t,n,r){const i=n.barThickness;let s,a;return ys(i)?(s=t.min*n.categoryPercentage,a=n.barPercentage):(s=i*r,a=1),{chunk:s/r,ratio:a,start:t.pixels[e]-s/2}}(e,t,r,n*l),u="x"===this.chart.options.indexAxis?this.getDataset().xAxisID:this.getDataset().yAxisID,h=this._getAxis().indexOf(_s(u,this.getFirstScaleIdForIndexAxis())),d=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+h;a=c.start+c.chunk*d+c.chunk/2,o=Math.min(s,c.chunk*c.ratio)}else a=n.getPixelForValue(this.getParsed(e)[n.axis],e),o=Math.min(s,t.min*t.ratio);return{base:a-o/2,head:a+o/2,center:a,size:o}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)null===this.getParsed(i)[t.axis]||n[i].hidden||n[i].draw(this._ctx)}}(0,ji.A)(Ml,"id","bar"),(0,ji.A)(Ml,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),(0,ji.A)(Ml,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Rl extends Sl{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const i=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<i.length;s++)i[s]._custom=this.resolveDataElementOptions(s+n).radius;return i}parseArrayData(e,t,n,r){const i=super.parseArrayData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=_s(e[2],this.resolveDataElementOptions(s+n).radius)}return i}parseObjectData(e,t,n,r){const i=super.parseObjectData(e,t,n,r);for(let s=0;s<i.length;s++){const e=t[n+s];i[s]._custom=_s(e&&e.r&&+e.r,this.resolveDataElementOptions(s+n).radius)}return i}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y),l=s._custom;return{label:n[e]||"",value:"("+a+", "+o+(l?", "+l:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a}=this._cachedMeta,{sharedOptions:o,includeOptions:l}=this._getSharedOptions(t,r),c=s.axis,u=a.axis;for(let h=t;h<t+n;h++){const t=e[h],n=!i&&this.getParsed(h),d={},f=d[c]=i?s.getPixelForDecimal(.5):s.getPixelForValue(n[c]),p=d[u]=i?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(f)||isNaN(p),l&&(d.options=o||this.resolveDataElementOptions(h,t.active?"active":r),i&&(d.options.radius=0)),this.updateElement(t,h,d,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const i=r.radius;return"active"!==t&&(r.radius=0),r.radius+=_s(n&&n._custom,i),r}}(0,ji.A)(Rl,"id","bubble"),(0,ji.A)(Rl,"defaults",{datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}}),(0,ji.A)(Rl,"overrides",{scales:{x:{type:"linear"},y:{type:"linear"}}});class jl extends Sl{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(!1===this._parsing)r._parsed=n;else{let i,s,a=e=>+n[e];if(bs(n[e])){const{key:e="value"}=this._parsing;a=t=>+Rs(n[t],e)}for(i=e,s=e+t;i<s;++i)r._parsed[i]=a(i)}}_getRotation(){return Xs(this.options.rotation-90)}_getCircumference(){return Xs(this.options.circumference)}_getRotationExtents(){let e=zs,t=-zs;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const r=this.chart.getDatasetMeta(n).controller,i=r._getRotation(),s=r._getCircumference();e=Math.min(e,i),t=Math.max(t,i+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,i=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(i)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-s)/2,0),o=Math.min((l=this.options.cutout,c=a,"string"===typeof l&&l.endsWith("%")?parseFloat(l)/100:+l/c),1);var l,c;const u=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:f,ratioY:p,offsetX:g,offsetY:m}=function(e,t,n){let r=1,i=1,s=0,a=0;if(t<zs){const o=e,l=o+t,c=Math.cos(o),u=Math.sin(o),h=Math.cos(l),d=Math.sin(l),f=(e,t,r)=>aa(e,o,l,!0)?1:Math.max(t,t*n,r,r*n),p=(e,t,r)=>aa(e,o,l,!0)?-1:Math.min(t,t*n,r,r*n),g=f(0,c,h),m=f(qs,u,d),y=p(Vs,c,h),v=p(Vs+qs,u,d);r=(g-y)/2,i=(m-v)/2,s=-(g+y)/2,a=-(m+v)/2}return{ratioX:r,ratioY:i,offsetX:s,offsetY:a}}(d,h,o),y=(n.width-s)/f,v=(n.height-s)/p,b=Math.max(Math.min(y,v)/2,0),w=ks(this.options.radius,b),x=(w-Math.max(w*o,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*w,this.offsetY=m*w,r.total=this.calculateTotal(),this.outerRadius=w-x*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-x*u,0),this.updateElements(i,0,i.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,i=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||null===r._parsed[e]||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*i/zs)}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.chartArea,o=s.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=i&&o.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:f,includeOptions:p}=this._getSharedOptions(t,r);let g,m=this._getRotation();for(g=0;g<t;++g)m+=this._circumference(g,i);for(g=t;g<t+n;++g){const t=this._circumference(g,i),n=e[g],s={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+t,circumference:t,outerRadius:d,innerRadius:h};p&&(s.options=f||this.resolveDataElementOptions(g,n.active?"active":r)),m+=t,this.updateElement(n,g,s,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n,r=0;for(n=0;n<t.length;n++){const i=e._parsed[n];null===i||isNaN(i)||!this.chart.getDataVisibility(n)||t[n].hidden||(r+=Math.abs(i))}return r}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?zs*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pa(t._parsed[e],n.options.locale);return{label:r[e]||"",value:i}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,i,s,a,o;if(!e)for(r=0,i=n.data.datasets.length;r<i;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,a=s.controller;break}if(!e)return 0;for(r=0,i=e.length;r<i;++r)o=a.resolveDataElementOptions(r),"inner"!==o.borderAlign&&(t=Math.max(t,o.borderWidth||0,o.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const e=this.resolveDataElementOptions(n);t=Math.max(t,e.offset||0,e.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(_s(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}(0,ji.A)(jl,"id","doughnut"),(0,ji.A)(jl,"defaults",{datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"}),(0,ji.A)(jl,"descriptors",{_scriptable:e=>"spacing"!==e,_indexable:e=>"spacing"!==e&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")}),(0,ji.A)(jl,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}}});class Ol extends Sl{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=t,s=this.chart._animationsDisabled;let{start:a,count:o}=ba(t,r,s);this._drawStart=a,this._drawCount=o,wa(t)&&(a=0,o=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const l=this.resolveDatasetElementOptions(e);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:l},e),this.updateElements(r,a,o,e)}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,{sharedOptions:c,includeOptions:u}=this._getSharedOptions(t,r),h=s.axis,d=a.axis,{spanGaps:f,segment:p}=this.options,g=$s(f)?f:Number.POSITIVE_INFINITY,m=this.chart._animationsDisabled||i||"none"===r,y=t+n,v=e.length;let b=t>0&&this.getParsed(t-1);for(let w=0;w<v;++w){const n=e[w],f=m?n:{};if(w<t||w>=y){f.skip=!0;continue}const v=this.getParsed(w),x=ys(v[d]),_=f[h]=s.getPixelForValue(v[h],w),k=f[d]=i||x?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,v,o):v[d],w);f.skip=isNaN(_)||isNaN(k)||x,f.stop=w>0&&Math.abs(v[h]-b[h])>g,p&&(f.parsed=v,f.raw=l.data[w]),u&&(f.options=c||this.resolveDataElementOptions(w,n.active?"active":r)),m||this.updateElement(n,w,f,r),b=v}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}(0,ji.A)(Ol,"id","line"),(0,ji.A)(Ol,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),(0,ji.A)(Ol,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});class Ll extends Sl{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],i=Pa(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:i}}parseObjectData(e,t,n,r){return To.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((e,n)=>{const r=this.getParsed(n).r;!isNaN(r)&&this.chart.getDataVisibility(n)&&(r<t.min&&(t.min=r),r>t.max&&(t.max=r))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),i=Math.max(r/2,0),s=(i-Math.max(n.cutoutPercentage?i/100*n.cutoutPercentage:1,0))/e.getVisibleDatasetCount();this.outerRadius=i-s*this.index,this.innerRadius=this.outerRadius-s}updateElements(e,t,n,r){const i="reset"===r,s=this.chart,a=s.options.animation,o=this._cachedMeta.rScale,l=o.xCenter,c=o.yCenter,u=o.getIndexAngle(0)-.5*Vs;let h,d=u;const f=360/this.countVisibleElements();for(h=0;h<t;++h)d+=this._computeAngle(h,r,f);for(h=t;h<t+n;h++){const t=e[h];let n=d,p=d+this._computeAngle(h,r,f),g=s.getDataVisibility(h)?o.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=p,i&&(a.animateScale&&(g=0),a.animateRotate&&(n=p=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:p,options:this.resolveDataElementOptions(h,t.active?"active":r)};this.updateElement(t,h,m,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((e,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?Xs(this.resolveDataElementOptions(e,t).angle||n):0}}(0,ji.A)(Ll,"id","polarArea"),(0,ji.A)(Ll,"defaults",{dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0}),(0,ji.A)(Ll,"overrides",{aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){const t=e.data;if(t.labels.length&&t.datasets.length){const{labels:{pointStyle:n,color:r}}=e.legend.options;return t.labels.map((t,i)=>{const s=e.getDatasetMeta(0).controller.getStyle(i);return{text:t,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,fontColor:r,lineWidth:s.borderWidth,pointStyle:n,hidden:!e.getDataVisibility(i),index:i}})}return[]}},onClick(e,t,n){n.chart.toggleDataVisibility(t.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}});class Fl extends jl{}(0,ji.A)(Fl,"id","pie"),(0,ji.A)(Fl,"defaults",{cutout:0,rotation:0,circumference:360,radius:"100%"});class Vl extends Sl{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return To.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],i=t.iScale.getLabels();if(n.points=r,"resize"!==e){const t=this.resolveDatasetElementOptions(e);this.options.showLine||(t.borderWidth=0);const s={_loop:!0,_fullLoop:i.length===r.length,options:t};this.updateElement(n,void 0,s,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const i=this._cachedMeta.rScale,s="reset"===r;for(let a=t;a<t+n;a++){const t=e[a],n=this.resolveDataElementOptions(a,t.active?"active":r),o=i.getPointPositionForValue(a,this.getParsed(a).r),l=s?i.xCenter:o.x,c=s?i.yCenter:o.y,u={x:l,y:c,angle:o.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(t,a,u,r)}}}(0,ji.A)(Vl,"id","radar"),(0,ji.A)(Vl,"defaults",{datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}}),(0,ji.A)(Vl,"overrides",{aspectRatio:1,scales:{r:{type:"radialLinear"}}});class zl extends Sl{getLabelAndValue(e){const t=this._cachedMeta,n=this.chart.data.labels||[],{xScale:r,yScale:i}=t,s=this.getParsed(e),a=r.getLabelForValue(s.x),o=i.getLabelForValue(s.y);return{label:n[e]||"",value:"("+a+", "+o+")"}}update(e){const t=this._cachedMeta,{data:n=[]}=t,r=this.chart._animationsDisabled;let{start:i,count:s}=ba(t,n,r);if(this._drawStart=i,this._drawCount=s,wa(t)&&(i=0,s=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:i,_dataset:s}=t;i._chart=this.chart,i._datasetIndex=this.index,i._decimated=!!s._decimated,i.points=n;const a=this.resolveDatasetElementOptions(e);a.segment=this.options.segment,this.updateElement(i,void 0,{animated:!r,options:a},e)}else this.datasetElementType&&(delete t.dataset,this.datasetElementType=!1);this.updateElements(n,i,s,e)}addElements(){const{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,t,n,r){const i="reset"===r,{iScale:s,vScale:a,_stacked:o,_dataset:l}=this._cachedMeta,c=this.resolveDataElementOptions(t,r),u=this.getSharedOptions(c),h=this.includeOptions(r,u),d=s.axis,f=a.axis,{spanGaps:p,segment:g}=this.options,m=$s(p)?p:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||i||"none"===r;let v=t>0&&this.getParsed(t-1);for(let b=t;b<t+n;++b){const t=e[b],n=this.getParsed(b),c=y?t:{},p=ys(n[f]),w=c[d]=s.getPixelForValue(n[d],b),x=c[f]=i||p?a.getBasePixel():a.getPixelForValue(o?this.applyStack(a,n,o):n[f],b);c.skip=isNaN(w)||isNaN(x)||p,c.stop=b>0&&Math.abs(n[d]-v[d])>m,g&&(c.parsed=n,c.raw=l.data[b]),h&&(c.options=u||this.resolveDataElementOptions(b,t.active?"active":r)),y||this.updateElement(t,b,c,r),v=n}this.updateSharedOptions(u,r,c)}getMaxOverflow(){const e=this._cachedMeta,t=e.data||[];if(!this.options.showLine){let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}const n=e.dataset,r=n.options&&n.options.borderWidth||0;if(!t.length)return r;const i=t[0].size(this.resolveDataElementOptions(0)),s=t[t.length-1].size(this.resolveDataElementOptions(t.length-1));return Math.max(r,i,s)/2}}(0,ji.A)(zl,"id","scatter"),(0,ji.A)(zl,"defaults",{datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1}),(0,ji.A)(zl,"overrides",{interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}});function Ul(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Bl{static override(e){Object.assign(Bl.prototype,e)}constructor(e){(0,ji.A)(this,"options",void 0),this.options=e||{}}init(){}formats(){return Ul()}parse(){return Ul()}format(){return Ul()}add(){return Ul()}diff(){return Ul()}startOf(){return Ul()}endOf(){return Ul()}}var Wl=Bl;function ql(e,t,n,r){const{controller:i,data:s,_sorted:a}=e,o=i._cachedMeta.iScale,l=e.dataset&&e.dataset.options?e.dataset.options.spanGaps:null;if(o&&t===o.axis&&"r"!==t&&a&&s.length){const a=o._reversePixels?ha:ua;if(!r){const r=a(s,t,n);if(l){const{vScale:t}=i._cachedMeta,{_parsed:n}=e,s=n.slice(0,r.lo+1).reverse().findIndex(e=>!ys(e[t.axis]));r.lo-=Math.max(0,s);const a=n.slice(r.hi).findIndex(e=>!ys(e[t.axis]));r.hi+=Math.max(0,a)}return r}if(i._sharedOptions){const e=s[0],r="function"===typeof e.getRange&&e.getRange(t);if(r){const e=a(s,t,n-r),i=a(s,t,n+r);return{lo:e.lo,hi:i.hi}}}}return{lo:0,hi:s.length-1}}function Hl(e,t,n,r,i){const s=e.getSortedVisibleDatasetMetas(),a=n[t];for(let o=0,l=s.length;o<l;++o){const{index:e,data:n}=s[o],{lo:l,hi:c}=ql(s[o],t,a,i);for(let t=l;t<=c;++t){const i=n[t];i.skip||r(i,e,t)}}}function Kl(e,t,n,r,i){const s=[];if(!i&&!e.isPointInArea(t))return s;return Hl(e,n,t,function(n,a,o){(i||Ka(n,e.chartArea,0))&&n.inRange(t.x,t.y,r)&&s.push({element:n,datasetIndex:a,index:o})},!0),s}function Gl(e,t,n,r,i,s){let a=[];const o=function(e){const t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){const i=t?Math.abs(e.x-r.x):0,s=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(s,2))}}(n);let l=Number.POSITIVE_INFINITY;return Hl(e,n,t,function(n,c,u){const h=n.inRange(t.x,t.y,i);if(r&&!h)return;const d=n.getCenterPoint(i);if(!(!!s||e.isPointInArea(d))&&!h)return;const f=o(t,d);f<l?(a=[{element:n,datasetIndex:c,index:u}],l=f):f===l&&a.push({element:n,datasetIndex:c,index:u})}),a}function Ql(e,t,n,r,i,s){return s||e.isPointInArea(t)?"r"!==n||r?Gl(e,t,n,r,i,s):function(e,t,n,r){let i=[];return Hl(e,n,t,function(e,n,s){const{startAngle:a,endAngle:o}=e.getProps(["startAngle","endAngle"],r),{angle:l}=na(e,{x:t.x,y:t.y});aa(l,a,o)&&i.push({element:e,datasetIndex:n,index:s})}),i}(e,t,n,i):[]}function Yl(e,t,n,r,i){const s=[],a="x"===n?"inXRange":"inYRange";let o=!1;return Hl(e,n,t,(e,r,l)=>{e[a]&&e[a](t[n],i)&&(s.push({element:e,datasetIndex:r,index:l}),o=o||e.inRange(t.x,t.y,i))}),r&&!o?[]:s}var Zl={evaluateInteractionItems:Hl,modes:{index(e,t,n,r){const i=zo(t,e),s=n.axis||"x",a=n.includeInvisible||!1,o=n.intersect?Kl(e,i,s,r,a):Ql(e,i,s,!1,r,a),l=[];return o.length?(e.getSortedVisibleDatasetMetas().forEach(e=>{const t=o[0].index,n=e.data[t];n&&!n.skip&&l.push({element:n,datasetIndex:e.index,index:t})}),l):[]},dataset(e,t,n,r){const i=zo(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;let o=n.intersect?Kl(e,i,s,r,a):Ql(e,i,s,!1,r,a);if(o.length>0){const t=o[0].datasetIndex,n=e.getDatasetMeta(t).data;o=[];for(let e=0;e<n.length;++e)o.push({element:n[e],datasetIndex:t,index:e})}return o},point:(e,t,n,r)=>Kl(e,zo(t,e),n.axis||"xy",r,n.includeInvisible||!1),nearest(e,t,n,r){const i=zo(t,e),s=n.axis||"xy",a=n.includeInvisible||!1;return Ql(e,i,s,n.intersect,r,a)},x:(e,t,n,r)=>Yl(e,zo(t,e),"x",n.intersect,r),y:(e,t,n,r)=>Yl(e,zo(t,e),"y",n.intersect,r)}};const $l=["left","top","right","bottom"];function Jl(e,t){return e.filter(e=>e.pos===t)}function Xl(e,t){return e.filter(e=>-1===$l.indexOf(e.pos)&&e.box.axis===t)}function ec(e,t){return e.sort((e,n)=>{const r=t?n:e,i=t?e:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function tc(e,t){const n=function(e){const t={};for(const n of e){const{stack:e,pos:r,stackWeight:i}=n;if(!e||!$l.includes(r))continue;const s=t[e]||(t[e]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=i}return t}(e),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let s,a,o;for(s=0,a=e.length;s<a;++s){o=e[s];const{fullSize:a}=o.box,l=n[o.stack],c=l&&o.stackWeight/l.weight;o.horizontal?(o.width=c?c*r:a&&t.availableWidth,o.height=i):(o.width=r,o.height=c?c*i:a&&t.availableHeight)}return n}function nc(e,t,n,r){return Math.max(e[n],t[n])+Math.max(e[r],t[r])}function rc(e,t){e.top=Math.max(e.top,t.top),e.left=Math.max(e.left,t.left),e.bottom=Math.max(e.bottom,t.bottom),e.right=Math.max(e.right,t.right)}function ic(e,t,n,r){const{pos:i,box:s}=n,a=e.maxPadding;if(!bs(i)){n.size&&(e[i]-=n.size);const t=r[n.stack]||{size:0,count:1};t.size=Math.max(t.size,n.horizontal?s.height:s.width),n.size=t.size/t.count,e[i]+=n.size}s.getPadding&&rc(a,s.getPadding());const o=Math.max(0,t.outerWidth-nc(a,e,"left","right")),l=Math.max(0,t.outerHeight-nc(a,e,"top","bottom")),c=o!==e.w,u=l!==e.h;return e.w=o,e.h=l,n.horizontal?{same:c,other:u}:{same:u,other:c}}function sc(e,t){const n=t.maxPadding;function r(e){const r={left:0,top:0,right:0,bottom:0};return e.forEach(e=>{r[e]=Math.max(t[e],n[e])}),r}return r(e?["left","right"]:["top","bottom"])}function ac(e,t,n,r){const i=[];let s,a,o,l,c,u;for(s=0,a=e.length,c=0;s<a;++s){o=e[s],l=o.box,l.update(o.width||t.w,o.height||t.h,sc(o.horizontal,t));const{same:a,other:h}=ic(t,n,o,r);c|=a&&i.length,u=u||h,l.fullSize||i.push(o)}return c&&ac(i,t,n,r)||u}function oc(e,t,n,r,i){e.top=n,e.left=t,e.right=t+r,e.bottom=n+i,e.width=r,e.height=i}function lc(e,t,n,r){const i=n.padding;let{x:s,y:a}=t;for(const o of e){const e=o.box,l=r[o.stack]||{count:1,placed:0,weight:1},c=o.stackWeight/l.weight||1;if(o.horizontal){const r=t.w*c,s=l.size||e.height;Os(l.start)&&(a=l.start),e.fullSize?oc(e,i.left,a,n.outerWidth-i.right-i.left,s):oc(e,t.left+l.placed,a,r,s),l.start=a,l.placed+=r,a=e.bottom}else{const r=t.h*c,a=l.size||e.width;Os(l.start)&&(s=l.start),e.fullSize?oc(e,s,i.top,a,n.outerHeight-i.bottom-i.top):oc(e,s,t.top+l.placed,a,r),l.start=s,l.placed+=r,s=e.right}}t.x=s,t.y=a}var cc={addBox(e,t){e.boxes||(e.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},e.boxes.push(t)},removeBox(e,t){const n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure(e,t,n){t.fullSize=n.fullSize,t.position=n.position,t.weight=n.weight},update(e,t,n,r){if(!e)return;const i=lo(e.options.layout.padding),s=Math.max(t-i.width,0),a=Math.max(n-i.height,0),o=function(e){const t=function(e){const t=[];let n,r,i,s,a,o;for(n=0,r=(e||[]).length;n<r;++n)i=e[n],({position:s,options:{stack:a,stackWeight:o=1}}=i),t.push({index:n,box:i,pos:s,horizontal:i.isHorizontal(),weight:i.weight,stack:a&&s+a,stackWeight:o});return t}(e),n=ec(t.filter(e=>e.box.fullSize),!0),r=ec(Jl(t,"left"),!0),i=ec(Jl(t,"right")),s=ec(Jl(t,"top"),!0),a=ec(Jl(t,"bottom")),o=Xl(t,"x"),l=Xl(t,"y");return{fullSize:n,leftAndTop:r.concat(s),rightAndBottom:i.concat(l).concat(a).concat(o),chartArea:Jl(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:s.concat(a).concat(o)}}(e.boxes),l=o.vertical,c=o.horizontal;Es(e.boxes,e=>{"function"===typeof e.beforeLayout&&e.beforeLayout()});const u=l.reduce((e,t)=>t.box.options&&!1===t.box.options.display?e:e+1,0)||1,h=Object.freeze({outerWidth:t,outerHeight:n,padding:i,availableWidth:s,availableHeight:a,vBoxMaxWidth:s/2/u,hBoxMaxHeight:a/2}),d=Object.assign({},i);rc(d,lo(r));const f=Object.assign({maxPadding:d,w:s,h:a,x:i.left,y:i.top},i),p=tc(l.concat(c),h);ac(o.fullSize,f,h,p),ac(l,f,h,p),ac(c,f,h,p)&&ac(l,f,h,p),function(e){const t=e.maxPadding;function n(n){const r=Math.max(t[n]-e[n],0);return e[n]+=r,r}e.y+=n("top"),e.x+=n("left"),n("right"),n("bottom")}(f),lc(o.leftAndTop,f,h,p),f.x+=f.w,f.y+=f.h,lc(o.rightAndBottom,f,h,p),e.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},Es(o.chartArea,t=>{const n=t.box;Object.assign(n,e.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})})}};class uc{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class hc extends uc{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const dc="$chartjs",fc={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},pc=e=>null===e||""===e;const gc=!!qo&&{passive:!0};function mc(e,t,n){e&&e.canvas&&e.canvas.removeEventListener(t,n,gc)}function yc(e,t){for(const n of e)if(n===t||n.contains(t))return!0}function vc(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||yc(n.addedNodes,r),t=t&&!yc(n.removedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}function bc(e,t,n){const r=e.canvas,i=new MutationObserver(e=>{let t=!1;for(const n of e)t=t||yc(n.removedNodes,r),t=t&&!yc(n.addedNodes,r);t&&n()});return i.observe(document,{childList:!0,subtree:!0}),i}const wc=new Map;let xc=0;function _c(){const e=window.devicePixelRatio;e!==xc&&(xc=e,wc.forEach((t,n)=>{n.currentDevicePixelRatio!==e&&t()}))}function kc(e,t,n){const r=e.canvas,i=r&&jo(r);if(!i)return;const s=ma((e,t)=>{const r=i.clientWidth;n(e,t),r<i.clientWidth&&n()},window),a=new ResizeObserver(e=>{const t=e[0],n=t.contentRect.width,r=t.contentRect.height;0===n&&0===r||s(n,r)});return a.observe(i),function(e,t){wc.size||window.addEventListener("resize",_c),wc.set(e,t)}(e,s),a}function Sc(e,t,n){n&&n.disconnect(),"resize"===t&&function(e){wc.delete(e),wc.size||window.removeEventListener("resize",_c)}(e)}function Ec(e,t,n){const r=e.canvas,i=ma(t=>{null!==e.ctx&&n(function(e,t){const n=fc[e.type]||e.type,{x:r,y:i}=zo(e,t);return{type:n,chart:t,native:e,x:void 0!==r?r:null,y:void 0!==i?i:null}}(t,e))},e);return function(e,t,n){e&&e.addEventListener(t,n,gc)}(r,t,i),i}class Tc extends uc{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(function(e,t){const n=e.style,r=e.getAttribute("height"),i=e.getAttribute("width");if(e[dc]={initial:{height:r,width:i,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",pc(i)){const t=Ho(e,"width");void 0!==t&&(e.width=t)}if(pc(r))if(""===e.style.height)e.height=e.width/(t||2);else{const t=Ho(e,"height");void 0!==t&&(e.height=t)}}(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[dc])return!1;const n=t[dc].initial;["height","width"].forEach(e=>{const r=n[e];ys(r)?t.removeAttribute(e):t.setAttribute(e,r)});const r=n.style||{};return Object.keys(r).forEach(e=>{t.style[e]=r[e]}),t.width=t.width,delete t[dc],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),i={attach:vc,detach:bc,resize:kc}[t]||Ec;r[t]=i(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:Sc,detach:Sc,resize:Sc}[t]||mc)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return Bo(e,t,n,r)}isAttached(e){const t=e&&jo(e);return!(!t||!t.isConnected)}}class Ic{constructor(){(0,ji.A)(this,"x",void 0),(0,ji.A)(this,"y",void 0),(0,ji.A)(this,"active",!1),(0,ji.A)(this,"options",void 0),(0,ji.A)(this,"$animations",void 0)}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return $s(this.x)&&$s(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(e=>{r[e]=n[e]&&n[e].active()?n[e]._to:this[e]}),r}}function Cc(e,t){const n=e.options.ticks,r=function(e){const t=e.options.offset,n=e._tickSize(),r=e._length/n+(t?0:1),i=e._maxLength/n;return Math.floor(Math.min(r,i))}(e),i=Math.min(n.maxTicksLimit||r,r),s=n.major.enabled?function(e){const t=[];let n,r;for(n=0,r=e.length;n<r;n++)e[n].major&&t.push(n);return t}(t):[],a=s.length,o=s[0],l=s[a-1],c=[];if(a>i)return function(e,t,n,r){let i,s=0,a=n[0];for(r=Math.ceil(r),i=0;i<e.length;i++)i===a&&(t.push(e[i]),s++,a=n[s*r])}(t,c,s,a/i),c;const u=function(e,t,n){const r=function(e){const t=e.length;let n,r;if(t<2)return!1;for(r=e[0],n=1;n<t;++n)if(e[n]-e[n-1]!==r)return!1;return r}(e),i=t.length/n;if(!r)return Math.max(i,1);const s=function(e){const t=[],n=Math.sqrt(e);let r;for(r=1;r<n;r++)e%r===0&&(t.push(r),t.push(e/r));return n===(0|n)&&t.push(n),t.sort((e,t)=>e-t).pop(),t}(r);for(let a=0,o=s.length-1;a<o;a++){const e=s[a];if(e>i)return e}return Math.max(i,1)}(s,t,i);if(a>0){let e,n;const r=a>1?Math.round((l-o)/(a-1)):null;for(Ac(t,c,u,ys(r)?0:o-r,o),e=0,n=a-1;e<n;e++)Ac(t,c,u,s[e],s[e+1]);return Ac(t,c,u,l,ys(r)?t.length:l+r),c}return Ac(t,c,u),c}function Ac(e,t,n,r,i){const s=_s(r,0),a=Math.min(_s(i,e.length),e.length);let o,l,c,u=0;for(n=Math.ceil(n),i&&(o=i-r,n=o/Math.floor(o/n)),c=s;c<0;)u++,c=Math.round(s+u*n);for(l=Math.max(s,0);l<a;l++)l===c&&(t.push(e[l]),u++,c=Math.round(s+u*n))}(0,ji.A)(Ic,"defaults",{}),(0,ji.A)(Ic,"defaultRoutes",void 0);const Dc=(e,t,n)=>"top"===t||"left"===t?e[t]+n:e[t]-n,Pc=(e,t)=>Math.min(t||e,e);function Nc(e,t){const n=[],r=e.length/t,i=e.length;let s=0;for(;s<i;s+=r)n.push(e[Math.floor(s)]);return n}function Mc(e,t,n){const r=e.ticks.length,i=Math.min(t,r-1),s=e._startPixel,a=e._endPixel,o=1e-6;let l,c=e.getPixelForTick(i);if(!(n&&(l=1===r?Math.max(c-s,a-c):0===t?(e.getPixelForTick(1)-c)/2:(c-e.getPixelForTick(i-1))/2,c+=i<t?l:-l,c<s-o||c>a+o)))return c}function Rc(e){return e.drawTicks?e.tickLength:0}function jc(e,t){if(!e.display)return 0;const n=co(e.font,t),r=lo(e.padding);return(vs(e.text)?e.text.length:1)*n.lineHeight+r.height}function Oc(e,t,n){let r=ya(e);return(n&&"right"!==t||!n&&"right"===t)&&(r=(e=>"left"===e?"right":"right"===e?"left":e)(r)),r}class Lc extends Ic{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=xs(e,Number.POSITIVE_INFINITY),t=xs(t,Number.NEGATIVE_INFINITY),n=xs(n,Number.POSITIVE_INFINITY),r=xs(r,Number.NEGATIVE_INFINITY),{min:xs(e,n),max:xs(t,r),minDefined:ws(e),maxDefined:ws(t)}}getMinMax(e){let t,{min:n,max:r,minDefined:i,maxDefined:s}=this.getUserBounds();if(i&&s)return{min:n,max:r};const a=this.getMatchingVisibleMetas();for(let o=0,l=a.length;o<l;++o)t=a[o].controller.getMinMax(this,e),i||(n=Math.min(n,t.min)),s||(r=Math.max(r,t.max));return n=s&&n>r?r:n,r=i&&n>r?n:r,{min:xs(n,xs(r,n)),max:xs(r,xs(n,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.chart.chartArea;return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ss(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:i,ticks:s}=this.options,a=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=function(e,t,n){const{min:r,max:i}=e,s=ks(t,(i-r)/2),a=(e,t)=>n&&0===e?0:e+t;return{min:a(r,-Math.abs(s)),max:a(i,s)}}(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const o=a<this.ticks.length;this._convertTicksToLabels(o?Nc(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||"auto"===s.source)&&(this.ticks=Cc(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),o&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e,t,n=this.options.reverse;this.isHorizontal()?(e=this.left,t=this.right):(e=this.top,t=this.bottom,n=!n),this._startPixel=e,this._endPixel=t,this._reversePixels=n,this._length=t-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ss(this.options.afterUpdate,[this])}beforeSetDimensions(){Ss(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ss(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ss(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ss(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Ss(t.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Ss(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ss(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=Pc(this.ticks.length,e.ticks.maxTicksLimit),r=t.minRotation||0,i=t.maxRotation;let s,a,o,l=r;if(!this._isVisible()||!t.display||r>=i||n<=1||!this.isHorizontal())return void(this.labelRotation=r);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=oa(this.chart.width-u,0,this.maxWidth);s=e.offset?this.maxWidth/n:d/(n-1),u+6>s&&(s=d/(n-(e.offset?.5:1)),a=this.maxHeight-Rc(e.grid)-t.padding-jc(e.title,this.chart.options.font),o=Math.sqrt(u*u+h*h),l=ea(Math.min(Math.asin(oa((c.highest.height+6)/s,-1,1)),Math.asin(oa(a/o,-1,1))-Math.asin(oa(h/o,-1,1)))),l=Math.max(r,Math.min(i,l))),this.labelRotation=l}afterCalculateLabelRotation(){Ss(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ss(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:i}}=this,s=this._isVisible(),a=this.isHorizontal();if(s){const s=jc(r,t.options.font);if(a?(e.width=this.maxWidth,e.height=Rc(i)+s):(e.height=this.maxHeight,e.width=Rc(i)+s),n.display&&this.ticks.length){const{first:t,last:r,widest:i,highest:s}=this._getLabelSizes(),o=2*n.padding,l=Xs(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const t=n.mirror?0:u*i.width+c*s.height;e.height=Math.min(this.maxHeight,e.height+t+o)}else{const t=n.mirror?0:c*i.width+u*s.height;e.width=Math.min(this.maxWidth,e.width+t+o)}this._calculatePadding(t,r,u,c)}}this._handleMargins(),a?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:i,padding:s},position:a}=this.options,o=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;o?l?(u=r*e.width,h=n*t.height):(u=n*e.height,h=r*t.width):"start"===i?h=t.width:"end"===i?u=e.width:"inner"!==i&&(u=e.width/2,h=t.width/2),this.paddingLeft=Math.max((u-a+s)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+s)*this.width/(this.width-c),0)}else{let n=t.height/2,r=e.height/2;"start"===i?(n=0,r=e.height):"end"===i&&(n=t.height,r=0),this.paddingTop=n+s,this.paddingBottom=r+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ss(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return"top"===t||"bottom"===t||"x"===e}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){let t,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(e),t=0,n=e.length;t<n;t++)ys(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=Nc(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,t,n){const{ctx:r,_longestTextCache:i}=this,s=[],a=[],o=Math.floor(t/Pc(t,n));let l,c,u,h,d,f,p,g,m,y,v,b=0,w=0;for(l=0;l<t;l+=o){if(h=e[l].label,d=this._resolveTickFontOptions(l),r.font=f=d.string,p=i[f]=i[f]||{data:{},gc:[]},g=d.lineHeight,m=y=0,ys(h)||vs(h)){if(vs(h))for(c=0,u=h.length;c<u;++c)v=h[c],ys(v)||vs(v)||(m=za(r,p.data,p.gc,m,v),y+=g)}else m=za(r,p.data,p.gc,m,h),y=g;s.push(m),a.push(y),b=Math.max(m,b),w=Math.max(y,w)}!function(e,t){Es(e,e=>{const n=e.gc,r=n.length/2;let i;if(r>t){for(i=0;i<r;++i)delete e.data[n[i]];n.splice(0,r)}})}(i,t);const x=s.indexOf(b),_=a.indexOf(w),k=e=>({width:s[e]||0,height:a[e]||0});return{first:k(0),last:k(t-1),widest:k(x),highest:k(_),widths:s,heights:a}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return oa(this._alignToPixels?Ba(this.chart,t,0):t,-32768,32767)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=function(e,t,n){return ho(e,{tick:n,index:t,type:"tick"})}(this.getContext(),e,n))}return this.$context||(this.$context=ho(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const e=this.options.ticks,t=Xs(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),i=this._getLabelSizes(),s=e.autoSkipPadding||0,a=i?i.widest.width+s:0,o=i?i.highest.height+s:0;return this.isHorizontal()?o*n>a*r?a/n:o/r:o*r<a*n?o/n:a/r}_isVisible(){const e=this.options.display;return"auto"!==e?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:i,position:s,border:a}=r,o=i.offset,l=this.isHorizontal(),c=this.ticks.length+(o?1:0),u=Rc(i),h=[],d=a.setContext(this.getContext()),f=d.display?d.width:0,p=f/2,g=function(e){return Ba(n,e,f)};let m,y,v,b,w,x,_,k,S,E,T,I;if("top"===s)m=g(this.bottom),x=this.bottom-u,k=m-p,E=g(e.top)+p,I=e.bottom;else if("bottom"===s)m=g(this.top),E=e.top,I=g(e.bottom)-p,x=m+p,k=this.top+u;else if("left"===s)m=g(this.right),w=this.right-u,_=m-p,S=g(e.left)+p,T=e.right;else if("right"===s)m=g(this.left),S=e.left,T=g(e.right)-p,w=m+p,_=this.left+u;else if("x"===t){if("center"===s)m=g((e.top+e.bottom)/2+.5);else if(bs(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}E=e.top,I=e.bottom,x=m+p,k=x+u}else if("y"===t){if("center"===s)m=g((e.left+e.right)/2);else if(bs(s)){const e=Object.keys(s)[0],t=s[e];m=g(this.chart.scales[e].getPixelForValue(t))}w=m-p,_=w-u,S=e.left,T=e.right}const C=_s(r.ticks.maxTicksLimit,c),A=Math.max(1,Math.ceil(c/C));for(y=0;y<c;y+=A){const e=this.getContext(y),t=i.setContext(e),r=a.setContext(e),s=t.lineWidth,c=t.color,u=r.dash||[],d=r.dashOffset,f=t.tickWidth,p=t.tickColor,g=t.tickBorderDash||[],m=t.tickBorderDashOffset;v=Mc(this,y,o),void 0!==v&&(b=Ba(n,v,s),l?w=_=S=T=b:x=k=E=I=b,h.push({tx1:w,ty1:x,tx2:_,ty2:k,x1:S,y1:E,x2:T,y2:I,width:s,color:c,borderDash:u,borderDashOffset:d,tickWidth:f,tickColor:p,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=c,this._borderValue=m,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:i}=n,s=this.isHorizontal(),a=this.ticks,{align:o,crossAlign:l,padding:c,mirror:u}=i,h=Rc(n.grid),d=h+c,f=u?-c:d,p=-Xs(this.labelRotation),g=[];let m,y,v,b,w,x,_,k,S,E,T,I,C="middle";if("top"===r)x=this.bottom-f,_=this._getXAxisLabelAlignment();else if("bottom"===r)x=this.top+f,_=this._getXAxisLabelAlignment();else if("left"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("right"===r){const e=this._getYAxisLabelAlignment(h);_=e.textAlign,w=e.x}else if("x"===t){if("center"===r)x=(e.top+e.bottom)/2+d;else if(bs(r)){const e=Object.keys(r)[0],t=r[e];x=this.chart.scales[e].getPixelForValue(t)+d}_=this._getXAxisLabelAlignment()}else if("y"===t){if("center"===r)w=(e.left+e.right)/2-d;else if(bs(r)){const e=Object.keys(r)[0],t=r[e];w=this.chart.scales[e].getPixelForValue(t)}_=this._getYAxisLabelAlignment(h).textAlign}"y"===t&&("start"===o?C="top":"end"===o&&(C="bottom"));const A=this._getLabelSizes();for(m=0,y=a.length;m<y;++m){v=a[m],b=v.label;const e=i.setContext(this.getContext(m));k=this.getPixelForTick(m)+i.labelOffset,S=this._resolveTickFontOptions(m),E=S.lineHeight,T=vs(b)?b.length:1;const t=T/2,n=e.color,o=e.textStrokeColor,c=e.textStrokeWidth;let h,d=_;if(s?(w=k,"inner"===_&&(d=m===y-1?this.options.reverse?"left":"right":0===m?this.options.reverse?"right":"left":"center"),I="top"===r?"near"===l||0!==p?-T*E+E/2:"center"===l?-A.highest.height/2-t*E+E:-A.highest.height+E/2:"near"===l||0!==p?E/2:"center"===l?A.highest.height/2-t*E:A.highest.height-T*E,u&&(I*=-1),0===p||e.showLabelBackdrop||(w+=E/2*Math.sin(p))):(x=k,I=(1-T)*E/2),e.showLabelBackdrop){const t=lo(e.backdropPadding),n=A.heights[m],r=A.widths[m];let i=I-t.top,s=0-t.left;switch(C){case"middle":i-=n/2;break;case"bottom":i-=n}switch(_){case"center":s-=r/2;break;case"right":s-=r;break;case"inner":m===y-1?s-=r:m>0&&(s-=r/2)}h={left:s,top:i,width:r+t.width,height:n+t.height,color:e.backdropColor}}g.push({label:b,font:S,textOffset:I,options:{rotation:p,color:n,strokeColor:o,strokeWidth:c,textAlign:d,textBaseline:C,translation:[w,x],backdrop:h}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-Xs(this.labelRotation))return"top"===e?"left":"right";let n="center";return"start"===t.align?n="left":"end"===t.align?n="right":"inner"===t.align&&(n="inner"),n}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,s=e+i,a=this._getLabelSizes().widest.width;let o,l;return"left"===t?r?(l=this.right+i,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l+=a)):(l=this.right-s,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l=this.left)):"right"===t?r?(l=this.left+i,"near"===n?o="right":"center"===n?(o="center",l-=a/2):(o="left",l-=a)):(l=this.left+s,"near"===n?o="left":"center"===n?(o="center",l+=a/2):(o="right",l=this.right)):o="right",{textAlign:o,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;return"left"===t||"right"===t?{top:0,left:this.left,bottom:e.height,right:this.right}:"top"===t||"bottom"===t?{top:this.top,left:0,bottom:this.bottom,right:e.width}:void 0}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:i,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,i,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const n=this.ticks.findIndex(t=>t.value===e);if(n>=0){return t.setContext(this.getContext(n)).lineWidth}return 0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,s;const a=(e,t,r)=>{r.width&&r.color&&(n.save(),n.lineWidth=r.width,n.strokeStyle=r.color,n.setLineDash(r.borderDash||[]),n.lineDashOffset=r.borderDashOffset,n.beginPath(),n.moveTo(e.x,e.y),n.lineTo(t.x,t.y),n.stroke(),n.restore())};if(t.display)for(i=0,s=r.length;i<s;++i){const e=r[i];t.drawOnChartArea&&a({x:e.x1,y:e.y1},{x:e.x2,y:e.y2},e),t.drawTicks&&a({x:e.tx1,y:e.ty1},{x:e.tx2,y:e.ty2},{color:e.tickColor,width:e.tickWidth,borderDash:e.tickBorderDash,borderDashOffset:e.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),s=n.display?i.width:0;if(!s)return;const a=r.setContext(this.getContext(0)).lineWidth,o=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Ba(e,this.left,s)-s/2,c=Ba(e,this.right,a)+a/2,u=h=o):(u=Ba(e,this.top,s)-s/2,h=Ba(e,this.bottom,a)+a/2,l=c=o),t.save(),t.lineWidth=i.width,t.strokeStyle=i.color,t.beginPath(),t.moveTo(l,u),t.lineTo(c,h),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const t=this.ctx,n=this._computeLabelArea();n&&Ga(t,n);const r=this.getLabelItems(e);for(const i of r){const e=i.options,n=i.font;Xa(t,i.label,0,i.textOffset,n,e)}n&&Qa(t)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const i=co(n.font),s=lo(n.padding),a=n.align;let o=i.lineHeight/2;"bottom"===t||"center"===t||bs(t)?(o+=s.bottom,vs(n.text)&&(o+=i.lineHeight*(n.text.length-1))):o+=s.top;const{titleX:l,titleY:c,maxWidth:u,rotation:h}=function(e,t,n,r){const{top:i,left:s,bottom:a,right:o,chart:l}=e,{chartArea:c,scales:u}=l;let h,d,f,p=0;const g=a-i,m=o-s;if(e.isHorizontal()){if(d=va(r,s,o),bs(n)){const e=Object.keys(n)[0],r=n[e];f=u[e].getPixelForValue(r)+g-t}else f="center"===n?(c.bottom+c.top)/2+g-t:Dc(e,n,t);h=o-s}else{if(bs(n)){const e=Object.keys(n)[0],r=n[e];d=u[e].getPixelForValue(r)-m+t}else d="center"===n?(c.left+c.right)/2-m+t:Dc(e,n,t);f=va(r,a,i),p="left"===n?-qs:qs}return{titleX:d,titleY:f,maxWidth:h,rotation:p}}(this,o,t,a);Xa(e,n.text,0,0,i,{color:n.color,maxWidth:u,rotation:h,textAlign:Oc(a,t,r),textBaseline:"middle",translation:[l,c]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=_s(e.grid&&e.grid.z,-1),r=_s(e.border&&e.border.z,0);return this._isVisible()&&this.draw===Lc.prototype.draw?[{z:n,draw:e=>{this.drawBackground(),this.drawGrid(e),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:t,draw:e=>{this.drawLabels(e)}}]:[{z:t,draw:e=>{this.draw(e)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,s;for(i=0,s=t.length;i<s;++i){const s=t[i];s[n]!==this.id||e&&s.type!==e||r.push(s)}return r}_resolveTickFontOptions(e){return co(this.options.ticks.setContext(this.getContext(e)).font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Fc{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;(function(e){return"id"in e&&"defaults"in e})(t)&&(n=this.register(t));const r=this.items,i=e.id,s=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,function(e,t,n){const r=Ds(Object.create(null),[n?Va.get(n):{},Va.get(t),e.defaults]);Va.set(t,r),e.defaultRoutes&&function(e,t){Object.keys(t).forEach(n=>{const r=n.split("."),i=r.pop(),s=[e].concat(r).join("."),a=t[n].split("."),o=a.pop(),l=a.join(".");Va.route(s,i,l,o)})}(t,e.defaultRoutes);e.descriptors&&Va.describe(t,e.descriptors)}(e,s,n),this.override&&Va.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in Va[r]&&(delete Va[r][n],this.override&&delete Ra[n])}}class Vc{constructor(){this.controllers=new Fc(Sl,"datasets",!0),this.elements=new Fc(Ic,"elements"),this.plugins=new Fc(Object,"plugins"),this.scales=new Fc(Lc,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t)}remove(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t)}addControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.controllers)}addElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.elements)}addPlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.plugins)}addScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("register",t,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.controllers)}removeElements(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.elements)}removePlugins(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.plugins)}removeScales(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];this._each("unregister",t,this.scales)}_each(e,t,n){[...t].forEach(t=>{const r=n||this._getRegistryForType(t);n||r.isForType(t)||r===this.plugins&&t.id?this._exec(e,r,t):Es(t,t=>{const r=n||this._getRegistryForType(t);this._exec(e,r,t)})})}_exec(e,t,n){const r=js(e);Ss(n["before"+r],[],n),t[e](n),Ss(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(void 0===r)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var zc=new Vc;class Uc{constructor(){this._init=[]}notify(e,t,n,r){"beforeInit"===t&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(i,e,t,n);return"afterDestroy"===t&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const i of e){const e=i.plugin;if(!1===Ss(e[n],[t,r,i.options],e)&&r.cancelable)return!1}return!0}invalidate(){ys(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=_s(n.options&&n.options.plugins,{}),i=function(e){const t={},n=[],r=Object.keys(zc.plugins.items);for(let s=0;s<r.length;s++)n.push(zc.getPlugin(r[s]));const i=e.plugins||[];for(let s=0;s<i.length;s++){const e=i[s];-1===n.indexOf(e)&&(n.push(e),t[e.id]=!0)}return{plugins:n,localIds:t}}(n);return!1!==r||t?function(e,t,n,r){let{plugins:i,localIds:s}=t;const a=[],o=e.getContext();for(const l of i){const t=l.id,i=Bc(n[t],r);null!==i&&a.push({plugin:l,options:Wc(e.config,{plugin:l,local:s[t]},i,o)})}return a}(e,i,r,t):[]}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(e,t)=>e.filter(e=>!t.some(t=>e.plugin.id===t.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function Bc(e,t){return t||!1!==e?!0===e?{}:e:null}function Wc(e,t,n,r){let{plugin:i,local:s}=t;const a=e.pluginScopeKeys(i),o=e.getOptionScopes(n,a);return s&&i.defaults&&o.push(i.defaults),e.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function qc(e,t){const n=Va.datasets[e]||{};return((t.datasets||{})[e]||{}).indexAxis||t.indexAxis||n.indexAxis||"x"}function Hc(e){if("x"===e||"y"===e||"r"===e)return e}function Kc(e){return"top"===e||"bottom"===e?"x":"left"===e||"right"===e?"y":void 0}function Gc(e){if(Hc(e))return e;for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];for(const i of n){const t=i.axis||Kc(i.position)||e.length>1&&Hc(e[0].toLowerCase());if(t)return t}throw new Error("Cannot determine type of '".concat(e,"' axis. Please provide 'axis' or 'position' option."))}function Qc(e,t,n){if(n[t+"AxisID"]===e)return{axis:t}}function Yc(e,t){const n=Ra[e.type]||{scales:{}},r=t.scales||{},i=qc(e.type,t),s=Object.create(null);return Object.keys(r).forEach(t=>{const a=r[t];if(!bs(a))return console.error("Invalid scale configuration for scale: ".concat(t));if(a._proxy)return console.warn("Ignoring resolver passed as options for scale: ".concat(t));const o=Gc(t,a,function(e,t){if(t.data&&t.data.datasets){const n=t.data.datasets.filter(t=>t.xAxisID===e||t.yAxisID===e);if(n.length)return Qc(e,"x",n[0])||Qc(e,"y",n[0])}return{}}(t,e),Va.scales[a.type]),l=function(e,t){return e===t?"_index_":"_value_"}(o,i),c=n.scales||{};s[t]=Ps(Object.create(null),[{axis:o},a,c[o],c[l]])}),e.data.datasets.forEach(n=>{const i=n.type||e.type,a=n.indexAxis||qc(i,t),o=(Ra[i]||{}).scales||{};Object.keys(o).forEach(e=>{const t=function(e,t){let n=e;return"_index_"===e?n=t:"_value_"===e&&(n="x"===t?"y":"x"),n}(e,a),i=n[t+"AxisID"]||t;s[i]=s[i]||Object.create(null),Ps(s[i],[{axis:t},r[i],o[e]])})}),Object.keys(s).forEach(e=>{const t=s[e];Ps(t,[Va.scales[t.type],Va.scale])}),s}function Zc(e){const t=e.options||(e.options={});t.plugins=_s(t.plugins,{}),t.scales=Yc(e,t)}function $c(e){return(e=e||{}).datasets=e.datasets||[],e.labels=e.labels||[],e}const Jc=new Map,Xc=new Set;function eu(e,t){let n=Jc.get(e);return n||(n=t(),Jc.set(e,n),Xc.add(n)),n}const tu=(e,t,n)=>{const r=Rs(t,n);void 0!==r&&e.add(r)};class nu{constructor(e){this._config=function(e){return(e=e||{}).data=$c(e.data),Zc(e),e}(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=$c(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Zc(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return eu(e,()=>[["datasets.".concat(e),""]])}datasetAnimationScopeKeys(e,t){return eu("".concat(e,".transition.").concat(t),()=>[["datasets.".concat(e,".transitions.").concat(t),"transitions.".concat(t)],["datasets.".concat(e),""]])}datasetElementScopeKeys(e,t){return eu("".concat(e,"-").concat(t),()=>[["datasets.".concat(e,".elements.").concat(t),"datasets.".concat(e),"elements.".concat(t),""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return eu("".concat(n,"-plugin-").concat(t),()=>[["plugins.".concat(t),...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return r&&!t||(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:i}=this,s=this._cachedScopes(e,n),a=s.get(t);if(a)return a;const o=new Set;t.forEach(t=>{e&&(o.add(e),t.forEach(t=>tu(o,e,t))),t.forEach(e=>tu(o,r,e)),t.forEach(e=>tu(o,Ra[i]||{},e)),t.forEach(e=>tu(o,Va,e)),t.forEach(e=>tu(o,ja,e))});const l=Array.from(o);return 0===l.length&&l.push(Object.create(null)),Xc.has(t)&&s.set(t,l),l}chartOptionScopes(){const{options:e,type:t}=this;return[e,Ra[t]||{},Va.datasets[t]||{},{type:t},Va,ja]}resolveNamedOptions(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[""];const i={$shared:!0},{resolver:s,subPrefixes:a}=ru(this._resolverCache,e,r);let o=s;if(function(e,t){const{isScriptable:n,isIndexable:r}=go(e);for(const i of t){const t=n(i),s=r(i),a=(s||t)&&e[i];if(t&&(Ls(a)||iu(a))||s&&vs(a))return!0}return!1}(s,t)){i.$shared=!1;o=po(s,n=Ls(n)?n():n,this.createResolver(e,n,a))}for(const l of t)i[l]=o[l];return i}createResolver(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[""],r=arguments.length>3?arguments[3]:void 0;const{resolver:i}=ru(this._resolverCache,e,n);return bs(t)?po(i,t,void 0,r):i}}function ru(e,t,n){let r=e.get(t);r||(r=new Map,e.set(t,r));const i=n.join();let s=r.get(i);if(!s){s={resolver:fo(t,n),subPrefixes:n.filter(e=>!e.toLowerCase().includes("hover"))},r.set(i,s)}return s}const iu=e=>bs(e)&&Object.getOwnPropertyNames(e).some(t=>Ls(e[t]));const su=["top","bottom","left","right","chartArea"];function au(e,t){return"top"===e||"bottom"===e||-1===su.indexOf(e)&&"x"===t}function ou(e,t){return function(n,r){return n[e]===r[e]?n[t]-r[t]:n[e]-r[e]}}function lu(e){const t=e.chart,n=t.options.animation;t.notifyPlugins("afterRender"),Ss(n&&n.onComplete,[e],t)}function cu(e){const t=e.chart,n=t.options.animation;Ss(n&&n.onProgress,[e],t)}function uu(e){return Ro()&&"string"===typeof e?e=document.getElementById(e):e&&e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas),e}const hu={},du=e=>{const t=uu(e);return Object.values(hu).filter(e=>e.canvas===t).pop()};function fu(e,t,n){const r=Object.keys(e);for(const i of r){const r=+i;if(r>=t){const s=e[i];delete e[i],(n>0||r>t)&&(e[r+n]=s)}}}class pu{static register(){zc.add(...arguments),gu()}static unregister(){zc.remove(...arguments),gu()}constructor(e,t){const n=this.config=new nu(t),r=uu(e),i=du(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||function(e){return!Ro()||"undefined"!==typeof OffscreenCanvas&&e instanceof OffscreenCanvas?hc:Tc}(r)),this.platform.updateConfig(n);const a=this.platform.acquireContext(r,s.aspectRatio),o=a&&a.canvas,l=o&&o.height,c=o&&o.width;this.id=ms(),this.ctx=a,this.canvas=o,this.width=c,this.height=l,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Uc,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=function(e,t){let n;return function(){for(var r=arguments.length,i=new Array(r),s=0;s<r;s++)i[s]=arguments[s];return t?(clearTimeout(n),n=setTimeout(e,t,i)):e.apply(this,i),t}}(e=>this.update(e),s.resizeDelay||0),this._dataChanges=[],hu[this.id]=this,a&&o?(ll.listen(this,"complete",lu),ll.listen(this,"progress",cu),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:i}=this;return ys(e)?t&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return zc}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Wo(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return Wa(this.canvas,this.ctx),this}stop(){return ll.stop(this),this}resize(e,t){ll.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,i),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),o=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,Wo(this,a,!0)&&(this.notifyPlugins("resize",{size:s}),Ss(n.onResize,[this,s],this),this.attached&&this._doResize(o)&&this.render())}ensureScalesHaveIDs(){Es(this.options.scales||{},(e,t)=>{e.id=t})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((e,t)=>(e[t]=!1,e),{});let i=[];t&&(i=i.concat(Object.keys(t).map(e=>{const n=t[e],r=Gc(e,n),i="r"===r,s="x"===r;return{options:n,dposition:i?"chartArea":s?"bottom":"left",dtype:i?"radialLinear":s?"category":"linear"}}))),Es(i,t=>{const i=t.options,s=i.id,a=Gc(s,i),o=_s(i.type,t.dtype);void 0!==i.position&&au(i.position,a)===au(t.dposition)||(i.position=t.dposition),r[s]=!0;let l=null;if(s in n&&n[s].type===o)l=n[s];else{l=new(zc.getScale(o))({id:s,type:o,ctx:this.ctx,chart:this}),n[l.id]=l}l.init(i,e)}),Es(r,(e,t)=>{e||delete n[t]}),Es(n,e=>{cc.configure(this,e,e.options),cc.addBox(this,e)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((e,t)=>e.index-t.index),n>t){for(let e=t;e<n;++e)this._destroyDatasetMeta(e);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(ou("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((e,n)=>{0===t.filter(t=>t===e._dataset).length&&this._destroyDatasetMeta(n)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const r=t[n];let i=this.getDatasetMeta(n);const s=r.type||this.config.type;if(i.type&&i.type!==s&&(this._destroyDatasetMeta(n),i=this.getDatasetMeta(n)),i.type=s,i.indexAxis=r.indexAxis||qc(s,this.options),i.order=r.order||0,i.index=n,i.label=""+r.label,i.visible=this.isDatasetVisible(n),i.controller)i.controller.updateIndex(n),i.controller.linkScales();else{const t=zc.getController(s),{datasetElementType:r,dataElementType:a}=Va.datasets[s];Object.assign(t,{dataElementType:zc.getElement(a),datasetElementType:r&&zc.getElement(r)}),i.controller=new t(this,n),e.push(i.controller)}}return this._updateMetasets(),e}_resetElements(){Es(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0}))return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let l=0,c=this.data.datasets.length;l<c;l++){const{controller:e}=this.getDatasetMeta(l),t=!r&&-1===i.indexOf(e);e.buildOrUpdateElements(t),s=Math.max(+e.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||Es(i,e=>{e.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(ou("z","_idx"));const{_active:a,_lastEvent:o}=this;o?this._eventHandler(o,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){Es(this.scales,e=>{cc.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);Fs(t,n)&&!!this._responsiveListeners===e.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of t){fu(e,r,"_removeElements"===n?-i:i)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=t=>new Set(e.filter(e=>e[0]===t).map((e,t)=>t+","+e.splice(1).join(","))),r=n(0);for(let i=1;i<t;i++)if(!Fs(r,n(i)))return;return Array.from(r).map(e=>e.split(",")).map(e=>({method:e[1],start:+e[2],count:+e[3]}))}_updateLayout(e){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;cc.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],Es(this.boxes,e=>{n&&"chartArea"===e.position||(e.configure&&e.configure(),this._layers.push(...e._layers()))},this),this._layers.forEach((e,t)=>{e._idx=t}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})){for(let e=0,t=this.data.datasets.length;e<t;++e)this.getDatasetMeta(e).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,Ls(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",r)&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(ll.has(this)?this.attached&&!ll.running(this)&&ll.start(this):(this.draw(),lu({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:e,height:t}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(e,t)}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,i;for(r=0,i=t.length;r<i;++r){const i=t[r];e&&!i.visible||n.push(i)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=al(this,e);!1!==this.notifyPlugins("beforeDatasetDraw",n)&&(r&&Ga(t,r),e.controller.draw(),r&&Qa(t),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Ka(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const i=Zl.modes[t];return"function"===typeof i?i(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(e=>e&&e._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=ho(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return"boolean"===typeof n.hidden?!n.hidden:!t.hidden}setDatasetVisibility(e,t){this.getDatasetMeta(e).hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),s=i.controller._resolveAnimations(void 0,r);Os(t)?(i.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(i,{visible:n}),this.update(t=>t.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),ll.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),Wa(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),delete hu[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(){return this.canvas.toDataURL(...arguments)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(e,t,n)=>{e.offsetX=t,e.offsetY=n,this._eventHandler(e)};Es(this.options.events,e=>n(e,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(n,r)=>{t.addEventListener(this,n,r),e[n]=r},r=(n,r)=>{e[n]&&(t.removeEventListener(this,n,r),delete e[n])},i=(e,t)=>{this.canvas&&this.resize(e,t)};let s;const a=()=>{r("attach",a),this.attached=!0,this.resize(),n("resize",i),n("detach",s)};s=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",a)},t.isAttached(this.canvas)?a():s()}unbindEvents(){Es(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},Es(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let i,s,a,o;for("dataset"===t&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),a=0,o=e.length;a<o;++a){s=e[a];const t=s&&this.getDatasetMeta(s.datasetIndex).controller;t&&t[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.getDatasetMeta(t);if(!r)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:r.data[n],index:n}});!Ts(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}isPluginEnabled(e){return 1===this._plugins._cache.filter(t=>t.plugin.id===e).length}_updateHoverStyles(e,t,n){const r=this.options.hover,i=(e,t)=>e.filter(e=>!t.some(t=>e.datasetIndex===t.datasetIndex&&e.index===t.index)),s=i(t,e),a=n?e:i(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),a.length&&r.mode&&this.updateHoverStyle(a,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=t=>(t.options.events||this.options.events).includes(e.native.type);if(!1===this.notifyPlugins("beforeEvent",n,r))return;const i=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:i}=this,s=t,a=this._getActiveElements(e,r,n,s),o=function(e){return"mouseup"===e.type||"click"===e.type||"contextmenu"===e.type}(e),l=function(e,t,n,r){return n&&"mouseout"!==e.type?r?t:e:null}(e,this._lastEvent,n,o);n&&(this._lastEvent=null,Ss(i.onHover,[e,a,this],this),o&&Ss(i.onClick,[e,a,this],this));const c=!Ts(a,r);return(c||t)&&(this._active=a,this._updateHoverStyles(a,r,t)),this._lastEvent=l,c}_getActiveElements(e,t,n,r){if("mouseout"===e.type)return[];if(!n)return t;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}}function gu(){return Es(pu.instances,e=>e._plugins.invalidate())}function mu(e,t,n,r){const i=so(e.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]);const s=(n-t)/2,a=Math.min(s,r*t/2),o=e=>{const t=(n-Math.min(s,e))*r/2;return oa(e,0,Math.min(s,t))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:oa(i.innerStart,0,a),innerEnd:oa(i.innerEnd,0,a)}}function yu(e,t,n,r){return{x:n+e*Math.cos(t),y:r+e*Math.sin(t)}}function vu(e,t,n,r,i,s){const{x:a,y:o,startAngle:l,pixelMargin:c,innerRadius:u}=t,h=Math.max(t.outerRadius+r+n-c,0),d=u>0?u+r+n+c:0;let f=0;const p=i-l;if(r){const e=((u>0?u-r:0)+(h>0?h-r:0))/2;f=(p-(0!==e?p*e/(e+r):p))/2}const g=(p-Math.max(.001,p*h-n/Vs)/h)/2,m=l+g+f,y=i-g-f,{outerStart:v,outerEnd:b,innerStart:w,innerEnd:x}=mu(t,d,h,y-m),_=h-v,k=h-b,S=m+v/_,E=y-b/k,T=d+w,I=d+x,C=m+w/T,A=y-x/I;if(e.beginPath(),s){const t=(S+E)/2;if(e.arc(a,o,h,S,t),e.arc(a,o,h,t,E),b>0){const t=yu(k,E,a,o);e.arc(t.x,t.y,b,E,y+qs)}const n=yu(I,y,a,o);if(e.lineTo(n.x,n.y),x>0){const t=yu(I,A,a,o);e.arc(t.x,t.y,x,y+qs,A+Math.PI)}const r=(y-x/d+(m+w/d))/2;if(e.arc(a,o,d,y-x/d,r,!0),e.arc(a,o,d,r,m+w/d,!0),w>0){const t=yu(T,C,a,o);e.arc(t.x,t.y,w,C+Math.PI,m-qs)}const i=yu(_,m,a,o);if(e.lineTo(i.x,i.y),v>0){const t=yu(_,S,a,o);e.arc(t.x,t.y,v,m-qs,S)}}else{e.moveTo(a,o);const t=Math.cos(S)*h+a,n=Math.sin(S)*h+o;e.lineTo(t,n);const r=Math.cos(E)*h+a,i=Math.sin(E)*h+o;e.lineTo(r,i)}e.closePath()}function bu(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o,options:l}=t,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d,borderRadius:f}=l,p="inner"===l.borderAlign;if(!c)return;e.setLineDash(h||[]),e.lineDashOffset=d,p?(e.lineWidth=2*c,e.lineJoin=u||"round"):(e.lineWidth=c,e.lineJoin=u||"bevel");let g=t.endAngle;if(s){vu(e,t,n,r,g,i);for(let t=0;t<s;++t)e.stroke();isNaN(o)||(g=a+(o%zs||zs))}p&&function(e,t,n){const{startAngle:r,pixelMargin:i,x:s,y:a,outerRadius:o,innerRadius:l}=t;let c=i/o;e.beginPath(),e.arc(s,a,o,r-c,n+c),l>i?(c=i/l,e.arc(s,a,l,n+c,r-c,!0)):e.arc(s,a,i,n+qs,r-qs),e.closePath(),e.clip()}(e,t,g),l.selfJoin&&g-a>=Vs&&0===f&&"miter"!==u&&function(e,t,n){const{startAngle:r,x:i,y:s,outerRadius:a,innerRadius:o,options:l}=t,{borderWidth:c,borderJoinStyle:u}=l,h=Math.min(c/a,sa(r-n));if(e.beginPath(),e.arc(i,s,a-c/2,r+h/2,n-h/2),o>0){const t=Math.min(c/o,sa(r-n));e.arc(i,s,o+c/2,n-t/2,r+t/2,!0)}else{const t=Math.min(c/2,a*sa(r-n));if("round"===u)e.arc(i,s,t,n-Vs/2,r+Vs/2,!0);else if("bevel"===u){const a=2*t*t,o=-a*Math.cos(n+Vs/2)+i,l=-a*Math.sin(n+Vs/2)+s,c=a*Math.cos(r+Vs/2)+i,u=a*Math.sin(r+Vs/2)+s;e.lineTo(o,l),e.lineTo(c,u)}}e.closePath(),e.moveTo(0,0),e.rect(0,0,e.canvas.width,e.canvas.height),e.clip("evenodd")}(e,t,g),s||(vu(e,t,n,r,g,i),e.stroke())}(0,ji.A)(pu,"defaults",Va),(0,ji.A)(pu,"instances",hu),(0,ji.A)(pu,"overrides",Ra),(0,ji.A)(pu,"registry",zc),(0,ji.A)(pu,"version","4.5.0"),(0,ji.A)(pu,"getChart",du);class wu extends Ic{constructor(e){super(),(0,ji.A)(this,"circumference",void 0),(0,ji.A)(this,"endAngle",void 0),(0,ji.A)(this,"fullCircles",void 0),(0,ji.A)(this,"innerRadius",void 0),(0,ji.A)(this,"outerRadius",void 0),(0,ji.A)(this,"pixelMargin",void 0),(0,ji.A)(this,"startAngle",void 0),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:i,distance:s}=na(r,{x:e,y:t}),{startAngle:a,endAngle:o,innerRadius:l,outerRadius:c,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,d=_s(u,o-a),f=aa(i,a,o)&&a!==o,p=d>=zs||f,g=la(s,l+h,c+h);return p&&g}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:i,innerRadius:s,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],e),{offset:o,spacing:l}=this.options,c=(r+i)/2,u=(s+a+l+o)/2;return{x:t+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/4,i=(t.spacing||0)/2,s=t.circular;if(this.pixelMargin="inner"===t.borderAlign?.33:0,this.fullCircles=n>zs?Math.floor(n/zs):0,0===n||this.innerRadius<0||this.outerRadius<0)return;e.save();const a=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(a)*r,Math.sin(a)*r);const o=r*(1-Math.sin(Math.min(Vs,n||0)));e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor,function(e,t,n,r,i){const{fullCircles:s,startAngle:a,circumference:o}=t;let l=t.endAngle;if(s){vu(e,t,n,r,l,i);for(let t=0;t<s;++t)e.fill();isNaN(o)||(l=a+(o%zs||zs))}vu(e,t,n,r,l,i),e.fill()}(e,this,o,i,s),bu(e,this,o,i,s),e.restore()}}function xu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t;e.lineCap=_s(n.borderCapStyle,t.borderCapStyle),e.setLineDash(_s(n.borderDash,t.borderDash)),e.lineDashOffset=_s(n.borderDashOffset,t.borderDashOffset),e.lineJoin=_s(n.borderJoinStyle,t.borderJoinStyle),e.lineWidth=_s(n.borderWidth,t.borderWidth),e.strokeStyle=_s(n.borderColor,t.borderColor)}function _u(e,t,n){e.lineTo(n.x,n.y)}function ku(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.length,{start:i=0,end:s=r-1}=n,{start:a,end:o}=t,l=Math.max(i,a),c=Math.min(s,o),u=i<a&&s<a||i>o&&s>o;return{count:r,start:l,loop:t.loop,ilen:c<l&&!u?r+c-l:c-l}}function Su(e,t,n,r){const{points:i,options:s}=t,{count:a,start:o,loop:l,ilen:c}=ku(i,n,r),u=function(e){return e.stepped?Ya:e.tension||"monotone"===e.cubicInterpolationMode?Za:_u}(s);let h,d,f,{move:p=!0,reverse:g}=r||{};for(h=0;h<=c;++h)d=i[(o+(g?c-h:h))%a],d.skip||(p?(e.moveTo(d.x,d.y),p=!1):u(e,f,d,g,s.stepped),f=d);return l&&(d=i[(o+(g?c:0))%a],u(e,f,d,g,s.stepped)),!!l}function Eu(e,t,n,r){const i=t.points,{count:s,start:a,ilen:o}=ku(i,n,r),{move:l=!0,reverse:c}=r||{};let u,h,d,f,p,g,m=0,y=0;const v=e=>(a+(c?o-e:e))%s,b=()=>{f!==p&&(e.lineTo(m,p),e.lineTo(m,f),e.lineTo(m,g))};for(l&&(h=i[v(0)],e.moveTo(h.x,h.y)),u=0;u<=o;++u){if(h=i[v(u)],h.skip)continue;const t=h.x,n=h.y,r=0|t;r===d?(n<f?f=n:n>p&&(p=n),m=(y*m+t)/++y):(b(),e.lineTo(t,n),d=r,y=0,f=p=n),g=n}b()}function Tu(e){const t=e.options,n=t.borderDash&&t.borderDash.length;return!e._decimated&&!e._loop&&!t.tension&&"monotone"!==t.cubicInterpolationMode&&!t.stepped&&!n?Eu:Su}(0,ji.A)(wu,"id","arc"),(0,ji.A)(wu,"defaults",{borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1}),(0,ji.A)(wu,"defaultRoutes",{backgroundColor:"backgroundColor"}),(0,ji.A)(wu,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e});const Iu="function"===typeof Path2D;function Cu(e,t,n,r){Iu&&!t.options.segment?function(e,t,n,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,n,r)&&i.closePath()),xu(e,t.options),e.stroke(i)}(e,t,n,r):function(e,t,n,r){const{segments:i,options:s}=t,a=Tu(t);for(const o of i)xu(e,s,o.style),e.beginPath(),a(e,t,o,{start:n,end:n+r-1})&&e.closePath(),e.stroke()}(e,t,n,r)}class Au extends Ic{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;Mo(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=function(e,t){const n=e.points,r=e.options.spanGaps,i=n.length;if(!i)return[];const s=!!e._loop,{start:a,end:o}=function(e,t,n,r){let i=0,s=t-1;if(n&&!r)for(;i<t&&!e[i].skip;)i++;for(;i<t&&e[i].skip;)i++;for(i%=t,n&&(s+=i);s>i&&e[s%t].skip;)s--;return s%=t,{start:i,end:s}}(n,i,s,r);return nl(e,!0===r?[{start:a,end:o,loop:s}]:function(e,t,n,r){const i=e.length,s=[];let a,o=t,l=e[t];for(a=t+1;a<=n;++a){const n=e[a%i];n.skip||n.stop?l.skip||(r=!1,s.push({start:t%i,end:(a-1)%i,loop:r}),t=o=n.stop?a:null):(o=a,l.skip&&(t=a)),l=n}return null!==o&&s.push({start:t%i,end:o%i,loop:r}),s}(n,a,o<a?o+i:o,!!e._fullLoop&&0===a&&o===i-1),n,t)}(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],i=this.points,s=tl(this,{property:t,start:r,end:r});if(!s.length)return;const a=[],o=function(e){return e.stepped?Go:e.tension||"monotone"===e.cubicInterpolationMode?Qo:Ko}(n);let l,c;for(l=0,c=s.length;l<c;++l){const{start:c,end:u}=s[l],h=i[c],d=i[u];if(h===d){a.push(h);continue}const f=o(h,d,Math.abs((r-h[t])/(d[t]-h[t])),n.stepped);f[t]=e[t],a.push(f)}return 1===a.length?a[0]:a}pathSegment(e,t,n){return Tu(this)(e,this,t,n)}path(e,t,n){const r=this.segments,i=Tu(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const a of r)s&=i(e,this,a,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),Cu(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Du(e,t,n,r){const i=e.options,{[n]:s}=e.getProps([n],r);return Math.abs(t-s)<i.radius+i.hitRadius}(0,ji.A)(Au,"id","line"),(0,ji.A)(Au,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),(0,ji.A)(Au,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),(0,ji.A)(Au,"descriptors",{_scriptable:!0,_indexable:e=>"borderDash"!==e&&"fill"!==e});class Pu extends Ic{constructor(e){super(),(0,ji.A)(this,"parsed",void 0),(0,ji.A)(this,"skip",void 0),(0,ji.A)(this,"stop",void 0),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:i,y:s}=this.getProps(["x","y"],n);return Math.pow(e-i,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return Du(this,e,"x",t)}inYRange(e,t){return Du(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){let t=(e=e||this.options||{}).radius||0;t=Math.max(t,t&&e.hoverRadius||0);return 2*(t+(t&&e.borderWidth||0))}draw(e,t){const n=this.options;this.skip||n.radius<.1||!Ka(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,qa(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}function Nu(e,t){const{x:n,y:r,base:i,width:s,height:a}=e.getProps(["x","y","base","width","height"],t);let o,l,c,u,h;return e.horizontal?(h=a/2,o=Math.min(n,i),l=Math.max(n,i),c=r-h,u=r+h):(h=s/2,o=n-h,l=n+h,c=Math.min(r,i),u=Math.max(r,i)),{left:o,top:c,right:l,bottom:u}}function Mu(e,t,n,r){return e?0:oa(t,n,r)}function Ru(e){const t=Nu(e),n=t.right-t.left,r=t.bottom-t.top,i=function(e,t,n){const r=e.options.borderWidth,i=e.borderSkipped,s=ao(r);return{t:Mu(i.top,s.top,0,n),r:Mu(i.right,s.right,0,t),b:Mu(i.bottom,s.bottom,0,n),l:Mu(i.left,s.left,0,t)}}(e,n/2,r/2),s=function(e,t,n){const{enableBorderRadius:r}=e.getProps(["enableBorderRadius"]),i=e.options.borderRadius,s=oo(i),a=Math.min(t,n),o=e.borderSkipped,l=r||bs(i);return{topLeft:Mu(!l||o.top||o.left,s.topLeft,0,a),topRight:Mu(!l||o.top||o.right,s.topRight,0,a),bottomLeft:Mu(!l||o.bottom||o.left,s.bottomLeft,0,a),bottomRight:Mu(!l||o.bottom||o.right,s.bottomRight,0,a)}}(e,n/2,r/2);return{outer:{x:t.left,y:t.top,w:n,h:r,radius:s},inner:{x:t.left+i.l,y:t.top+i.t,w:n-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,s.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(i.b,i.r))}}}}function ju(e,t,n,r){const i=null===t,s=null===n,a=e&&!(i&&s)&&Nu(e,r);return a&&(i||la(t,a.left,a.right))&&(s||la(n,a.top,a.bottom))}function Ou(e,t){e.rect(t.x,t.y,t.w,t.h)}function Lu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const r=e.x!==n.x?-t:0,i=e.y!==n.y?-t:0,s=(e.x+e.w!==n.x+n.w?t:0)-r,a=(e.y+e.h!==n.y+n.h?t:0)-i;return{x:e.x+r,y:e.y+i,w:e.w+s,h:e.h+a,radius:e.radius}}(0,ji.A)(Pu,"id","point"),(0,ji.A)(Pu,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),(0,ji.A)(Pu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});class Fu extends Ic{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:s}=Ru(this),a=(o=s.radius).topLeft||o.topRight||o.bottomLeft||o.bottomRight?eo:Ou;var o;e.save(),s.w===i.w&&s.h===i.h||(e.beginPath(),a(e,Lu(s,t,i)),e.clip(),a(e,Lu(i,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),a(e,Lu(i,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return ju(this,e,t,n)}inXRange(e,t){return ju(this,e,null,t)}inYRange(e,t){return ju(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(t+r)/2:t,y:i?n:(n+r)/2}}getRange(e){return"x"===e?this.width/2:this.height/2}}(0,ji.A)(Fu,"id","bar"),(0,ji.A)(Fu,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),(0,ji.A)(Fu,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});const Vu=(e,t)=>{let{boxHeight:n=t,boxWidth:r=t}=e;return e.usePointStyle&&(n=Math.min(n,t),r=e.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:n,itemHeight:Math.max(t,n)}};class zu extends Ic{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=Ss(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(t=>e.filter(t,this.chart.data))),e.sort&&(t=t.sort((t,n)=>e.sort(t,n,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display)return void(this.width=this.height=0);const n=e.labels,r=co(n.font),i=r.size,s=this._computeTitleHeight(),{boxWidth:a,itemHeight:o}=Vu(n,i);let l,c;t.font=r.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(s,i,a,o)+10):(c=this.maxHeight,l=this._fitCols(s,r,a,o)+10),this.width=Math.min(l,e.maxWidth||this.maxWidth),this.height=Math.min(c,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:i,maxWidth:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.lineWidths=[0],c=r+a;let u=e;i.textAlign="left",i.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach((e,f)=>{const p=n+t/2+i.measureText(e.text).width;(0===f||l[l.length-1]+p+2*a>s)&&(u+=c,l[l.length-(f>0?0:1)]=0,d+=c,h++),o[f]={left:0,top:d,row:h,width:p,height:r},l[l.length-1]+=p+a}),u}_fitCols(e,t,n,r){const{ctx:i,maxHeight:s,options:{labels:{padding:a}}}=this,o=this.legendHitBoxes=[],l=this.columnSizes=[],c=s-e;let u=a,h=0,d=0,f=0,p=0;return this.legendItems.forEach((e,s)=>{const{itemWidth:g,itemHeight:m}=function(e,t,n,r,i){const s=function(e,t,n,r){let i=e.text;i&&"string"!==typeof i&&(i=i.reduce((e,t)=>e.length>t.length?e:t));return t+n.size/2+r.measureText(i).width}(r,e,t,n),a=function(e,t,n){let r=e;"string"!==typeof t.text&&(r=Uu(t,n));return r}(i,r,t.lineHeight);return{itemWidth:s,itemHeight:a}}(n,t,i,e,r);s>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),f+=h+a,p++,h=d=0),o[s]={left:f,top:d,col:p,width:g,height:m},h=Math.max(h,g),d+=m+a}),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:i}}=this,s=Yo(i,this.left,this.width);if(this.isHorizontal()){let i=0,a=va(n,this.left+r,this.right-this.lineWidths[i]);for(const o of t)i!==o.row&&(i=o.row,a=va(n,this.left+r,this.right-this.lineWidths[i])),o.top+=this.top+e+r,o.left=s.leftForLtr(s.x(a),o.width),a+=o.width+r}else{let i=0,a=va(n,this.top+e+r,this.bottom-this.columnSizes[i].height);for(const o of t)o.col!==i&&(i=o.col,a=va(n,this.top+e+r,this.bottom-this.columnSizes[i].height)),o.top=a,o.left+=this.left+r,o.left=s.leftForLtr(s.x(o.left),o.width),a+=o.height+r}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const e=this.ctx;Ga(e,this),this._draw(),Qa(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:i,labels:s}=e,a=Va.color,o=Yo(e.rtl,this.left,this.width),l=co(s.font),{padding:c}=s,u=l.size,h=u/2;let d;this.drawTitle(),r.textAlign=o.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=l.string;const{boxWidth:f,boxHeight:p,itemHeight:g}=Vu(s,u),m=this.isHorizontal(),y=this._computeTitleHeight();d=m?{x:va(i,this.left+c,this.right-n[0]),y:this.top+c+y,line:0}:{x:this.left+c,y:va(i,this.top+y+c,this.bottom-t[0].height),line:0},Zo(this.ctx,e.textDirection);const v=g+c;this.legendItems.forEach((b,w)=>{r.strokeStyle=b.fontColor,r.fillStyle=b.fontColor;const x=r.measureText(b.text).width,_=o.textAlign(b.textAlign||(b.textAlign=s.textAlign)),k=f+h+x;let S=d.x,E=d.y;o.setWidth(this.width),m?w>0&&S+k+c>this.right&&(E=d.y+=v,d.line++,S=d.x=va(i,this.left+c,this.right-n[d.line])):w>0&&E+v>this.bottom&&(S=d.x=S+t[d.line].width+c,d.line++,E=d.y=va(i,this.top+y+c,this.bottom-t[d.line].height));if(function(e,t,n){if(isNaN(f)||f<=0||isNaN(p)||p<0)return;r.save();const i=_s(n.lineWidth,1);if(r.fillStyle=_s(n.fillStyle,a),r.lineCap=_s(n.lineCap,"butt"),r.lineDashOffset=_s(n.lineDashOffset,0),r.lineJoin=_s(n.lineJoin,"miter"),r.lineWidth=i,r.strokeStyle=_s(n.strokeStyle,a),r.setLineDash(_s(n.lineDash,[])),s.usePointStyle){const a={radius:p*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:i},l=o.xPlus(e,f/2);Ha(r,a,l,t+h,s.pointStyleWidth&&f)}else{const s=t+Math.max((u-p)/2,0),a=o.leftForLtr(e,f),l=oo(n.borderRadius);r.beginPath(),Object.values(l).some(e=>0!==e)?eo(r,{x:a,y:s,w:f,h:p,radius:l}):r.rect(a,s,f,p),r.fill(),0!==i&&r.stroke()}r.restore()}(o.x(S),E,b),S=((e,t,n,r)=>e===(r?"left":"right")?n:"center"===e?(t+n)/2:t)(_,S+f+h,m?S+k:this.right,e.rtl),function(e,t,n){Xa(r,n.text,e,t+g/2,l,{strikethrough:n.hidden,textAlign:o.textAlign(n.textAlign)})}(o.x(S),E,b),m)d.x+=k+c;else if("string"!==typeof b.text){const e=l.lineHeight;d.y+=Uu(b,e)+c}else d.y+=v}),$o(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=co(t.font),r=lo(t.padding);if(!t.display)return;const i=Yo(e.rtl,this.left,this.width),s=this.ctx,a=t.position,o=n.size/2,l=r.top+o;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=va(e.align,u,this.right-h);else{const t=this.columnSizes.reduce((e,t)=>Math.max(e,t.height),0);c=l+va(e.align,this.top,this.bottom-t-e.labels.padding-this._computeTitleHeight())}const d=va(a,u,u+h);s.textAlign=i.textAlign(ya(a)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,Xa(s,t.text,d,c,n)}_computeTitleHeight(){const e=this.options.title,t=co(e.font),n=lo(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,i;if(la(e,this.left,this.right)&&la(t,this.top,this.bottom))for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],la(e,r.left,r.left+r.width)&&la(t,r.top,r.top+r.height))return this.legendItems[n];return null}handleEvent(e){const t=this.options;if(!function(e,t){if(("mousemove"===e||"mouseout"===e)&&(t.onHover||t.onLeave))return!0;if(t.onClick&&("click"===e||"mouseup"===e))return!0;return!1}(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if("mousemove"===e.type||"mouseout"===e.type){const s=this._hoveredItem,a=(i=n,null!==(r=s)&&null!==i&&r.datasetIndex===i.datasetIndex&&r.index===i.index);s&&!a&&Ss(t.onLeave,[e,s,this],this),this._hoveredItem=n,n&&!a&&Ss(t.onHover,[e,n,this],this)}else n&&Ss(t.onClick,[e,n,this],this);var r,i}}function Uu(e,t){return t*(e.text?e.text.length:0)}var Bu={id:"legend",_element:zu,start(e,t,n){const r=e.legend=new zu({ctx:e.ctx,options:n,chart:e});cc.configure(e,r,n),cc.addBox(e,r)},stop(e){cc.removeBox(e,e.legend),delete e.legend},beforeUpdate(e,t,n){const r=e.legend;cc.configure(e,r,n),r.options=n},afterUpdate(e){const t=e.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(e,t){t.replay||e.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(e,t,n){const r=t.datasetIndex,i=n.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:e=>e.chart.options.color,boxWidth:40,padding:10,generateLabels(e){const t=e.data.datasets,{labels:{usePointStyle:n,pointStyle:r,textAlign:i,color:s,useBorderRadius:a,borderRadius:o}}=e.legend.options;return e._getSortedDatasetMetas().map(e=>{const l=e.controller.getStyle(n?0:void 0),c=lo(l.borderWidth);return{text:t[e.index].label,fillStyle:l.backgroundColor,fontColor:s,hidden:!e.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:r||l.pointStyle,rotation:l.rotation,textAlign:i||l.textAlign,borderRadius:a&&(o||l.borderRadius),datasetIndex:e.index}},this)}},title:{color:e=>e.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:e=>!e.startsWith("on"),labels:{_scriptable:e=>!["generateLabels","filter","sort"].includes(e)}}};class Wu extends Ic{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=e,this.height=this.bottom=t;const r=vs(n.text)?n.text.length:1;this._padding=lo(n.padding);const i=r*co(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return"top"===e||"bottom"===e}_drawArgs(e){const{top:t,left:n,bottom:r,right:i,options:s}=this,a=s.align;let o,l,c,u=0;return this.isHorizontal()?(l=va(a,n,i),c=t+e,o=i-n):("left"===s.position?(l=n+e,c=va(a,r,t),u=-.5*Vs):(l=i-e,c=va(a,t,r),u=.5*Vs),o=r-t),{titleX:l,titleY:c,maxWidth:o,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=co(t.font),r=n.lineHeight/2+this._padding.top,{titleX:i,titleY:s,maxWidth:a,rotation:o}=this._drawArgs(r);Xa(e,t.text,0,0,n,{color:t.color,maxWidth:a,rotation:o,textAlign:ya(t.align),textBaseline:"middle",translation:[i,s]})}}var qu={id:"title",_element:Wu,start(e,t,n){!function(e,t){const n=new Wu({ctx:e.ctx,options:t,chart:e});cc.configure(e,n,t),cc.addBox(e,n),e.titleBlock=n}(e,n)},stop(e){const t=e.titleBlock;cc.removeBox(e,t),delete e.titleBlock},beforeUpdate(e,t,n){const r=e.titleBlock;cc.configure(e,r,n),r.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};new WeakMap;const Hu={average(e){if(!e.length)return!1;let t,n,r=new Set,i=0,s=0;for(t=0,n=e.length;t<n;++t){const n=e[t].element;if(n&&n.hasValue()){const e=n.tooltipPosition();r.add(e.x),i+=e.y,++s}}if(0===s||0===r.size)return!1;return{x:[...r].reduce((e,t)=>e+t)/r.size,y:i/s}},nearest(e,t){if(!e.length)return!1;let n,r,i,s=t.x,a=t.y,o=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){const r=e[n].element;if(r&&r.hasValue()){const e=ra(t,r.getCenterPoint());e<o&&(o=e,i=r)}}if(i){const e=i.tooltipPosition();s=e.x,a=e.y}return{x:s,y:a}}};function Ku(e,t){return t&&(vs(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function Gu(e){return("string"===typeof e||e instanceof String)&&e.indexOf("\n")>-1?e.split("\n"):e}function Qu(e,t){const{element:n,datasetIndex:r,index:i}=t,s=e.getDatasetMeta(r).controller,{label:a,value:o}=s.getLabelAndValue(i);return{chart:e,label:a,parsed:s.getParsed(i),raw:e.data.datasets[r].data[i],formattedValue:o,dataset:s.getDataset(),dataIndex:i,datasetIndex:r,element:n}}function Yu(e,t){const n=e.chart.ctx,{body:r,footer:i,title:s}=e,{boxWidth:a,boxHeight:o}=t,l=co(t.bodyFont),c=co(t.titleFont),u=co(t.footerFont),h=s.length,d=i.length,f=r.length,p=lo(t.padding);let g=p.height,m=0,y=r.reduce((e,t)=>e+t.before.length+t.lines.length+t.after.length,0);if(y+=e.beforeBody.length+e.afterBody.length,h&&(g+=h*c.lineHeight+(h-1)*t.titleSpacing+t.titleMarginBottom),y){g+=f*(t.displayColors?Math.max(o,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*t.bodySpacing}d&&(g+=t.footerMarginTop+d*u.lineHeight+(d-1)*t.footerSpacing);let v=0;const b=function(e){m=Math.max(m,n.measureText(e).width+v)};return n.save(),n.font=c.string,Es(e.title,b),n.font=l.string,Es(e.beforeBody.concat(e.afterBody),b),v=t.displayColors?a+2+t.boxPadding:0,Es(r,e=>{Es(e.before,b),Es(e.lines,b),Es(e.after,b)}),v=0,n.font=u.string,Es(e.footer,b),n.restore(),m+=p.width,{width:m,height:g}}function Zu(e,t,n,r){const{x:i,width:s}=n,{width:a,chartArea:{left:o,right:l}}=e;let c="center";return"center"===r?c=i<=(o+l)/2?"left":"right":i<=s/2?c="left":i>=a-s/2&&(c="right"),function(e,t,n,r){const{x:i,width:s}=r,a=n.caretSize+n.caretPadding;return"left"===e&&i+s+a>t.width||"right"===e&&i-s-a<0||void 0}(c,e,t,n)&&(c="center"),c}function $u(e,t,n){const r=n.yAlign||t.yAlign||function(e,t){const{y:n,height:r}=t;return n<r/2?"top":n>e.height-r/2?"bottom":"center"}(e,n);return{xAlign:n.xAlign||t.xAlign||Zu(e,t,n,r),yAlign:r}}function Ju(e,t,n,r){const{caretSize:i,caretPadding:s,cornerRadius:a}=e,{xAlign:o,yAlign:l}=n,c=i+s,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=oo(a);let p=function(e,t){let{x:n,width:r}=e;return"right"===t?n-=r:"center"===t&&(n-=r/2),n}(t,o);const g=function(e,t,n){let{y:r,height:i}=e;return"top"===t?r+=n:r-="bottom"===t?i+n:i/2,r}(t,l,c);return"center"===l?"left"===o?p+=c:"right"===o&&(p-=c):"left"===o?p-=Math.max(u,d)+i:"right"===o&&(p+=Math.max(h,f)+i),{x:oa(p,0,r.width-t.width),y:oa(g,0,r.height-t.height)}}function Xu(e,t,n){const r=lo(n.padding);return"center"===t?e.x+e.width/2:"right"===t?e.x+e.width-r.right:e.x+r.left}function eh(e){return Ku([],Gu(e))}function th(e,t){const n=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return n?e.override(n):e}const nh={beforeTitle:gs,title(e){if(e.length>0){const t=e[0],n=t.chart.data.labels,r=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return n[t.dataIndex]}return""},afterTitle:gs,beforeBody:gs,beforeLabel:gs,label(e){if(this&&this.options&&"dataset"===this.options.mode)return e.label+": "+e.formattedValue||e.formattedValue;let t=e.dataset.label||"";t&&(t+=": ");const n=e.formattedValue;return ys(n)||(t+=n),t},labelColor(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(e){const t=e.chart.getDatasetMeta(e.datasetIndex).controller.getStyle(e.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:gs,afterBody:gs,beforeFooter:gs,footer:gs,afterFooter:gs};function rh(e,t,n,r){const i=e[t].call(n,r);return"undefined"===typeof i?nh[t].call(n,r):i}class ih extends Ic{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,i=new dl(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=(e=this.chart.getContext(),t=this,n=this._tooltipItems,ho(e,{tooltip:t,tooltipItems:n,type:"tooltip"})));var e,t,n}getTitle(e,t){const{callbacks:n}=t,r=rh(n,"beforeTitle",this,e),i=rh(n,"title",this,e),s=rh(n,"afterTitle",this,e);let a=[];return a=Ku(a,Gu(r)),a=Ku(a,Gu(i)),a=Ku(a,Gu(s)),a}getBeforeBody(e,t){return eh(rh(t.callbacks,"beforeBody",this,e))}getBody(e,t){const{callbacks:n}=t,r=[];return Es(e,e=>{const t={before:[],lines:[],after:[]},i=th(n,e);Ku(t.before,Gu(rh(i,"beforeLabel",this,e))),Ku(t.lines,rh(i,"label",this,e)),Ku(t.after,Gu(rh(i,"afterLabel",this,e))),r.push(t)}),r}getAfterBody(e,t){return eh(rh(t.callbacks,"afterBody",this,e))}getFooter(e,t){const{callbacks:n}=t,r=rh(n,"beforeFooter",this,e),i=rh(n,"footer",this,e),s=rh(n,"afterFooter",this,e);let a=[];return a=Ku(a,Gu(r)),a=Ku(a,Gu(i)),a=Ku(a,Gu(s)),a}_createItems(e){const t=this._active,n=this.chart.data,r=[],i=[],s=[];let a,o,l=[];for(a=0,o=t.length;a<o;++a)l.push(Qu(this.chart,t[a]));return e.filter&&(l=l.filter((t,r,i)=>e.filter(t,r,i,n))),e.itemSort&&(l=l.sort((t,r)=>e.itemSort(t,r,n))),Es(l,t=>{const n=th(e.callbacks,t);r.push(rh(n,"labelColor",this,t)),i.push(rh(n,"labelPointStyle",this,t)),s.push(rh(n,"labelTextColor",this,t))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let i,s=[];if(r.length){const e=Hu[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const t=this._size=Yu(this,n),a=Object.assign({},e,t),o=$u(this.chart,n,a),l=Ju(n,a,o,this.chart);this.xAlign=o.xAlign,this.yAlign=o.yAlign,i={opacity:1,x:l.x,y:l.y,width:t.width,height:t.height,caretX:e.x,caretY:e.y}}else 0!==this.opacity&&(i={opacity:0});this._tooltipItems=s,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const i=this.getCaretPosition(e,n,r);t.lineTo(i.x1,i.y1),t.lineTo(i.x2,i.y2),t.lineTo(i.x3,i.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:i}=this,{caretSize:s,cornerRadius:a}=n,{topLeft:o,topRight:l,bottomLeft:c,bottomRight:u}=oo(a),{x:h,y:d}=e,{width:f,height:p}=t;let g,m,y,v,b,w;return"center"===i?(b=d+p/2,"left"===r?(g=h,m=g-s,v=b+s,w=b-s):(g=h+f,m=g+s,v=b-s,w=b+s),y=g):(m="left"===r?h+Math.max(o,c)+s:"right"===r?h+f-Math.max(l,u)-s:this.caretX,"top"===i?(v=d,b=v-s,g=m-s,y=m+s):(v=d+p,b=v+s,g=m+s,y=m-s),w=v),{x1:g,x2:m,x3:y,y1:v,y2:b,y3:w}}drawTitle(e,t,n){const r=this.title,i=r.length;let s,a,o;if(i){const l=Yo(n.rtl,this.x,this.width);for(e.x=Xu(this,n.titleAlign,n),t.textAlign=l.textAlign(n.titleAlign),t.textBaseline="middle",s=co(n.titleFont),a=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,o=0;o<i;++o)t.fillText(r[o],l.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+a,o+1===i&&(e.y+=n.titleMarginBottom-a)}}_drawColorBox(e,t,n,r,i){const s=this.labelColors[n],a=this.labelPointStyles[n],{boxHeight:o,boxWidth:l}=i,c=co(i.bodyFont),u=Xu(this,"left",i),h=r.x(u),d=o<c.lineHeight?(c.lineHeight-o)/2:0,f=t.y+d;if(i.usePointStyle){const t={radius:Math.min(l,o)/2,pointStyle:a.pointStyle,rotation:a.rotation,borderWidth:1},n=r.leftForLtr(h,l)+l/2,c=f+o/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,qa(e,t,n,c),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,qa(e,t,n,c)}else{e.lineWidth=bs(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const t=r.leftForLtr(h,l),n=r.leftForLtr(r.xPlus(h,1),l-2),a=oo(s.borderRadius);Object.values(a).some(e=>0!==e)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,eo(e,{x:t,y:f,w:l,h:o,radius:a}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),eo(e,{x:n,y:f+1,w:l-2,h:o-2,radius:a}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(t,f,l,o),e.strokeRect(t,f,l,o),e.fillStyle=s.backgroundColor,e.fillRect(n,f+1,l-2,o-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:i,bodyAlign:s,displayColors:a,boxHeight:o,boxWidth:l,boxPadding:c}=n,u=co(n.bodyFont);let h=u.lineHeight,d=0;const f=Yo(n.rtl,this.x,this.width),p=function(n){t.fillText(n,f.x(e.x+d),e.y+h/2),e.y+=h+i},g=f.textAlign(s);let m,y,v,b,w,x,_;for(t.textAlign=s,t.textBaseline="middle",t.font=u.string,e.x=Xu(this,g,n),t.fillStyle=n.bodyColor,Es(this.beforeBody,p),d=a&&"right"!==g?"center"===s?l/2+c:l+2+c:0,b=0,x=r.length;b<x;++b){for(m=r[b],y=this.labelTextColors[b],t.fillStyle=y,Es(m.before,p),v=m.lines,a&&v.length&&(this._drawColorBox(t,e,b,f,n),h=Math.max(u.lineHeight,o)),w=0,_=v.length;w<_;++w)p(v[w]),h=u.lineHeight;Es(m.after,p)}d=0,h=u.lineHeight,Es(this.afterBody,p),e.y-=i}drawFooter(e,t,n){const r=this.footer,i=r.length;let s,a;if(i){const o=Yo(n.rtl,this.x,this.width);for(e.x=Xu(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=o.textAlign(n.footerAlign),t.textBaseline="middle",s=co(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,a=0;a<i;++a)t.fillText(r[a],o.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:i,yAlign:s}=this,{x:a,y:o}=e,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:f}=oo(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(a+u,o),"top"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+l-h,o),t.quadraticCurveTo(a+l,o,a+l,o+h),"center"===s&&"right"===i&&this.drawCaret(e,t,n,r),t.lineTo(a+l,o+c-f),t.quadraticCurveTo(a+l,o+c,a+l-f,o+c),"bottom"===s&&this.drawCaret(e,t,n,r),t.lineTo(a+d,o+c),t.quadraticCurveTo(a,o+c,a,o+c-d),"center"===s&&"left"===i&&this.drawCaret(e,t,n,r),t.lineTo(a,o+u),t.quadraticCurveTo(a,o,a+u,o),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const n=Hu[e.position].call(this,this._active,this._eventPosition);if(!n)return;const s=this._size=Yu(this,e),a=Object.assign({},n,this._size),o=$u(t,e,a),l=Ju(e,a,o,t);r._to===l.x&&i._to===l.y||(this.xAlign=o.xAlign,this.yAlign=o.yAlign,this.width=s.width,this.height=s.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=lo(t.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&a&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,t),Zo(e,t.textDirection),i.y+=s.top,this.drawTitle(i,e,t),this.drawBody(i,e,t),this.drawFooter(i,e,t),$o(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(e=>{let{datasetIndex:t,index:n}=e;const r=this.chart.getDatasetMeta(t);if(!r)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:r.data[n],index:n}}),i=!Ts(n,r),s=this._positionChanged(r,t);(i||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t){let n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],s=this._getActiveElements(e,i,t,n),a=this._positionChanged(s,e),o=t||!Ts(s,i)||a;return o&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),o}_getActiveElements(e,t,n,r){const i=this.options;if("mouseout"===e.type)return[];if(!r)return t.filter(e=>this.chart.data.datasets[e.datasetIndex]&&void 0!==this.chart.getDatasetMeta(e.datasetIndex).controller.getParsed(e.index));const s=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:i}=this,s=Hu[i.position].call(this,e,t);return!1!==s&&(n!==s.x||r!==s.y)}}(0,ji.A)(ih,"positioners",Hu);var sh={id:"tooltip",_element:ih,positioners:Hu,afterInit(e,t,n){n&&(e.tooltip=new ih({chart:e,options:n}))},beforeUpdate(e,t,n){e.tooltip&&e.tooltip.initialize(n)},reset(e,t,n){e.tooltip&&e.tooltip.initialize(n)},afterDraw(e){const t=e.tooltip;if(t&&t._willRender()){const n={tooltip:t};if(!1===e.notifyPlugins("beforeTooltipDraw",(0,bi.A)((0,bi.A)({},n),{},{cancelable:!0})))return;t.draw(e.ctx),e.notifyPlugins("afterTooltipDraw",n)}},afterEvent(e,t){if(e.tooltip){const n=t.replay;e.tooltip.handleEvent(t.event,n,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(e,t)=>t.bodyFont.size,boxWidth:(e,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:nh},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:e=>"filter"!==e&&"itemSort"!==e&&"external"!==e,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};function ah(e,t,n,r){const i=e.indexOf(t);if(-1===i)return((e,t,n,r)=>("string"===typeof t?(n=e.push(t)-1,r.unshift({index:n,label:t})):isNaN(t)&&(n=null),n))(e,t,n,r);return i!==e.lastIndexOf(t)?n:i}function oh(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}class lh extends Lc{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const e=this.getLabels();for(const{index:n,label:r}of t)e[n]===r&&e.splice(n,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(ys(e))return null;const n=this.getLabels();return((e,t)=>null===e?null:oa(Math.round(e),0,t))(t=isFinite(t)&&n[t]===e?t:ah(n,e,_s(t,e),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);"ticks"===this.options.bounds&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=0===e&&t===i.length-1?i:i.slice(e,t+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){return oh.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return"number"!==typeof e&&(e=this.parse(e)),null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}function ch(e,t){const n=[],{bounds:r,step:i,min:s,max:a,precision:o,count:l,maxTicks:c,maxDigits:u,includeBounds:h}=e,d=i||1,f=c-1,{min:p,max:g}=t,m=!ys(s),y=!ys(a),v=!ys(l),b=(g-p)/(u+1);let w,x,_,k,S=Zs((g-p)/f/d)*d;if(S<1e-14&&!m&&!y)return[{value:p},{value:g}];k=Math.ceil(g/S)-Math.floor(p/S),k>f&&(S=Zs(k*S/f/d)*d),ys(o)||(w=Math.pow(10,o),S=Math.ceil(S*w)/w),"ticks"===r?(x=Math.floor(p/S)*S,_=Math.ceil(g/S)*S):(x=p,_=g),m&&y&&i&&function(e,t){const n=Math.round(e);return n-t<=e&&n+t>=e}((a-s)/i,S/1e3)?(k=Math.round(Math.min((a-s)/S,c)),S=(a-s)/k,x=s,_=a):v?(x=m?s:x,_=y?a:_,k=l-1,S=(_-x)/k):(k=(_-x)/S,k=Ys(k,Math.round(k),S/1e3)?Math.round(k):Math.ceil(k));const E=Math.max(ta(S),ta(x));w=Math.pow(10,ys(o)?E:o),x=Math.round(x*w)/w,_=Math.round(_*w)/w;let T=0;for(m&&(h&&x!==s?(n.push({value:s}),x<s&&T++,Ys(Math.round((x+T*S)*w)/w,s,uh(s,b,e))&&T++):x<s&&T++);T<k;++T){const e=Math.round((x+T*S)*w)/w;if(y&&e>a)break;n.push({value:e})}return y&&h&&_!==a?n.length&&Ys(n[n.length-1].value,a,uh(a,b,e))?n[n.length-1].value=a:n.push({value:a}):y&&_!==a||n.push({value:_}),n}function uh(e,t,n){let{horizontal:r,minRotation:i}=n;const s=Xs(i),a=(r?Math.sin(s):Math.cos(s))||.001,o=.75*t*(""+e).length;return Math.min(t/a,o)}(0,ji.A)(lh,"id","category"),(0,ji.A)(lh,"defaults",{ticks:{callback:oh}});class hh extends Lc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return ys(e)||("number"===typeof e||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const s=e=>r=t?r:e,a=e=>i=n?i:e;if(e){const e=Qs(r),t=Qs(i);e<0&&t<0?a(0):e>0&&t>0&&s(0)}if(r===i){let t=0===i?1:Math.abs(.05*i);a(i+t),e||s(r-t)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let t,{maxTicksLimit:n,stepSize:r}=e;return r?(t=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,t>1e3&&(console.warn("scales.".concat(this.id,".ticks.stepSize: ").concat(r," would result generating up to ").concat(t," ticks. Limiting to 1000.")),t=1e3)):(t=this.computeTickLimit(),n=n||11),n&&(t=Math.min(n,t)),t}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=ch({maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:!1!==t.includeBounds},this._range||this);return"ticks"===e.bounds&&Js(r,this,"value"),e.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return Pa(e,this.chart.options.locale,this.options.ticks.format)}}class dh extends hh{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ws(e)?e:0,this.max=ws(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=Xs(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return null===e?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}(0,ji.A)(dh,"id","linear"),(0,ji.A)(dh,"defaults",{ticks:{callback:Ma.formatters.numeric}});const fh=e=>Math.floor(Gs(e)),ph=(e,t)=>Math.pow(10,fh(e)+t);function gh(e){return 1===e/Math.pow(10,fh(e))}function mh(e,t,n){const r=Math.pow(10,n),i=Math.floor(e/r);return Math.ceil(t/r)-i}function yh(e,t){let{min:n,max:r}=t;n=xs(e.min,n);const i=[],s=fh(n);let a=function(e,t){let n=fh(t-e);for(;mh(e,t,n)>10;)n++;for(;mh(e,t,n)<10;)n--;return Math.min(n,fh(e))}(n,r),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=s>a?Math.pow(10,s):0,u=Math.round((n-c)*o)/o,h=Math.floor((n-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,a)),f=xs(e.min,Math.round((c+h+d*Math.pow(10,a))*o)/o);for(;f<r;)i.push({value:f,major:gh(f),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(a++,d=2,o=a>=0?1:o),f=Math.round((c+h+d*Math.pow(10,a))*o)/o;const p=xs(e.max,f);return i.push({value:p,major:gh(p),significand:d}),i}class vh extends Lc{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=hh.prototype.parse.apply(this,[e,t]);if(0!==n)return ws(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=ws(e)?Math.max(0,e):null,this.max=ws(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ws(this._userMin)&&(this.min=e===ph(this.min,0)?ph(this.min,-1):ph(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const i=t=>n=e?n:t,s=e=>r=t?r:e;n===r&&(n<=0?(i(1),s(10)):(i(ph(n,-1)),s(ph(r,1)))),n<=0&&i(ph(r,-1)),r<=0&&s(ph(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t=yh({min:this._userMin,max:this._userMax},this);return"ticks"===e.bounds&&Js(t,this,"value"),e.reverse?(t.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),t}getLabelForValue(e){return void 0===e?"0":Pa(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Gs(e),this._valueRange=Gs(this.max)-Gs(e)}getPixelForValue(e){return void 0!==e&&0!==e||(e=this.min),null===e||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Gs(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}function bh(e){const t=e.ticks;if(t.display&&e.display){const e=lo(t.backdropPadding);return _s(t.font&&t.font.size,Va.font.size)+e.height}return 0}function wh(e,t,n){return n=vs(n)?n:[n],{w:Ua(e,t.string,n),h:n.length*t.lineHeight}}function xh(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n,end:t}:{start:t,end:t+n}}function _h(e){const t={l:e.left+e._padding.left,r:e.right-e._padding.right,t:e.top+e._padding.top,b:e.bottom-e._padding.bottom},n=Object.assign({},t),r=[],i=[],s=e._pointLabels.length,a=e.options.pointLabels,o=a.centerPointLabels?Vs/s:0;for(let l=0;l<s;l++){const s=a.setContext(e.getPointLabelContext(l));i[l]=s.padding;const c=e.getPointPosition(l,e.drawingArea+i[l],o),u=co(s.font),h=wh(e.ctx,u,e._pointLabels[l]);r[l]=h;const d=sa(e.getIndexAngle(l)+o),f=Math.round(ea(d));kh(n,t,d,xh(f,c.x,h.w,0,180),xh(f,c.y,h.h,90,270))}e.setCenterPoint(t.l-n.l,n.r-t.r,t.t-n.t,n.b-t.b),e._pointLabelItems=function(e,t,n){const r=[],i=e._pointLabels.length,s=e.options,{centerPointLabels:a,display:o}=s.pointLabels,l={extra:bh(s)/2,additionalAngle:a?Vs/i:0};let c;for(let u=0;u<i;u++){l.padding=n[u],l.size=t[u];const i=Sh(e,u,l);r.push(i),"auto"===o&&(i.visible=Eh(i,c),i.visible&&(c=i))}return r}(e,r,i)}function kh(e,t,n,r,i){const s=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/s,e.l=Math.min(e.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/s,e.r=Math.max(e.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/a,e.t=Math.min(e.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/a,e.b=Math.max(e.b,t.b+l))}function Sh(e,t,n){const r=e.drawingArea,{extra:i,additionalAngle:s,padding:a,size:o}=n,l=e.getPointPosition(t,r+i+a,s),c=Math.round(ea(sa(l.angle+qs))),u=function(e,t,n){90===n||270===n?e-=t/2:(n>270||n<90)&&(e-=t);return e}(l.y,o.h,c),h=function(e){if(0===e||180===e)return"center";if(e<180)return"left";return"right"}(c),d=function(e,t,n){"right"===n?e-=t:"center"===n&&(e-=t/2);return e}(l.x,o.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+o.w,bottom:u+o.h}}function Eh(e,t){if(!t)return!0;const{left:n,top:r,right:i,bottom:s}=e;return!(Ka({x:n,y:r},t)||Ka({x:n,y:s},t)||Ka({x:i,y:r},t)||Ka({x:i,y:s},t))}function Th(e,t,n){const{left:r,top:i,right:s,bottom:a}=n,{backdropColor:o}=t;if(!ys(o)){const n=oo(t.borderRadius),l=lo(t.backdropPadding);e.fillStyle=o;const c=r-l.left,u=i-l.top,h=s-r+l.width,d=a-i+l.height;Object.values(n).some(e=>0!==e)?(e.beginPath(),eo(e,{x:c,y:u,w:h,h:d,radius:n}),e.fill()):e.fillRect(c,u,h,d)}}function Ih(e,t,n,r){const{ctx:i}=e;if(n)i.arc(e.xCenter,e.yCenter,t,0,zs);else{let n=e.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=e.getPointPosition(s,t),i.lineTo(n.x,n.y)}}(0,ji.A)(vh,"id","logarithmic"),(0,ji.A)(vh,"defaults",{ticks:{callback:Ma.formatters.logarithmic,major:{enabled:!0}}});class Ch extends hh{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=lo(bh(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=ws(e)&&!isNaN(e)?e:0,this.max=ws(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/bh(this.options))}generateTickLabels(e){hh.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((e,t)=>{const n=Ss(this.options.pointLabels.callback,[e,t],this);return n||0===n?n:""}).filter((e,t)=>this.chart.getDataVisibility(t))}fit(){const e=this.options;e.display&&e.pointLabels.display?_h(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){return sa(e*(zs/(this._pointLabels.length||1))+Xs(this.options.startAngle||0))}getDistanceFromCenterForValue(e){if(ys(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(ys(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return function(e,t,n){return ho(e,{label:n,index:t,type:"pointLabel"})}(this.getContext(),e,n)}}getPointPosition(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;const r=this.getIndexAngle(e)-qs+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),Ih(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r,border:i}=t,s=this._pointLabels.length;let a,o,l;if(t.pointLabels.display&&function(e,t){const{ctx:n,options:{pointLabels:r}}=e;for(let i=t-1;i>=0;i--){const t=e._pointLabelItems[i];if(!t.visible)continue;const s=r.setContext(e.getPointLabelContext(i));Th(n,s,t);const a=co(s.font),{x:o,y:l,textAlign:c}=t;Xa(n,e._pointLabels[i],o,l+a.lineHeight/2,a,{color:s.color,textAlign:c,textBaseline:"middle"})}}(this,s),r.display&&this.ticks.forEach((e,t)=>{if(0!==t||0===t&&this.min<0){o=this.getDistanceFromCenterForValue(e.value);const n=this.getContext(t),a=r.setContext(n),l=i.setContext(n);!function(e,t,n,r,i){const s=e.ctx,a=t.circular,{color:o,lineWidth:l}=t;!a&&!r||!o||!l||n<0||(s.save(),s.strokeStyle=o,s.lineWidth=l,s.setLineDash(i.dash||[]),s.lineDashOffset=i.dashOffset,s.beginPath(),Ih(e,n,a,r),s.closePath(),s.stroke(),s.restore())}(this,a,o,s,l)}}),n.display){for(e.save(),a=s-1;a>=0;a--){const r=n.setContext(this.getPointLabelContext(a)),{color:i,lineWidth:s}=r;s&&i&&(e.lineWidth=s,e.strokeStyle=i,e.setLineDash(r.borderDash),e.lineDashOffset=r.borderDashOffset,o=this.getDistanceFromCenterForValue(t.reverse?this.min:this.max),l=this.getPointPosition(a,o),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(l.x,l.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((r,a)=>{if(0===a&&this.min>=0&&!t.reverse)return;const o=n.setContext(this.getContext(a)),l=co(o.font);if(i=this.getDistanceFromCenterForValue(this.ticks[a].value),o.showLabelBackdrop){e.font=l.string,s=e.measureText(r.label).width,e.fillStyle=o.backdropColor;const t=lo(o.backdropPadding);e.fillRect(-s/2-t.left,-i-l.size/2-t.top,s+t.width,l.size+t.height)}Xa(e,r.label,0,-i,l,{color:o.color,strokeColor:o.textStrokeColor,strokeWidth:o.textStrokeWidth})}),e.restore()}drawTitle(){}}(0,ji.A)(Ch,"id","radialLinear"),(0,ji.A)(Ch,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ma.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:e=>e,padding:5,centerPointLabels:!1}}),(0,ji.A)(Ch,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),(0,ji.A)(Ch,"descriptors",{angleLines:{_fallback:"grid"}});const Ah={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dh=Object.keys(Ah);function Ph(e,t){return e-t}function Nh(e,t){if(ys(t))return null;const n=e._adapter,{parser:r,round:i,isoWeekday:s}=e._parseOpts;let a=t;return"function"===typeof r&&(a=r(a)),ws(a)||(a="string"===typeof r?n.parse(a,r):n.parse(a)),null===a?null:(i&&(a="week"!==i||!$s(s)&&!0!==s?n.startOf(a,i):n.startOf(a,"isoWeek",s)),+a)}function Mh(e,t,n,r){const i=Dh.length;for(let s=Dh.indexOf(e);s<i-1;++s){const e=Ah[Dh[s]],i=e.steps?e.steps:Number.MAX_SAFE_INTEGER;if(e.common&&Math.ceil((n-t)/(i*e.size))<=r)return Dh[s]}return Dh[i-1]}function Rh(e,t,n){if(n){if(n.length){const{lo:r,hi:i}=ca(n,t);e[n[r]>=t?n[r]:n[i]]=!0}}else e[t]=!0}function jh(e,t,n){const r=[],i={},s=t.length;let a,o;for(a=0;a<s;++a)o=t[a],i[o]=a,r.push({value:o,major:!1});return 0!==s&&n?function(e,t,n,r){const i=e._adapter,s=+i.startOf(t[0].value,r),a=t[t.length-1].value;let o,l;for(o=s;o<=a;o=+i.add(o,1,r))l=n[o],l>=0&&(t[l].major=!0);return t}(e,r,i,n):r}class Oh extends Lc{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const n=e.time||(e.time={}),r=this._adapter=new Wl(e.adapters.date);r.init(t),Ps(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return void 0===e?null:Nh(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:s,maxDefined:a}=this.getUserBounds();function o(e){s||isNaN(e.min)||(r=Math.min(r,e.min)),a||isNaN(e.max)||(i=Math.max(i,e.max))}s&&a||(o(this._getLabelBounds()),"ticks"===e.bounds&&"labels"===e.ticks.source||o(this.getMinMax(!1))),r=ws(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),i=ws(i)&&!isNaN(i)?i:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===e.bounds&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,s=function(e,t,n){let r=0,i=e.length;for(;r<i&&e[r]<t;)r++;for(;i>r&&e[i-1]>n;)i--;return r>0||i<e.length?e.slice(r,i):e}(r,i,this.max);return this._unit=t.unit||(n.autoSkip?Mh(t.minUnit,this.min,this.max,this._getLabelCapacity(i)):function(e,t,n,r,i){for(let s=Dh.length-1;s>=Dh.indexOf(n);s--){const n=Dh[s];if(Ah[n].common&&e._adapter.diff(i,r,n)>=t-1)return n}return Dh[n?Dh.indexOf(n):0]}(this,s.length,t.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(e){for(let t=Dh.indexOf(e)+1,n=Dh.length;t<n;++t)if(Ah[Dh[t]].common)return Dh[t]}(this._unit):void 0,this.initOffsets(r),e.reverse&&s.reverse(),jh(this,s,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(){let e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],r=0,i=0;this.options.offset&&n.length&&(e=this.getDecimalForValue(n[0]),r=1===n.length?1-e:(this.getDecimalForValue(n[1])-e)/2,t=this.getDecimalForValue(n[n.length-1]),i=1===n.length?t:(t-this.getDecimalForValue(n[n.length-2]))/2);const s=n.length<3?.5:.25;r=oa(r,0,s),i=oa(i,0,s),this._offsets={start:r,end:i,factor:1/(r+1+i)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,i=r.time,s=i.unit||Mh(i.minUnit,t,n,this._getLabelCapacity(t)),a=_s(r.ticks.stepSize,1),o="week"===s&&i.isoWeekday,l=$s(o)||!0===o,c={};let u,h,d=t;if(l&&(d=+e.startOf(d,"isoWeek",o)),d=+e.startOf(d,l?"day":s),e.diff(n,t,s)>1e5*a)throw new Error(t+" and "+n+" are too far apart with stepSize of "+a+" "+s);const f="data"===r.ticks.source&&this.getDataTimestamps();for(u=d,h=0;u<n;u=+e.add(u,a,s),h++)Rh(c,u,f);return u!==n&&"ticks"!==r.bounds&&1!==h||Rh(c,u,f),Object.keys(c).sort(Ph).map(e=>+e)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}format(e,t){const n=this.options.time.displayFormats,r=this._unit,i=t||n[r];return this._adapter.format(e,i)}_tickFormatFunction(e,t,n,r){const i=this.options,s=i.ticks.callback;if(s)return Ss(s,[e,t,n],this);const a=i.time.displayFormats,o=this._unit,l=this._majorUnit,c=o&&a[o],u=l&&a[l],h=n[t],d=l&&u&&h&&h.major;return this._adapter.format(e,r||(d?u:c))}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return null===e?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=Xs(this.isHorizontal()?t.maxRotation:t.minRotation),i=Math.cos(r),s=Math.sin(r),a=this._resolveTickFontOptions(0).size;return{w:n*i+a*s,h:n*s+a*i}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,i=this._tickFormatFunction(e,0,jh(this,[e],this._majorUnit),r),s=this._getLabelSize(i),a=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return a>0?a:1}getDataTimestamps(){let e,t,n=this._cache.data||[];if(n.length)return n;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(e=0,t=r.length;e<t;++e)n=n.concat(r[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(Nh(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return pa(e.sort(Ph))}}function Lh(e,t,n){let r,i,s,a,o=0,l=e.length-1;n?(t>=e[o].pos&&t<=e[l].pos&&({lo:o,hi:l}=ua(e,"pos",t)),({pos:r,time:s}=e[o]),({pos:i,time:a}=e[l])):(t>=e[o].time&&t<=e[l].time&&({lo:o,hi:l}=ua(e,"time",t)),({time:r,pos:s}=e[o]),({time:i,pos:a}=e[l]));const c=i-r;return c?s+(a-s)*(t-r)/c:s}(0,ji.A)(Oh,"id","time"),(0,ji.A)(Oh,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});class Fh extends Oh{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=Lh(t,this.min),this._tableRange=Lh(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],i=[];let s,a,o,l,c;for(s=0,a=e.length;s<a;++s)l=e[s],l>=t&&l<=n&&r.push(l);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,a=r.length;s<a;++s)c=r[s+1],o=r[s-1],l=r[s],Math.round((c+o)/2)!==l&&i.push({time:l,pos:s/(a-1)});return i}_generate(){const e=this.min,t=this.max;let n=super.getDataTimestamps();return n.includes(e)&&n.length||n.splice(0,0,e),n.includes(t)&&1!==n.length||n.push(t),n.sort((e,t)=>e-t)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return e=t.length&&n.length?this.normalize(t.concat(n)):t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Lh(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return Lh(this._table,n*this._tableRange+this._minPos,!0)}}(0,ji.A)(Fh,"id","timeseries"),(0,ji.A)(Fh,"defaults",Oh.defaults);const Vh=["height","width","redraw","datasetIdKey","type","data","options","plugins","fallbackContent","updateMode"],zh="label";function Uh(e,t){"function"===typeof e?e(t):e&&(e.current=t)}function Bh(e,t){e.labels=t}function Wh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:zh;const r=[];e.datasets=t.map(t=>{const i=e.datasets.find(e=>e[n]===t[n]);return i&&t.data&&!r.includes(i)?(r.push(i),Object.assign(i,t),i):(0,bi.A)({},t)})}function qh(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:zh;const n={labels:[],datasets:[]};return Bh(n,e.labels),Wh(n,e.datasets,t),n}function Hh(e,n){const{height:r=150,width:i=300,redraw:s=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:u=[],fallbackContent:h,updateMode:d}=e,f=Pi(e,Vh),p=(0,t.useRef)(null),g=(0,t.useRef)(null),m=()=>{p.current&&(g.current=new pu(p.current,{type:o,data:qh(l,a),options:c&&(0,bi.A)({},c),plugins:u}),Uh(n,g.current))},y=()=>{Uh(n,null),g.current&&(g.current.destroy(),g.current=null)};return(0,t.useEffect)(()=>{!s&&g.current&&c&&function(e,t){const n=e.options;n&&t&&Object.assign(n,t)}(g.current,c)},[s,c]),(0,t.useEffect)(()=>{!s&&g.current&&Bh(g.current.config.data,l.labels)},[s,l.labels]),(0,t.useEffect)(()=>{!s&&g.current&&l.datasets&&Wh(g.current.config.data,l.datasets,a)},[s,l.datasets]),(0,t.useEffect)(()=>{g.current&&(s?(y(),setTimeout(m)):g.current.update(d))},[s,c,l.labels,l.datasets,d]),(0,t.useEffect)(()=>{g.current&&(y(),setTimeout(m))},[o]),(0,t.useEffect)(()=>(m(),()=>y()),[]),t.createElement("canvas",(0,bi.A)({ref:p,role:"img",height:r,width:i},f),h)}const Kh=(0,t.forwardRef)(Hh);function Gh(e,n){return pu.register(n),(0,t.forwardRef)((n,r)=>t.createElement(Kh,(0,bi.A)((0,bi.A)({},n),{},{ref:r,type:e})))}const Qh=Gh("line",Ol);(0,Re.KO)("firebase","11.1.0","app");var Yh=n(167);const Zh=(0,Re.Wp)({apiKey:"AIzaSyAjJIYqMoPhIXGYxb8FO1Dr7BssmJA-PYQ",authDomain:"zyptopia-7a4dc.firebaseapp.com",projectId:"zyptopia-7a4dc",storageBucket:"zyptopia-7a4dc.firebasestorage.app",messagingSenderId:"521640938004",appId:"1:521640938004:web:6dea338ae8a7a3106a7501",measurementId:"G-4FBN7FGWTL"}),$h=(0,Yh.getFirestore)(Zh),Jh="https://ref.zypto.com/ZRxWOW84IOb",Xh=e=>"".concat(Jh,"?utm_source=zyptopia&utm_medium=referral&utm_campaign=site_cta&utm_content=").concat(encodeURIComponent(e||"unknown"));pu.register(lh,dh,Pu,Au,qu,sh,Bu);const ed={id:"outerGlow",beforeDatasetsDraw(e,t,n){var r,i,s;const a=null!==(r=null===n||void 0===n?void 0:n.datasetIndex)&&void 0!==r?r:0,o=e.getDatasetMeta(a);if(!o||!o.dataset)return;const l=e.data.datasets[a],c=e.ctx;c.save(),c.shadowColor=(null===n||void 0===n?void 0:n.color)||"rgba(0,255,200,.55)",c.shadowBlur=null!==(i=null===n||void 0===n?void 0:n.blur)&&void 0!==i?i:10,c.lineWidth=null!==(s=null===n||void 0===n?void 0:n.lineWidth)&&void 0!==s?s:2.5,c.strokeStyle=l.borderColor||"#00E7C6",o.dataset.draw(c),c.restore()}},td=(e,t)=>new Date(e.date)-new Date(t.date);function nd(e){let{data:n,averageReward:r,timeframe:i,onAverageChange:s}=e;const[a,o]=(0,t.useState)(!0),[l,c]=(0,t.useState)(!1),[u,h]=(0,t.useState)(!1),[d,f]=(0,t.useState)(!1),[p,g]=(0,t.useState)(i||"all");(0,t.useEffect)(()=>{i&&g(i)},[i]),(0,t.useEffect)(()=>{if(i)return;const e=e=>{var t;null!==e&&void 0!==e&&null!==(t=e.detail)&&void 0!==t&&t.timeframe&&g(e.detail.timeframe)};return window.addEventListener("zyptopia:setTimeframe",e),()=>window.removeEventListener("zyptopia:setTimeframe",e)},[i]);const[m,y]=(0,t.useState)([]);(0,t.useEffect)(()=>{let e=!0;return async function(){if(!n||!n.length)try{const t=(await(0,Yh.getDocs)((0,Yh.collection)($h,"rewards"))).docs.map(e=>e.data());t.sort(td),e&&y(t)}catch(t){}}(),()=>{e=!1}},[n]);const v=(0,t.useMemo)(()=>[...n&&n.length?n:m].sort(td),[n,m]),b=(0,t.useMemo)(()=>{const e=function(e){const t=new Date,n={"7d":7,"30d":30,"90d":90,"1y":365};if(!e||"all"===e||!n[e])return new Date(0);const r=new Date(t);return r.setDate(t.getDate()-n[e]),r.setHours(0,0,0,0),r}(p);return v.filter(t=>{const n=new Date(t.date);return n.setHours(0,0,0,0),n>=e})},[v,p]),w=(0,t.useMemo)(()=>b.map(e=>e.date),[b]),x=(0,t.useMemo)(()=>b.map(e=>Number(e.rewardPerToken)||0),[b]),_=(0,t.useMemo)(()=>{let e=0;return x.map(t=>e+=t)},[x]),k=(0,t.useMemo)(()=>function(e){const t=e.length;if(t<2)return Array(t).fill(null);let n=0,r=0,i=0,s=0;for(let c=0;c<t;c++){const t=c,a=e[c];null==a||Number.isNaN(a)||(n+=t,r+=a,i+=t*a,s+=t*t)}const a=t*s-n*n;if(0===a)return Array(t).fill(null);const o=(t*i-n*r)/a,l=(r-o*n)/t;return Array.from({length:t},(e,t)=>o*t+l)}(x),[x]),S=(0,t.useMemo)(()=>{const e=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:7,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30;const r=[];let i=e.slice(-n);if(0===i.length)return r;for(let s=0;s<t;s++){const e=i.reduce((e,t)=>e+(null!==t&&void 0!==t?t:0),0)/i.length;r.push(e),i.shift(),i.push(e)}return r}(x,7,30);if(!e.length)return{labels:[],values:[]};const t=w.length?new Date(w[w.length-1]):new Date,n=[];for(let r=1;r<=e.length;r++){const e=new Date(t);e.setDate(e.getDate()+r),n.push(e.toISOString().slice(0,10))}return{labels:n,values:e}},[w,x]),E=(0,t.useMemo)(()=>{if(!x.length)return null;return x.reduce((e,t)=>e+(null!==t&&void 0!==t?t:0),0)/x.length},[x]);(0,t.useEffect)(()=>{"function"===typeof s&&s(null!==E&&void 0!==E?E:null),null!=E&&Number.isFinite(E)&&window.dispatchEvent(new CustomEvent("zyptopia:avg",{detail:{value:E}}))},[E,s]);const T=(0,t.useMemo)(()=>{const e=[];e.push({label:"Reward per 1,000,000 Zypto",data:x,borderColor:"#00E7C6",backgroundColor:"rgba(0,231,198,0.16)",pointRadius:0,borderWidth:2.5,tension:.28,fill:!0});const t=null!==E&&void 0!==E?E:r;a&&null!=t&&Number.isFinite(t)&&e.push({label:"Average",data:x.map(()=>t),borderColor:"#FFD54F",borderDash:[6,6],pointRadius:0,fill:!1,borderWidth:2}),l&&e.push({label:"Cumulative",data:_,borderColor:"#66BB6A",pointRadius:0,fill:!1,yAxisID:"y2",borderWidth:2}),u&&e.push({label:"Trendline",data:k,borderColor:"#B39DDB",borderDash:[12,6],pointRadius:0,fill:!1,borderWidth:2}),d&&S.values.length&&e.push({label:"7-day Forecast",data:[...Array(x.length).fill(null),...S.values],borderColor:"#26A69A",borderDash:[4,4],pointRadius:0,fill:!1,borderWidth:2});return{labels:[...w,...d?S.labels:[]],datasets:e}},[w,x,E,r,_,k,S,a,l,u,d]),I=(0,t.useMemo)(()=>({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"top",labels:{boxWidth:12,color:"rgba(255,255,255,.9)"}},title:{display:!1},tooltip:{backgroundColor:"rgba(18,22,28,.95)",borderColor:"rgba(255,255,255,.12)",borderWidth:1,padding:10,displayColors:!1,callbacks:{label:e=>{const t=e.parsed.y;return"".concat(e.dataset.label,": ").concat(Number(t).toLocaleString(void 0,{maximumFractionDigits:2}))}}},outerGlow:{color:"rgba(0,255,200,.55)",blur:10,lineWidth:2.5,datasetIndex:0}},scales:{y:{beginAtZero:!1,ticks:{color:"rgba(255,255,255,.85)",callback:e=>Number(e).toLocaleString(void 0,{maximumFractionDigits:0})},grid:{color:"rgba(255,255,255,0.06)"}},y2:l?{position:"right",grid:{drawOnChartArea:!1},ticks:{color:"rgba(255,255,255,.75)",callback:e=>Number(e).toLocaleString(void 0,{maximumFractionDigits:0})}}:void 0,x:{grid:{color:"rgba(255,255,255,0.05)"},ticks:{color:"rgba(255,255,255,.75)",maxRotation:0,autoSkip:!0,maxTicksLimit:12}}},interaction:{intersect:!1,mode:"index"}}),[l]);return(0,ui.jsxs)("div",{className:"graph-card",style:{width:"100%"},children:[(0,ui.jsxs)("div",{style:{display:"flex",flexWrap:"wrap",gap:"0.5rem",marginBottom:"0.5rem"},children:[(0,ui.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[(0,ui.jsx)("input",{type:"checkbox",checked:a,onChange:e=>o(e.target.checked)}),(0,ui.jsx)("span",{children:"Average"})]}),(0,ui.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[(0,ui.jsx)("input",{type:"checkbox",checked:l,onChange:e=>c(e.target.checked)}),(0,ui.jsx)("span",{children:"Cumulative"})]}),(0,ui.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[(0,ui.jsx)("input",{type:"checkbox",checked:u,onChange:e=>h(e.target.checked)}),(0,ui.jsx)("span",{children:"Trendline"})]}),(0,ui.jsxs)("label",{style:{display:"inline-flex",alignItems:"center",gap:"0.35rem"},children:[(0,ui.jsx)("input",{type:"checkbox",checked:d,onChange:e=>f(e.target.checked)}),(0,ui.jsx)("span",{children:"7-day Forecast"})]})]}),(0,ui.jsx)("div",{style:{height:"clamp(240px, 45vh, 380px)"},children:(0,ui.jsx)(Qh,{data:T,options:I,plugins:[ed]})}),(0,ui.jsxs)("div",{className:"graph-cta","aria-live":"polite",style:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:"0.75rem",marginTop:"0.5rem",flexWrap:"wrap",fontSize:"0.95rem",opacity:.95},children:[(0,ui.jsx)("span",{children:"Data shown is real daily rewards tracked by the community."}),(0,ui.jsx)(Mi,{href:Xh("graph_footer"),eventName:"cta_click",eventParams:{placement:"graph_footer"},className:"link-quiet",style:{textDecoration:"underline"},children:"New here? See how to start earning \u2192"})]})]})}const rd=["timeframe","onAverageChange"];function id(e){let{timeframe:n,onAverageChange:r}=e,i=Pi(e,rd);return(0,t.useEffect)(()=>{n&&window.dispatchEvent(new CustomEvent("zyptopia:setTimeframe",{detail:{timeframe:n}}))},[n]),(0,ui.jsx)(nd,(0,bi.A)((0,bi.A)({},i),{},{timeframe:n,onAverageChange:r}))}const sd=n.p+"static/media/vault-key-card-promo.e43f00aec2459c5c7a66.png";function ad(){const e=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:560;const[n,r]=(0,t.useState)(()=>"undefined"!==typeof window&&window.innerWidth<=e);return(0,t.useEffect)(()=>{if("undefined"===typeof window)return;const t=window.matchMedia("(max-width: ".concat(e,"px)")),n=e=>r(e.matches);return n(t),t.addEventListener?t.addEventListener("change",n):t.addListener(n),()=>{t.removeEventListener?t.removeEventListener("change",n):t.removeListener(n)}},[e]),n}(560);return(0,ui.jsx)("aside",{className:"promo-banner",style:cd,role:"region","aria-label":"Zypto promo",children:e?(0,ui.jsx)(ld,{}):(0,ui.jsx)(od,{})})}function od(){return(0,ui.jsxs)("div",{style:ud,children:[(0,ui.jsx)("div",{style:hd,children:(0,ui.jsx)("img",{src:sd,alt:"Zypto Wallet & Vault Key Card",style:{width:"100%",height:"auto",display:"block",borderRadius:12},loading:"lazy",decoding:"async"})}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:{fontSize:"1.1rem",fontWeight:900,marginBottom:".25rem"},children:"Zypto Wallet & Vault Key Card"}),(0,ui.jsx)("div",{style:{opacity:.9,marginBottom:".6rem"},children:"Two ways to start: manage crypto with the wallet, add tap-to-sign security with the VKC."}),(0,ui.jsxs)("div",{style:dd,children:[(0,ui.jsxs)("div",{style:fd,children:[(0,ui.jsx)("div",{style:pd,children:"Zypto Wallet"}),(0,ui.jsx)("div",{style:gd,children:"Buy, swap, spend, and track daily ZYP rewards in-app."}),(0,ui.jsx)("div",{style:{flexGrow:1}}),(0,ui.jsx)(Mi,{className:"btn btn-primary",style:yd,href:Xh("promo_wallet"),eventName:"promo_click",eventParams:{product:"wallet"},children:"Download Wallet"})]}),(0,ui.jsxs)("div",{style:fd,children:[(0,ui.jsx)("div",{style:pd,children:"Vault Key Card"}),(0,ui.jsx)("div",{style:gd,children:"Tap-to-sign, mobile-first cold storage for up to 3 app-created wallets."}),(0,ui.jsx)("div",{style:{flexGrow:1}}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:vd,children:"Learn about VKC"})]})]})]})]})}function ld(){return(0,ui.jsxs)("div",{style:bd,children:[(0,ui.jsx)("div",{style:{gridArea:"title",fontWeight:900,fontSize:"1rem"},children:"Zypto Wallet & Vault Key Card"}),(0,ui.jsx)("div",{style:{gridArea:"image"},children:(0,ui.jsx)("img",{src:sd,alt:"","aria-hidden":"true",style:{width:"100%",height:"auto",display:"block",maxHeight:100,objectFit:"contain",borderRadius:8},loading:"lazy"})}),(0,ui.jsx)("div",{style:{gridArea:"copy",opacity:.9,fontSize:".95rem"},children:"Start with the Wallet or add VKC security \u2014 quick setup."}),(0,ui.jsxs)("div",{style:{gridArea:"actions",display:"flex",gap:".5rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{className:"btn btn-primary",style:yd,href:Xh("promo_wallet"),eventName:"promo_click",eventParams:{product:"wallet"},children:"Download Wallet"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:vd,children:"Learn about VKC"})]})]})}const cd={border:"1px solid rgba(255,255,255,.08)",borderRadius:14,padding:".9rem",background:"rgba(255,255,255,.03)",margin:"1rem 0 0"},ud={display:"grid",gridTemplateColumns:"minmax(140px, 220px) 1fr",gap:".9rem",alignItems:"center"},hd={alignSelf:"center"},dd={display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:".6rem",alignItems:"stretch"},fd={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:".85rem",background:"rgba(255,255,255,.02)",display:"grid",gridTemplateRows:"auto auto 1fr auto",minHeight:0},pd={fontWeight:800,marginBottom:".25rem"},gd={opacity:.9,marginTop:".15rem"},md={padding:".5rem .85rem",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",fontWeight:800,lineHeight:1.2,letterSpacing:0,textDecoration:"none",display:"inline-flex",alignItems:"center",justifyContent:"center",width:"auto",maxWidth:"100%",justifySelf:"start"},yd=(0,bi.A)((0,bi.A)({},md),{},{background:"linear-gradient(180deg, rgba(0,255,200,.28), rgba(0,255,200,.18))"}),vd=(0,bi.A)((0,bi.A)({},md),{},{background:"rgba(255,255,255,.06)"}),bd={display:"grid",gridTemplateAreas:'\n    "title   title"\n    "image   copy"\n    "image   actions"\n  ',gridTemplateColumns:"96px 1fr",gap:".6rem",alignItems:"center"};function wd(){const[e,n]=(0,t.useState)(null),[r,i]=(0,t.useState)("30d");(0,t.useEffect)(()=>{li("page_view",{page:"home"})},[]),(0,t.useEffect)(()=>{const e=e=>{null!==e&&void 0!==e&&e.detail&&"number"===typeof e.detail.value&&n(e.detail.value)};return window.addEventListener("zyptopia:avg",e),()=>window.removeEventListener("zyptopia:avg",e)},[]);const s=(0,t.useMemo)(()=>null==e||Number.isNaN(e)?"\u2014":Number(e).toLocaleString(void 0,{maximumFractionDigits:2}),[e]),a=(0,t.useMemo)(()=>{const t=xd(r),n=null==e||Number.isNaN(e)?"\u2014":"".concat(Number(e).toLocaleString(void 0,{maximumFractionDigits:2})," ZYP / 1,000,000 tokens avg");return"Daily Zypto rewards (".concat(t,"). Avg: ").concat(n,". Explore more at https://www.zyptopia.org #Zypto #ZYP #crypto")},[e,r]),o="https://www.zyptopia.org/";return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Zyptopia.org \u2013 Community data, calculators & guides for Zypto",description:"Zyptopia.org \u2013 independent, community-run tools for Zypto users: daily reward history, calculators, neutral guides, and VKC overview.",canonical:o,jsonLd:[{"@context":"https://schema.org","@type":"WebSite",name:"Zyptopia.org",url:o}]}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1180,margin:"1.2rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:Sd,children:[(0,ui.jsxs)("div",{style:Ed,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsxs)("h1",{style:{margin:0,letterSpacing:.2},children:[(0,ui.jsx)("span",{style:kd,children:"\u2726"})," Daily rewards"]}),(0,ui.jsx)("p",{style:{margin:".25rem 0 0",opacity:.9},children:"Community-tracked \u201cZyps per 1,000,000 tokens\u201d by day."})]}),(0,ui.jsx)(Ri,{targetId:"shareable-graph",filename:"zyptopia-graph-".concat(r,".png"),shareText:a})]}),(0,ui.jsxs)("div",{style:Td,children:[(0,ui.jsxs)("div",{style:Id,children:[(0,ui.jsx)("div",{style:{fontSize:".82rem",opacity:.85,marginBottom:2},children:"Average Daily Zyps"}),(0,ui.jsx)("div",{style:{fontWeight:900,fontSize:"1.28rem"},children:s}),(0,ui.jsxs)("div",{style:{fontSize:".82rem",opacity:.75},children:["for ",xd(r)]})]}),(0,ui.jsx)(_d,{value:r,onChange:e=>{i(e),li("timeframe_change",{tf:e})}})]}),(0,ui.jsx)("div",{id:"shareable-graph",style:Ad,children:(0,ui.jsx)(id,{timeframe:r,onAverageChange:n})}),(0,ui.jsx)("div",{style:{marginTop:".9rem"},children:(0,ui.jsx)(ad,{})}),(0,ui.jsxs)("div",{style:Dd,children:[(0,ui.jsx)(Ae,{to:"/historical",className:"btn",style:Pd,children:"See historical"}),(0,ui.jsx)(Ae,{to:"/calculator",className:"btn",style:Pd,children:"Open calculators"}),(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:Pd,children:"Getting-started guide"}),(0,ui.jsx)(Mi,{href:Xh("home_top_download"),eventName:"cta_click",eventParams:{placement:"home_top_download"},className:"btn",style:Pd,children:"Download Zypto"})]})]}),(0,ui.jsx)("p",{style:{marginTop:".8rem",opacity:.75,fontSize:".92rem"},children:"Zyptopia.org is independent and community-run. Nothing here is financial advice."})]})]})}function xd(e){switch(e){case"7d":return"the last 7 days";case"30d":return"the last 30 days";case"90d":return"the last 90 days";case"1y":return"the last year";case"all":return"all time";default:return"the selected period"}}function _d(e){let{value:t,onChange:n}=e;return(0,ui.jsx)("div",{style:Cd,children:[{id:"7d",label:"7d"},{id:"30d",label:"30d"},{id:"90d",label:"90d"},{id:"1y",label:"1y"},{id:"all",label:"All"}].map(e=>(0,ui.jsx)("button",{onClick:()=>n(e.id),className:"seg-btn"+(t===e.id?" is-active":""),style:{padding:".46rem .72rem",borderRadius:12,border:"1px solid rgba(255,255,255,.16)",background:t===e.id?"rgba(0,255,200,.18)":"rgba(255,255,255,.05)",boxShadow:t===e.id?"0 0 0 2px rgba(0,255,200,.12) inset":"none",cursor:"pointer",fontWeight:800},children:e.label},e.id))})}const kd={marginRight:".35rem",filter:"drop-shadow(0 0 6px rgba(0,255,200,.35))"},Sd={border:"1px solid rgba(255,255,255,.1)",borderRadius:18,padding:"1rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))"},Ed={display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",marginBottom:".6rem"},Td={display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",marginBottom:".6rem"},Id={border:"1px solid rgba(0,255,200,.25)",borderRadius:14,padding:".6rem .85rem",background:"rgba(0,255,200,.06)",minWidth:220,boxShadow:"0 0 0 2px rgba(0,255,200,.08) inset"},Cd={display:"flex",gap:".45rem",flexWrap:"wrap"},Ad={border:"1px solid rgba(255,255,255,.12)",borderRadius:14,padding:".6rem",minHeight:280,background:"rgba(255,255,255,.02)"},Dd={display:"flex",gap:".5rem",flexWrap:"wrap",marginTop:".8rem"},Pd={padding:".5rem .85rem",borderRadius:12,border:"1px solid rgba(255,255,255,.15)",background:"rgba(255,255,255,.08)",fontWeight:700},Nd=e=>({"@context":"https://schema.org","@type":"BreadcrumbList",itemListElement:e.map((e,t)=>({"@type":"ListItem",position:t+1,name:e.name,item:e.item}))}),Md=e=>({"@context":"https://schema.org","@type":"FAQPage",mainEntity:e.map(e=>{let{q:t,a:n}=e;return{"@type":"Question",name:t,acceptedAnswer:{"@type":"Answer",text:n}}})}),Rd=e=>{let{name:t,steps:n}=e;return{"@context":"https://schema.org","@type":"HowTo",name:t,step:n.map((e,t)=>({"@type":"HowToStep",position:t+1,name:e.name,text:e.text}))}},jd=.001,Od=(e,t)=>new Date(e.date)-new Date(t.date),Ld=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(null!==e&&void 0!==e?e:0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:t})};function Fd(e,t){if(!e.length)return 0;const n=[...e].sort((e,t)=>e-t);var r,i,s;return n[(r=Math.ceil(t/100*n.length)-1,i=0,s=n.length-1,Math.min(s,Math.max(i,r)))]}function Vd(e){if(!e)return"\u2014";const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),r=String(e.getDate()).padStart(2,"0");return"".concat(t,"-").concat(n,"-").concat(r)}function zd(){(0,t.useEffect)(()=>{li("page_view",{page:"calculator"})},[]);const[e,n]=(0,t.useState)(1e6),[r,i]=(0,t.useState)("30d"),[s,a]=(0,t.useState)(0),[o,l]=(0,t.useState)("opt"),[c,u]=(0,t.useState)([]),[h,d]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=!0;return(async()=>{try{const t=(await(0,Yh.getDocs)((0,Yh.collection)($h,"rewards"))).docs.map(e=>e.data()).filter(Boolean).sort(Od);e&&u(t)}catch(t){}finally{e&&d(!1)}})(),()=>{e=!1}},[]);const f=(0,t.useMemo)(()=>{const e=function(e){const t=new Date,n={"7d":7,"30d":30,"90d":90,"1y":365};if(!e||"all"===e||!n[e])return new Date(0);const r=new Date(t);return r.setDate(t.getDate()-n[e]),r.setHours(0,0,0,0),r}(r);return c.filter(t=>{const n=new Date(t.date);return n.setHours(0,0,0,0),n>=e})},[c,r]),p=(0,t.useMemo)(()=>f.map(e=>e.date),[f]),g=(0,t.useMemo)(()=>f.map(e=>Number(e.rewardPerToken)||0),[f]),m=(0,t.useMemo)(()=>{if(!g.length)return 0;return g.reduce((e,t)=>e+(null!==t&&void 0!==t?t:0),0)/g.length},[g]),y=(0,t.useMemo)(()=>g.length?Math.max(Fd(g,25),.85*m):0,[g,m]),v=(0,t.useMemo)(()=>g.length?Fd(g,75):0,[g]),b=(0,t.useMemo)(()=>function(e,t){var n;if(e.length<7)return{avg:0,start:null};let r=-1/0,i=0,s=0;for(let l=0;l<e.length;l++){var a,o;if(s+=null!==(a=e[l])&&void 0!==a?a:0,l>=7&&(s-=null!==(o=e[l-7])&&void 0!==o?o:0),l>=6){const e=s/7;e>r&&(r=e,i=l-6)}}return{avg:r,start:null!==(n=t[i])&&void 0!==n?n:null}}(g,p),[g,p]),w=(0,t.useMemo)(()=>{switch(o){case"cons":return y;case"base":return m;case"opt":default:return v;case"g10":return 10*v;case"g100":return 100*v;case"g1000":return 1e3*v}},[o,y,m,v]),x={cons:"Conservative",base:"Base average",opt:"Optimistic",g10:"10\xd7 activity",g100:"100\xd7 activity",g1000:"1000\xd7 activity"}[o],_={cons:"25th percentile or 85% of base",base:"Current average",opt:"75th percentile",g10:"Hypothetical scale-up (from optimistic)",g100:"Hypothetical scale-up (from optimistic)",g1000:"Hypothetical scale-up (from optimistic)"}[o],k=e/1e6,S=w*k,E=365*S,T=S*jd,I=E*jd,C=w*k,A=w*((e+s)/1e6),D=C*jd,P=A*jd,N=A-C,M=365*N,R=P-D,j=M*jd,O="https://www.zyptopia.org/calculator",L=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Calculator",item:O}])],[F,V]=(0,t.useState)("usd"),[z,U]=(0,t.useState)(25),[B,W]=(0,t.useState)(25e3),q="usd"===F?z/jd:B,H=(0,t.useMemo)(()=>{if(!w)return 0;return 1e6*(q/w)},[q,w]),K=1e5*Math.ceil(H/1e5),[G,Q]=(0,t.useState)(1e3),Y=T||0,Z=Y>0?Math.ceil(G/Y):null,$=null!=Z?function(e,t){const n=new Date(e);return n.setDate(n.getDate()+t),n}(new Date,Z):null;return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Zyps Calculator",description:"Estimate daily and yearly ZYP rewards by timeframe and scenario. Includes Goal Seeker and Milestone Countdown.",canonical:O,jsonLd:L}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:qd.wrap,"aria-label":"About this calculator",children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"How it works:"})," Estimates from community-tracked daily averages. Choose timeframe and scenario."]}),(0,ui.jsx)("div",{style:qd.sub,children:"$1 USD = 1,000 ZYP. Estimates only \u2014 not financial advice."})]}),(0,ui.jsxs)("section",{style:Gd,children:[(0,ui.jsx)("h2",{style:Qd,children:"Inputs"}),(0,ui.jsxs)("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:".7rem"},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:Yd,children:"Timeframe"}),(0,ui.jsx)("div",{style:{display:"flex",gap:".4rem",flexWrap:"wrap"},children:["7d","30d","90d","1y","all"].map(e=>(0,ui.jsx)("button",{className:"btn",onClick:()=>i(e),style:(0,bi.A)((0,bi.A)({},Hd),r===e?{background:"rgba(0,231,198,.12)",boxShadow:"0 0 0 2px rgba(0,231,198,.18) inset"}:null),"aria-pressed":r===e?"true":"false",children:e},e))})]}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:Yd,children:"Zypto held"}),(0,ui.jsx)("div",{style:{display:"flex",gap:".5rem",alignItems:"center",flexWrap:"wrap"},children:(0,ui.jsx)("input",{type:"number",inputMode:"numeric",min:0,step:1e3,value:e,onChange:e=>n(Number(e.target.value||0)),style:Zd,"aria-label":"Zypto tokens held"})})]})]}),h?(0,ui.jsx)("p",{style:{opacity:.85,marginTop:".8rem"},children:"Loading recent rewards\u2026"}):null]}),(0,ui.jsxs)("section",{style:Gd,children:[(0,ui.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:".75rem",flexWrap:"wrap"},children:[(0,ui.jsx)("h2",{style:Qd,children:"Projection"}),(0,ui.jsx)("div",{role:"group","aria-label":"Scenario",style:{display:"flex",gap:".35rem",flexWrap:"wrap"},children:[{key:"cons",label:"Conservative"},{key:"base",label:"Base"},{key:"opt",label:"Optimistic"},{key:"g10",label:"10\xd7"},{key:"g100",label:"100\xd7"},{key:"g1000",label:"1000\xd7"}].map(e=>(0,ui.jsx)("button",{onClick:()=>l(e.key),className:"btn",style:{padding:".45rem .7rem",borderRadius:10,border:"1px solid rgba(255,255,255,.15)",background:o===e.key?"rgba(0,231,198,.14)":"rgba(255,255,255,.06)",fontWeight:700},"aria-pressed":o===e.key?"true":"false",children:e.label},e.key))})]}),(0,ui.jsx)(Ud,{title:x,note:_,vDaily:S,vYearly:E,emphasize:!0}),(0,ui.jsxs)("div",{style:{marginTop:".6rem",fontSize:".95rem",opacity:.9},children:["Selected avg per 1 million: ",Ld(w,2)," ZYP/day.\xa0",b.start?(0,ui.jsxs)("span",{children:["Best 7-day streak in window: ",Ld(b.avg,2)," ZYP/day starting ",b.start,"."]}):null]})]}),(0,ui.jsxs)("section",{style:Gd,children:[(0,ui.jsx)("h2",{style:Qd,children:"Milestone countdown"}),(0,ui.jsxs)("div",{style:{display:"grid",gap:".6rem"},children:[(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",alignItems:"center",flexWrap:"wrap"},children:[(0,ui.jsx)("span",{style:{opacity:.9},children:"How soon to reach"}),(0,ui.jsx)("div",{style:{display:"flex",gap:".3rem",flexWrap:"wrap"},children:[100,500,1e3,5e3].map(e=>(0,ui.jsxs)("button",{className:"btn",onClick:()=>Q(e),style:{padding:".3rem .55rem"},children:["$",e]},e))}),(0,ui.jsx)("span",{style:{opacity:.9},children:"or enter:"}),(0,ui.jsx)("input",{type:"number",min:0,step:50,value:G,onChange:e=>Q(Number(e.target.value||0)),style:Zd,"aria-label":"Milestone USD"})]}),(0,ui.jsxs)("div",{style:$d,children:[(0,ui.jsx)(Wd,{label:"Daily (selected scenario)",value:"$".concat(Ld(Y,2)," / day")}),(0,ui.jsx)(Wd,{label:"Days to reach",value:null!=Z?"".concat(Z," day").concat(1===Z?"":"s"):"\u2014"}),(0,ui.jsx)(Wd,{label:"Target date",value:null!=Z?Vd($):"\u2014"}),(0,ui.jsx)(Wd,{label:"Yearly at this pace",value:"$".concat(Ld(I,0))})]})]})]}),(0,ui.jsxs)("section",{style:Gd,children:[(0,ui.jsx)("h2",{style:Qd,children:"What if I add more?"}),(0,ui.jsxs)("div",{style:{display:"grid",gap:".6rem"},children:[(0,ui.jsx)("input",{type:"range",min:0,max:5e6,step:1e5,value:s,onChange:e=>a(Number(e.target.value||0)),"aria-label":"Additional Zypto tokens",style:{width:"100%"}}),(0,ui.jsxs)("div",{style:{display:"grid",gap:".35rem"},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"Additional:"})," ",Ld(s,0)," tokens"]}),(0,ui.jsxs)("div",{style:{opacity:.85},children:["New total: ",(0,ui.jsx)("strong",{children:Ld(e+s,0)})," tokens"]})]}),(0,ui.jsxs)("div",{style:$d,children:[(0,ui.jsx)(Wd,{label:"Current daily ZYP",value:"".concat(Ld(C,2)," ZYP")}),(0,ui.jsx)(Wd,{label:"New daily ZYP",value:"".concat(Ld(A,2)," ZYP")}),(0,ui.jsx)(Wd,{label:"Current daily USD",value:"$".concat(Ld(D,2))}),(0,ui.jsx)(Wd,{label:"New daily USD",value:"$".concat(Ld(P,2))})]}),(0,ui.jsxs)("div",{style:$d,children:[(0,ui.jsx)(Wd,{label:"Extra daily ZYP",value:"".concat(Ld(N,2)," ZYP")}),(0,ui.jsx)(Wd,{label:"Extra yearly ZYP",value:"".concat(Ld(M,0)," ZYP")}),(0,ui.jsx)(Wd,{label:"Extra daily USD",value:"$".concat(Ld(R,2))}),(0,ui.jsx)(Wd,{label:"Extra yearly USD",value:"$".concat(Ld(j,0)," USD")})]}),(0,ui.jsxs)("p",{style:{margin:0,opacity:.8,fontSize:".95rem"},children:["Based on selected scenario: ",x.toLowerCase(),"."]})]})]}),(0,ui.jsxs)("section",{style:Gd,children:[(0,ui.jsx)("h2",{style:Qd,children:"Goal Seeker"}),(0,ui.jsxs)("div",{style:{display:"grid",gap:".6rem"},children:[(0,ui.jsxs)("div",{style:{display:"flex",gap:".4rem",flexWrap:"wrap",alignItems:"center"},children:[(0,ui.jsx)("span",{style:{opacity:.9},children:"I want"}),(0,ui.jsx)("div",{role:"group","aria-label":"Goal units",style:{display:"inline-flex",borderRadius:10,overflow:"hidden",border:"1px solid rgba(255,255,255,.15)"},children:[{k:"usd",label:"$ / day"},{k:"zyp",label:"ZYP / day"}].map(e=>(0,ui.jsx)("button",{onClick:()=>V(e.k),className:"btn",style:{padding:".45rem .7rem",background:F===e.k?"rgba(0,231,198,.14)":"rgba(255,255,255,.04)",border:"none",fontWeight:700},"aria-pressed":F===e.k?"true":"false",children:e.label},e.k))}),"usd"===F&&(0,ui.jsx)("div",{style:{display:"flex",gap:".3rem",flexWrap:"wrap"},children:[10,25,50,100].map(e=>(0,ui.jsxs)("button",{className:"btn",onClick:()=>U(e),style:{padding:".3rem .55rem"},children:["$",e]},e))})]}),(0,ui.jsx)("div",{style:{display:"flex",gap:".6rem",alignItems:"center",flexWrap:"wrap"},children:"usd"===F?(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)("input",{type:"number",min:0,step:1,value:z,onChange:e=>U(Number(e.target.value||0)),style:Zd,"aria-label":"Target USD per day"}),(0,ui.jsx)("span",{style:{opacity:.85},children:"/ day"})]}):(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)("input",{type:"number",min:0,step:100,value:B,onChange:e=>W(Number(e.target.value||0)),style:Zd,"aria-label":"Target ZYP per day"}),(0,ui.jsx)("span",{style:{opacity:.85},children:"/ day in ZYP"})]})}),(0,ui.jsx)("div",{className:"goal-grid",style:Jd,children:(0,ui.jsx)(Bd,{title:"Based on selected scenario",note:x,tokensRequired:K,millions:K?K/1e6:0,holdings:e})})]})]}),(0,ui.jsxs)("section",{style:Xd.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Ready to turn projections into progress?"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Install the wallet in minutes. Come back anytime to check averages and plan next steps."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("calc_footer"),eventName:"cta_click",eventParams:{placement:"calc_footer"},className:"btn btn-primary",style:Kd,children:"Download Zypto Wallet"}),(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:Hd,children:"Quick start guide"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:Hd,children:"Add VKC security"})]})]})]}),(0,ui.jsx)("style",{children:"\n        @media (max-width: 900px){\n          .calc-hero { grid-template-columns: 1fr !important; }\n        }\n        /* Goal Seeker: make result a single column on small screens */\n        @media (max-width: 700px){\n          .goal-grid { grid-template-columns: 1fr !important; }\n        }\n      "})]})}function Ud(e){let{title:t,note:n,vDaily:r,vYearly:i,emphasize:s=!1}=e;const a=r*jd,o=i*jd;return(0,ui.jsxs)("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".9rem 1rem",background:s?"rgba(0,231,198,.08)":"rgba(255,255,255,.03)"},children:[(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",gap:".6rem"},children:[(0,ui.jsx)("div",{style:{fontWeight:900},children:t}),(0,ui.jsx)("div",{style:{opacity:.8,fontSize:".9rem"},children:n})]}),(0,ui.jsxs)("div",{style:{marginTop:".45rem",display:"grid",gap:".25rem"},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"Daily:"})," ",Ld(r,2)," ZYP ",(0,ui.jsxs)("span",{style:{opacity:.85},children:["($",Ld(a,2),")"]})]}),(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"baseline",gap:".4rem"},children:[(0,ui.jsx)("strong",{children:"Yearly:"}),(0,ui.jsxs)("span",{children:[Ld(i,0)," ZYP"]}),(0,ui.jsx)("span",{style:{opacity:.85},children:"("}),(0,ui.jsxs)("span",{style:{fontWeight:900,fontSize:"1.05rem"},children:["$",Ld(o,0)]}),(0,ui.jsx)("span",{style:{opacity:.85},children:")"})]})]})]})}function Bd(e){let{title:t,note:n,tokensRequired:r,millions:i,holdings:s=0}=e;const a=Math.max(r-(s||0),0),o=Math.max((s||0)-r,0);return(0,ui.jsxs)("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".85rem .95rem",background:"rgba(0,231,198,.05)"},children:[(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between"},children:[(0,ui.jsx)("div",{style:{fontWeight:900},children:t}),(0,ui.jsx)("div",{style:{opacity:.85,fontSize:".9rem"},children:n})]}),(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"baseline",justifyContent:"space-between",marginTop:".4rem"},children:[(0,ui.jsx)("div",{children:"Tokens needed"}),(0,ui.jsx)("div",{style:{fontWeight:900,fontSize:"1.05rem"},children:Ld(r,0)})]}),a>0?(0,ui.jsxs)("div",{style:{marginTop:".35rem",opacity:.9},children:["Shortfall vs current: ",(0,ui.jsx)("strong",{children:Ld(a,0)})," tokens"]}):(0,ui.jsxs)("div",{style:{marginTop:".35rem",opacity:.9},children:["You're exceeding this goal by ",(0,ui.jsx)("strong",{children:Ld(o,0)})," tokens"]})]})}function Wd(e){let{label:t,value:n}=e;return(0,ui.jsxs)("div",{style:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .85rem",background:"rgba(255,255,255,.03)"},children:[(0,ui.jsx)("div",{style:{opacity:.85,fontSize:".9rem"},children:t}),(0,ui.jsx)("div",{style:{fontWeight:800,marginTop:".15rem"},children:n})]})}const qd={wrap:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"rgba(255,255,255,.03)",margin:"0 0 1rem 0",fontSize:".95rem"},sub:{opacity:.8,marginTop:".2rem"}},Hd={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},Kd=(0,bi.A)((0,bi.A)({},Hd),{},{background:"rgba(255,255,255,0.12)"}),Gd={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},Qd={margin:0,marginBottom:".5rem"},Yd={fontSize:".95rem",opacity:.85,marginBottom:".3rem"},Zd={width:"100%",background:"rgba(255,255,255,.06)",border:"1px solid rgba(255,255,255,.15)",color:"inherit",borderRadius:10,padding:".55rem .6rem",fontWeight:600},$d={display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:".6rem"},Jd={display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:".6rem"},Xd={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}};function ef(){(0,t.useEffect)(()=>{li("page_view",{page:"about"})},[]);const[e,n]=(0,t.useState)("undefined"!==typeof window&&"1"===localStorage.getItem("zyptopia_analytics_optout")),r="https://www.zyptopia.org/about",i=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"About Zyptopia",item:r}])];return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"About Zyptopia.org \u2013 Independent Community Project",description:"Zyptopia.org is an independent, community-run site for tracking Zypto reward history, calculators, and neutral guides.",canonical:r,jsonLd:i}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:af.wrap,className:"about-zyptopia-hero",children:[(0,ui.jsxs)("div",{style:af.copy,children:[(0,ui.jsx)("h1",{style:{margin:0},children:"About Zyptopia"}),(0,ui.jsx)("p",{style:af.sub,children:"Independent, community-run tools to help you explore Zypto: daily rewards, historical data, calculators, guides\u2014and no sign-ups."}),(0,ui.jsxs)("div",{style:af.ctaRow,className:"hero-cta",children:[(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:rf,children:"Getting started"}),(0,ui.jsx)(Ae,{to:"/calculator",className:"btn",style:rf,children:"Open calculators"}),(0,ui.jsx)(Ae,{to:"/faq",className:"btn",style:rf,children:"FAQ"})]}),(0,ui.jsxs)("p",{style:af.note,className:"hero-note",children:["We\u2019re not affiliated with the Zypto company. Nothing here is financial advice.",(0,ui.jsx)("br",{}),(0,ui.jsxs)("span",{style:{opacity:.85},children:["\u201cZyptopia\u201d inside the Zypto app is their rewards hub. ",(0,ui.jsx)("strong",{children:"Zyptopia.org"})," is this independent site."]})]})]}),(0,ui.jsx)("div",{style:af.media,"aria-hidden":"true",className:"hero-media",children:(0,ui.jsx)("div",{style:of.wrap,children:(0,ui.jsx)("img",{src:ci,alt:"Zyptopia.org",loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"contain",display:"block",padding:"1.2rem"}})})})]}),(0,ui.jsxs)("section",{style:lf,children:[(0,ui.jsx)("h2",{style:cf,children:"What we do"}),(0,ui.jsxs)("div",{style:uf,className:"what-grid",children:[(0,ui.jsx)(tf,{title:"Track the data",desc:"We publish community-tracked daily rewards per 1,000,000 tokens so you can see trends over time."}),(0,ui.jsx)(tf,{title:"Simple calculators",desc:"Estimate Zyps/day and rough ROI using recent averages. No logins required."}),(0,ui.jsx)(tf,{title:"Neutral guides",desc:"Short, no-hype pages that explain the basics and link to official resources."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap",marginTop:".7rem",justifyContent:"center"},children:[(0,ui.jsx)(Ae,{to:"/",className:"btn",style:rf,children:"Open graph"}),(0,ui.jsx)(Ae,{to:"/historical",className:"btn",style:rf,children:"Browse historical"}),(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:rf,children:"Read the guide"}),(0,ui.jsx)(Ae,{to:"/faq",className:"btn",style:rf,children:"FAQ"})]})]}),(0,ui.jsxs)("section",{style:lf,children:[(0,ui.jsx)("h2",{style:cf,children:"Privacy & analytics"}),(0,ui.jsxs)("p",{style:nf,children:["We use privacy-aware analytics to learn what helps visitors most. We respect ",(0,ui.jsx)("em",{children:"Do Not Track"})," and you can toggle analytics locally at any time."]}),(0,ui.jsx)("button",{className:"btn",onClick:()=>{const t=!e;!function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];localStorage.setItem("zyptopia_analytics_optout",e?"1":"0")}(t),n(t),li("analytics_opt_toggle",{opted_out:t})},style:{padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:e?"rgba(255, 102, 102, 0.2)":"rgba(255,255,255,0.06)",fontWeight:600},children:e?"Enable analytics on this device":"Disable analytics on this device"})]}),(0,ui.jsxs)("section",{style:df.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Want the easiest path?"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Install the wallet, explore the data, and add VKC later if you want tap-to-sign security."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("about_footer"),eventName:"cta_click",eventParams:{placement:"about_footer"},className:"btn btn-primary",style:sf,children:"Download Zypto"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:rf,children:"Learn about VKC"}),(0,ui.jsx)(Ae,{to:"/faq",className:"btn",style:rf,children:"FAQ"})]})]})]}),(0,ui.jsx)("style",{children:"\n        /* Hero stacks; hide image; center CTAs and note on small screens */\n        @media (max-width: 900px){\n          .about-zyptopia-hero { grid-template-columns: 1fr !important; }\n          .about-zyptopia-hero .hero-media { display: none !important; }\n          .about-zyptopia-hero .hero-cta { justify-content: center !important; }\n          .about-zyptopia-hero .hero-note { text-align: center !important; }\n        }\n\n        /* What we do: 3 -> 2 -> 1 */\n        @media (max-width: 1100px){\n          .what-grid { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 720px){\n          .what-grid { grid-template-columns: 1fr !important; }\n        }\n      "})]})}function tf(e){let{title:t,desc:n}=e;return(0,ui.jsxs)("div",{style:hf.card,children:[(0,ui.jsx)("div",{style:hf.title,children:t}),(0,ui.jsx)("div",{style:hf.desc,children:n})]})}const nf={opacity:.85},rf={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},sf=(0,bi.A)((0,bi.A)({},rf),{},{background:"rgba(255,255,255,0.12)"}),af={wrap:{display:"grid",gridTemplateColumns:"1.15fr .85fr",gap:"1.2rem",alignItems:"center",padding:"1rem",borderRadius:14,background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",border:"1px solid rgba(255,255,255,.1)"},copy:{padding:".4rem .2rem"},sub:{margin:".35rem 0 .6rem",opacity:.9,fontSize:"1.05rem"},media:{maxWidth:420,justifySelf:"end"},ctaRow:{display:"flex",gap:".6rem",flexWrap:"wrap"},note:{marginTop:".35rem",opacity:.65,fontStyle:"italic",fontSize:".9rem"}},of={wrap:{width:"100%",aspectRatio:"300/220",borderRadius:14,overflow:"hidden",border:"1px solid rgba(255,255,255,.1)"}},lf={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},cf={margin:0,marginBottom:".5rem"},uf={display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".6rem"},hf={card:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".8rem .9rem",background:"rgba(255,255,255,.03)"},title:{fontWeight:700,marginBottom:".25rem"},desc:{opacity:.9}},df={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}},ff=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),[o,l]=(0,t.useState)("");(0,t.useEffect)(()=>{if(s&&r){l(r/s*1e6)}},[r,s]);return(0,ui.jsxs)("div",{className:"page-content",children:[(0,ui.jsx)("h1",{children:"Enter New Reward Data"}),(0,ui.jsxs)("form",{onSubmit:async t=>{t.preventDefault();try{const t=(0,Yh.collection)($h,"rewards");await(0,Yh.addDoc)(t,{date:e,reward:r,tokens:s,rewardPerToken:o}),n(""),i(""),a(""),l("")}catch(c){console.error("Error adding document: ",c)}},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("label",{children:"Date:"}),(0,ui.jsx)("input",{type:"date",value:e,onChange:e=>n(e.target.value),required:!0})]}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("label",{children:"Reward:"}),(0,ui.jsx)("input",{type:"number",placeholder:"Reward",value:r,onChange:e=>i(e.target.value),required:!0})]}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("label",{children:"Tokens:"}),(0,ui.jsx)("input",{type:"number",placeholder:"Tokens",value:s,onChange:e=>a(e.target.value),required:!0})]}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("label",{children:"Reward for 1,000,000 Tokens:"}),(0,ui.jsx)("input",{type:"number",placeholder:"Reward for 1,000,000 tokens",value:o||"",readOnly:!0})]}),(0,ui.jsx)("button",{type:"submit",children:"Submit"})]})]})},pf=()=>{const[e,n]=(0,t.useState)(""),[r,i]=(0,t.useState)(""),[s,a]=(0,t.useState)(""),o=J();return(0,ui.jsxs)("div",{className:"page-content",children:[(0,ui.jsx)("h1",{children:"Login"}),s&&(0,ui.jsx)("p",{style:{color:"red"},children:s})," ",(0,ui.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),e&&r)try{const t=ri();await function(e,t,n){return(0,Re.xZ)(e.app)?Promise.reject(Ge(e)):Ln((0,je.Ku)(e),kn.credential(t,n)).catch(async t=>{throw t.code==="auth/".concat("password-does-not-meet-requirements")&&Fn(e),t})}(t,e,r),o("/dashboard")}catch(s){a(s.message)}else a("Please enter both email and password.")},children:[(0,ui.jsx)("input",{type:"email",placeholder:"Email",value:e,onChange:e=>n(e.target.value)}),(0,ui.jsx)("input",{type:"password",placeholder:"Password",value:r,onChange:e=>i(e.target.value)}),(0,ui.jsx)("button",{type:"submit",children:"Login with Email"})]}),(0,ui.jsx)("button",{onClick:async()=>{try{const e=ri(),t=new In;await async function(e,t,n){if((0,Re.xZ)(e.app))return Promise.reject(He(e,"operation-not-supported-in-this-environment"));const r=$t(e);Qe(e,t,Sn);const i=fr(r,n);return new wr(r,"signInViaPopup",t,i).executeNotNull()}(e,t),o("/dashboard")}catch(s){a(s.message)}},children:"Login with Google"})]})};function gf(){return(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:800,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)("h1",{children:"Dashboard"}),(0,ui.jsx)("p",{style:{opacity:.85},children:"Admin tools for Zyptopia.org. Use the links below to manage data and view analytics."}),(0,ui.jsxs)("div",{style:{display:"flex",gap:"0.75rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Ae,{to:"/data-input",className:"btn",style:mf,children:"Data Input"}),(0,ui.jsx)(Ae,{to:"/analytics",className:"btn",style:mf,children:"Analytics"})]})]})}const mf={padding:"0.55rem 0.9rem",borderRadius:8,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600,textDecoration:"none",color:"inherit"},yf=(e,t)=>new Date(e.date)-new Date(t.date),vf=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isFinite(e)?Number(e).toLocaleString(void 0,{maximumFractionDigits:t,minimumFractionDigits:t}):"\u2014"};function bf(e){if(!e)return null;const t=new Date(e);return Number.isNaN(t.getTime())?null:(t.setHours(0,0,0,0),t)}function wf(){(0,t.useEffect)(()=>{li("page_view",{page:"historical_zyps"})},[]);const[e,n]=(0,t.useState)([]),[r,i]=(0,t.useState)(!0),[s,a]=(0,t.useState)("");(0,t.useEffect)(()=>{let e=!0;return async function(){i(!0),a("");try{const t=(await(0,Yh.getDocs)((0,Yh.collection)($h,"rewards"))).docs.map(e=>e.data()).filter(Boolean);t.sort(yf),e&&n(t)}catch(Dm){e&&a("Could not load rewards data.")}finally{e&&i(!1)}}(),()=>{e=!1}},[]);const[o,l]=(0,t.useState)(""),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)(""),f=parseFloat(h)||0,p=f>0,[g,m]=(0,t.useState)("date"),[y,v]=(0,t.useState)("desc");(0,t.useEffect)(()=>{p||"est"!==g||(m("date"),v("desc"))},[p,g]);const[b,w]=(0,t.useState)(1),[x,_]=(0,t.useState)(10),k=(0,t.useMemo)(()=>{const t=bf(o),n=bf(c);n&&n.setHours(23,59,59,999);let r=e.filter(e=>{const r=new Date(e.date);return r.setHours(0,0,0,0),!(t&&r<t)&&!(n&&r>n)});return r=r.map(e=>(0,bi.A)((0,bi.A)({},e),{},{_est:p?(Number(e.rewardPerToken)||0)*(f/1e6):null})),r},[e,o,c,p,f]),S=(0,t.useMemo)(()=>{const e=[...k],t="asc"===y?1:-1;return e.sort((e,n)=>{const r="date"===g?new Date(e.date):"rewardPerToken"===g?Number(e.rewardPerToken):"est"===g?Number(e._est):0,i="date"===g?new Date(n.date):"rewardPerToken"===g?Number(n.rewardPerToken):"est"===g?Number(n._est):0;return r<i?-1*t:r>i?1*t:0}),e},[k,g,y]),E=Math.max(1,Math.ceil(S.length/x)),T=Math.min(b,E),I=(0,t.useMemo)(()=>{const e=(T-1)*x;return S.slice(e,e+x)},[S,T,x]),C=e=>{let{field:t,children:n,style:r,className:i}=e;return(0,ui.jsxs)("th",{onClick:()=>(e=>{m(t=>(v(t===e?e=>"asc"===e?"desc":"asc":"desc"),e)),li("historical_sort",{field:e,dir:g===e?"asc"===y?"desc":"asc":"desc"})})(t),className:i,style:(0,bi.A)({cursor:"pointer",userSelect:"none",whiteSpace:"nowrap",position:"sticky",top:0,background:"rgba(20,20,24,0.9)",backdropFilter:"blur(2px)",zIndex:2,textAlign:"date"===t?"left":"right"},r),"aria-sort":g===t?"asc"===y?"ascending":"descending":"none",title:"Click to sort",children:[n," ",g===t?"asc"===y?"\u25b2":"\u25bc":"\u2195"]})},A="https://www.zyptopia.org/historical",D=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Historical Zyps",item:A}])],P=p?3:2;return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Historical Zyps",description:"Browse historical reward per 1,000,000 tokens. Filter by date range, sort, and optionally estimate Zyps/day for your holdings.",canonical:A,jsonLd:D}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:980,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:xf.wrap,"aria-label":"About historical data",children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"Historical rewards"})," per 1,000,000 tokens. Filter by date range and sort columns."]}),(0,ui.jsx)("div",{style:xf.sub,children:"$1 USD = 1,000 ZYP. Estimates optional \u2014 not financial advice."})]}),(0,ui.jsxs)("section",{style:_f.wrap,children:[(0,ui.jsxs)("div",{style:_f.row,children:[(0,ui.jsxs)("label",{style:{display:"grid",gap:"0.35rem"},children:[(0,ui.jsx)("span",{style:_f.label,children:"Start date"}),(0,ui.jsx)("input",{type:"date",value:o,onChange:e=>{l(e.target.value),w(1),li("historical_date_from",{date:e.target.value||null})},style:kf.input})]}),(0,ui.jsxs)("label",{style:{display:"grid",gap:"0.35rem"},children:[(0,ui.jsx)("span",{style:_f.label,children:"End date"}),(0,ui.jsx)("input",{type:"date",value:c,onChange:e=>{u(e.target.value),w(1),li("historical_date_to",{date:e.target.value||null})},style:kf.input})]})]}),(0,ui.jsxs)("div",{style:_f.row2,children:[(0,ui.jsxs)("label",{style:{display:"grid",gap:"0.35rem"},children:[(0,ui.jsxs)("span",{style:_f.label,children:["Your holdings (Zypto) ",(0,ui.jsx)("small",{style:{opacity:.7},children:"(optional)"})]}),(0,ui.jsx)("input",{type:"number",inputMode:"decimal",value:h,onChange:e=>{d(e.target.value),w(1),li("historical_custom_holdings",{holdings:parseFloat(e.target.value)||0})},placeholder:"e.g. 50,000",style:kf.input})]}),(0,ui.jsx)("div",{style:{alignSelf:"end"},children:(0,ui.jsx)("button",{className:"btn",style:kf.pgBtn,onClick:()=>{l(""),u(""),d(""),m("date"),v("desc"),_(10),w(1),li("historical_reset",{})},children:"Reset filters"})})]})]}),p&&(0,ui.jsxs)("div",{style:{margin:"-.25rem 0 .5rem",opacity:.85,fontSize:".92rem"},children:["Estimates shown for ",(0,ui.jsx)("strong",{children:Number(f).toLocaleString()})," held."]}),s&&(0,ui.jsx)("div",{style:{color:"#ff7676",marginBottom:"0.75rem"},children:s}),r&&(0,ui.jsx)("div",{style:{opacity:.85,marginBottom:"0.75rem"},children:"Loading historical data\u2026"}),!r&&(0,ui.jsx)("div",{style:{overflowX:"hidden",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12},children:(0,ui.jsxs)("table",{className:"hzp-table",style:{width:"100%",borderCollapse:"separate",borderSpacing:0},children:[(0,ui.jsx)("thead",{children:(0,ui.jsxs)("tr",{style:{background:"rgba(255,255,255,0.04)"},children:[(0,ui.jsx)(C,{field:"date",className:"hzp-col-date",style:{textAlign:"left",padding:"0.55rem"},children:"Date"}),(0,ui.jsx)(C,{field:"rewardPerToken",className:"hzp-col-reward",style:{padding:"0.55rem"},children:"Reward/1M"}),p&&(0,ui.jsx)(C,{field:"est",className:"hzp-col-est",style:{padding:"0.55rem"},children:"Est/day"})]})}),(0,ui.jsxs)("tbody",{children:[0===I.length&&(0,ui.jsx)("tr",{children:(0,ui.jsx)("td",{colSpan:P,style:{padding:"1rem",textAlign:"center",opacity:.85},children:"No rows match your filters."})}),I.map((e,t)=>(0,ui.jsxs)("tr",{style:{borderTop:"1px solid rgba(255,255,255,0.06)"},children:[(0,ui.jsx)("td",{className:"hzp-col-date",style:{padding:"0.55rem",textAlign:"left",whiteSpace:"nowrap"},children:e.date||"\u2014"}),(0,ui.jsx)("td",{className:"hzp-col-reward",style:{padding:"0.55rem",textAlign:"right"},children:vf(e.rewardPerToken,2)}),p&&(0,ui.jsx)("td",{className:"hzp-col-est",style:{padding:"0.55rem",textAlign:"right"},children:vf(e._est,2)})]},"".concat(e.date,"-").concat(t)))]})]})}),!r&&(0,ui.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",gap:"0.75rem",marginTop:"0.75rem",flexWrap:"wrap"},children:[(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,ui.jsx)("span",{children:"Show"}),(0,ui.jsxs)("select",{value:x,onChange:e=>{_(Number(e.target.value)),w(1)},style:{padding:"0.45rem",borderRadius:8},children:[(0,ui.jsx)("option",{value:10,children:"10"}),(0,ui.jsx)("option",{value:50,children:"50"}),(0,ui.jsx)("option",{value:100,children:"100"})]}),(0,ui.jsx)("span",{children:"per page"})]}),(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:"0.5rem"},children:[(0,ui.jsx)("button",{className:"btn",onClick:()=>w(Math.max(1,T-1)),disabled:1===T,style:kf.pgBtn,children:"Prev"}),(0,ui.jsxs)("span",{style:{alignSelf:"center",opacity:.85},children:["Page ",T," / ",Math.max(1,Math.ceil(S.length/x))]}),(0,ui.jsx)("button",{className:"btn",onClick:()=>w(Math.min(Math.max(1,Math.ceil(S.length/x)),T+1)),disabled:T>=Math.ceil(S.length/x),style:kf.pgBtn,children:"Next"})]})]}),(0,ui.jsx)("div",{style:{marginTop:"1rem"},children:(0,ui.jsx)(ad,{})}),(0,ui.jsxs)("section",{style:Tf.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Explore more with Zyptopia tools"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Check today\u2019s graph, run projections, and secure wallets with VKC."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("historical_footer"),eventName:"cta_click",eventParams:{placement:"historical_footer"},className:"btn btn-primary",style:Ef,children:"Download Zypto Wallet"}),(0,ui.jsx)(Ae,{to:"/calculator",className:"btn",style:Sf,children:"Open calculators"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:Sf,children:"Add VKC security"})]})]})]}),(0,ui.jsx)("style",{children:"\n        @media (max-width: 680px){\n          .hzp-table { table-layout: fixed; }\n          .hzp-col-date   { width: 40%; }\n          .hzp-col-reward { width: 30%; }\n          .hzp-col-est    { width: 30%; }\n          .hzp-table th, .hzp-table td { padding: 0.45rem !important; font-size: .92rem; }\n        }\n      "})]})}const xf={wrap:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"rgba(255,255,255,.03)",margin:"0 0 1rem 0",fontSize:".95rem"},sub:{opacity:.8,marginTop:".2rem"}},_f={wrap:{display:"grid",gap:".75rem",margin:"0 0 1rem 0"},row:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:".75rem"},row2:{display:"grid",gridTemplateColumns:"1fr auto",gap:".75rem",alignItems:"end"},label:{opacity:.9,marginBottom:".25rem",fontSize:".95rem"}},kf={input:{padding:"0.55rem",borderRadius:8,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.04)",color:"inherit"},pgBtn:{padding:"0.45rem 0.8rem",borderRadius:8,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600}},Sf={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},Ef=(0,bi.A)((0,bi.A)({},Sf),{},{background:"rgba(255,255,255,0.12)"}),Tf={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}};function If(e){let{open:n,onClose:r,title:i="Sources",items:s=[]}=e;return(0,t.useEffect)(()=>{if(!n)return;const e=e=>{"Escape"===e.key&&(null===r||void 0===r||r())};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[n,r]),n?(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)("div",{style:Cf,onClick:r}),(0,ui.jsxs)("aside",{style:Af,role:"dialog","aria-modal":"true","aria-label":i,children:[(0,ui.jsxs)("div",{style:Df,children:[(0,ui.jsx)("h3",{style:{margin:0},children:i}),(0,ui.jsx)("button",{onClick:r,style:Pf,"aria-label":"Close sources",children:"\xd7"})]}),(0,ui.jsx)("ul",{style:Nf,children:s.map((e,t)=>{let{label:n,href:r}=e;return(0,ui.jsx)("li",{style:{marginBottom:".4rem"},children:(0,ui.jsx)("a",{href:r,target:"_blank",rel:"noopener noreferrer",style:Mf,children:n})},t)})}),(0,ui.jsx)("div",{style:{fontSize:".9rem",opacity:.8,marginTop:".6rem"},children:"Availability varies by region and can change over time\u2014check the Zypto app for current details."})]})]}):null}const Cf={position:"fixed",inset:0,background:"rgba(0,0,0,.5)",zIndex:90},Af={position:"fixed",left:"50%",transform:"translateX(-50%)",bottom:12,width:"min(720px, 92vw)",zIndex:99,background:"rgba(22,27,34,.98)",color:"inherit",border:"1px solid rgba(255,255,255,.12)",borderRadius:14,boxShadow:"0 20px 50px rgba(0,0,0,.55)",padding:"0.9rem 1rem"},Df={display:"flex",alignItems:"center",justifyContent:"space-between",marginBottom:".5rem"},Pf={border:"1px solid rgba(255,255,255,.15)",background:"rgba(255,255,255,.06)",color:"inherit",borderRadius:8,width:34,height:34,cursor:"pointer",fontSize:18,lineHeight:1},Nf={margin:0,paddingLeft:"1rem"},Mf={textDecoration:"underline"},Rf=n.p+"static/media/zyptologo.cec48def587b3efc9a18.png";function jf(){(0,t.useEffect)(()=>{li("page_view",{page:"about_zypto"})},[]);const[e,n]=(0,t.useState)(!1),r="https://www.zyptopia.org/about-zypto",i=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Learn About Zypto",item:r}]),Md([{q:"Is Zypto the same as Zyptopia.org?",a:"No. Zyptopia.org is an independent, community-run site. We track rewards and provide tools; we\u2019re not affiliated with the Zypto company or app."},{q:"What are ZYPs?",a:"ZYPs are in-app reward points. Inside the Zypto app, 1,000 ZYP equals USD $1 for eligible redemptions where available."},{q:"Do I need an account to use Zyptopia.org?",a:"No. You can explore charts and calculators without signing up."}])];return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Learn About Zypto",description:"Neutral overview of the Zypto wallet, ZYP rewards, and the optional Vault Key Card.",canonical:r,jsonLd:i}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:Kf.wrap,className:"about-zypto-hero",children:[(0,ui.jsxs)("div",{style:Kf.copy,className:"hero-copy",children:[(0,ui.jsx)("h1",{style:{margin:0},children:"Learn About Zypto"}),(0,ui.jsx)("p",{style:Kf.sub,className:"hero-sub",children:"Wallet to buy, swap and spend. ZYP reward points in-app. Optional Vault Key Card for tap-to-sign security."}),(0,ui.jsxs)("p",{style:Kf.note,className:"hero-note",children:["Zyptopia.org is independent and community-run; not affiliated with the Zypto company.",(0,ui.jsx)("br",{}),(0,ui.jsx)("button",{onClick:()=>{n(!0),li("sources_open",{page:"about_zypto"})},className:"link-quiet",style:{display:"inline-block",marginTop:".25rem",textDecoration:"underline",background:"transparent",border:0,color:"inherit",cursor:"pointer"},children:"Sources"})]})]}),(0,ui.jsx)("div",{style:Kf.media,className:"hero-media",children:(0,ui.jsx)("img",{src:Rf,alt:"Zypto logo",style:{width:"100%",height:"auto",maxWidth:340,display:"block",borderRadius:14,border:"1px solid rgba(255,255,255,.1)",background:"rgba(255,255,255,.02)",boxShadow:"0 10px 24px rgba(0,0,0,.28)",padding:"1rem"}})})]}),(0,ui.jsx)("section",{style:{margin:"1.2rem 0 1.4rem"},children:(0,ui.jsxs)("div",{style:Gf,className:"feature-strip",children:[(0,ui.jsx)(Of,{icon:(0,ui.jsx)(Ff,{}),title:"Wallet app",desc:"Buy, swap, spend and manage multi-chain assets."}),(0,ui.jsx)(Of,{icon:(0,ui.jsx)(Vf,{}),title:"ZYP rewards",desc:"In-app points; explore trends on our charts."}),(0,ui.jsx)(Of,{icon:(0,ui.jsx)(zf,{}),title:"Vault Key Card",desc:"Tap-to-sign cold storage for app-created wallets."}),(0,ui.jsx)(Of,{icon:(0,ui.jsx)(Uf,{}),title:"Real-world usage",desc:"Gift cards, cards, and bill pay (where supported)."})]})}),(0,ui.jsxs)("section",{style:Yf,children:[(0,ui.jsx)("h2",{style:Zf,children:"ZYP rewards"}),(0,ui.jsxs)("p",{style:Bf,children:["ZYPs are the app\u2019s reward points\u2014separate from any tradable crypto. They don\u2019t move between users. In the app,",(0,ui.jsx)("strong",{children:" 1,000 ZYP equals $1 USD"})," for supported redemptions. To earn, you hold ",(0,ui.jsx)("strong",{children:"$ZYPTO"})," and join the in-app rewards hub called ",(0,ui.jsx)("em",{children:"Zyptopia"}),". Your level (based on how much $ZYPTO you hold) can boost daily rewards."]}),(0,ui.jsxs)("div",{style:$f,className:"grid3",children:[(0,ui.jsx)(Lf,{title:"Gift cards",desc:"Redeem and spend with popular brands inside the app. Availability varies by region.",links:[{to:"https://zypto.com/personal/gift-cards-crypto/",label:"Gift cards info",outbound:!0}]}),(0,ui.jsx)(Lf,{title:"Cards (virtual & physical)",desc:"Use virtual or physical cards. Some 3-D Secure merchants aren\u2019t supported; check the in-app docs.",links:[{to:"https://help.zypto.com/en/articles/9664862-global-physical-cards-usd-faq",label:"Card FAQ",outbound:!0}]}),(0,ui.jsx)(Lf,{title:"Bill payments",desc:"Pay utilities, phones, and more where offered. Options differ by country.",links:[{to:"https://help.zypto.com/en/collections/9417704-zypto-products-services",label:"Bill pay help",outbound:!0}]})]}),(0,ui.jsxs)("ul",{style:Wf,children:[(0,ui.jsxs)("li",{children:["Use ",(0,ui.jsx)(Ae,{to:"/",children:"Daily Graph"})," to see recent averages."]}),(0,ui.jsxs)("li",{children:["Browse ",(0,ui.jsx)(Ae,{to:"/historical",children:"Historical"})," for a longer-term view."]}),(0,ui.jsxs)("li",{children:["Try ",(0,ui.jsx)(Ae,{to:"/calculator",children:"Calculators"})," to model simple scenarios."]})]}),(0,ui.jsxs)("p",{style:(0,bi.A)((0,bi.A)({},Bf),{},{marginTop:".6rem"}),children:["Note: ",(0,ui.jsx)("strong",{children:"\u201cZyptopia\u201d (in-app)"})," is the rewards hub inside the Zypto app. ",(0,ui.jsx)("strong",{children:"Zyptopia.org"})," is this independent site that visualises community data. Different things."]})]}),(0,ui.jsxs)("section",{style:Yf,children:[(0,ui.jsx)("h2",{style:Zf,children:"Optional security: Vault Key Card"}),(0,ui.jsx)("p",{style:Bf,children:"VKC adds a physical tap-to-sign step and keeps keys offline between taps. A single card can secure up to three wallets you create in the app."}),(0,ui.jsx)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap",justifyContent:"center"},children:(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:qf,children:"About VKC"})})]}),(0,ui.jsxs)("section",{style:Yf,children:[(0,ui.jsx)("h2",{style:Zf,children:"Cash in / cash out"}),(0,ui.jsx)("p",{style:Bf,children:"Zypto connects to partner rails (like MoneyGram for USDC cash-in/out in supported regions) and other services. Exact options depend on your country and product tier."})]}),(0,ui.jsxs)("section",{style:Yf,children:[(0,ui.jsx)("h2",{style:Zf,children:"FAQ"}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"independence"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"Is Zyptopia.org affiliated with Zypto or the in-app \u201cZyptopia\u201d?"}),(0,ui.jsx)("p",{style:ep.a,children:"No. Zyptopia.org is independent and community-run. \u201cZyptopia\u201d inside the Zypto app is the official rewards hub where holders earn ZYPs."})]}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"earn"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"How do I earn ZYPs?"}),(0,ui.jsx)("p",{style:ep.a,children:"Hold $ZYPTO and register in the app\u2019s Zyptopia/Rewards Hub. Your level is based on your $ZYPTO and can boost daily rewards. Rewards vary and aren\u2019t guaranteed."})]}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"rate"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"What\u2019s the value of a ZYP?"}),(0,ui.jsx)("p",{style:ep.a,children:"In-app, 1,000 ZYP = $1 USD for eligible redemptions. ZYPs are not a tradable token."})]}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"transfer"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"Can I transfer ZYPs to another user?"}),(0,ui.jsx)("p",{style:ep.a,children:"No. ZYPs stay in your account and are used inside the app for supported redemptions."})]}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"vkc"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"How many wallets can one VKC secure?"}),(0,ui.jsx)("p",{style:ep.a,children:"Up to three wallets you create in the app can be linked to a single card."})]}),(0,ui.jsxs)("details",{style:ep.details,onToggle:e=>e.target.open&&li("faq_open",{id:"3ds"}),children:[(0,ui.jsx)("summary",{style:ep.summary,children:"Do Zypto cards work with every online store?"}),(0,ui.jsx)("p",{style:ep.a,children:"Not every merchant is supported. Some that require 3-D Secure may not work. Always check the in-app docs and card FAQ for the latest coverage."})]})]}),(0,ui.jsxs)("section",{style:Xf.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Try the wallet, explore the data"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Start with the app, use our calculators/history to orient, and add VKC later if you want tap-to-sign security."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("about_zypto_bottom"),eventName:"cta_click",eventParams:{placement:"about_zypto_bottom"},className:"btn btn-primary",style:Hf,children:"Download Wallet"}),(0,ui.jsx)(Ae,{to:"/calculator",className:"btn",style:qf,children:"Open calculators"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:qf,children:"About VKC"})]})]})]}),(0,ui.jsx)(If,{open:e,onClose:()=>{n(!1),li("sources_close",{page:"about_zypto"})},title:"Official sources",items:[{label:"Zypto \u2014 Official site",href:"https://zypto.com/"},{label:"Zypto Help Center \u2013 Products & Services",href:"https://help.zypto.com/en/collections/9417704-zypto-products-services"},{label:"Rewards Hub (blog/overview)",href:"https://zypto.com/blog/zypto-app/earn-without-limits-with-the-zypto-app-rewards-hub/"},{label:"Zyptopia \u2013 in-app rewards hub",href:"https://zypto.com/crypto-app/zyptopia/"},{label:"MoneyGram \u2013 Crypto to Cash (Help Center)",href:"https://help.zypto.com/en/collections/9417704-zypto-products-services"},{label:"Global Physical Cards \u2013 FAQ",href:"https://help.zypto.com/en/articles/9664862-global-physical-cards-usd-faq"},{label:"Rewards Hub Levels (Help Center)",href:"https://help.zypto.com/en/collections/9417704-zypto-products-services"}]}),(0,ui.jsx)("style",{children:"\n        /* Hero stacks and hides image on mobile; center the note */\n        @media (max-width: 900px){\n          .about-zypto-hero { grid-template-columns: 1fr !important; padding: .75rem !important; }\n          .about-zypto-hero .hero-media { display: none !important; }\n          .about-zypto-hero .hero-note { text-align: center !important; }\n        }\n\n        /* Feature strip: 4 -> 2 -> 1 */\n        @media (max-width: 1100px){\n          .feature-strip { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 720px){\n          .feature-strip { grid-template-columns: 1fr !important; }\n        }\n\n        /* Rewards tiles: 3 -> 2 -> 1; center link rows on small screens */\n        @media (max-width: 1100px){\n          .grid3 { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 720px){\n          .grid3 { grid-template-columns: 1fr !important; }\n          .tile-links { justify-content: center !important; }\n        }\n      "})]})}function Of(e){let{icon:t,title:n,desc:r}=e;return(0,ui.jsx)("div",{style:Qf.card,children:(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".55rem"},children:[(0,ui.jsx)("div",{style:Qf.icon,children:t}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:Qf.title,children:n}),(0,ui.jsx)("div",{style:Qf.desc,children:r})]})]})})}function Lf(e){let{title:t,desc:n,links:r=[]}=e;return(0,ui.jsxs)("div",{style:Jf.card,children:[(0,ui.jsx)("div",{style:Jf.title,children:t}),(0,ui.jsx)("div",{style:Jf.desc,children:n}),r.length>0&&(0,ui.jsx)("div",{style:{display:"flex",gap:".5rem",flexWrap:"wrap",marginTop:".5rem"},className:"tile-links",children:r.map((e,t)=>e.outbound?(0,ui.jsx)("a",{className:"btn",style:qf,href:e.to,target:"_blank",rel:"noopener noreferrer",children:e.label},t):(0,ui.jsx)(Ae,{className:"btn",style:qf,to:e.to,children:e.label},t))})]})}function Ff(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("rect",{x:"3",y:"6",width:"18",height:"12",rx:"3",stroke:"currentColor",opacity:".9"}),(0,ui.jsx)("path",{d:"M16 12h4",stroke:"currentColor"})]})}function Vf(){return(0,ui.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:(0,ui.jsx)("path",{d:"M12 3l3 6 7 1-5 5 1 7-6-3-6 3 1-7-5-5 7-1 3-6z",stroke:"currentColor"})})}function zf(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("path",{d:"M12 3l7 3v6a7 7 0 0 1-7 7 7 7 0 0 1-7-7V6l7-3z",stroke:"currentColor",opacity:".9"}),(0,ui.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"currentColor"})]})}function Uf(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("circle",{cx:"9",cy:"19",r:"1.5",stroke:"currentColor"}),(0,ui.jsx)("circle",{cx:"17",cy:"19",r:"1.5",stroke:"currentColor"}),(0,ui.jsx)("path",{d:"M3 5h2l2 10h10l2-7H7",stroke:"currentColor"})]})}const Bf={opacity:.85},Wf={margin:"0.5rem 0 0 1.1rem"},qf={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},Hf=(0,bi.A)((0,bi.A)({},qf),{},{background:"rgba(255,255,255,0.12)"}),Kf={wrap:{display:"grid",gridTemplateColumns:"1.15fr .85fr",gap:"1.2rem",alignItems:"center",padding:"1rem",borderRadius:14,background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",border:"1px solid rgba(255,255,255,.1)"},copy:{padding:".4rem .2rem"},sub:{margin:".35rem 0 .6rem",opacity:.9,fontSize:"1.05rem"},media:{maxWidth:420,justifySelf:"end",display:"grid",placeItems:"center"},note:{marginTop:".35rem",opacity:.75,fontStyle:"italic",fontSize:".9rem",textAlign:"center"}},Gf={display:"grid",gridTemplateColumns:"repeat(4, minmax(0,1fr))",gap:".7rem"},Qf={card:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".7rem .8rem",background:"rgba(255,255,255,.03)"},icon:{width:38,height:38,display:"grid",placeItems:"center",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"rgba(255,255,255,.05)"},title:{fontWeight:700},desc:{opacity:.9}},Yf={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},Zf={margin:0,marginBottom:".5rem"},$f={display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".6rem"},Jf={card:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".8rem .9rem",background:"rgba(255,255,255,.03)"},title:{fontWeight:700,marginBottom:".25rem"},desc:{opacity:.9}},Xf={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}},ep={details:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:".6rem .75rem",background:"rgba(255,255,255,.03)",marginBottom:".5rem"},summary:{cursor:"pointer",fontWeight:600,outline:"none",listStyle:"none"},a:{margin:".45rem 0 0",opacity:.9}};function tp(){(0,t.useEffect)(()=>{li("page_view",{page:"vault_key_card"})},[]);const[e,n]=(0,t.useState)(!1),r="https://www.zyptopia.org/vault-key-card",i=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Vault Key Card",item:r}]),{"@context":"https://schema.org","@type":"Product",name:"Vault Key Card",brand:{"@type":"Brand",name:"Zypto"},description:"Tap-to-sign, mobile-first cold storage accessory for wallets you create in the Zypto app (up to three wallets per card)."},Md([{q:"Does VKC replace seed backup?",a:"No. Keep your recovery phrase written and stored securely. VKC adds tap-to-sign and keeps keys offline between uses."},{q:"How many wallets can I use on one VKC?",a:"Up to three Zypto app-created wallets per card."},{q:"Is VKC battery powered?",a:"No. It uses NFC, so there are no batteries or cables. You tap the card to your phone to sign."}])];return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Vault Key Card",description:"Tap-to-sign, mobile-first cold storage for wallets you create in the Zypto app.",canonical:r,jsonLd:i}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:hp.wrap,className:"vkc-hero-grid",children:[(0,ui.jsxs)("div",{style:hp.copy,children:[(0,ui.jsx)("h1",{style:{margin:0},children:"Vault Key Card"}),(0,ui.jsx)("p",{style:hp.sub,children:"Tap-to-sign cold storage for wallets you create in the Zypto app."}),(0,ui.jsxs)("p",{style:hp.note,className:"hero-note",children:["Zyptopia.org is independent and community-run. Nothing here is financial advice.",(0,ui.jsx)("br",{}),(0,ui.jsx)("button",{onClick:()=>{n(!0),li("sources_open",{page:"vkc"})},className:"link-quiet",style:{marginTop:".25rem",textDecoration:"underline",background:"transparent",border:0,color:"inherit",cursor:"pointer"},children:"Sources"})]})]}),(0,ui.jsx)("div",{style:hp.media,className:"hero-media",children:(0,ui.jsx)("img",{src:sd,alt:"Vault Key Card",style:{width:"100%",height:"auto",borderRadius:14,boxShadow:"0 10px 30px rgba(0,0,0,0.35)"}})})]}),(0,ui.jsx)("section",{style:{margin:"1.2rem 0 1.4rem"},children:(0,ui.jsxs)("div",{style:dp,className:"feature-strip",children:[(0,ui.jsx)(np,{icon:(0,ui.jsx)(sp,{}),title:"Tap-to-sign (NFC)",desc:"Approve transactions with a physical tap."}),(0,ui.jsx)(np,{icon:(0,ui.jsx)(ap,{}),title:"Keys stay offline",desc:"Cold-storage posture between uses."}),(0,ui.jsx)(np,{icon:(0,ui.jsx)(op,{}),title:"Up to 3 wallets",desc:"Secure multiple app-created wallets on one card."})]})}),(0,ui.jsxs)("section",{style:pp,children:[(0,ui.jsx)("h2",{style:gp,children:"How it works"}),(0,ui.jsxs)("ol",{style:mp.wrap,children:[(0,ui.jsx)(rp,{n:1,title:"Create wallet in the Zypto app",text:"Download Zypto and create a new wallet."}),(0,ui.jsx)(rp,{n:2,title:"Link it to your VKC",text:"From the app, add a Vault Key Card and pair it to your wallet."}),(0,ui.jsx)(rp,{n:3,title:"Tap to confirm",text:"When signing a transaction, you\u2019ll be prompted to tap the card to your phone."})]})]}),(0,ui.jsxs)("section",{style:pp,children:[(0,ui.jsx)("h2",{style:gp,children:"VKC vs. software-only"}),(0,ui.jsxs)("div",{style:yp.grid,className:"compare-grid",children:[(0,ui.jsxs)("div",{style:yp.col,children:[(0,ui.jsx)("h3",{style:yp.h3,children:"With VKC"}),(0,ui.jsxs)("ul",{style:yp.ul,children:[(0,ui.jsx)("li",{children:"Keys offline between uses"}),(0,ui.jsx)("li",{children:"Physical intent (tap) reduces accidental signs"}),(0,ui.jsx)("li",{children:"No cables or batteries"})]})]}),(0,ui.jsxs)("div",{style:yp.col,children:[(0,ui.jsx)("h3",{style:yp.h3,children:"Software-only"}),(0,ui.jsxs)("ul",{style:yp.ul,children:[(0,ui.jsx)("li",{children:"Keys live on device"}),(0,ui.jsx)("li",{children:"No physical confirmation step"}),(0,ui.jsx)("li",{children:"Fewer moving parts, but less separation"})]})]})]})]}),(0,ui.jsxs)("section",{style:pp,children:[(0,ui.jsx)("h2",{style:gp,children:"Why people use it"}),(0,ui.jsxs)("div",{style:vp.grid,className:"benefits-grid",children:[(0,ui.jsx)(ip,{bullet:"Reduce exposure of keys on a daily-use phone"}),(0,ui.jsx)(ip,{bullet:"Add a physical \u2018are-you-sure?\u2019 step to signing"}),(0,ui.jsx)(ip,{bullet:"Portable: card fits in a wallet; no charging"})]})]}),(0,ui.jsxs)("section",{style:pp,children:[(0,ui.jsx)("h2",{style:gp,children:"FAQ"}),(0,ui.jsxs)("details",{style:wp.details,onToggle:e=>e.target.open&&li("faq_open",{id:"seed"}),children:[(0,ui.jsx)("summary",{style:wp.summary,children:"Does VKC replace seed backup?"}),(0,ui.jsx)("p",{style:wp.a,children:"No. Keep your recovery phrase written and stored securely. VKC adds tap-to-sign and keeps keys offline between uses."})]}),(0,ui.jsxs)("details",{style:wp.details,onToggle:e=>e.target.open&&li("faq_open",{id:"wallets"}),children:[(0,ui.jsx)("summary",{style:wp.summary,children:"How many wallets can I use on one VKC?"}),(0,ui.jsx)("p",{style:wp.a,children:"Up to three Zypto app-created wallets per card."})]}),(0,ui.jsxs)("details",{style:wp.details,onToggle:e=>e.target.open&&li("faq_open",{id:"battery"}),children:[(0,ui.jsx)("summary",{style:wp.summary,children:"Is VKC battery powered?"}),(0,ui.jsx)("p",{style:wp.a,children:"No. VKC uses NFC, so there are no batteries or cables. You tap the card to your phone to sign."})]})]}),(0,ui.jsxs)("section",{style:bp.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Ready to try it?"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Start in the Zypto app. You can add a VKC later from inside the app."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:"0.6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("vkc_bottom_download"),eventName:"cta_click",eventParams:{placement:"vkc_bottom_download"},className:"btn btn-primary",style:up,children:"Download Zypto"}),(0,ui.jsx)(Ae,{to:"/about-zypto#vkc",className:"btn",style:cp,children:"Learn more about VKC"}),(0,ui.jsx)(Ae,{to:"/faq",className:"btn",style:cp,children:"FAQ"})]})]})]}),(0,ui.jsx)(If,{open:e,onClose:()=>{n(!1),li("sources_close",{page:"vkc"})},title:"Official sources",items:[{label:"Vault Key Card \u2014 info",href:"https://zypto.com/"},{label:"Zypto Help Center",href:"https://help.zypto.com/"}]}),(0,ui.jsx)("style",{children:"\n        /* Hero stacks; hide image on small and center the note */\n        @media (max-width: 860px) {\n          .vkc-hero-grid { grid-template-columns: 1fr !important; }\n          .vkc-hero-grid .hero-media { display: none !important; }\n          .vkc-hero-grid .hero-note { text-align: center !important; }\n        }\n        /* Features: 3 -> 2 -> 1 */\n        @media (max-width: 1100px){\n          .feature-strip { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 720px){\n          .feature-strip { grid-template-columns: 1fr !important; }\n        }\n        /* Compare grid: 2 -> 1 */\n        @media (max-width: 860px){\n          .compare-grid { grid-template-columns: 1fr !important; }\n        }\n        /* Benefits: 3 -> 2 -> 1 */\n        @media (max-width: 1020px){\n          .benefits-grid { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 680px){\n          .benefits-grid { grid-template-columns: 1fr !important; }\n        }\n      "})]})}function np(e){let{icon:t,title:n,desc:r}=e;return(0,ui.jsx)("div",{style:fp.card,children:(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".55rem"},children:[(0,ui.jsx)("div",{style:fp.icon,children:t}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:fp.title,children:n}),(0,ui.jsx)("div",{style:fp.desc,children:r})]})]})})}function rp(e){let{n:t,title:n,text:r}=e;return(0,ui.jsxs)("li",{style:mp.item,children:[(0,ui.jsx)("div",{style:mp.badge,children:t}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:mp.title,children:n}),(0,ui.jsx)("div",{style:{opacity:.9},children:r})]})]})}function ip(e){let{bullet:t}=e;return(0,ui.jsxs)("div",{style:vp.item,children:[(0,ui.jsx)(lp,{}),(0,ui.jsx)("span",{children:t})]})}function sp(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("rect",{x:"3",y:"5",width:"18",height:"14",rx:"2",stroke:"currentColor",opacity:".9"}),(0,ui.jsx)("path",{d:"M9 9v6M12 9v6M15 9v6",stroke:"currentColor",opacity:".9"})]})}function ap(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("path",{d:"M12 3l7 3v6a7 7 0 0 1-7 7 7 7 0 0 1-7-7V6l7-3z",stroke:"currentColor",opacity:".9"}),(0,ui.jsx)("path",{d:"M9 12l2 2 4-4",stroke:"currentColor"})]})}function op(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("rect",{x:"5",y:"7",width:"14",height:"10",rx:"2",stroke:"currentColor",opacity:".9"}),(0,ui.jsx)("path",{d:"M16.5 12.5h2m-9-6l7 0",stroke:"currentColor"})]})}function lp(){return(0,ui.jsx)("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:(0,ui.jsx)("path",{d:"M5 13l4 4L19 7",stroke:"currentColor",strokeWidth:"2"})})}const cp={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},up=(0,bi.A)((0,bi.A)({},cp),{},{background:"rgba(255,255,255,0.12)"}),hp={wrap:{display:"grid",gridTemplateColumns:"1.1fr .9fr",gap:"1.2rem",alignItems:"center",padding:"1rem",borderRadius:14,background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",border:"1px solid rgba(255,255,255,.1)"},copy:{padding:".4rem .2rem"},sub:{margin:".35rem 0 .6rem",opacity:.9,fontSize:"1.05rem"},media:{maxWidth:420,justifySelf:"end"},note:{marginTop:".35rem",opacity:.75,fontStyle:"italic",fontSize:".9rem",textAlign:"center"}},dp={display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".7rem"},fp={card:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".7rem .8rem",background:"rgba(255,255,255,.03)"},icon:{width:38,height:38,display:"grid",placeItems:"center",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"rgba(255,255,255,.05)"},title:{fontWeight:700},desc:{opacity:.9}},pp={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},gp={margin:0,marginBottom:".5rem"},mp={wrap:{listStyle:"none",margin:0,padding:0,display:"grid",gap:".85rem"},item:{display:"grid",gridTemplateColumns:"38px 1fr",gap:".7rem",alignItems:"start"},badge:{width:38,height:38,borderRadius:"50%",display:"grid",placeItems:"center",border:"1px solid rgba(255,255,255,.2)",background:"rgba(255,255,255,.06)",fontWeight:700},title:{fontWeight:700,marginBottom:".15rem"}},yp={grid:{display:"grid",gridTemplateColumns:"repeat(2, minmax(0,1fr))",gap:".75rem"},col:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".8rem .9rem",background:"rgba(255,255,255,.03)"},h3:{margin:0,marginBottom:".4rem"},ul:{margin:0,paddingLeft:"1.1rem"}},vp={grid:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".6rem"},item:{display:"flex",alignItems:"center",gap:".45rem",border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:".55rem .7rem",background:"rgba(255,255,255,.03)"}},bp={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}},wp={details:{border:"1px solid rgba(255,255,255,.12)",borderRadius:10,padding:".6rem .75rem",background:"rgba(255,255,255,.03)",marginBottom:".5rem"},summary:{cursor:"pointer",fontWeight:600,outline:"none",listStyle:"none"},a:{margin:".45rem 0 0",opacity:.9}};function xp(){(0,t.useEffect)(()=>{li("page_view",{page:"get_started"})},[]);const[e,n]=(0,t.useState)(!1),r="https://www.zyptopia.org/get-started",i=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Getting Started",item:r}]),Rd({name:"How to start with Zypto in a few minutes",steps:[{name:"Download the wallet",text:"Install the Zypto app from the official link and create a wallet."},{name:"Buy Zypto",text:"Purchase Zypto in-app (where available) or transfer from another wallet so you can start earning daily rewards."},{name:"Track rewards",text:"ZYPs are in-app points. Zypto states 1,000 ZYP equals USD $1 where available. Use Zyptopia to view daily history."},{name:"Add security (optional)",text:"Consider the Vault Key Card for tap-to-sign cold storage on mobile."}]}),Md([{q:"Do I need a Zyptopia account?",a:"No. You can use the tools without signing in."},{q:"Are the calculations guaranteed?",a:"No. They\u2019re based on recent community averages and are for estimation only."},{q:"Is this financial advice?",a:"No. Zyptopia.org is a community resource, not financial advice."}])];return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Getting Started",description:"A short, neutral guide: download Zypto, buy Zypto, understand rewards, and optionally add Vault Key Card security.",canonical:r,jsonLd:i}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:Ap.wrap,className:"get-started-hero",children:[(0,ui.jsxs)("div",{style:Ap.copy,className:"hero-copy",children:[(0,ui.jsx)("h1",{style:{margin:0},children:"Getting Started"}),(0,ui.jsx)("p",{style:Ap.sub,className:"hero-sub",children:"Start in minutes: download the wallet, buy Zypto, and track daily rewards."}),(0,ui.jsxs)("p",{style:Ap.note,className:"hero-note",children:["Zyptopia.org is independent and community-run. Nothing here is financial advice.",(0,ui.jsx)("br",{}),(0,ui.jsx)("button",{onClick:()=>{n(!0),li("sources_open",{page:"get_started"})},className:"link-quiet",style:{display:"inline-block",marginTop:".25rem",textDecoration:"underline",background:"transparent",border:0,color:"inherit",cursor:"pointer"},children:"Sources"})]})]}),(0,ui.jsx)("div",{style:Ap.media,className:"hero-media",children:(0,ui.jsx)("div",{style:Dp.wrap,"aria-hidden":"true",children:(0,ui.jsx)("img",{src:sd,alt:"Zypto wallet app and Vault Key Card",loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"cover",display:"block"}})})})]}),(0,ui.jsx)("section",{style:{margin:"1.2rem 0 1.4rem"},children:(0,ui.jsxs)("div",{style:Pp.grid,className:"choices-grid",children:[(0,ui.jsx)(_p,{icon:(0,ui.jsx)(Sp,{}),title:"Just install the app",desc:"Create a wallet and explore. If it\u2019s not for you, remove it later\u2014no commitment.",cta:(0,ui.jsx)(Mi,{href:Xh("get_started_tile_download"),eventName:"cta_click",eventParams:{placement:"get_started_tile_download"},className:"btn",style:Ip,children:"Download"})}),(0,ui.jsx)(_p,{icon:(0,ui.jsx)(Ep,{}),title:"See current trends first",desc:"Check recent daily averages and browse history before you decide.",cta:(0,ui.jsx)(Ae,{to:"/",className:"btn",style:Ip,onClick:()=>li("internal_nav",{to:"home_graph_from_get_started"}),children:"Open graph"})}),(0,ui.jsx)(_p,{icon:(0,ui.jsx)(Tp,{}),title:"Run quick estimates",desc:"Estimate Zyps/day based on recent community averages.",cta:(0,ui.jsx)(Ae,{to:"/calculator",className:"btn",style:Ip,children:"Open calculators"})})]})}),(0,ui.jsxs)("section",{style:Mp,children:[(0,ui.jsx)("h2",{style:Rp,children:"Four simple steps"}),(0,ui.jsxs)("ol",{style:Op.wrap,className:"timeline",children:[(0,ui.jsx)(kp,{n:1,title:"Download the wallet",text:"Install from the official link and create a wallet."}),(0,ui.jsx)(kp,{n:2,title:"Buy Zypto",text:"Purchase in-app (where available) or transfer from another wallet so you can start earning rewards."}),(0,ui.jsx)(kp,{n:3,title:"Track rewards",text:"ZYPs are points (1,000 ZYP = USD $1 in-app where available). Use Zyptopia to view daily history."}),(0,ui.jsx)(kp,{n:4,title:"Add security (optional)",text:"Consider the Vault Key Card for tap-to-sign cold storage."})]})]}),(0,ui.jsxs)("section",{style:Mp,children:[(0,ui.jsx)("h2",{style:Rp,children:"Pro tips"}),(0,ui.jsxs)("ul",{style:jp,children:[(0,ui.jsx)("li",{children:"Try a small test transaction before moving larger values."}),(0,ui.jsx)("li",{children:"Write down recovery phrases and store them securely offline."}),(0,ui.jsx)("li",{children:"Use the Historical page\u2019s \u201choldings\u201d box to see per-day estimates for your amount."})]})]}),(0,ui.jsxs)("section",{style:Lp.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Ready?"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"You can always come back here to check averages or tweak assumptions."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("get_started_bottom_download"),eventName:"cta_click",eventParams:{placement:"get_started_bottom_download"},className:"btn btn-primary",style:Cp,children:"Download Zypto"}),(0,ui.jsx)(Ae,{to:"/historical",className:"btn",style:Ip,children:"See historical"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:Ip,children:"About VKC"}),(0,ui.jsx)(Ae,{to:"/faq",className:"btn",style:Ip,children:"FAQ"})]})]})]}),(0,ui.jsx)(If,{open:e,onClose:()=>{n(!1),li("sources_close",{page:"get_started"})},title:"Official sources",items:[{label:"Zypto \u2014 Official site",href:"https://zypto.com/"},{label:"Zypto Help Center",href:"https://help.zypto.com/"}]}),(0,ui.jsx)("style",{children:"\n        /* Hero: stack and hide image on mobile */\n        @media (max-width: 900px){\n          .get-started-hero { grid-template-columns: 1fr !important; padding: .75rem !important; }\n          .get-started-hero .hero-media { display: none !important; }\n        }\n        @media (max-width: 760px){\n          .get-started-hero .hero-copy h1 { font-size: 1.28rem !important; }\n          .get-started-hero .hero-sub { font-size: .96rem !important; margin: .35rem 0 .4rem !important; }\n          .get-started-hero .hero-note { font-size: .88rem !important; margin-top: .35rem !important; }\n        }\n\n        /* Choices grid remains responsive from previous version */\n        @media (max-width: 1100px){\n          .choices-grid { grid-template-columns: repeat(2, minmax(0,1fr)) !important; }\n        }\n        @media (max-width: 720px){\n          .choices-grid { grid-template-columns: 1fr !important; }\n          /* Center the card header, text, and CTA button on mobile */\n          .choice-head { justify-content: center !important; }\n          .choice-text { text-align: center !important; }\n          .choice-icon { margin: 0 auto !important; }\n          .choice-cta { display: flex !important; justify-content: center !important; }\n        }\n\n        /* Timeline compaction on mobile (kept) */\n        @media (max-width: 720px){\n          .timeline li { grid-template-columns: 34px 1fr !important; }\n        }\n      "})]})}function _p(e){let{icon:t,title:n,desc:r,cta:i}=e;return(0,ui.jsxs)("div",{style:Np.card,className:"choice-card",children:[(0,ui.jsxs)("div",{style:{display:"flex",alignItems:"center",gap:".55rem"},className:"choice-head",children:[(0,ui.jsx)("div",{style:Np.icon,className:"choice-icon",children:t}),(0,ui.jsxs)("div",{className:"choice-text",children:[(0,ui.jsx)("div",{style:Np.title,className:"choice-title",children:n}),(0,ui.jsx)("div",{style:Np.desc,className:"choice-desc",children:r})]})]}),(0,ui.jsx)("div",{className:"choice-cta",style:{marginTop:".4rem"},children:i})]})}function kp(e){let{n:t,title:n,text:r}=e;return(0,ui.jsxs)("li",{style:Op.item,children:[(0,ui.jsx)("div",{style:Op.badge,children:t}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("div",{style:Op.title,children:n}),(0,ui.jsx)("div",{style:{opacity:.9},children:r})]})]})}function Sp(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("path",{d:"M12 3v12m0 0l-4-4m4 4l4-4",stroke:"currentColor"}),(0,ui.jsx)("path",{d:"M4 19h16",stroke:"currentColor"})]})}function Ep(){return(0,ui.jsx)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:(0,ui.jsx)("path",{d:"M4 19h16M6 16l3-4 3 2 6-7",stroke:"currentColor"})})}function Tp(){return(0,ui.jsxs)("svg",{width:"22",height:"22",viewBox:"0 0 24 24",fill:"none","aria-hidden":"true",children:[(0,ui.jsx)("rect",{x:"4",y:"3",width:"16",height:"18",rx:"2",stroke:"currentColor"}),(0,ui.jsx)("path",{d:"M8 8h8M8 12h3M8 16h3",stroke:"currentColor"})]})}const Ip={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},Cp=(0,bi.A)((0,bi.A)({},Ip),{},{background:"rgba(255,255,255,0.12)"}),Ap={wrap:{display:"grid",gridTemplateColumns:"1.15fr .85fr",gap:"1.1rem",alignItems:"center",padding:".9rem",borderRadius:14,background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",border:"1px solid rgba(255,255,255,.1)"},copy:{padding:".25rem .15rem"},sub:{margin:".35rem 0 .55rem",opacity:.9,fontSize:"1rem"},media:{maxWidth:360,justifySelf:"end",width:"100%"},note:{marginTop:".4rem",opacity:.75,fontStyle:"italic",fontSize:".9rem",textAlign:"center"}},Dp={wrap:{width:"100%",aspectRatio:"260/170",borderRadius:12,overflow:"hidden",border:"1px solid rgba(255,255,255,.1)"}},Pp={grid:{display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".7rem"}},Np={card:{display:"grid",gap:".6rem",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".8rem .9rem",background:"rgba(255,255,255,.03)"},icon:{width:38,height:38,display:"grid",placeItems:"center",borderRadius:10,border:"1px solid rgba(255,255,255,.18)",background:"rgba(255,255,255,.05)"},title:{fontWeight:700},desc:{opacity:.9}},Mp={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},Rp={margin:0,marginBottom:".5rem"},jp={margin:"0.5rem 0 0 1.1rem"},Op={wrap:{listStyle:"none",margin:0,padding:0,display:"grid",gap:".85rem"},item:{display:"grid",gridTemplateColumns:"38px 1fr",gap:".7rem",alignItems:"start"},badge:{width:38,height:38,borderRadius:"50%",display:"grid",placeItems:"center",border:"1px solid rgba(255,255,255,.2)",background:"rgba(255,255,255,.06)",fontWeight:700},title:{fontWeight:700,marginBottom:".15rem"}},Lp={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}},Fp=[{q:"What is Zyptopia.org?",a:"An independent, community-run site. We publish community-tracked reward data and simple tools. We\u2019re not the Zypto company and we\u2019re not the in-app \u201cZyptopia\u201d area."},{q:"What is \u201cZyptopia\u201d in the Zypto app, and how is it different from Zyptopia.org?",a:"Inside the Zypto app, \u201cZyptopia\u201d (a.k.a. Rewards Hub) is where you see your level, perks and claim rewards. Zyptopia.org is separate \u2014 a public website with charts and calculators built by the community."},{q:"What are ZYPs?",a:"ZYPs are in-app reward points \u2014 not a tradable token. In the app, 1,000 ZYP = USD $1 where redemptions are available."},{q:"Can I send ZYPs to other people or trade them?",a:"No. ZYPs are not transferable between users and not tradable on exchanges."},{q:"How do daily rewards work?",a:"Zypto allocates a share of fees to a daily pool. Rewards are then distributed among $ZYPTO holders who have registered their wallet in the app\u2019s Zyptopia/Rewards Hub."},{q:"Do I need to hold $ZYPTO to earn ZYPs?",a:"Yes. Rewards are distributed to wallets that hold $ZYPTO and are registered in the app\u2019s Zyptopia/Rewards Hub."},{q:"Does holding $ZYPTO change my level or perks?",a:"Yes. Holding $ZYPTO boosts your Rewards Hub base level, which can increase perks like cashback."},{q:"Where do I find Zyptopia / Rewards Hub in the app?",a:"Open the Zypto app. On the main screen you\u2019ll see \u201cRewards Hub\u201d under your balances. Tap it to view level, perks, quests and claims."},{q:"How long do I have to claim daily rewards?",a:"There\u2019s a claim window \u2014 unclaimed rewards expire after a short period. Open the app\u2019s Zyptopia/Rewards Hub and tap CLAIM to keep current."},{q:"Can I cash out or spend value from the app?",a:"Spending options are in the Zypto ecosystem (cards, gift cards, bill pay, and cash-in/cash-out rails in supported regions). Availability varies by country and product tier."},{q:"Is anything here financial advice?",a:"No. Nothing on Zyptopia.org is financial advice."}];function Vp(){(0,t.useEffect)(()=>{li("page_view",{page:"faq"})},[]);const e="https://www.zyptopia.org/faq",n=[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"FAQ",item:e}]),Md(Fp.map(e=>{let{q:t,a:n}=e;return{q:t,a:n}}))];return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"FAQ \u2013 Zyptopia.org",description:"Common questions about Zyptopia.org, ZYP rewards, and the in-app Zyptopia (Rewards Hub).",canonical:e,jsonLd:n}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:zp.wrap,className:"faq-hero",children:[(0,ui.jsxs)("div",{style:zp.copy,children:[(0,ui.jsx)("h1",{style:{margin:0},children:"Frequently asked questions"}),(0,ui.jsx)("p",{style:zp.sub,children:"Short, factual answers about the site, ZYPs, $ZYPTO, and the in-app Zyptopia."})]}),(0,ui.jsx)("div",{style:zp.media,"aria-hidden":"true",children:(0,ui.jsx)("div",{style:Up.wrap,children:(0,ui.jsx)("img",{src:ci,alt:"Zyptopia.org",loading:"lazy",decoding:"async",style:{width:"100%",height:"100%",objectFit:"contain",display:"block",padding:"1.2rem"}})})})]}),(0,ui.jsx)("section",{style:Bp,children:(0,ui.jsx)("div",{style:{display:"grid",gap:".6rem"},children:Fp.map((e,t)=>(0,ui.jsxs)("details",{style:Wp.card,onToggle:e=>e.target.open&&li("faq_open",{i:t}),children:[(0,ui.jsx)("summary",{style:Wp.sum,children:e.q}),(0,ui.jsx)("div",{style:{padding:".45rem .6rem .6rem"},children:e.a})]},t))})})]}),(0,ui.jsx)("style",{children:"\n        @media (max-width: 900px){\n          .faq-hero { grid-template-columns: 1fr !important; }\n        }\n      "})]})}const zp={wrap:{display:"grid",gridTemplateColumns:"1.15fr .85fr",gap:"1.2rem",alignItems:"center",padding:"1rem",borderRadius:14,background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",border:"1px solid rgba(255,255,255,.1)"},copy:{padding:".4rem .2rem"},sub:{margin:".35rem 0 .6rem",opacity:.9,fontSize:"1.05rem"},media:{maxWidth:420,justifySelf:"end"}},Up={wrap:{width:"100%",aspectRatio:"300/220",borderRadius:14,overflow:"hidden",border:"1px solid rgba(255,255,255,.1)"}},Bp={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},Wp={card:{border:"1px solid rgba(255,255,255,.12)",borderRadius:12,background:"rgba(255,255,255,.03)"},sum:{padding:".55rem .6rem",cursor:"pointer",userSelect:"none",fontWeight:700}};var qp=n(967),Hp=n.n(qp),Kp=n(387),Gp=n.n(Kp),Qp=n(720),Yp=n.n(Qp),Zp=n(181),$p=n.n(Zp),Jp="bodyAttributes",Xp="htmlAttributes",eg="titleAttributes",tg={BASE:"base",BODY:"body",HEAD:"head",HTML:"html",LINK:"link",META:"meta",NOSCRIPT:"noscript",SCRIPT:"script",STYLE:"style",TITLE:"title"},ng=(Object.keys(tg).map(function(e){return tg[e]}),"charset"),rg="cssText",ig="href",sg="http-equiv",ag="innerHTML",og="itemprop",lg="name",cg="property",ug="rel",hg="src",dg="target",fg={accesskey:"accessKey",charset:"charSet",class:"className",contenteditable:"contentEditable",contextmenu:"contextMenu","http-equiv":"httpEquiv",itemprop:"itemProp",tabindex:"tabIndex"},pg="defaultTitle",gg="defer",mg="encodeSpecialCharacters",yg="onChangeClientState",vg="titleTemplate",bg=Object.keys(fg).reduce(function(e,t){return e[fg[t]]=t,e},{}),wg=[tg.NOSCRIPT,tg.SCRIPT,tg.STYLE],xg="data-react-helmet",_g="function"===typeof Symbol&&"symbol"===typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"===typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},kg=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),Sg=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Eg=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Tg=function(e){return!1===(!(arguments.length>1&&void 0!==arguments[1])||arguments[1])?String(e):String(e).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;")},Ig=function(e){var t=Ng(e,tg.TITLE),n=Ng(e,vg);if(n&&t)return n.replace(/%s/g,function(){return Array.isArray(t)?t.join(""):t});var r=Ng(e,pg);return t||r||void 0},Cg=function(e){return Ng(e,yg)||function(){}},Ag=function(e,t){return t.filter(function(t){return"undefined"!==typeof t[e]}).map(function(t){return t[e]}).reduce(function(e,t){return Sg({},e,t)},{})},Dg=function(e,t){return t.filter(function(e){return"undefined"!==typeof e[tg.BASE]}).map(function(e){return e[tg.BASE]}).reverse().reduce(function(t,n){if(!t.length)for(var r=Object.keys(n),i=0;i<r.length;i++){var s=r[i].toLowerCase();if(-1!==e.indexOf(s)&&n[s])return t.concat(n)}return t},[])},Pg=function(e,t,n){var r={};return n.filter(function(t){return!!Array.isArray(t[e])||("undefined"!==typeof t[e]&&Lg("Helmet: "+e+' should be of type "Array". Instead found type "'+_g(t[e])+'"'),!1)}).map(function(t){return t[e]}).reverse().reduce(function(e,n){var i={};n.filter(function(e){for(var n=void 0,s=Object.keys(e),a=0;a<s.length;a++){var o=s[a],l=o.toLowerCase();-1===t.indexOf(l)||n===ug&&"canonical"===e[n].toLowerCase()||l===ug&&"stylesheet"===e[l].toLowerCase()||(n=l),-1===t.indexOf(o)||o!==ag&&o!==rg&&o!==og||(n=o)}if(!n||!e[n])return!1;var c=e[n].toLowerCase();return r[n]||(r[n]={}),i[n]||(i[n]={}),!r[n][c]&&(i[n][c]=!0,!0)}).reverse().forEach(function(t){return e.push(t)});for(var s=Object.keys(i),a=0;a<s.length;a++){var o=s[a],l=$p()({},r[o],i[o]);r[o]=l}return e},[]).reverse()},Ng=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e[n];if(r.hasOwnProperty(t))return r[t]}return null},Mg=function(){var e=Date.now();return function(t){var n=Date.now();n-e>16?(e=n,t(n)):setTimeout(function(){Mg(t)},0)}}(),Rg=function(e){return clearTimeout(e)},jg="undefined"!==typeof window?window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||Mg:n.g.requestAnimationFrame||Mg,Og="undefined"!==typeof window?window.cancelAnimationFrame||window.webkitCancelAnimationFrame||window.mozCancelAnimationFrame||Rg:n.g.cancelAnimationFrame||Rg,Lg=function(e){return console&&"function"===typeof console.warn&&console.warn(e)},Fg=null,Vg=function(e,t){var n=e.baseTag,r=e.bodyAttributes,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.onChangeClientState,c=e.scriptTags,u=e.styleTags,h=e.title,d=e.titleAttributes;Bg(tg.BODY,r),Bg(tg.HTML,i),Ug(h,d);var f={baseTag:Wg(tg.BASE,n),linkTags:Wg(tg.LINK,s),metaTags:Wg(tg.META,a),noscriptTags:Wg(tg.NOSCRIPT,o),scriptTags:Wg(tg.SCRIPT,c),styleTags:Wg(tg.STYLE,u)},p={},g={};Object.keys(f).forEach(function(e){var t=f[e],n=t.newTags,r=t.oldTags;n.length&&(p[e]=n),r.length&&(g[e]=f[e].oldTags)}),t&&t(),l(e,p,g)},zg=function(e){return Array.isArray(e)?e.join(""):e},Ug=function(e,t){"undefined"!==typeof e&&document.title!==e&&(document.title=zg(e)),Bg(tg.TITLE,t)},Bg=function(e,t){var n=document.getElementsByTagName(e)[0];if(n){for(var r=n.getAttribute(xg),i=r?r.split(","):[],s=[].concat(i),a=Object.keys(t),o=0;o<a.length;o++){var l=a[o],c=t[l]||"";n.getAttribute(l)!==c&&n.setAttribute(l,c),-1===i.indexOf(l)&&i.push(l);var u=s.indexOf(l);-1!==u&&s.splice(u,1)}for(var h=s.length-1;h>=0;h--)n.removeAttribute(s[h]);i.length===s.length?n.removeAttribute(xg):n.getAttribute(xg)!==a.join(",")&&n.setAttribute(xg,a.join(","))}},Wg=function(e,t){var n=document.head||document.querySelector(tg.HEAD),r=n.querySelectorAll(e+"["+xg+"]"),i=Array.prototype.slice.call(r),s=[],a=void 0;return t&&t.length&&t.forEach(function(t){var n=document.createElement(e);for(var r in t)if(t.hasOwnProperty(r))if(r===ag)n.innerHTML=t.innerHTML;else if(r===rg)n.styleSheet?n.styleSheet.cssText=t.cssText:n.appendChild(document.createTextNode(t.cssText));else{var o="undefined"===typeof t[r]?"":t[r];n.setAttribute(r,o)}n.setAttribute(xg,"true"),i.some(function(e,t){return a=t,n.isEqualNode(e)})?i.splice(a,1):s.push(n)}),i.forEach(function(e){return e.parentNode.removeChild(e)}),s.forEach(function(e){return n.appendChild(e)}),{oldTags:i,newTags:s}},qg=function(e){return Object.keys(e).reduce(function(t,n){var r="undefined"!==typeof e[n]?n+'="'+e[n]+'"':""+n;return t?t+" "+r:r},"")},Hg=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[fg[n]||n]=e[n],t},t)},Kg=function(e,n,r){switch(e){case tg.TITLE:return{toComponent:function(){return function(e,n,r){var i,s=((i={key:n})[xg]=!0,i),a=Hg(r,s);return[t.createElement(tg.TITLE,a,n)]}(0,n.title,n.titleAttributes)},toString:function(){return function(e,t,n,r){var i=qg(n),s=zg(t);return i?"<"+e+" "+xg+'="true" '+i+">"+Tg(s,r)+"</"+e+">":"<"+e+" "+xg+'="true">'+Tg(s,r)+"</"+e+">"}(e,n.title,n.titleAttributes,r)}};case Jp:case Xp:return{toComponent:function(){return Hg(n)},toString:function(){return qg(n)}};default:return{toComponent:function(){return function(e,n){return n.map(function(n,r){var i,s=((i={key:r})[xg]=!0,i);return Object.keys(n).forEach(function(e){var t=fg[e]||e;if(t===ag||t===rg){var r=n.innerHTML||n.cssText;s.dangerouslySetInnerHTML={__html:r}}else s[t]=n[e]}),t.createElement(e,s)})}(e,n)},toString:function(){return function(e,t,n){return t.reduce(function(t,r){var i=Object.keys(r).filter(function(e){return!(e===ag||e===rg)}).reduce(function(e,t){var i="undefined"===typeof r[t]?t:t+'="'+Tg(r[t],n)+'"';return e?e+" "+i:i},""),s=r.innerHTML||r.cssText||"",a=-1===wg.indexOf(e);return t+"<"+e+" "+xg+'="true" '+i+(a?"/>":">"+s+"</"+e+">")},"")}(e,n,r)}}}},Gg=function(e){var t=e.baseTag,n=e.bodyAttributes,r=e.encode,i=e.htmlAttributes,s=e.linkTags,a=e.metaTags,o=e.noscriptTags,l=e.scriptTags,c=e.styleTags,u=e.title,h=void 0===u?"":u,d=e.titleAttributes;return{base:Kg(tg.BASE,t,r),bodyAttributes:Kg(Jp,n,r),htmlAttributes:Kg(Xp,i,r),link:Kg(tg.LINK,s,r),meta:Kg(tg.META,a,r),noscript:Kg(tg.NOSCRIPT,o,r),script:Kg(tg.SCRIPT,l,r),style:Kg(tg.STYLE,c,r),title:Kg(tg.TITLE,{title:h,titleAttributes:d},r)}},Qg=function(e){var n,r;return r=n=function(n){function r(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,r),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,n.apply(this,arguments))}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(r,n),r.prototype.shouldComponentUpdate=function(e){return!Yp()(this.props,e)},r.prototype.mapNestedChildrenToProps=function(e,t){if(!t)return null;switch(e.type){case tg.SCRIPT:case tg.NOSCRIPT:return{innerHTML:t};case tg.STYLE:return{cssText:t}}throw new Error("<"+e.type+" /> elements are self-closing and can not contain children. Refer to our API for more information.")},r.prototype.flattenArrayTypeChildren=function(e){var t,n=e.child,r=e.arrayTypeChildren,i=e.newChildProps,s=e.nestedChildren;return Sg({},r,((t={})[n.type]=[].concat(r[n.type]||[],[Sg({},i,this.mapNestedChildrenToProps(n,s))]),t))},r.prototype.mapObjectTypeChildren=function(e){var t,n,r=e.child,i=e.newProps,s=e.newChildProps,a=e.nestedChildren;switch(r.type){case tg.TITLE:return Sg({},i,((t={})[r.type]=a,t.titleAttributes=Sg({},s),t));case tg.BODY:return Sg({},i,{bodyAttributes:Sg({},s)});case tg.HTML:return Sg({},i,{htmlAttributes:Sg({},s)})}return Sg({},i,((n={})[r.type]=Sg({},s),n))},r.prototype.mapArrayTypeChildrenToProps=function(e,t){var n=Sg({},t);return Object.keys(e).forEach(function(t){var r;n=Sg({},n,((r={})[t]=e[t],r))}),n},r.prototype.warnOnInvalidChildren=function(e,t){return!0},r.prototype.mapChildrenToProps=function(e,n){var r=this,i={};return t.Children.forEach(e,function(e){if(e&&e.props){var t=e.props,s=t.children,a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object.keys(e).reduce(function(t,n){return t[bg[n]||n]=e[n],t},t)}(Eg(t,["children"]));switch(r.warnOnInvalidChildren(e,s),e.type){case tg.LINK:case tg.META:case tg.NOSCRIPT:case tg.SCRIPT:case tg.STYLE:i=r.flattenArrayTypeChildren({child:e,arrayTypeChildren:i,newChildProps:a,nestedChildren:s});break;default:n=r.mapObjectTypeChildren({child:e,newProps:n,newChildProps:a,nestedChildren:s})}}}),n=this.mapArrayTypeChildrenToProps(i,n)},r.prototype.render=function(){var n=this.props,r=n.children,i=Eg(n,["children"]),s=Sg({},i);return r&&(s=this.mapChildrenToProps(r,s)),t.createElement(e,s)},kg(r,null,[{key:"canUseDOM",set:function(t){e.canUseDOM=t}}]),r}(t.Component),n.propTypes={base:Hp().object,bodyAttributes:Hp().object,children:Hp().oneOfType([Hp().arrayOf(Hp().node),Hp().node]),defaultTitle:Hp().string,defer:Hp().bool,encodeSpecialCharacters:Hp().bool,htmlAttributes:Hp().object,link:Hp().arrayOf(Hp().object),meta:Hp().arrayOf(Hp().object),noscript:Hp().arrayOf(Hp().object),onChangeClientState:Hp().func,script:Hp().arrayOf(Hp().object),style:Hp().arrayOf(Hp().object),title:Hp().string,titleAttributes:Hp().object,titleTemplate:Hp().string},n.defaultProps={defer:!0,encodeSpecialCharacters:!0},n.peek=e.peek,n.rewind=function(){var t=e.rewind();return t||(t=Gg({baseTag:[],bodyAttributes:{},encodeSpecialCharacters:!0,htmlAttributes:{},linkTags:[],metaTags:[],noscriptTags:[],scriptTags:[],styleTags:[],title:"",titleAttributes:{}})),t},r}(Gp()(function(e){return{baseTag:Dg([ig,dg],e),bodyAttributes:Ag(Jp,e),defer:Ng(e,gg),encode:Ng(e,mg),htmlAttributes:Ag(Xp,e),linkTags:Pg(tg.LINK,[ug,ig],e),metaTags:Pg(tg.META,[lg,ng,sg,cg,og],e),noscriptTags:Pg(tg.NOSCRIPT,[ag],e),onChangeClientState:Cg(e),scriptTags:Pg(tg.SCRIPT,[hg,ag],e),styleTags:Pg(tg.STYLE,[rg],e),title:Ig(e),titleAttributes:Ag(eg,e)}},function(e){Fg&&Og(Fg),e.defer?Fg=jg(function(){Vg(e,function(){Fg=null})}):(Vg(e),Fg=null)},Gg)(function(){return null}));Qg.renderStatic=Qg.rewind;const Yg=e=>Number(e||0).toLocaleString(),Zg=e=>null!==e&&void 0!==e&&e.toMillis?e.toMillis():"number"===typeof e?e:Date.now(),$g=e=>new Date(e).toISOString().slice(0,10),Jg=e=>String(null!==e&&void 0!==e?e:"").toLowerCase(),Xg=Object.entries;function em(e){let{text:n}=e;const[r,i]=(0,t.useState)(!1);return(0,ui.jsxs)("span",{style:{position:"relative",display:"inline-block",marginLeft:6},children:[(0,ui.jsx)("button",{type:"button","aria-label":"More info",onMouseEnter:()=>i(!0),onMouseLeave:()=>i(!1),onFocus:()=>i(!0),onBlur:()=>i(!1),style:{border:"none",background:"transparent",color:"inherit",cursor:"pointer",padding:0,lineHeight:1,fontWeight:700},children:"\u24d8"}),r&&(0,ui.jsx)("div",{role:"tooltip",style:{position:"absolute",top:"1.4rem",left:"50%",transform:"translateX(-50%)",background:"rgba(0,0,0,0.9)",color:"white",border:"1px solid rgba(255,255,255,0.2)",borderRadius:8,padding:".45rem .6rem",fontSize:".85rem",maxWidth:280,zIndex:50,whiteSpace:"normal",boxShadow:"0 6px 20px rgba(0,0,0,.35)"},children:n})]})}function tm(e){let{points:t=[],width:n=180,height:r=34}=e;if(!t.length)return null;const i=Math.max(...t),s=Math.min(...t),a=Math.max(1,i-s),o=n/Math.max(1,t.length-1),l=t.map((e,t)=>{const n=t*o,i=r-(e-s)/a*r;return"".concat(0===t?"M":"L").concat(n.toFixed(2),",").concat(i.toFixed(2))}).join(" ");return(0,ui.jsx)("svg",{width:n,height:r,viewBox:"0 0 ".concat(n," ").concat(r),"aria-hidden":"true",children:(0,ui.jsx)("path",{d:l,fill:"none",stroke:"currentColor",strokeWidth:"2"})})}function nm(e){let{label:t,active:n,dir:r,onClick:i,style:s}=e;return(0,ui.jsxs)("th",{onClick:i,style:(0,bi.A)({cursor:"pointer",userSelect:"none",padding:".5rem",whiteSpace:"nowrap"},s),"aria-sort":n?"asc"===r?"ascending":"descending":"none",children:[t," ",n?"asc"===r?"\u25b2":"\u25bc":"\u2195"]})}function rm(){var e;const n=ri().currentUser,[r,i]=(0,t.useState)("30"),[s,a]=(0,t.useState)([]),[o,l]=(0,t.useState)(!0),[c,u]=(0,t.useState)(""),[h,d]=(0,t.useState)("all"),[f,p]=(0,t.useState)(""),[g,m]=(0,t.useState)(""),[y,v]=(0,t.useState)({field:"clicks",dir:"desc"}),[b,w]=(0,t.useState)({field:"clicks",dir:"desc"}),[x,_]=(0,t.useState)({field:"views",dir:"desc"}),[k,S]=(0,t.useState)({field:"views",dir:"desc"}),[E,T]=(0,t.useState)({field:"views",dir:"desc"});(0,t.useEffect)(()=>{li("page_view",{page:"admin_analytics"})},[]),(0,t.useEffect)(()=>{let e=!0;return async function(){if(n){l(!0),u("");try{const t=(0,Yh.query)((0,Yh.collection)($h,"events"),(0,Yh.orderBy)("ts","desc"),(0,Yh.limit)(4e3)),n=(await(0,Yh.getDocs)(t)).docs.map(e=>(0,bi.A)({id:e.id},e.data()));e&&a(n)}catch(Dm){e&&u("Failed to load analytics.")}finally{e&&l(!1)}}else e&&(a([]),l(!1),u(""))}(),()=>{e=!1}},[n]);const I=(0,t.useMemo)(()=>["all",...Array.from(new Set(s.map(e=>e.name).filter(Boolean))).sort()],[s]),C=(0,t.useMemo)(()=>{if(!s.length)return[];if("all"===r)return s;const e=Number(r),t=Date.now()-864e5*e;return s.filter(e=>Zg(e.ts)>=t)},[s,r]),A=(0,t.useMemo)(()=>{const e=Jg(f);return C.filter(t=>{if("all"!==h&&t.name!==h)return!1;if(g&&"cta_click"===t.name){var n;const e=(null===(n=t.params)||void 0===n?void 0:n.placement)||"";if(!Jg(e).includes(Jg(g)))return!1}if(e){if(![t.name,JSON.stringify(t.params||{}),t.user,t.page,t.referrer].map(Jg).join(" ").includes(e))return!1}return!0})},[C,h,g,f]),D=(0,t.useMemo)(()=>{const e={all:A.length,byName:{},ctaByPlacement:{},internalNav:{},pageViewsByDay:{},pageViewsLanding:{},pageViewsReferrer:{},pageViewsUTM:{source:{},medium:{},campaign:{}},pageViewsWithRef:0,pageViewsWithUTM:0,pageViews:0,searches:0,calcUsed:0,miniCalcUsed:0};for(const c of A){const u=c.name||"(unknown)";if(e.byName[u]=(e.byName[u]||0)+1,"cta_click"===u){var t;const n=(null===(t=c.params)||void 0===t?void 0:t.placement)||"(none)";e.ctaByPlacement[n]=(e.ctaByPlacement[n]||0)+1}if("internal_nav"===u){var n;const t=(null===(n=c.params)||void 0===n?void 0:n.to)||"(none)";e.internalNav[t]=(e.internalNav[t]||0)+1}if("calculator_used"===u&&(e.calcUsed+=1),"mini_calc_used"===u&&(e.miniCalcUsed+=1),"historical_search"===u&&(e.searches+=1),"page_view"===u){var r,i,s,a,o,l;e.pageViews+=1;const t=Zg(c.ts),n=$g(t);e.pageViewsByDay[n]=(e.pageViewsByDay[n]||0)+1;const u=(null===(r=c.params)||void 0===r?void 0:r.page)||c.page||(null===(i=c.params)||void 0===i?void 0:i.path)||"(unknown)";e.pageViewsLanding[u]=(e.pageViewsLanding[u]||0)+1;const h=(null===(s=c.params)||void 0===s?void 0:s.referrer)||c.referrer||"";h&&(e.pageViewsWithRef+=1,e.pageViewsReferrer[h]=(e.pageViewsReferrer[h]||0)+1);const d=(null===(a=c.params)||void 0===a?void 0:a.utm_source)||c.utm_source||"",f=(null===(o=c.params)||void 0===o?void 0:o.utm_medium)||c.utm_medium||"",p=(null===(l=c.params)||void 0===l?void 0:l.utm_campaign)||c.utm_campaign||"";(d||f||p)&&(e.pageViewsWithUTM+=1),d&&(e.pageViewsUTM.source[d]=(e.pageViewsUTM.source[d]||0)+1),f&&(e.pageViewsUTM.medium[f]=(e.pageViewsUTM.medium[f]||0)+1),p&&(e.pageViewsUTM.campaign[p]=(e.pageViewsUTM.campaign[p]||0)+1)}}return e},[A]),P=(0,t.useMemo)(()=>Object.keys(D.pageViewsByDay).sort().map(e=>D.pageViewsByDay[e]),[D]),N=(e,t)=>{let{field:n,dir:r}=t;const i="asc"===r?1:-1;return[...e].sort((e,t)=>"name"===n?e[0]<t[0]?-1*i:e[0]>t[0]?1*i:0:(e[1]-t[1])*i)};if(!n)return(0,ui.jsx)("div",{className:"page-content",style:{maxWidth:1200,margin:"1.5rem auto",padding:"0 1rem"},children:"You must be logged in."});const M=D.pageViews?Math.round(D.pageViewsWithRef/D.pageViews*100):0,R=D.pageViews?Math.round(D.pageViewsWithUTM/D.pageViews*100):0;return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Qg,{children:(0,ui.jsx)("title",{children:"Admin Analytics \u2013 Zyptopia"})}),(0,ui.jsxs)("div",{className:"page-content",style:{maxWidth:1200,margin:"1.5rem auto",padding:"0 1rem"},children:[(0,ui.jsx)("h1",{style:{marginBottom:"0.75rem"},children:"Admin Analytics"}),(0,ui.jsxs)("div",{style:{marginBottom:"0.75rem",display:"grid",gap:".6rem",gridTemplateColumns:"repeat(4, minmax(0,1fr))"},children:[(0,ui.jsxs)("label",{style:{display:"grid",gap:".25rem"},children:[(0,ui.jsxs)("span",{children:["Range ",(0,ui.jsx)(em,{text:"How far back to include events (only the latest 4000 are loaded from Firestore)."})]}),(0,ui.jsxs)("select",{value:r,onChange:e=>i(e.target.value),style:{padding:"0.45rem",borderRadius:8},children:[(0,ui.jsx)("option",{value:"7",children:"Last 7 days"}),(0,ui.jsx)("option",{value:"30",children:"Last 30 days"}),(0,ui.jsx)("option",{value:"90",children:"Last 90 days"}),(0,ui.jsx)("option",{value:"all",children:"All loaded"})]})]}),(0,ui.jsxs)("label",{style:{display:"grid",gap:".25rem"},children:[(0,ui.jsxs)("span",{children:["Event ",(0,ui.jsx)(em,{text:"Filter to a specific event name (e.g., page_view, cta_click) or show all."})]}),(0,ui.jsx)("select",{value:h,onChange:e=>d(e.target.value),style:{padding:"0.45rem",borderRadius:8},children:I.map(e=>(0,ui.jsx)("option",{value:e,children:e},e))})]}),(0,ui.jsxs)("label",{style:{display:"grid",gap:".25rem"},children:[(0,ui.jsxs)("span",{children:["Search ",(0,ui.jsx)(em,{text:"Free-text search across event name, params, user, path, and referrer."})]}),(0,ui.jsx)("input",{value:f,onChange:e=>p(e.target.value),placeholder:"e.g. calc, /historical, utm",style:{padding:"0.45rem",borderRadius:8}})]}),(0,ui.jsxs)("label",{style:{display:"grid",gap:".25rem"},children:[(0,ui.jsxs)("span",{children:["CTA placement ",(0,ui.jsx)(em,{text:"Filter CTA clicks by params.placement (partial match). Try: home_top_download, calc_footer, etc."})]}),(0,ui.jsx)("input",{value:g,onChange:e=>m(e.target.value),placeholder:"home_top_download",style:{padding:"0.45rem",borderRadius:8}})]})]}),!o&&(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",alignItems:"center",marginBottom:".75rem",flexWrap:"wrap"},children:[(0,ui.jsxs)("span",{style:{opacity:.85},children:[Yg(A.length)," events in view"]}),(0,ui.jsx)("button",{className:"btn",onClick:()=>{const e=[["id","name","ts","params"].join(",")];A.forEach(t=>{var n,r,i,s,a;const o=[JSON.stringify(null!==(n=t.id)&&void 0!==n?n:""),JSON.stringify(null!==(r=t.name)&&void 0!==r?r:""),JSON.stringify(null!==(i=t.ts)&&void 0!==i&&i.toDate?t.ts.toDate().toISOString():null!==(s=t.ts)&&void 0!==s?s:""),JSON.stringify(null!==(a=t.params)&&void 0!==a?a:{})];e.push(o.join(","))}),navigator.clipboard.writeText(e.join("\n"))},style:{padding:".45rem .75rem",borderRadius:8,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},children:"Copy filtered events (CSV)"})]}),c&&(0,ui.jsx)("div",{style:{color:"#ff7676",marginBottom:"0.75rem"},children:c}),o&&(0,ui.jsx)("div",{style:{opacity:.85,marginBottom:"0.75rem"},children:"Loading\u2026"}),!o&&(0,ui.jsxs)("div",{style:{display:"grid",gap:".75rem",gridTemplateColumns:"repeat(4, minmax(0,1fr))",marginBottom:".75rem"},children:[(0,ui.jsxs)("div",{style:sm.card,children:[(0,ui.jsx)("div",{style:{opacity:.75},children:"Total events"}),(0,ui.jsx)("div",{style:sm.big,children:Yg(D.all)}),(0,ui.jsx)("div",{style:{marginTop:".4rem",opacity:.8},children:(0,ui.jsx)(tm,{points:P})})]}),(0,ui.jsxs)("div",{style:sm.card,children:[(0,ui.jsxs)("div",{style:{opacity:.75},children:["Page views",(0,ui.jsx)(em,{text:"Count of page_view events in the current range."})]}),(0,ui.jsx)("div",{style:sm.big,children:Yg(D.pageViews)}),(0,ui.jsxs)("div",{style:{fontSize:".9rem",opacity:.9,marginTop:".25rem",lineHeight:1.35},children:["Referrer data on ",M,"% of page views",(0,ui.jsx)(em,{text:"Referrer coverage shows how often the browser sent a referrer (the previous site). Direct visits, some privacy settings, or apps may not provide a referrer."}),(0,ui.jsx)("br",{}),"UTM tags on ",R,"% of page views",(0,ui.jsx)(em,{text:"UTM coverage shows how many page views included utm_source/medium/campaign in the URL (useful for tracking marketing efforts)."})]})]}),(0,ui.jsxs)("div",{style:sm.card,children:[(0,ui.jsx)("div",{style:{opacity:.75},children:"CTA clicks"}),(0,ui.jsx)("div",{style:sm.big,children:Yg(D.byName.cta_click||0)}),(0,ui.jsxs)("div",{style:{opacity:.85,marginTop:".25rem"},children:["Best placement: ",(0,ui.jsx)("strong",{children:(null===(e=Xg(D.ctaByPlacement).sort((e,t)=>t[1]-e[1])[0])||void 0===e?void 0:e[0])||"\u2014"})]})]}),(0,ui.jsxs)("div",{style:sm.card,children:[(0,ui.jsxs)("div",{style:{opacity:.75},children:["Calculator uses ",(0,ui.jsx)(em,{text:"\u201cFull\u201d = calculator_used, \u201cInline\u201d = mini_calc_used."})]}),(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"Full:"})," ",Yg(D.calcUsed)," \xa0 ",(0,ui.jsx)("strong",{children:"Inline:"})," ",Yg(D.miniCalcUsed)]})]})]}),!o&&(0,ui.jsxs)("div",{style:(0,bi.A)((0,bi.A)({},sm.card),{},{marginBottom:".75rem"}),children:[(0,ui.jsxs)("h3",{style:{margin:0},children:["CTA clicks by placement ",(0,ui.jsx)(em,{text:"Grouped by params.placement on cta_click events. Click column headers to sort."})]}),(0,ui.jsxs)("table",{style:sm.table,children:[(0,ui.jsx)("thead",{children:(0,ui.jsxs)("tr",{style:sm.thead,children:[(0,ui.jsx)(nm,{label:"Placement",active:"name"===y.field,dir:y.dir,onClick:()=>v(e=>({field:"name",dir:"name"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"left"}}),(0,ui.jsx)(nm,{label:"Clicks",active:"clicks"===y.field,dir:y.dir,onClick:()=>v(e=>({field:"clicks",dir:"clicks"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"right"}})]})}),(0,ui.jsxs)("tbody",{children:[N(Xg(D.ctaByPlacement),y).map(e=>{let[t,n]=e;return(0,ui.jsxs)("tr",{style:sm.tr,children:[(0,ui.jsx)("td",{style:{padding:".5rem"},children:t}),(0,ui.jsx)("td",{style:{padding:".5rem",textAlign:"right"},children:Yg(n)})]},t)}),0===Xg(D.ctaByPlacement).length&&(0,ui.jsx)("tr",{children:(0,ui.jsx)("td",{colSpan:2,style:sm.empty,children:"No CTA clicks yet."})})]})]})]}),!o&&(0,ui.jsxs)("div",{style:(0,bi.A)((0,bi.A)({},sm.card),{},{marginBottom:".75rem"}),children:[(0,ui.jsxs)("h3",{style:{margin:0},children:["Internal navigation ",(0,ui.jsx)(em,{text:"Counts of internal_nav events grouped by params.to. Click headers to sort."})]}),(0,ui.jsxs)("table",{style:sm.table,children:[(0,ui.jsx)("thead",{children:(0,ui.jsxs)("tr",{style:sm.thead,children:[(0,ui.jsx)(nm,{label:"Destination",active:"name"===b.field,dir:b.dir,onClick:()=>w(e=>({field:"name",dir:"name"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"left"}}),(0,ui.jsx)(nm,{label:"Clicks",active:"clicks"===b.field,dir:b.dir,onClick:()=>w(e=>({field:"clicks",dir:"clicks"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"right"}})]})}),(0,ui.jsxs)("tbody",{children:[N(Xg(D.internalNav),b).map(e=>{let[t,n]=e;return(0,ui.jsxs)("tr",{style:sm.tr,children:[(0,ui.jsx)("td",{style:{padding:".5rem"},children:t}),(0,ui.jsx)("td",{style:{padding:".5rem",textAlign:"right"},children:Yg(n)})]},t)}),0===Xg(D.internalNav).length&&(0,ui.jsx)("tr",{children:(0,ui.jsx)("td",{colSpan:2,style:sm.empty,children:"No internal nav events yet."})})]})]})]}),!o&&(0,ui.jsxs)("div",{style:{display:"grid",gap:".75rem",gridTemplateColumns:"2fr 2fr 1.5fr"},children:[(0,ui.jsx)(im,{title:"Top landing pages",tip:"Grouped from page_view events using params.page/path/page.",data:D.pageViewsLanding,sort:x,setSort:_,labelLeft:"Page",labelRight:"Views"}),(0,ui.jsx)(im,{title:"Top referrers",tip:"From document.referrer or params.referrer (when present).",data:D.pageViewsReferrer,sort:k,setSort:S,labelLeft:"Referrer",labelRight:"Views"}),(0,ui.jsx)(im,{title:"UTM sources",tip:"utm_source on page_view URLs (when present). Medium and campaign counts are shown below.",data:D.pageViewsUTM.source,sort:E,setSort:T,labelLeft:"Source",labelRight:"Views",footer:(0,ui.jsxs)("div",{style:{display:"grid",gap:".25rem",marginTop:".6rem",fontSize:".92rem",opacity:.85},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:"UTM coverage:"})," ",R,"% of page views"]}),(0,ui.jsxs)("div",{children:["Mediums tracked: ",Yg(Xg(D.pageViewsUTM.medium).length)," \u2022 Campaigns tracked: ",Yg(Xg(D.pageViewsUTM.campaign).length)]})]})})]}),!o&&(0,ui.jsxs)("div",{style:(0,bi.A)((0,bi.A)({},sm.card),{},{marginTop:".75rem"}),children:[(0,ui.jsxs)("h3",{style:{margin:0},children:["Recent events ",(0,ui.jsx)(em,{text:"Most recent first after filters. Use the CSV button above to export this view."})]}),(0,ui.jsxs)("div",{style:{maxHeight:380,overflow:"auto",marginTop:".5rem",fontFamily:'ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace'},children:[A.slice(0,400).map(e=>{var t;return(0,ui.jsxs)("div",{style:{borderTop:"1px dashed rgba(255,255,255,0.12)",padding:"0.35rem 0"},children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("strong",{children:e.name})," ",(0,ui.jsxs)("span",{style:{opacity:.7},children:["@ ",null!==(t=e.ts)&&void 0!==t&&t.toDate?e.ts.toDate().toLocaleString():"\u2014"]})]}),(0,ui.jsx)("div",{style:{opacity:.9,fontSize:".9rem"},children:JSON.stringify(e.params||{},null,0)})]},e.id)}),0===A.length&&(0,ui.jsx)("div",{style:{opacity:.85},children:"No events yet for this view."})]})]})]})]})}function im(e){let{title:n,tip:r,data:i,sort:s,setSort:a,labelLeft:o,labelRight:l,footer:c}=e;const u=Object.entries(i||{}),h=(0,t.useMemo)(()=>{const e="asc"===s.dir?1:-1;return[...u].sort((t,n)=>"name"===s.field?t[0]<n[0]?-1*e:t[0]>n[0]?1*e:0:(t[1]-n[1])*e)},[u,s]);return(0,ui.jsxs)("div",{style:sm.card,children:[(0,ui.jsxs)("h3",{style:{margin:0},children:[n," ",(0,ui.jsx)(em,{text:r})]}),(0,ui.jsxs)("table",{style:sm.table,children:[(0,ui.jsx)("thead",{children:(0,ui.jsxs)("tr",{style:sm.thead,children:[(0,ui.jsx)(nm,{label:o,active:"name"===s.field,dir:s.dir,onClick:()=>a(e=>({field:"name",dir:"name"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"left"}}),(0,ui.jsx)(nm,{label:l,active:"views"===s.field,dir:s.dir,onClick:()=>a(e=>({field:"views",dir:"views"===e.field&&"asc"===e.dir?"desc":"asc"})),style:{textAlign:"right"}})]})}),(0,ui.jsxs)("tbody",{children:[h.map(e=>{let[t,n]=e;return(0,ui.jsxs)("tr",{style:sm.tr,children:[(0,ui.jsx)("td",{style:{padding:".5rem"},children:t}),(0,ui.jsx)("td",{style:{padding:".5rem",textAlign:"right"},children:Yg(n)})]},t)}),0===h.length&&(0,ui.jsx)("tr",{children:(0,ui.jsx)("td",{colSpan:2,style:sm.empty,children:"No data in range."})})]})]}),c]})}const sm={card:{padding:"1rem",border:"1px solid rgba(255,255,255,0.08)",borderRadius:12,background:"rgba(255,255,255,0.03)"},big:{fontSize:"1.5rem",fontWeight:700},table:{width:"100%",marginTop:".5rem",borderCollapse:"collapse"},thead:{background:"rgba(255,255,255,0.04)"},tr:{borderTop:"1px solid rgba(255,255,255,0.06)"},empty:{padding:".6rem",textAlign:"center",opacity:.8}},am=(e,t)=>new Date(e.date)-new Date(t.date),om=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number(null!==e&&void 0!==e?e:0).toLocaleString(void 0,{minimumFractionDigits:0,maximumFractionDigits:t})};function lm(e){const t=new Date,n={"7d":7,"30d":30,"90d":90,"1y":365};if(!e||"all"===e||!n[e])return new Date(0);const r=new Date(t);return r.setDate(t.getDate()-n[e]),r.setHours(0,0,0,0),r}function cm(e,t){if(!e.length)return 0;const n=[...e].sort((e,t)=>e-t);var r,i,s;return n[(r=Math.ceil(t/100*n.length)-1,i=0,s=n.length-1,Math.min(s,Math.max(i,r)))]}function um(e){return e.reduce((e,t)=>e+(null!==t&&void 0!==t?t:0),0)}const hm={maxWidth:1080,margin:"1.5rem auto",padding:"0 1rem"},dm={border:"1px solid rgba(255,255,255,.1)",borderRadius:12,padding:"1rem",background:"rgba(255,255,255,.03)",margin:"1rem 0"},fm={margin:0,marginBottom:".5rem"},pm={opacity:.8,fontSize:".9rem"},gm={padding:"0.55rem 0.9rem",borderRadius:10,border:"1px solid rgba(255,255,255,0.15)",background:"rgba(255,255,255,0.06)",fontWeight:600},mm=(0,bi.A)((0,bi.A)({},gm),{},{background:"rgba(255,255,255,0.12)"}),ym={display:"grid",gridTemplateColumns:"repeat(3, minmax(0,1fr))",gap:".6rem"},vm={border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .85rem",background:"rgba(255,255,255,.03)"},bm={wrap:{display:"flex",alignItems:"center",justifyContent:"space-between",gap:".8rem",flexWrap:"wrap",border:"1px solid rgba(255,255,255,.12)",borderRadius:12,padding:".75rem .9rem",background:"linear-gradient(135deg, rgba(255,255,255,.04), rgba(255,255,255,.02))",margin:"1rem 0"}},wm={textAlign:"left",padding:".55rem .6rem",borderBottom:"1px solid rgba(255,255,255,.12)",fontWeight:700,fontSize:".95rem"},xm=(0,bi.A)((0,bi.A)({},wm),{},{textAlign:"right"}),_m={padding:".55rem .6rem",borderBottom:"1px solid rgba(255,255,255,.08)"},km=(0,bi.A)((0,bi.A)({},_m),{},{textAlign:"right"});function Sm(){(0,t.useEffect)(()=>{li("page_view",{page:"stats"})},[]);Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Stats",item:"https://www.zyptopia.org/stats"}]);const[e,n]=(0,t.useState)("30d"),[r,i]=(0,t.useState)("priorWindow"),[s,a]=(0,t.useState)(!1),[o,l]=(0,t.useState)([]),[c,u]=(0,t.useState)(!0);(0,t.useEffect)(()=>{let e=!0;return(async()=>{try{u(!0);const t=(await(0,Yh.getDocs)((0,Yh.collection)($h,"rewards"))).docs.map(e=>e.data()).filter(Boolean).sort(am);e&&l(t)}catch(t){}finally{e&&u(!1)}})(),()=>{e=!1}},[]);const h=(0,t.useMemo)(()=>{const t=lm(e);return o.filter(e=>{const n=new Date(e.date);return n.setHours(0,0,0,0),n>=t})},[o,e]),d=(0,t.useMemo)(()=>h.map(e=>e.date),[h]),f=(0,t.useMemo)(()=>h.map(e=>Number(e.rewardPerToken)||0),[h]),p=(0,t.useMemo)(()=>f.length?um(f)/f.length:0,[f]),g=(0,t.useMemo)(()=>{if(!f.length)return 0;const e=[...f].sort((e,t)=>e-t),t=Math.floor(e.length/2);return e.length%2?e[t]:(e[t-1]+e[t])/2},[f]),m=(0,t.useMemo)(()=>cm(f,25),[f]),y=(0,t.useMemo)(()=>cm(f,75),[f]),v=(0,t.useMemo)(()=>um(f),[f]),b=f.length,w=(0,t.useMemo)(()=>{if(!f.length)return-1;let e=0,t=-1/0;return f.forEach((n,r)=>{n>t&&(t=n,e=r)}),e},[f]),x=w>=0?f[w]:0,_=w>=0?d[w]:null,k=(0,t.useMemo)(()=>{if(!f.length)return-1;let e=0,t=1/0;return f.forEach((n,r)=>{n<t&&(t=n,e=r)}),e},[f]),S=k>=0?f[k]:0,E=k>=0?d[k]:null,T=(0,t.useMemo)(()=>function(e,t){var n;if(e.length<7)return{avg:0,start:null};let r=-1/0,i=0,s=0;for(let l=0;l<e.length;l++){var a,o;if(s+=null!==(a=e[l])&&void 0!==a?a:0,l>=7&&(s-=null!==(o=e[l-7])&&void 0!==o?o:0),l>=6){const e=s/7;e>r&&(r=e,i=l-6)}}return{avg:r,start:null!==(n=t[i])&&void 0!==n?n:null}}(f,d),[f,d]),I=(0,t.useMemo)(()=>function(e){if(!e.length)return 0;const t=um(e)/e.length,n=e.reduce((e,n)=>e+Math.pow((null!==n&&void 0!==n?n:0)-t,2),0)/e.length;return Math.sqrt(n)}(f),[f]),C=(0,t.useMemo)(()=>p?I/p*100:0,[I,p]),A=(0,t.useMemo)(()=>{if(!f.length)return 0;const e=Math.min(7,f.length);return um(f.slice(-e))/e},[f]),D=(0,t.useMemo)(()=>{if(!f.length)return{count:0,pct:0};const e=f.filter(e=>e>g).length;return{count:e,pct:b?e/b*100:0}},[f,g,b]),P=(0,t.useMemo)(()=>lm(e),[e]),N=(0,t.useMemo)(()=>{if(!o.length)return 0;const t=o.filter(e=>{const t=new Date(e.date);return t.setHours(0,0,0,0),t<P}),n=(e,t)=>t<=0?[]:e.slice(-t),i=e=>e.map(e=>Number(e.rewardPerToken)||0),s=e=>e.length?um(e)/e.length:0;return"prior7d"===r?s(i(n(t,7))):"prior30d"===r?s(i(n(t,30))):"all"===e?0:s(i(n(t,b)))},[o,P,r,e,b]),M=(0,t.useMemo)(()=>{const e=N||0;return e?(p-e)/e*100:null},[p,N]),R=(0,t.useMemo)(()=>{if(!f.length)return[];const e=f.map((e,t)=>({v:e,d:d[t]}));return e.sort((e,t)=>t.v-e.v),e.slice(0,3)},[f,d]);return(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Ai,{title:"Stats",description:"Zyps distribution statistics by time window.",canonical:"https://www.zyptopia.org/stats",jsonLd:[Nd([{name:"Home",item:"https://www.zyptopia.org/"},{name:"Stats",item:"https://www.zyptopia.org/stats"}])]}),(0,ui.jsxs)("div",{className:"page-content",style:hm,children:[(0,ui.jsx)(Di,{}),(0,ui.jsxs)("section",{style:dm,"aria-live":"polite",children:[(0,ui.jsx)("h2",{style:fm,children:"Window"}),(0,ui.jsx)("div",{style:{display:"flex",gap:".4rem",flexWrap:"wrap"},children:["7d","30d","90d","1y","all"].map(t=>(0,ui.jsx)("button",{onClick:()=>n(t),className:"btn",style:(0,bi.A)((0,bi.A)({},gm),e===t?{background:"rgba(0,231,198,.12)",boxShadow:"0 0 0 2px rgba(0,231,198,.18) inset"}:null),"aria-pressed":e===t?"true":"false",children:t},t))}),(0,ui.jsxs)("div",{style:{marginTop:".6rem"},children:[(0,ui.jsx)("div",{style:(0,bi.A)((0,bi.A)({},pm),{},{marginBottom:".25rem"}),children:"Compare vs"}),(0,ui.jsx)("div",{role:"group","aria-label":"Comparison baseline",style:{display:"flex",gap:".35rem",flexWrap:"wrap"},children:[["priorWindow","Prior window"],["prior7d","Prior 7d"],["prior30d","Prior 30d"]].map(e=>{let[t,n]=e;return(0,ui.jsx)("button",{onClick:()=>i(t),className:"btn",style:(0,bi.A)((0,bi.A)({},gm),r===t?{background:"rgba(0,231,198,.12)",boxShadow:"0 0 0 2px rgba(0,231,198,.18) inset"}:null),"aria-pressed":r===t?"true":"false",children:n},t)})})]}),c?(0,ui.jsx)("p",{style:{opacity:.85,marginTop:".8rem"},children:"Loading\u2026"}):null,(0,ui.jsx)("p",{style:(0,bi.A)({marginTop:".6rem"},pm),children:"Based on the selected window. Values are estimates (per 1M tokens)."})]}),(0,ui.jsxs)("section",{style:dm,children:[(0,ui.jsx)("h2",{style:fm,children:"Key stats"}),(0,ui.jsxs)("div",{className:"stats-grid",style:ym,children:[(0,ui.jsx)(Em,{label:"Avg ZYP/day per 1M",value:om(p,2),sub:null==M?void 0:"".concat(M>=0?"\u25b2":"\u25bc"," ").concat(om(Math.abs(M),1),"% vs baseline")}),(0,ui.jsx)(Em,{label:"Total ZYP (selected window)",value:om(v,0),sub:"".concat(b," day").concat(1===b?"":"s")}),(0,ui.jsx)(Em,{label:"Best day",value:om(x,2),sub:_?"on ".concat(_):void 0})]}),(0,ui.jsxs)("div",{className:"stats-grid",style:(0,bi.A)((0,bi.A)({},ym),{},{marginTop:".6rem"}),children:[(0,ui.jsx)(Em,{label:"Best 7-day streak (avg/day per 1M)",value:om(T.avg,2),sub:T.start?"starting ".concat(T.start):void 0}),(0,ui.jsx)(Em,{label:"Median ZYP/day per 1M",value:om(g,2)}),(0,ui.jsx)(Em,{label:"P75 ZYP/day per 1M",value:om(y,2),sub:"P25: ".concat(om(m,2))})]})]}),(0,ui.jsxs)("section",{style:dm,children:[(0,ui.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"baseline",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)("h2",{style:fm,children:"Breakdown"}),(0,ui.jsx)("button",{className:"btn",style:gm,onClick:()=>a(e=>!e),children:s?"Hide details":"Show details"})]}),(0,ui.jsx)("div",{style:{marginTop:".5rem",overflowX:"auto"},children:(0,ui.jsxs)("table",{style:{width:"100%",borderCollapse:"separate",borderSpacing:0},children:[(0,ui.jsx)("thead",{children:(0,ui.jsxs)("tr",{children:[(0,ui.jsx)("th",{style:wm,children:"Metric"}),(0,ui.jsx)("th",{style:xm,children:"Value"}),(0,ui.jsx)("th",{style:xm,children:"Notes"})]})}),(0,ui.jsxs)("tbody",{children:[(0,ui.jsx)(Tm,{name:"Avg ZYP/day per 1M",value:om(p,2),note:null==M?"\u2014":"".concat(M>=0?"+":"-").concat(om(Math.abs(M),1),"% vs baseline")}),(0,ui.jsx)(Tm,{name:"Total ZYP (window \xb7 per 1M)",value:om(v,0),note:"".concat(b," day").concat(1===b?"":"s")}),(0,ui.jsx)(Tm,{name:"Best day (per 1M)",value:om(x,2),note:_||"\u2014"}),(0,ui.jsx)(Tm,{name:"Best 7-day streak (avg/day \xb7 per 1M)",value:om(T.avg,2),note:T.start?"starting ".concat(T.start):"\u2014"}),(0,ui.jsx)(Tm,{name:"Median ZYP/day per 1M",value:om(g,2),note:"Middle of distribution"}),(0,ui.jsx)(Tm,{name:"P25 / P75 (per 1M)",value:"".concat(om(m,2)," / ").concat(om(y,2)),note:"Interquartile range"}),s&&(0,ui.jsxs)(ui.Fragment,{children:[(0,ui.jsx)(Tm,{name:"Quietest day (per 1M)",value:om(S,2),note:E||"\u2014"}),(0,ui.jsx)(Tm,{name:"Rolling 7-day avg today (per 1M)",value:om(A,2),note:"Last ".concat(Math.min(7,b)," days")}),(0,ui.jsx)(Tm,{name:"Days above median",value:D.count,note:"".concat(om(D.pct,1),"% of window")}),(0,ui.jsx)(Tm,{name:"Min / Max (per 1M)",value:"".concat(om(Math.min(...f)||0,2)," / ").concat(om(Math.max(...f)||0,2)),note:"Range in window"}),(0,ui.jsx)(Tm,{name:"Std dev (per 1M)",value:om(I,2),note:"Volatility \xb7 CV ".concat(om(C,1),"%")}),(0,ui.jsx)(Tm,{name:"Data points",value:b,note:"Days in selected window"})]})]})]})})]}),(0,ui.jsxs)("section",{style:dm,children:[(0,ui.jsx)("h2",{style:fm,children:"Records"}),R.length?(0,ui.jsx)("ul",{style:{margin:0,paddingLeft:"1.1rem"},children:R.map((e,t)=>(0,ui.jsxs)("li",{style:{margin:".25rem 0"},children:[(0,ui.jsx)("strong",{children:om(e.v,2)})," ZYP/day per 1M ",(0,ui.jsxs)("span",{style:pm,children:["on ",e.d]})]},t))}):(0,ui.jsx)("p",{style:{opacity:.85},children:"No data in this window."})]}),(0,ui.jsxs)("section",{style:bm.wrap,children:[(0,ui.jsxs)("div",{children:[(0,ui.jsx)("h3",{style:{margin:0},children:"Ready to turn stats into strategy?"}),(0,ui.jsx)("p",{style:{margin:"0.25rem 0 0",opacity:.85},children:"Install the wallet in minutes. Track daily rewards and plan your next move."})]}),(0,ui.jsxs)("div",{style:{display:"flex",gap:".6rem",flexWrap:"wrap"},children:[(0,ui.jsx)(Mi,{href:Xh("stats_footer"),eventName:"cta_click",eventParams:{placement:"stats_footer"},className:"btn btn-primary",style:mm,children:"Download Zypto Wallet"}),(0,ui.jsx)(Ae,{to:"/get-started",className:"btn",style:gm,children:"Quick start guide"}),(0,ui.jsx)(Ae,{to:"/vault-key-card",className:"btn",style:gm,children:"Add VKC security"})]})]})]}),(0,ui.jsx)("style",{children:"\n        @media (max-width: 900px){\n          .stats-grid { grid-template-columns: 1fr !important; }\n        }\n      "})]})}function Em(e){let{label:t,value:n,sub:r}=e;return(0,ui.jsxs)("div",{style:vm,children:[(0,ui.jsx)("div",{style:{opacity:.85,fontSize:".9rem"},children:t}),(0,ui.jsx)("div",{style:{fontWeight:900,fontSize:"1.2rem",marginTop:".1rem"},children:n}),r?(0,ui.jsx)("div",{style:{marginTop:".1rem",opacity:.8,fontSize:".9rem"},children:r}):null]})}function Tm(e){let{name:t,value:n,note:r}=e;return(0,ui.jsxs)("tr",{children:[(0,ui.jsx)("td",{style:_m,children:t}),(0,ui.jsx)("td",{style:km,children:(0,ui.jsx)("strong",{children:n})}),(0,ui.jsx)("td",{style:km,children:(0,ui.jsx)("span",{style:{opacity:.85},children:r})})]})}function Im(){const e=Z();return(0,t.useEffect)(()=>{const t=["/dashboard","/analytics","/data-input"].some(t=>e.pathname.startsWith(t));(document.head.querySelector('meta[name="robots"]')||(()=>{const e=document.createElement("meta");return e.setAttribute("name","robots"),document.head.appendChild(e),e})()).setAttribute("content",t?"noindex, nofollow":"index, follow")},[e.pathname]),null}const Cm=()=>{const[e,n]=(0,t.useState)(null);return(0,t.useEffect)(()=>{const e=Vn(ri(),n);return()=>e()},[]),(0,ui.jsxs)(Te,{children:[(0,ui.jsx)(Ai,{title:"Zyptopia.org \u2013 Community data, calculators & guides for Zypto",description:"Independent, community-run tools for Zypto users: daily reward history, calculators, neutral guides, and Vault Key Card overview.",canonical:"https://www.zyptopia.org/"}),(0,ui.jsx)(Im,{}),(0,ui.jsx)(pi,{}),(0,ui.jsxs)(me,{children:[(0,ui.jsx)(pe,{path:"/",element:(0,ui.jsx)(wd,{})}),(0,ui.jsx)(pe,{path:"/get-started",element:(0,ui.jsx)(xp,{})}),(0,ui.jsx)(pe,{path:"/calculator",element:(0,ui.jsx)(zd,{})}),(0,ui.jsx)(pe,{path:"/historical",element:(0,ui.jsx)(wf,{})}),(0,ui.jsx)(pe,{path:"/about-zypto",element:(0,ui.jsx)(jf,{})}),(0,ui.jsx)(pe,{path:"/vault-key-card",element:(0,ui.jsx)(tp,{})}),(0,ui.jsx)(pe,{path:"/faq",element:(0,ui.jsx)(Vp,{})}),(0,ui.jsx)(pe,{path:"/about",element:(0,ui.jsx)(ef,{})}),(0,ui.jsx)(pe,{path:"/stats",element:(0,ui.jsx)(Sm,{})}),(0,ui.jsx)(pe,{path:"/login",element:(0,ui.jsx)(pf,{})}),(0,ui.jsx)(pe,{path:"/dashboard",element:e?(0,ui.jsx)(gf,{}):(0,ui.jsx)(fe,{to:"/login"})}),(0,ui.jsx)(pe,{path:"/data-input",element:e?(0,ui.jsx)(ff,{}):(0,ui.jsx)(fe,{to:"/login"})}),(0,ui.jsx)(pe,{path:"/analytics",element:e?(0,ui.jsx)(rm,{}):(0,ui.jsx)(fe,{to:"/login"})})]}),(0,ui.jsx)(wi,{})]})},Am=e=>{e&&e instanceof Function&&n.e(568).then(n.bind(n,568)).then(t=>{let{getCLS:n,getFID:r,getFCP:i,getLCP:s,getTTFB:a}=t;n(e),r(e),i(e),s(e),a(e)})};!function(e){try{if("undefined"===typeof window)return;const t="1"===navigator.doNotTrack||"1"===window.doNotTrack,r="1"===localStorage.getItem("zyptopia_analytics_optout");if(t||r)return;n.e(260).then(n.bind(n,260)).then(t=>{let{getAnalytics:n,isSupported:r}=t;r().then(t=>{t&&(ai=n(e))})})}catch(t){}}(Zh),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};oi.db=e,"number"===typeof t.sample&&(oi.sample=t.sample),Array.isArray(t.events)&&(oi.events=new Set(t.events))}($h,{sample:1});i.createRoot(document.getElementById("root")).render((0,ui.jsx)(t.StrictMode,{children:(0,ui.jsx)(Cm,{})})),Am()})()})();
//# sourceMappingURL=main.8c72121e.js.map